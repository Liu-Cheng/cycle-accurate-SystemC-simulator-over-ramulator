cscope 15 $HOME/gitrepo/graph_accelerator/src               0000584478
	@ALDRAM.cpp

1 
	~<io¡»am
>

3 
	~"ALDRAM.h
"

4 
	~"DRAM.h
"

5 
	~<veùÜ
>

6 
	~<funùiÚ®
>

7 
	~<ÿs£¹
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

10 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

12 
¡ršg
 
	gALDRAM
::
¡ªd¬d_Çme
 = "ALDRAM";

14 
	gm­
<
	g¡ršg
, 
	gALDRAM
::
Org
> 
ALDRAM
::
Üg_m­
 = {

15 {"ALDRAM_512Mb_x4", 
ALDRAM
::
Org
::
ALDRAM_512Mb_x4
}, {"ALDRAM_512Mb_x8", ALDRAM::Org::
ALDRAM_512Mb_x8
}, {"ALDRAM_512Mb_x16", ALDRAM::Org::
ALDRAM_512Mb_x16
},

16 {"ALDRAM_1Gb_x4", 
ALDRAM
::
Org
::
ALDRAM_1Gb_x4
}, {"ALDRAM_1Gb_x8", ALDRAM::Org::
ALDRAM_1Gb_x8
}, {"ALDRAM_1Gb_x16", ALDRAM::Org::
ALDRAM_1Gb_x16
},

17 {"ALDRAM_2Gb_x4", 
ALDRAM
::
Org
::
ALDRAM_2Gb_x4
}, {"ALDRAM_2Gb_x8", ALDRAM::Org::
ALDRAM_2Gb_x8
}, {"ALDRAM_2Gb_x16", ALDRAM::Org::
ALDRAM_2Gb_x16
},

18 {"ALDRAM_4Gb_x4", 
ALDRAM
::
Org
::
ALDRAM_4Gb_x4
}, {"ALDRAM_4Gb_x8", ALDRAM::Org::
ALDRAM_4Gb_x8
}, {"ALDRAM_4Gb_x16", ALDRAM::Org::
ALDRAM_4Gb_x16
},

19 {"ALDRAM_8Gb_x4", 
ALDRAM
::
Org
::
ALDRAM_8Gb_x4
}, {"ALDRAM_8Gb_x8", ALDRAM::Org::
ALDRAM_8Gb_x8
}, {"ALDRAM_8Gb_x16", ALDRAM::Org::
ALDRAM_8Gb_x16
},

22 
	gm­
<
	g¡ršg
, 
	gALDRAM
::
S³ed
> 
ALDRAM
::
¥“d_m­
 = {

23 {"ALDRAM_800D", 
ALDRAM
::
S³ed
::
ALDRAM_800D
}, {"ALDRAM_800E", ALDRAM::S³ed::
ALDRAM_800E
},

24 {"ALDRAM_1066E", 
ALDRAM
::
S³ed
::
ALDRAM_1066E
}, {"ALDRAM_1066F", ALDRAM::S³ed::
ALDRAM_1066F
}, {"ALDRAM_1066G", ALDRAM::S³ed::
ALDRAM_1066G
},

25 {"ALDRAM_1333G", 
ALDRAM
::
S³ed
::
ALDRAM_1333G
}, {"ALDRAM_1333H", ALDRAM::S³ed::
ALDRAM_1333H
},

26 {"ALDRAM_1600H", 
ALDRAM
::
S³ed
::
ALDRAM_1600H
}, {"ALDRAM_1600J", ALDRAM::S³ed::
ALDRAM_1600J
}, {"ALDRAM_1600K", ALDRAM::S³ed::
ALDRAM_1600K
},

27 {"ALDRAM_1866K", 
ALDRAM
::
S³ed
::
ALDRAM_1866K
}, {"ALDRAM_1866L", ALDRAM::S³ed::
ALDRAM_1866L
},

28 {"ALDRAM_2133L", 
ALDRAM
::
S³ed
::
ALDRAM_2133L
}, {"ALDRAM_2133M", ALDRAM::S³ed::
ALDRAM_2133M
},

32 
	gALDRAM
::
	$ALDRAM
(
Org
 
Üg
, 
S³ed
 
¥“d
) :

33 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

34 
	`¥“d_’Œy
(
¥“d_bË
[(
Temp
::
COLD
)][(
¥“d
)]),

35 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

37 
cu¼’t_¥“d
 = 
¥“d
;

38 
	`š™_¥“d
();

39 
	`š™_´”eq
();

40 
	`š™_rowh™
();

41 
	`š™_Ïmbda
();

42 
	`š™_timšg
(
¥“d_bË
[(
Temp
::
HOT
)][(
¥“d
)]);

43 
‹m³¿tu»
 = 
Temp
::
COLD
;

44 
	}
}

46 
	gALDRAM
::
	$ALDRAM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

47 
	$ALDRAM
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

49 
	}
}

51 
	gALDRAM
::
	$£t_chªÃl_numb”
(
chªÃl
) {

52 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

53 
	}
}

55 
	gALDRAM
::
	$£t_¿nk_numb”
(
¿nk
) {

56 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

57 
	}
}

59 
	gALDRAM
::
	$®d¿m_timšg
(
Temp
 
cu¼’t_‹m³¿tu»
)

61 
i
 = 0; i < (
Lev–
::
MAX
); i++) {

62 
j
 = 0; j < (
Commªd
::
MAX
); j++) {

63 
timšg
[
i
][
j
].
	`ş—r
();

66 
‹m³¿tu»
 = 
cu¼’t_‹m³¿tu»
;

67 
»ad_Ï‹ncy
 = 
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
;

68 
	`š™_timšg
(
¥“d_bË
[(
‹m³¿tu»
)][(
cu¼’t_¥“d
)]);

73 
	}
}

75 
	gALDRAM
::
	$š™_¥“d
()

78 
·ge
 = (
Üg_’Œy
.
dq
 * org_’Œy.
couÁ
[(
Lev–
::
CŞumn
)]) >> 13;

79 
¥“d_’Œy
.
¿‹
) {

80 800: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 4; s³ed_’Œy.
nFAW
 = (page==1) ? 16 : 20; ;

81 1066: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 27; ;

82 1333: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 5; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 30; ;

83 1600: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 24 : 32; ;

84 1866: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 26 : 33; ;

85 2133: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 27 : 34; ;

86 : 
	`as£¹
(
çl£
);

90 
ch
 = 
Üg_’Œy
.
size
;

91 
¥“d_’Œy
.
¿‹
) {

92 800: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 36 : (chip==1<<10) ? 44 : (chip==1<<11) ? 64 : (chip==1<<12) ? 104 : 140; ;

93 1066: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 48 : (chip==1<<10) ? 59 : (chip==1<<11) ? 86 : (chip==1<<12) ? 139 : 187; ;

94 1333: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 60 : (chip==1<<10) ? 74 : (chip==1<<11) ? 107 : (chip==1<<12) ? 174 : 234; ;

95 1600: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 72 : (chip==1<<10) ? 88 : (chip==1<<11) ? 128 : (chip==1<<12) ? 208 : 280; ;

96 1866: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 84 : (chip==1<<10) ? 103 : (chip==1<<11) ? 150 : (chip==1<<12) ? 243 : 327; ;

97 2133: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 96 : (chip==1<<10) ? 118 : (chip==1<<11) ? 171 : (chip==1<<12) ? 278 : 374; ;

98 : 
	`as£¹
(
çl£
);

100 
¥“d_’Œy
.
¿‹
) {

101 800: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 40 : (chip==1<<10) ? 48 : (chip==1<<11) ? 68 : (chip==1<<12) ? 108 : 144; ;

102 1066: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 54 : (chip==1<<10) ? 64 : (chip==1<<11) ? 91 : (chip==1<<12) ? 144 : 192; ;

103 1333: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 67 : (chip==1<<10) ? 80 : (chip==1<<11) ? 114 : (chip==1<<12) ? 180 : 240; ;

104 1600: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 80 : (chip==1<<10) ? 96 : (chip==1<<11) ? 136 : (chip==1<<12) ? 216 : 288; ;

105 1866: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 94 : (chip==1<<10) ? 112 : (chip==1<<11) ? 159 : (chip==1<<12) ? 252 : 336; ;

106 2133: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 107 : (chip==1<<10) ? 128 : (chip==1<<11) ? 182 : (chip==1<<12) ? 288 : 384; ;

107 : 
	`as£¹
(
çl£
);

109 
	}
}

112 
	gALDRAM
::
	$š™_´”eq
()

115 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

116 (
node
->
¡©e
)) {

117 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

118 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

119 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

120 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

121 : 
	`as£¹
(
çl£
);

123 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

124 (
node
->
¡©e
)) {

125 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

126 (
S‹
::
O³Ãd
):

127 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

128  
cmd
;

129  
Commªd
::
PRE
;

130 : 
	`as£¹
(
çl£
);

134 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

135 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

138 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

139 autØ
bªk
 : 
node
->
chd»n
) {

140 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

142  
Commªd
::
PREA
;

144  
Commªd
::
REF
;};

147 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

148 (
node
->
¡©e
)) {

149 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

150 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

151 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

152 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

153 : 
	`as£¹
(
çl£
);

157 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

158 (
node
->
¡©e
)) {

159 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

160 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

161 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

162 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

163 : 
	`as£¹
(
çl£
);

165 
	}
}

168 
	gALDRAM
::
	$š™_rowh™
()

171 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
ALDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

172 (
node
->
¡©e
)) {

173 (
S‹
::
Clo£d
):  
çl£
;

174 (
S‹
::
O³Ãd
):

175 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

176  
Œue
;

177  
çl£
;

178 : 
	`as£¹
(
çl£
);

182 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

183 
	}
}

186 
	gALDRAM
::
	$š™_Ïmbda
()

188 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

189 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

190 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

191 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

192 
node
->
¡©e
 = 
S‹
::
Clo£d
;

193 
node
->
row_¡©e
.
	`ş—r
();};

194 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

195 autØ
bªk
 : 
node
->
chd»n
) {

196 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

197 
bªk
->
row_¡©e
.
	`ş—r
();}};

198 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {};

199 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {};

200 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {};

201 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

202 
node
->
¡©e
 = 
S‹
::
Clo£d
;

203 
node
->
row_¡©e
.
	`ş—r
();};

204 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

205 
node
->
¡©e
 = 
S‹
::
Clo£d
;

206 
node
->
row_¡©e
.
	`ş—r
();};

207 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

208 autØ
bªk
 : 
node
->
chd»n
) {

209 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

211 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

214 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

215 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

216 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

217 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

218 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

219 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
ALDRAM
>* 
node
, 
id
) {

220 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

221 
	}
}

224 
	gALDRAM
::
	$š™_timšg
(
S³edEÁry
 
¥“d_’Œy
)

226 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

227 
veùÜ
<
TimšgEÁry
> *
t
;

230 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

233 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

234 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

235 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

236 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

237 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

238 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

239 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

240 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

244 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

247 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

248 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

249 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

250 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

251 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

252 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

253 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

254 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

255 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

256 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

257 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

258 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

259 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

260 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

261 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

262 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

265 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

266 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

267 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

268 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

269 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

270 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

271 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

272 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

273 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

274 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

275 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

276 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

277 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

278 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

279 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

280 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

282 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

283 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

286 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

287 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

288 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

289 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

290 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

291 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

292 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

293 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

298 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

299 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

300 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

301 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

304 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

305 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

306 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

309 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

310 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

311 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

312 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

315 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

316 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

317 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

320 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

323 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

324 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

327 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

330 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

331 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

334 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

335 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

338 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

339 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

343 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

346 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

347 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

348 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

349 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

351 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

352 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

354 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

355 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

358 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

359 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

360 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

361 
	}
}

	@ALDRAM.h

1 #iâdeà
__ALDRAM_H


2 
	#__ALDRAM_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<m­
>

8 
	~<¡ršg
>

9 
	~<funùiÚ®
>

11 
usšg
 
Çme¥aû
 
	g¡d
;

13 
Çme¥aû
 
	g¿muÏtÜ


16 şas 
	cALDRAM


18 
	gpublic
:

19 
¡ršg
 
¡ªd¬d_Çme
;

20 
şass
 
	gOrg
;

21 
şass
 
	gS³ed
;

22 
şass
 
	gTemp
;

24 
ALDRAM
(
Org
 
Üg
, 
S³ed
 
¥“d
);

25 
ALDRAM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

27 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

28 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

30 şas 
	cLev–
 : 

32 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


36 şas 
	cCommªd
 : 

38 
ACT
, 
	gPRE
, 
	gPREA
,

39 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

40 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

41 
	gMAX


44 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

50 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

51 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

52 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

53 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

56 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

58 (
	gcmd
)) {

59 (
	gCommªd
::
ACT
):

60  
Œue
;

62  
çl£
;

66 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

68 (
	gcmd
)) {

69 (
	gCommªd
::
RD
):

70 (
Commªd
::
WR
):

71 (
Commªd
::
RDA
):

72 (
Commªd
::
WRA
):

73  
Œue
;

75  
çl£
;

79 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

81 (
	gcmd
)) {

82 (
	gCommªd
::
RDA
):

83 (
Commªd
::
WRA
):

84 (
Commªd
::
PRE
):

85 (
Commªd
::
PREA
):

86  
Œue
;

88  
çl£
;

92 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

94 (
	gcmd
)) {

95 (
	gCommªd
::
REF
):

96  
Œue
;

98  
çl£
;

104 şas 
	cS‹
 : 

106 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


107 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

108 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

112 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

113 
Commªd
::
RD
, Commªd::
WR
,

114 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


118 
	gfunùiÚ
<
Commªd
(
DRAM
<
ALDRAM
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

122 
	gfunùiÚ
<
boŞ
(
DRAM
<
ALDRAM
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

123 
	gfunùiÚ
<
boŞ
(
DRAM
<
ALDRAM
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

126 
	sTimšgEÁry


128 
Commªd
 
	gcmd
;

129 
	gdi¡
;

130 
	gv®
;

131 
boŞ
 
	gsiblšg
;

133 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

136 
	gfunùiÚ
<(
	gDRAM
<
	gALDRAM
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

139 şas 
	cOrg
 : 

141 
ALDRAM_512Mb_x4
, 
	gALDRAM_512Mb_x8
, 
	gALDRAM_512Mb_x16
,

142 
	gALDRAM_1Gb_x4
, 
	gALDRAM_1Gb_x8
, 
	gALDRAM_1Gb_x16
,

143 
	gALDRAM_2Gb_x4
, 
	gALDRAM_2Gb_x8
, 
	gALDRAM_2Gb_x16
,

144 
	gALDRAM_4Gb_x4
, 
	gALDRAM_4Gb_x8
, 
	gALDRAM_4Gb_x16
,

145 
	gALDRAM_8Gb_x4
, 
	gALDRAM_8Gb_x8
, 
	gALDRAM_8Gb_x16
,

146 
	gMAX


149 
	sOrgEÁry
 {

150 
	gsize
;

151 
	gdq
;

152 
	gcouÁ
[(
Lev–
::
MAX
)];

153 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

159 }, 
	gÜg_’Œy
;

161 
£t_chªÃl_numb”
(
chªÃl
);

162 
£t_¿nk_numb”
(
¿nk
);

165 şas 
	cS³ed
 : 

167 
ALDRAM_800D
, 
	gALDRAM_800E
,

168 
	gALDRAM_1066E
, 
	gALDRAM_1066F
, 
	gALDRAM_1066G
,

169 
	gALDRAM_1333G
, 
	gALDRAM_1333H
,

170 
	gALDRAM_1600H
, 
	gALDRAM_1600J
, 
	gALDRAM_1600K
,

171 
	gALDRAM_1866K
, 
	gALDRAM_1866L
,

172 
	gALDRAM_2133L
, 
	gALDRAM_2133M
,

173 
	gMAX


176 
S³ed
 
	gcu¼’t_¥“d
;

178 şas 
	cTemp
 : 

180 
COLD
, 
	gHOT
, 
	gMAX


183 
Temp
 
	g‹m³¿tu»
 = Temp::
HOT
;

185 
	g´eãtch_size
 = 8;

186 
	gchªÃl_width
 = 64;

188 
	sS³edEÁry
 {

189 
	g¿‹
;

190 
	gäeq
, 
	gtCK
;

191 
	gnBL
, 
	gnCCD
, 
	gnRTRS
;

192 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnCWL
;

193 
	gnRAS
, 
	gnRC
;

194 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

195 
	gnRRD
, 
	gnFAW
;

196 
	gnRFC
, 
	gnREFI
;

197 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

198 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

199 } 
	g¥“d_bË
[(
Temp
::
MAX
)][(
S³ed
::MAX)] = {

232 }, 
	g¥“d_’Œy
;

234 
	g»ad_Ï‹ncy
;

235 
®d¿m_timšg
(
Temp
 
cu¼’t_‹m³¿tu»
);

236 
	g´iv©e
:

237 
š™_¥“d
();

238 
š™_Ïmbda
();

239 
š™_´”eq
();

240 
š™_rowh™
();

241 
š™_rowİ’
();

242 
š™_timšg
(
S³edEÁry
 
¥“d_’Œy
);

	@Cache.cpp

1 
	~"Cache.h
"

3 #iâdeà
DEBUG_CACHE


4 
	#debug
(...)

	)

6 
	#debug
(...) do { \

7 
	`´štf
("\033[36m[DEBUG] % ", 
__FUNCTION__
); \

8 
	`´štf
(
__VA_ARGS__
); \

9 
	`´štf
("\033[0m\n"); \

10 } 0)

	)

13 
Çme¥aû
 
	g¿muÏtÜ


16 
	gCache
::
Cache
(
size
, 
assoc
, 
block_size
,

17 
mshr_’Œy_num
, 
Lev–
 
Ëv–
,

18 
¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
):

19 
Ëv–
Öev–), 
ÿchesys
(ÿchesys), 
high”_ÿche
(0),

20 
low”_ÿche
(
nuÎ±r
), 
size
(size), 
assoc
(assoc),

21 
block_size
(block_size), 
mshr_’Œy_num
(mshr_entry_num) {

23 
debug
("level %d size %d‡ssoc %d block_size %d\n",

24 (
Ëv–
), 
size
, 
assoc
, 
block_size
);

26 ià(
	gËv–
 =ğ
Lev–
::
L1
) {

27 
Ëv–_¡ršg
 = "L1";

28 } ià(
	gËv–
 =ğ
Lev–
::
L2
) {

29 
Ëv–_¡ršg
 = "L2";

30 } ià(
	gËv–
 =ğ
Lev–
::
L3
) {

31 
Ëv–_¡ršg
 = "L3";

34 
	gis_fœ¡_Ëv–
 = (
Ëv–
 =ğ
ÿchesys
->
fœ¡_Ëv–
);

35 
	gis_Ï¡_Ëv–
 = (
Ëv–
 =ğ
ÿchesys
->
Ï¡_Ëv–
);

38 
as£¹
((
size
 & (size - 1)) == 0);

39 
as£¹
((
block_size
 & (block_size - 1)) == 0);

40 
as£¹
((
assoc
 & (assoc - 1)) == 0);

41 
as£¹
(
size
 >ğ
block_size
);

44 
	gblock_num
 = 
size
 / (
block_size
 * 
assoc
);

45 
	gšdex_mask
 = 
block_num
 - 1;

46 
	gšdex_off£t
 = 
ÿlc_log2
(
block_size
);

47 
	gg_off£t
 = 
ÿlc_log2
(
block_num
è+ 
šdex_off£t
;

49 
debug
("šdex_off£ˆ%d", 
šdex_off£t
);

50 
debug
("šdex_mask 0x%x", 
šdex_mask
);

51 
debug
("g_off£ˆ%d", 
g_off£t
);

54 
	gÿche_»ad_miss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_read_miss"))

55 .
desc
("cache„ead miss count")

56 .
´ecisiÚ
(0)

59 
	gÿche_wr™e_miss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_write_miss"))

60 .
desc
("cache write miss count")

61 .
´ecisiÚ
(0)

64 
	gÿche_tÙ®_miss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_total_miss"))

65 .
desc
("cacheotal miss count")

66 .
´ecisiÚ
(0)

69 
	gÿche_eviùiÚ
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_eviction"))

70 .
desc
("number ofƒvict fromhis†evelo†ower†evel")

71 .
´ecisiÚ
(0)

74 
	gÿche_»ad_acûss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_read_access"))

75 .
desc
("cache„ead‡ccess count")

76 .
´ecisiÚ
(0)

79 
	gÿche_wr™e_acûss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_write_access"))

80 .
desc
("cache write‡ccess count")

81 .
´ecisiÚ
(0)

84 
	gÿche_tÙ®_acûss
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_total_access"))

85 .
desc
("cacheotal‡ccess count")

86 .
´ecisiÚ
(0)

89 
	gÿche_mshr_h™
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_mshr_hit"))

90 .
desc
("cache mshr hit count")

91 .
´ecisiÚ
(0)

93 
	gÿche_mshr_uÇvaabË
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_mshr_unavailable"))

94 .
desc
("cache mshr‚ot‡vailable count")

95 .
´ecisiÚ
(0)

97 
	gÿche_£t_uÇvaabË
.
Çme
(
Ëv–_¡ršg
 + 
¡ršg
("_cache_set_unavailable"))

98 .
desc
("cache set‚ot‡vailable")

99 .
´ecisiÚ
(0)

103 
boŞ
 
	gCache
::
£nd
(
Reque¡
 
»q
) {

104 
debug
("level %d„eq.addr %lx„eq.type %d, index %d,ag %ld",

105 (
Ëv–
), 
»q
.
addr
, Ôeq.
ty³
), 
g‘_šdex
(req.addr),

106 
g‘_g
(
»q
.
addr
));

108 
	gÿche_tÙ®_acûss
++;

109 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

110 
ÿche_wr™e_acûss
++;

112 
as£¹
(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
READ
);

113 
	gÿche_»ad_acûss
++;

116 auto& 
	glšes
 = 
g‘_lšes
(
»q
.
addr
);

117 
	g¡d
::
li¡
<
Lše
>::
™”©Ü
 
lše
;

119 ià(
is_h™
(
lšes
, 
»q
.
addr
, &
lše
)) {

120 
	glšes
.
push_back
(
Lše
(
»q
.
addr
, 
g‘_g
Ôeq.addr), 
çl£
,

121 
lše
->
dœty
 || (
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
WRITE
)));

122 
	glšes
.
”a£
(
lše
);

123 
	gÿchesys
->
	gh™_li¡
.
push_back
(

124 
make_·œ
(
ÿchesys
->
şk
 + 
Ï‹ncy
[(
Ëv–
)], 
»q
));

126 
debug
("h™, upd©time¡am°%ld", 
ÿchesys
->
şk
);

127 
debug
("hit finishime %ld",

128 
ÿchesys
->
şk
 + 
Ï‹ncy
[(
Ëv–
)]);

130  
	gŒue
;

133 
debug
("mis @Ëv– %d", (
Ëv–
));

134 
	gÿche_tÙ®_miss
++;

135 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

136 
ÿche_wr™e_miss
++;

138 
as£¹
(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
READ
);

139 
	gÿche_»ad_miss
++;

143 
boŞ
 
	gdœty
 = (
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
WRITE
);

146 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

147 
»q
.
ty³
 = 
Reque¡
::
Ty³
::
READ
;

151 
as£¹
(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
READ
);

152 autØ
	gmshr
 = 
h™_mshr
(
»q
.
addr
);

153 ià(
	gmshr
 !ğ
mshr_’Œ›s
.
’d
()) {

154 
debug
("hit mshr");

155 
	gÿche_mshr_h™
++;

156 
	gmshr
->
	g£cÚd
->
	gdœty
 = 
dœty
 || 
mshr
->
£cÚd
->dirty;

157  
	gŒue
;

162 ià(
	gmshr_’Œ›s
.
size
(è=ğ
mshr_’Œy_num
) {

165 
ÿche_mshr_uÇvaabË
++;

166 
debug
("no mshrƒntry‡vailable");

167  
	gçl£
;

171 ià(
®l_£ts_locked
(
lšes
)) {

172 
	gÿche_£t_uÇvaabË
++;

173  
	gçl£
;

176 autØ
	gÃwlše
 = 
®loÿ‹_lše
(
lšes
, 
»q
.
addr
);

177 ià(
	gÃwlše
 =ğ
lšes
.
’d
()) {

178  
çl£
;

181 
	gÃwlše
->
	gdœty
 = 
dœty
;

184 
	gmshr_’Œ›s
.
push_back
(
make_·œ
(
»q
.
addr
, 
Ãwlše
));

187 ià(!
	gis_Ï¡_Ëv–
) {

188 
	glow”_ÿche
->
£nd
(
»q
);

190 
	gÿchesys
->
	gwa™_li¡
.
push_back
(

191 
make_·œ
(
ÿchesys
->
şk
 + 
Ï‹ncy
[(
Ëv–
)], 
»q
));

193  
	gŒue
;

197 
	gCache
::
eviùlše
(
addr
, 
boŞ
 
dœty
) {

199 autØ
	g™
 = 
ÿche_lšes
.
fšd
(
g‘_šdex
(
addr
));

200 
as£¹
(
™
 !ğ
ÿche_lšes
.
’d
());

201 auto& 
	glšes
 = 
™
->
£cÚd
;

202 autØ
	glše
 = 
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

203 [
addr
, 
this
](
Lše
 
l
){ (l.
g
 =ğ
g‘_g
(addr));});

205 
as£¹
(
lše
 !ğ
lšes
.
’d
());

208 
	glšes
.
push_back
(
Lše
(
addr
, 
g‘_g
×ddr), 
çl£
,

209 
dœty
 || 
lše
->dirty));

210 
	glšes
.
”a£
(
lše
);

213 
	g¡d
::
·œ
<, 
	gboŞ
> 
	gCache
::
šv®id©e
(
addr
) {

214 
d–ay
 = 
Ï‹ncy_—ch
[(
Ëv–
)];

215 
boŞ
 
	gdœty
 = 
çl£
;

217 auto& 
	glšes
 = 
g‘_lšes
(
addr
);

218 ià(
	glšes
.
size
() == 0) {

220  
make_·œ
(0, 
çl£
);

222 autØ
	glše
 = 
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

223 [
addr
, 
this
](
Lše
 
l
){ (l.
g
 =ğ
g‘_g
(addr));});

227 ià(
	glše
 !ğ
lšes
.
’d
()) {

228 
as£¹
(!
lše
->
lock
);

229 
debug
("šv®id©%lx @†ev– %d", 
addr
, (
Ëv–
));

230 
	glšes
.
”a£
(
lše
);

233  
make_·œ
(
d–ay
, 
çl£
);

236 ià(
	ghigh”_ÿche
.
size
()) {

237 
	gmax_d–ay
 = 
d–ay
;

238 autØ
	ghc
 : 
high”_ÿche
) {

239 autØ
»suÉ
 = 
hc
->
šv®id©e
(
addr
);

240 ià(
	g»suÉ
.
	g£cÚd
) {

241 
	gmax_d–ay
 = 
max
(
max_d–ay
, 
d–ay
 + 
»suÉ
.
fœ¡
 * 2);

243 
	gmax_d–ay
 = 
max
(
max_d–ay
, 
d–ay
 + 
»suÉ
.
fœ¡
);

245 
	gdœty
 = 
dœty
 || 
lše
->dœty || 
»suÉ
.
£cÚd
;

247 
	gd–ay
 = 
max_d–ay
;

249 
	gdœty
 = 
lše
->
dœty
;

251  
make_·œ
(
d–ay
, 
dœty
);

255 
	gCache
::
eviù
(
¡d
::
li¡
<
Lše
>* 
lšes
,

256 
¡d
::
li¡
<
Lše
>::
™”©Ü
 
viùim
) {

257 
debug
("Ëv– %d mis eviù viùim %lx", (
Ëv–
), 
viùim
->
addr
);

258 
	gÿche_eviùiÚ
++;

260 
	gaddr
 = 
viùim
->
addr
;

261 
	gšv®id©e_time
 = 0;

262 
boŞ
 
	gdœty
 = 
viùim
->
dœty
;

265 ià(
	ghigh”_ÿche
.
size
()) {

266 autØ
	ghc
 : 
high”_ÿche
) {

267 autØ
»suÉ
 = 
hc
->
šv®id©e
(
addr
);

268 
	gšv®id©e_time
 = 
max
(
šv®id©e_time
,

269 
»suÉ
.
fœ¡
 + (»suÉ.
£cÚd
 ? 
Ï‹ncy_—ch
[(
Ëv–
)] : 0));

270 
	gdœty
 = 
dœty
 || 
»suÉ
.
£cÚd
 || 
viùim
->dirty;

274 
debug
("šv®id©d–ay: %ld, dœty: %s", 
šv®id©e_time
,

275 
dœty
 ? "true" : "false");

277 ià(!
	gis_Ï¡_Ëv–
) {

279 
as£¹
(
low”_ÿche
 !ğ
nuÎ±r
);

280 
	glow”_ÿche
->
eviùlše
(
addr
, 
dœty
);

283 ià(
	gdœty
) {

284 
Reque¡
 
wr™e_»q
(
addr
, Reque¡::
Ty³
::
WRITE
);

285 
	gÿchesys
->
	gwa™_li¡
.
push_back
(
make_·œ
(

286 
ÿchesys
->
şk
 + 
šv®id©e_time
 + 
Ï‹ncy
[(
Ëv–
)],

287 
wr™e_»q
));

289 
debug
("inject one write„equesto memory system "

291 
wr™e_»q
.
addr
, 
šv®id©e_time
,

292 
ÿchesys
->
şk
 + 
šv®id©e_time
 + 
Ï‹ncy
[(
Ëv–
)]);

296 
	glšes
->
”a£
(
viùim
);

299 
	g¡d
::
li¡
<
Cache
::
Lše
>::
™”©Ü
 Cache::
®loÿ‹_lše
(

300 
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
) {

302 ià(
Ãed_eviùiÚ
(
lšes
, 
addr
)) {

305 autØ
	gviùim
 = 
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

306 [
this
](
Lše
 
lše
) {

307 
boŞ
 
check
 = !
lše
.
lock
;

308 ià(!
is_fœ¡_Ëv–
) {

309 autØ
hc
 : 
high”_ÿche
) {

310 if(!
check
) {

311  
check
;

313 
check
 = check && 
hc
->
check_uÆock
(
lše
.
addr
);

316  
check
;

318 ià(
	gviùim
 =ğ
lšes
.
’d
()) {

319  
viùim
;

321 
as£¹
(
viùim
 !ğ
lšes
.
’d
());

322 
eviù
(&
lšes
, 
viùim
);

326 
	glšes
.
push_back
(
Lše
(
addr
, 
g‘_g
(addr)));

327 autØ
	gÏ¡_–em’t
 = 
lšes
.
’d
();

328 --
	gÏ¡_–em’t
;

329  
	gÏ¡_–em’t
;

332 
boŞ
 
	gCache
::
is_h™
(
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
,

333 
¡d
::
li¡
<
Lše
>::
™”©Ü
* 
pos_±r
) {

334 autØ
pos
 = 
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

335 [
addr
, 
this
](
Lše
 
l
){ (l.
g
 =ğ
g‘_g
(addr));});

336 *
	gpos_±r
 = 
pos
;

337 ià(
	gpos
 =ğ
lšes
.
’d
()) {

338  
çl£
;

340  !
	gpos
->
	glock
;

343 
	gCache
::
cÚÿow”
(
Cache
* 
low”
) {

344 
low”_ÿche
 = 
low”
;

345 
as£¹
(
low”
 !ğ
nuÎ±r
);

346 
	glow”
->
	ghigh”_ÿche
.
push_back
(
this
);

349 
boŞ
 
	gCache
::
Ãed_eviùiÚ
(cÚ¡ 
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
) {

350 ià(
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

351 [
addr
, 
this
](
Lše
 
l
){

352  (
g‘_g
(
addr
è=ğ
l
.
g
);})

353 !ğ
lšes
.
’d
()) {

355 
as£¹
(
çl£
);

357 ià(
	glšes
.
size
(è< 
	gassoc
) {

358  
	gçl£
;

360  
	gŒue
;

365 
	gCache
::
ÿÎback
(
Reque¡
& 
»q
) {

366 
debug
("Ëv– %d", (
Ëv–
));

368 autØ
	g™
 = 
fšd_if
(
mshr_’Œ›s
.
begš
(), mshr_’Œ›s.
’d
(),

369 [&
»q
, 
this
](
¡d
::
·œ
<, std::
li¡
<
Lše
>::
™”©Ü
> 
mshr_’Œy
) {

370  (
®ign
(
mshr_’Œy
.
fœ¡
è=ğ®ign(
»q
.
addr
));

373 ià(
	g™
 !ğ
mshr_’Œ›s
.
’d
()) {

374 
™
->
£cÚd
->
lock
 = 
çl£
;

375 
	gmshr_’Œ›s
.
”a£
(
™
);

378 ià(
	ghigh”_ÿche
.
size
()) {

379 autØ
	ghc
 : 
high”_ÿche
) {

380 
hc
->
ÿÎback
(
»q
);

385 
	gCacheSy¡em
::
tick
() {

386 
debug
("şk %ld", 
şk
);

388 ++
	gşk
;

391 autØ
	g™
 = 
wa™_li¡
.
begš
();

392 
	g™
 !ğ
wa™_li¡
.
’d
(è&& 
şk
 >ğ
™
->
fœ¡
) {

393 ià(!
£nd_memÜy
(
™
->
£cÚd
)) {

394 ++
™
;

397 
debug
("com¶‘»q:‡dd¸%lx", (
™
->
£cÚd
).
addr
);

399 
	g™
 = 
wa™_li¡
.
”a£
(
™
);

404 
	g™
 = 
h™_li¡
.
begš
();

405 
	g™
 !ğ
h™_li¡
.
’d
()) {

406 ià(
şk
 >ğ
™
->
fœ¡
) {

407 
™
->
£cÚd
.
ÿÎback
(it->second);

409 
debug
("fšish h™:‡dd¸%lx", (
™
->
£cÚd
).
addr
);

411 
	g™
 = 
h™_li¡
.
”a£
(
™
);

413 ++
	g™
;

	@Cache.h

1 #iâdeà
__CACHE_H


2 
	#__CACHE_H


	)

4 
	~"CÚfig.h
"

5 
	~"Reque¡.h
"

6 
	~"Sti¡ics.h
"

7 
	~<®gÜ™hm
>

8 
	~<c¡dio
>

9 
	~<ÿs£¹
>

10 
	~<funùiÚ®
>

11 
	~<li¡
>

12 
	~<m­
>

13 
	~<memÜy
>

14 
	~<queue
>

15 
	~<li¡
>

17 
Çme¥aû
 
	g¿muÏtÜ


19 
şass
 
	gCacheSy¡em
;

21 şas 
	cCache
 {

22 
	g´Ùeùed
:

23 
SÿÏrSt
 
ÿche_»ad_miss
;

24 
SÿÏrSt
 
	gÿche_wr™e_miss
;

25 
SÿÏrSt
 
	gÿche_tÙ®_miss
;

26 
SÿÏrSt
 
	gÿche_eviùiÚ
;

27 
SÿÏrSt
 
	gÿche_»ad_acûss
;

28 
SÿÏrSt
 
	gÿche_wr™e_acûss
;

29 
SÿÏrSt
 
	gÿche_tÙ®_acûss
;

30 
SÿÏrSt
 
	gÿche_mshr_h™
;

31 
SÿÏrSt
 
	gÿche_mshr_uÇvaabË
;

32 
SÿÏrSt
 
	gÿche_£t_uÇvaabË
;

33 
	gpublic
:

34 şas 
	cLev–
 {

35 
L1
,

36 
	gL2
,

37 
	gL3
,

38 
	gMAX


39 } 
	gËv–
;

40 
	g¡d
::
¡ršg
 
Ëv–_¡ršg
;

42 
	sLše
 {

43 
	gaddr
;

44 
	gg
;

45 
boŞ
 
	glock
;

46 
boŞ
 
	gdœty
;

47 
Lše
(
addr
, 
g
):

48 
addr
×ddr), 
g
Ñag), 
lock
(
Œue
), 
dœty
(
çl£
) {}

49 
Lše
(
addr
, 
g
, 
boŞ
 
lock
, boŞ 
dœty
):

50 
addr
×ddr), 
g
Ñag), 
lock
Öock), 
dœty
(dirty) {}

53 
Cache
(
size
, 
assoc
, 
block_size
, 
mshr_’Œy_num
,

54 
Lev–
 
Ëv–
, 
¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
);

57 
	gÏ‹ncy
[(
Lev–
::
MAX
)] = {4, 4 + 12, 4 + 12 + 31};

58 
	gÏ‹ncy_—ch
[(
Lev–
::
MAX
)] = {4, 12, 31};

60 
	g¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
;

62 
	g¡d
::
veùÜ
<
Cache
*> 
high”_ÿche
;

63 
Cache
* 
	glow”_ÿche
;

65 
boŞ
 
£nd
(
Reque¡
 
»q
);

67 
cÚÿow”
(
Cache
* 
low”
);

69 
ÿÎback
(
Reque¡
& 
»q
);

71 
	g´Ùeùed
:

73 
boŞ
 
is_fœ¡_Ëv–
;

74 
boŞ
 
	gis_Ï¡_Ëv–
;

75 
size_t
 
	gsize
;

76 
	gassoc
;

77 
	gblock_num
;

78 
	gšdex_mask
;

79 
	gblock_size
;

80 
	gšdex_off£t
;

81 
	gg_off£t
;

82 
	gmshr_’Œy_num
;

83 
	g¡d
::
veùÜ
<
¡d
::
·œ
<, std::
li¡
<
Lše
>::
™”©Ü
>> 
mshr_’Œ›s
;

85 
	g¡d
::
m­
<, std::
li¡
<
Lše
> > 
ÿche_lšes
;

87 
ÿlc_log2
(
v®
) {

88 
	gn
 = 0;

89 (
	gv®
 >>= 1))

90 
n
 ++;

91  
	gn
;

94 
g‘_šdex
(
addr
) {

95  (
	gaddr
 >> 
	gšdex_off£t
è& 
	gšdex_mask
;

98 
g‘_g
(
addr
) {

99  (
	gaddr
 >> 
	gg_off£t
);

103 
®ign
(
addr
) {

104  (
	gaddr
 & ~(
	gblock_size
-1l));

109 
eviùlše
(
addr
, 
boŞ
 
dœty
);

115 
	g¡d
::
·œ
<, 
	gboŞ
> 
šv®id©e
(
addr
);

120 
eviù
(
¡d
::
li¡
<
Lše
>* 
lšes
,

121 
¡d
::
li¡
<
Lše
>::
™”©Ü
 
viùim
);

126 
	g¡d
::
li¡
<
Lše
>::
™”©Ü
 
®loÿ‹_lše
(

127 
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
);

131 
boŞ
 
Ãed_eviùiÚ
(cÚ¡ 
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
);

135 
boŞ
 
is_h™
(
¡d
::
li¡
<
Lše
>& 
lšes
, 
addr
,

136 
¡d
::
li¡
<
Lše
>::
™”©Ü
* 
pos_±r
);

138 
boŞ
 
®l_£ts_locked
(cÚ¡ 
¡d
::
li¡
<
Lše
>& 
lšes
) {

139 ià(
lšes
.
size
(è< 
assoc
) {

140  
çl£
;

142 cÚ¡‡uto& 
	glše
 : 
lšes
) {

143 ià(!
lše
.
lock
) {

144  
çl£
;

147  
	gŒue
;

150 
boŞ
 
check_uÆock
(
addr
) {

151 autØ
	g™
 = 
ÿche_lšes
.
fšd
(
g‘_šdex
(
addr
));

152 ià(
	g™
 =ğ
ÿche_lšes
.
’d
()) {

153  
Œue
;

155 auto& 
	glšes
 = 
™
->
£cÚd
;

156 autØ
	glše
 = 
fšd_if
(
lšes
.
begš
(),†šes.
’d
(),

157 [
addr
, 
this
](
Lše
 
l
){ (l.
g
 =ğ
g‘_g
(addr));});

158 ià(
	glše
 =ğ
lšes
.
’d
()) {

159  
Œue
;

161 
boŞ
 
	gcheck
 = !
lše
->
lock
;

162 ià(!
	gis_fœ¡_Ëv–
) {

163 autØ
	ghc
 : 
high”_ÿche
) {

164 ià(!
check
) {

165  
check
;

167 
	gcheck
 = 
check
 && 
hc
->
check_uÆock
(
lše
->
addr
);

170  
	gcheck
;

175 
	g¡d
::
veùÜ
<
¡d
::
·œ
<, std::
li¡
<
Lše
>::
™”©Ü
>>::iterator

176 
h™_mshr
(
addr
) {

177 autØ
mshr_™
 =

178 
fšd_if
(
mshr_’Œ›s
.
begš
(), mshr_’Œ›s.
’d
(),

179 [
addr
, 
this
](
¡d
::
·œ
<, std::
li¡
<
Lše
>::
™”©Ü
>

180 
mshr_’Œy
) {

181  (
®ign
(
mshr_’Œy
.
fœ¡
è=ğ®ign(
addr
));

183  
	gmshr_™
;

186 
	g¡d
::
li¡
<
Lše
>& 
g‘_lšes
(
addr
) {

187 ià(
ÿche_lšes
.
fšd
(
g‘_šdex
(
addr
))

188 =ğ
ÿche_lšes
.
’d
()) {

189 
ÿche_lšes
.
š£¹
(
make_·œ
(
g‘_šdex
(
addr
),

190 
¡d
::
li¡
<
Lše
>()));

192  
	gÿche_lšes
[
g‘_šdex
(
addr
)];

197 şas 
	cCacheSy¡em
 {

198 
	gpublic
:

199 
CacheSy¡em
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
¡d
::
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd_memÜy
):

200 
£nd_memÜy
(send_memory) {

201 ià(
cÚfigs
.
has_cÜe_ÿches
()) {

202 
fœ¡_Ëv–
 = 
Cache
::
Lev–
::
L1
;

203 } ià(
	gcÚfigs
.
has_l3_ÿche
()) {

204 
	gfœ¡_Ëv–
 = 
Cache
::
Lev–
::
L3
;

206 
	gÏ¡_Ëv–
 = 
Cache
::
Lev–
::
MAX
;

209 ià(
	gcÚfigs
.
has_l3_ÿche
()) {

210 
	gÏ¡_Ëv–
 = 
Cache
::
Lev–
::
L3
;

211 } ià(
	gcÚfigs
.
has_cÜe_ÿches
()) {

212 
	gÏ¡_Ëv–
 = 
Cache
::
Lev–
::
L2
;

214 
	gÏ¡_Ëv–
 = 
Cache
::
Lev–
::
MAX
;

221 
	g¡d
::
li¡
<
¡d
::
·œ
<, 
	gReque¡
> > 
	gwa™_li¡
;

226 
	g¡d
::
li¡
<
¡d
::
·œ
<, 
	gReque¡
> > 
	gh™_li¡
;

228 
	g¡d
::
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd_memÜy
;

230 
	gşk
 = 0;

231 
tick
();

233 
	gCache
::
Lev–
 
fœ¡_Ëv–
;

234 
	gCache
::
Lev–
 
Ï¡_Ëv–
;

	@Config.cpp

1 
	~"CÚfig.h
"

3 
usšg
 
Çme¥aû
 
	g¡d
;

4 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

6 
	gCÚfig
::
	$CÚfig
(cÚ¡ 
¡d
::
¡ršg
& 
âame
) {

7 
	`·r£
(
âame
);

8 
	}
}

10 
	gCÚfig
::
	$·r£
(cÚ¡ 
¡ršg
& 
âame
)

12 
if¡»am
 
	`fe
(
âame
);

13 
	`as£¹
(
fe
.
	`good
() && "Bad config file");

14 
¡ršg
 
lše
;

15 
	`g‘lše
(
fe
, 
lše
)) {

16 
d–im
[] = " \t=";

17 
veùÜ
<
¡ršg
> 
tok’s
;

19 
Œue
) {

20 
size_t
 
¡¬t
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(
d–im
);

21 ià(
¡¬t
 =ğ
¡ršg
::
Åos
)

24 
size_t
 
’d
 = 
lše
.
	`fšd_fœ¡_of
(
d–im
, 
¡¬t
);

25 ià(
’d
 =ğ
¡ršg
::
Åos
) {

26 
tok’s
.
	`push_back
(
lše
.
	`sub¡r
(
¡¬t
));

30 
tok’s
.
	`push_back
(
lše
.
	`sub¡r
(
¡¬t
, 
’d
 - start));

31 
lše
 =†še.
	`sub¡r
(
’d
);

35 ià(!
tok’s
.
	`size
())

39 ià(
tok’s
[0][0] == '#')

43 
	`as£¹
(
tok’s
.
	`size
() == 2 && "Only‡llowwookens in one†ine");

45 
İtiÚs
[
tok’s
[0]] =okens[1];

47 ià(
tok’s
[0] == "channels") {

48 
chªÃls
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

49 } ià(
tok’s
[0] == "ranks") {

50 
¿nks
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

51 } ià(
tok’s
[0] == "subarrays") {

52 
sub¬¿ys
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

53 } ià(
tok’s
[0] == "cpu_tick") {

54 
ıu_tick
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

55 } ià(
tok’s
[0] == "mem_tick") {

56 
mem_tick
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

57 } ià(
tok’s
[0] == "expected_limit_insts") {

58 
ex³ùed_lim™_š¡s
 = 
	`©oi
(
tok’s
[1].
	`c_¡r
());

61 
fe
.
	`şo£
();

62 
	}
}

	@Config.h

1 #iâdeà
__CONFIG_H


2 
	#__CONFIG_H


	)

4 
	~<¡ršg
>

5 
	~<f¡»am
>

6 
	~<veùÜ
>

7 
	~<m­
>

8 
	~<io¡»am
>

9 
	~<ÿs£¹
>

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cCÚfig
 {

16 
	g´iv©e
:

17 
¡d
::
m­
<¡d::
¡ršg
, 
	g¡d
::¡ršg> 
İtiÚs
;

18 
	gchªÃls
;

19 
	g¿nks
;

20 
	gsub¬¿ys
;

21 
	gıu_tick
;

22 
	gmem_tick
;

23 
	gcÜe_num
 = 0;

24 
	gex³ùed_lim™_š¡s
 = 0;

26 
	gpublic
:

27 
CÚfig
() {}

28 
CÚfig
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

29 
·r£
(cÚ¡ 
¡d
::
¡ršg
& 
âame
);

30 
	g¡d
::
¡ršg
 
İ”©Ü
 [] (cÚ¡ 
¡d
::¡ršg& 
Çme
) const {

31 ià(
İtiÚs
.
fšd
(
Çme
è!ğİtiÚs.
’d
()) {

32  (
İtiÚs
.
fšd
(
Çme
))->
£cÚd
;

38 
boŞ
 
cÚšs
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
) const {

39 ià(
İtiÚs
.
fšd
(
Çme
è!ğİtiÚs.
’d
()) {

40  
Œue
;

42  
	gçl£
;

46 
add
 (cÚ¡ 
¡d
::
¡ršg
& 
Çme
, cÚ¡ std::¡ršg& 
v®ue
) {

47 ià(!
cÚšs
(
Çme
)) {

48 
İtiÚs
.
š£¹
(
make_·œ
(
Çme
, 
v®ue
));

50 
´štf
("¿muÏtÜ::CÚfig::add o±iÚs[%s]‡Ì—dy s‘.\n", 
Çme
.
c_¡r
());

54 
£t_cÜe_num
(
_cÜe_num
è{
	gcÜe_num
 = _core_num;}

56 
g‘_chªÃls
(ècÚ¡ { 
	gchªÃls
;}

57 
g‘_sub¬¿ys
(ècÚ¡ { 
	gsub¬¿ys
;}

58 
g‘_¿nks
(ècÚ¡ { 
	g¿nks
;}

59 
g‘_ıu_tick
(ècÚ¡ { 
	gıu_tick
;}

60 
g‘_mem_tick
(ècÚ¡ { 
	gmem_tick
;}

61 
g‘_cÜe_num
(ècÚ¡ { 
	gcÜe_num
;}

62 
g‘_ex³ùed_lim™_š¡s
(ècÚ¡ { 
	gex³ùed_lim™_š¡s
;}

63 
boŞ
 
has_l3_ÿche
() const {

64 ià(
	gİtiÚs
.
fšd
("ÿche"è!ğ
İtiÚs
.
’d
()) {

65 cÚ¡ 
¡d
::
¡ršg
& 
ÿche_İtiÚ
 = (
İtiÚs
.
fšd
("ÿche"))->
£cÚd
;

66  (
	gÿche_İtiÚ
 =ğ"®l"è|| (
ÿche_İtiÚ
 == "L3");

68  
	gçl£
;

71 
boŞ
 
has_cÜe_ÿches
() const {

72 ià(
	gİtiÚs
.
fšd
("ÿche"è!ğ
İtiÚs
.
’d
()) {

73 cÚ¡ 
¡d
::
¡ršg
& 
ÿche_İtiÚ
 = (
İtiÚs
.
fšd
("ÿche"))->
£cÚd
;

74  (
	gÿche_İtiÚ
 =ğ"®l" || 
ÿche_İtiÚ
 == "L1L2");

76  
	gçl£
;

79 
boŞ
 
is_—¾y_ex™
() const {

81 ià(
	gİtiÚs
.
fšd
("—¾y_ex™"è!ğ
İtiÚs
.
’d
()) {

82 ià((
İtiÚs
.
fšd
("—¾y_ex™"))->
£cÚd
 == "off") {

83  
çl£
;

85  
	gŒue
;

87  
	gŒue
;

89 
boŞ
 
ÿlc_weigh‹d_¥“dup
() const {

90  (
	gex³ùed_lim™_š¡s
 != 0);

92 
boŞ
 
»cÜd_cmd_Œaû
() const {

94 ià(
	gİtiÚs
.
fšd
("»cÜd_cmd_Œaû"è!ğ
İtiÚs
.
’d
()) {

95 ià((
İtiÚs
.
fšd
("»cÜd_cmd_Œaû"))->
£cÚd
 == "on") {

96  
Œue
;

98  
	gçl£
;

100  
	gçl£
;

102 
boŞ
 
´št_cmd_Œaû
() const {

104 ià(
	gİtiÚs
.
fšd
("´št_cmd_Œaû"è!ğ
İtiÚs
.
’d
()) {

105 ià((
İtiÚs
.
fšd
("´št_cmd_Œaû"))->
£cÚd
 == "on") {

106  
Œue
;

108  
	gçl£
;

110  
	gçl£
;

	@Controller.cpp

1 
	~"CÚŒŞËr.h
"

2 
	~"SALP.h
"

3 
	~"ALDRAM.h
"

4 
	~"TLDRAM.h
"

6 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

8 
Çme¥aû
 
	g¿muÏtÜ


11 
	gveùÜ
<> 
g‘_ofãndšg_sub¬¿y
(
DRAM
<
SALP
>* 
chªÃl
, 
veùÜ
<> & 
addr_vec
){

12 
	g§_id
 = 0;

13 autØ
	g¿nk
 = 
chªÃl
->
chd»n
[
addr_vec
[(
SALP
::
Lev–
::
Rªk
)]];

14 autØ
	gbªk
 = 
¿nk
->
chd»n
[
addr_vec
[(
SALP
::
Lev–
::
Bªk
)]];

15 autØ
	g§
 = 
bªk
->
chd»n
[
addr_vec
[(
SALP
::
Lev–
::
SubA¼ay
)]];

16 autØ
	g§_Ùh”
 : 
bªk
->
chd»n
)

17 ià(
§
 !ğ
§_Ùh”
 && sa_Ùh”->
¡©e
 =ğ
SALP
::
S‹
::
O³Ãd
){

18 
§_id
 = 
§_Ùh”
->
id
;

21 
	gveùÜ
<> 
	gofãndšg
 = 
addr_vec
;

22 
	gofãndšg
[(
SALP
::
Lev–
::
SubA¼ay
)] = 
§_id
;

23 
	gofãndšg
[(
SALP
::
Lev–
::
Row
)] = -1;

24  
	gofãndšg
;

28 
	g‹m¶©e
 <>

29 
	gveùÜ
<> 
	gCÚŒŞËr
<
	gSALP
>::
g‘_addr_vec
(
SALP
::
Commªd
 
cmd
, 
li¡
<
Reque¡
>::
™”©Ü
 
»q
){

30 ià(
cmd
 =ğ
SALP
::
Commªd
::
PRE_OTHER
)

31  
g‘_ofãndšg_sub¬¿y
(
chªÃl
, 
»q
->
addr_vec
);

33  
	g»q
->
	gaddr_vec
;

37 
	g‹m¶©e
 <>

38 
boŞ
 
	gCÚŒŞËr
<
	gSALP
>::
is_»ady
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
){

39 
SALP
::
Commªd
 
cmd
 = 
g‘_fœ¡_cmd
(
»q
);

40 ià(
	gcmd
 =ğ
SALP
::
Commªd
::
PRE_OTHER
){

42 
veùÜ
<> 
addr_vec
 = 
g‘_ofãndšg_sub¬¿y
(
chªÃl
, 
»q
->addr_vec);

43  
	gchªÃl
->
check
(
cmd
, 
addr_vec
.
d©a
(), 
şk
);

45  
	gchªÃl
->
check
(
cmd
, 
»q
->
addr_vec
.
d©a
(), 
şk
);

48 
	g‹m¶©e
 <>

49 
	gCÚŒŞËr
<
	gALDRAM
>::
upd©e_‹mp
(
ALDRAM
::
Temp
 
cu¼’t_‹m³¿tu»
){

50 
chªÃl
->
¥ec
->
®d¿m_timšg
(
cu¼’t_‹m³¿tu»
);

54 
	g‹m¶©e
 <>

55 
	gCÚŒŞËr
<
	gTLDRAM
>::
tick
(){

56 
şk
++;

57 
	g»q_queue_Ëngth_sum
 +ğ
»adq
.
size
(è+ 
wr™eq
.size();

58 
	g»ad_»q_queue_Ëngth_sum
 +ğ
»adq
.
size
();

59 
	gwr™e_»q_queue_Ëngth_sum
 +ğ
wr™eq
.
size
();

62 ià(
	g³ndšg
.
size
()) {

63 
	gReque¡
& 
	g»q
 = 
³ndšg
[0];

64 ià(
	g»q
.
	gd•¬t
 <ğ
şk
) {

65 ià(
»q
.
d•¬t
 -„eq.
¬rive
 > 1) {

66 
»ad_Ï‹ncy_sum
 +ğ
»q
.
d•¬t
 -„eq.
¬rive
;

67 
	gchªÃl
->
upd©e_£rvšg_»que¡s
(

68 
»q
.
addr_vec
.
d©a
(), -1, 
şk
);

70 
	g»q
.
ÿÎback
(
»q
);

71 
	g³ndšg
.
pİ_äÚt
();

76 
	g»äesh
->
tick_»f
();

79 ià(!
	gwr™e_mode
) {

81 ià(
	gwr™eq
.
size
(è>ğ(0.8 * 
wr™eq
.
max
è|| 
»adq
.size() == 0)

82 
wr™e_mode
 = 
Œue
;

86 ià(
	gwr™eq
.
size
(è<ğ(0.2 * 
wr™eq
.
max
è&& 
»adq
.size() != 0)

87 
wr™e_mode
 = 
çl£
;

91 
Queue
* 
	gqueue
 = !
wr™e_mode
 ? &
»adq
 : &
wr™eq
;

92 ià(
	gÙh”q
.
size
())

93 
	gqueue
 = &
Ùh”q
;

95 autØ
	g»q
 = 
scheduËr
->
g‘_h—d
(
queue
->
q
);

96 ià(
	g»q
 =ğ
queue
->
q
.
’d
(è|| !
is_»ady
(
»q
)) {

98 autØ
cmd
 = 
TLDRAM
::
Commªd
::
PRE
;

99 
	gveùÜ
<> 
	gviùim
 = 
rowpŞicy
->
g‘_viùim
(
cmd
);

100 ià(!
	gviùim
.
em±y
()){

101 
issue_cmd
(
cmd
, 
viùim
);

106 ià(
	g»q
->
	gis_fœ¡_commªd
) {

107 
	gcÜeid
 = 
»q
->
cÜeid
;

108 
	g»q
->
	gis_fœ¡_commªd
 = 
çl£
;

109 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
 || 
»q
->
ty³
 =ğReque¡::Ty³::
WRITE
) {

110 
chªÃl
->
upd©e_£rvšg_»que¡s
(
»q
->
addr_vec
.
d©a
(), 1, 
şk
);

112 
	gtx
 = (
chªÃl
->
¥ec
->
´eãtch_size
 * chªÃl->¥ec->
chªÃl_width
 / 8);

113 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

114 ià(
is_row_h™
(
»q
)) {

115 ++
»ad_row_h™s
[
cÜeid
];

116 ++
	grow_h™s
;

117 } ià(
is_row_İ’
(
»q
)) {

118 ++
	g»ad_row_cÚæiùs
[
cÜeid
];

119 ++
	grow_cÚæiùs
;

121 ++
	g»ad_row_mis£s
[
cÜeid
];

122 ++
	grow_mis£s
;

124 
	g»ad_Œª§ùiÚ_by‹s
 +ğ
tx
;

125 } ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

126 ià(
is_row_h™
(
»q
)) {

127 ++
wr™e_row_h™s
[
cÜeid
];

128 ++
	grow_h™s
;

129 } ià(
is_row_İ’
(
»q
)) {

130 ++
	gwr™e_row_cÚæiùs
[
cÜeid
];

131 ++
	grow_cÚæiùs
;

133 ++
	gwr™e_row_mis£s
[
cÜeid
];

134 ++
	grow_mis£s
;

136 
	gwr™e_Œª§ùiÚ_by‹s
 +ğ
tx
;

141 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

142 
»q
->
ty³
 = 
Reque¡
::
Ty³
::
EXTENSION
;

146 autØ
	gcmd
 = 
g‘_fœ¡_cmd
(
»q
);

147 
issue_cmd
(
cmd
, 
g‘_addr_vec
(cmd, 
»q
));

150 ià(
	gcmd
 !ğ
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
->
ty³
)])

154 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
 || 
»q
->
ty³
 =ğReque¡::Ty³::
EXTENSION
) {

155 
»q
->
d•¬t
 = 
şk
 + 
chªÃl
->
¥ec
->
»ad_Ï‹ncy
;

156 
	g³ndšg
.
push_back
(*
»q
);

158 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

159 
chªÃl
->
upd©e_£rvšg_»que¡s
(
»q
->
addr_vec
.
d©a
(), -1, 
şk
);

160 
	g»q
->
ÿÎback
(*
»q
);

164 
	gqueue
->
	gq
.
”a£
(
»q
);

	@Controller.h

1 #iâdeà
__CONTROLLER_H


2 
	#__CONTROLLER_H


	)

4 
	~<ÿs£¹
>

5 
	~<c¡dio
>

6 
	~<deque
>

7 
	~<f¡»am
>

8 
	~<li¡
>

9 
	~<¡ršg
>

10 
	~<veùÜ
>

12 
	~"CÚfig.h
"

13 
	~"DRAM.h
"

14 
	~"Reäesh.h
"

15 
	~"Reque¡.h
"

16 
	~"ScheduËr.h
"

17 
	~"Sti¡ics.h
"

19 
	~"ALDRAM.h
"

20 
	~"SALP.h
"

21 
	~"TLDRAM.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

25 
Çme¥aû
 
	g¿muÏtÜ


28 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

29 şas 
	cCÚŒŞËr


31 
	g´Ùeùed
:

33 
SÿÏrSt
 
»ad_Œª§ùiÚ_by‹s
;

34 
SÿÏrSt
 
	gwr™e_Œª§ùiÚ_by‹s
;

36 
SÿÏrSt
 
	grow_h™s
;

37 
SÿÏrSt
 
	grow_mis£s
;

38 
SÿÏrSt
 
	grow_cÚæiùs
;

39 
VeùÜSt
 
	g»ad_row_h™s
;

40 
VeùÜSt
 
	g»ad_row_mis£s
;

41 
VeùÜSt
 
	g»ad_row_cÚæiùs
;

42 
VeùÜSt
 
	gwr™e_row_h™s
;

43 
VeùÜSt
 
	gwr™e_row_mis£s
;

44 
VeùÜSt
 
	gwr™e_row_cÚæiùs
;

46 
SÿÏrSt
 
	g»ad_Ï‹ncy_avg
;

47 
SÿÏrSt
 
	g»ad_Ï‹ncy_sum
;

49 
SÿÏrSt
 
	g»q_queue_Ëngth_avg
;

50 
SÿÏrSt
 
	g»q_queue_Ëngth_sum
;

51 
SÿÏrSt
 
	g»ad_»q_queue_Ëngth_avg
;

52 
SÿÏrSt
 
	g»ad_»q_queue_Ëngth_sum
;

53 
SÿÏrSt
 
	gwr™e_»q_queue_Ëngth_avg
;

54 
SÿÏrSt
 
	gwr™e_»q_queue_Ëngth_sum
;

56 #iâdeà
INTEGRATED_WITH_GEM5


57 
VeùÜSt
 
	g»cÜd_»ad_h™s
;

58 
VeùÜSt
 
	g»cÜd_»ad_mis£s
;

59 
VeùÜSt
 
	g»cÜd_»ad_cÚæiùs
;

60 
VeùÜSt
 
	g»cÜd_wr™e_h™s
;

61 
VeùÜSt
 
	g»cÜd_wr™e_mis£s
;

62 
VeùÜSt
 
	g»cÜd_wr™e_cÚæiùs
;

65 
	gpublic
:

67 
şk
 = 0;

68 
	gDRAM
<
	gT
>* 
	gchªÃl
;

70 
	gScheduËr
<
	gT
>* 
	gscheduËr
;

71 
	gRowPŞicy
<
	gT
>* 
	growpŞicy
;

72 
	gRowTabË
<
	gT
>* 
	growbË
;

73 
	gReäesh
<
	gT
>* 
	g»äesh
;

75 
	sQueue
 {

76 
	gli¡
<
	gReque¡
> 
	gq
;

77 
	gmax
 = 32;

78 
size
(è{ 
	gq
.size();}

81 
Queue
 
	g»adq
;

82 
Queue
 
	gwr™eq
;

83 
Queue
 
	gÙh”q
;

85 
	gdeque
<
	gReque¡
> 
	g³ndšg
;

86 
boŞ
 
	gwr™e_mode
 = 
çl£
;

90 
¡ršg
 
	gcmd_Œaû_´efix
 = "cmd-trace-";

91 
	gveùÜ
<
	gof¡»am
> 
	gcmd_Œaû_fes
;

92 
boŞ
 
	g»cÜd_cmd_Œaû
 = 
çl£
;

94 
boŞ
 
	g´št_cmd_Œaû
 = 
çl£
;

97 
CÚŒŞËr
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
DRAM
<
T
>* 
chªÃl
) :

98 
chªÃl
(channel),

99 
scheduËr
(
Ãw
 
ScheduËr
<
T
>(
this
)),

100 
rowpŞicy
(
Ãw
 
RowPŞicy
<
T
>(
this
)),

101 
rowbË
(
Ãw
 
RowTabË
<
T
>(
this
)),

102 
»äesh
(
Ãw
 
Reäesh
<
T
>(
this
)),

103 
cmd_Œaû_fes
(
chªÃl
->
chd»n
.
size
())

105 
	g»cÜd_cmd_Œaû
 = 
cÚfigs
.
»cÜd_cmd_Œaû
();

106 
	g´št_cmd_Œaû
 = 
cÚfigs
.
´št_cmd_Œaû
();

107 ià(
	g»cÜd_cmd_Œaû
){

108 ià(
	gcÚfigs
["cmd_trace_prefix"] != "") {

109 
cmd_Œaû_´efix
 = 
cÚfigs
["cmd_trace_prefix"];

111 
¡ršg
 
	g´efix
 = 
cmd_Œaû_´efix
 + "chª-" + 
to_¡ršg
(
chªÃl
->
id
) + "-rank-";

112 
¡ršg
 
	gsuffix
 = ".cmdtrace";

113 
	gi
 = 0; i < 
	gchªÃl
->
	gchd»n
.
size
(); i++)

114 
	gcmd_Œaû_fes
[
i
].
İ’
(
´efix
 + 
to_¡ršg
(iè+ 
suffix
);

119 
	grow_h™s


120 .
Çme
("row_h™s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

121 .
desc
("Number of„ow hits…er channel…er core")

122 .
´ecisiÚ
(0)

124 
	grow_mis£s


125 .
Çme
("row_mis£s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

126 .
desc
("Number of„ow misses…er channel…er core")

127 .
´ecisiÚ
(0)

129 
	grow_cÚæiùs


130 .
Çme
("row_cÚæiùs_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

131 .
desc
("Number of„ow conflicts…er channel…er core")

132 .
´ecisiÚ
(0)

135 
	g»ad_row_h™s


136 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

137 .
Çme
("»ad_row_h™s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

138 .
desc
("Number of„ow hits for„ead„equests…er channel…er core")

139 .
´ecisiÚ
(0)

141 
	g»ad_row_mis£s


142 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

143 .
Çme
("»ad_row_mis£s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

144 .
desc
("Number of„ow misses for„ead„equests…er channel…er core")

145 .
´ecisiÚ
(0)

147 
	g»ad_row_cÚæiùs


148 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

149 .
Çme
("»ad_row_cÚæiùs_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

150 .
desc
("Number of„ow conflicts for„ead„equests…er channel…er core")

151 .
´ecisiÚ
(0)

154 
	gwr™e_row_h™s


155 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

156 .
Çme
("wr™e_row_h™s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

157 .
desc
("Number of„ow hits for write„equests…er channel…er core")

158 .
´ecisiÚ
(0)

160 
	gwr™e_row_mis£s


161 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

162 .
Çme
("wr™e_row_mis£s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

163 .
desc
("Number of„ow misses for write„equests…er channel…er core")

164 .
´ecisiÚ
(0)

166 
	gwr™e_row_cÚæiùs


167 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

168 .
Çme
("wr™e_row_cÚæiùs_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
) + "_core")

169 .
desc
("Number of„ow conflicts for write„equests…er channel…er core")

170 .
´ecisiÚ
(0)

173 
	g»ad_Œª§ùiÚ_by‹s


174 .
Çme
("»ad_Œª§ùiÚ_by‹s_"+
to_¡ršg
(
chªÃl
->
id
))

175 .
desc
("Theotal byte of„eadransaction…er channel")

176 .
´ecisiÚ
(0)

178 
	gwr™e_Œª§ùiÚ_by‹s


179 .
Çme
("wr™e_Œª§ùiÚ_by‹s_"+
to_¡ršg
(
chªÃl
->
id
))

180 .
desc
("Theotal byte of writeransaction…er channel")

181 .
´ecisiÚ
(0)

184 
	g»ad_Ï‹ncy_sum


185 .
Çme
("»ad_Ï‹ncy_sum_"+
to_¡ršg
(
chªÃl
->
id
))

186 .
desc
("The memory†atency cycles (in memoryime domain) sum for‡ll„ead„equests inhis channel")

187 .
´ecisiÚ
(0)

189 
	g»ad_Ï‹ncy_avg


190 .
Çme
("»ad_Ï‹ncy_avg_"+
to_¡ršg
(
chªÃl
->
id
))

191 .
desc
("The‡verage memory†atency cycles (in memoryime domain)…er„equest for‡ll„ead„equests inhis channel")

192 .
´ecisiÚ
(6)

195 
	g»q_queue_Ëngth_sum


196 .
Çme
("»q_queue_Ëngth_sum_"+
to_¡ršg
(
chªÃl
->
id
))

197 .
desc
("Sum of„ead‡nd write queue†ength…er memory cycle…er channel.")

198 .
´ecisiÚ
(0)

200 
	g»q_queue_Ëngth_avg


201 .
Çme
("»q_queue_Ëngth_avg_"+
to_¡ršg
(
chªÃl
->
id
))

202 .
desc
("Average of„ead‡nd write queue†ength…er memory cycle…er channel.")

203 .
´ecisiÚ
(6)

206 
	g»ad_»q_queue_Ëngth_sum


207 .
Çme
("»ad_»q_queue_Ëngth_sum_"+
to_¡ršg
(
chªÃl
->
id
))

208 .
desc
("Read queue†ength sum…er memory cycle…er channel.")

209 .
´ecisiÚ
(0)

211 
	g»ad_»q_queue_Ëngth_avg


212 .
Çme
("»ad_»q_queue_Ëngth_avg_"+
to_¡ršg
(
chªÃl
->
id
))

213 .
desc
("Read queue†ength‡verage…er memory cycle…er channel.")

214 .
´ecisiÚ
(6)

217 
	gwr™e_»q_queue_Ëngth_sum


218 .
Çme
("wr™e_»q_queue_Ëngth_sum_"+
to_¡ršg
(
chªÃl
->
id
))

219 .
desc
("Write queue†ength sum…er memory cycle…er channel.")

220 .
´ecisiÚ
(0)

222 
	gwr™e_»q_queue_Ëngth_avg


223 .
Çme
("wr™e_»q_queue_Ëngth_avg_"+
to_¡ršg
(
chªÃl
->
id
))

224 .
desc
("Write queue†ength‡verage…er memory cycle…er channel.")

225 .
´ecisiÚ
(6)

228 #iâdeà
INTEGRATED_WITH_GEM5


229 
	g»cÜd_»ad_h™s


230 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

231 .
Çme
("record_read_hits")

232 .
desc
("record„ead hit count forhis core when it„eaches„equest†imit oroheƒnd")

235 
	g»cÜd_»ad_mis£s


236 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

237 .
Çme
("record_read_misses")

238 .
desc
("record_read_miss count forhis core when it„eaches„equest†imit oroheƒnd")

241 
	g»cÜd_»ad_cÚæiùs


242 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

243 .
Çme
("record_read_conflicts")

244 .
desc
("record„ead conflict count forhis core when it„eaches„equest†imit oroheƒnd")

247 
	g»cÜd_wr™e_h™s


248 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

249 .
Çme
("record_write_hits")

250 .
desc
("record write hit count forhis core when it„eaches„equest†imit oroheƒnd")

253 
	g»cÜd_wr™e_mis£s


254 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

255 .
Çme
("record_write_misses")

256 .
desc
("record write miss count forhis core when it„eaches„equest†imit oroheƒnd")

259 
	g»cÜd_wr™e_cÚæiùs


260 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

261 .
Çme
("record_write_conflicts")

262 .
desc
("record write conflict forhis core when it„eaches„equest†imit oroheƒnd")

267 ~
CÚŒŞËr
(){

268 
d–‘e
 
	gscheduËr
;

269 
d–‘e
 
	growpŞicy
;

270 
d–‘e
 
	growbË
;

271 
d–‘e
 
	gchªÃl
;

272 
d–‘e
 
	g»äesh
;

273 auto& 
	gfe
 : 
cmd_Œaû_fes
)

274 
fe
.
şo£
();

275 
	gcmd_Œaû_fes
.
ş—r
();

278 
fšish
(
»ad_»q
, 
d¿m_cyşes
) {

279 
	g»ad_Ï‹ncy_avg
 = 
»ad_Ï‹ncy_sum
.
v®ue
(è/ 
»ad_»q
;

280 
	g»q_queue_Ëngth_avg
 = 
»q_queue_Ëngth_sum
.
v®ue
(è/ 
d¿m_cyşes
;

281 
	g»ad_»q_queue_Ëngth_avg
 = 
»ad_»q_queue_Ëngth_sum
.
v®ue
(è/ 
d¿m_cyşes
;

282 
	gwr™e_»q_queue_Ëngth_avg
 = 
wr™e_»q_queue_Ëngth_sum
.
v®ue
(è/ 
d¿m_cyşes
;

284 
	gchªÃl
->
fšish
(
d¿m_cyşes
);

288 
	gQueue
& 
g‘_queue
(
Reque¡
::
Ty³
 
ty³
)

290 (
ty³
)) {

291 (
Reque¡
::
Ty³
::
READ
):  
»adq
;

292 (
	gReque¡
::
Ty³
::
WRITE
):  
wr™eq
;

293 :  
Ùh”q
;

297 
boŞ
 
’queue
(
Reque¡
& 
»q
)

299 
	gQueue
& 
	gqueue
 = 
g‘_queue
(
»q
.
ty³
);

300 ià(
	gqueue
.
	gmax
 =ğ
queue
.
size
())

301  
çl£
;

303 
	g»q
.
	g¬rive
 = 
şk
;

304 
	gqueue
.
	gq
.
push_back
(
»q
);

307 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
 && 
fšd_if
(
wr™eq
.
q
.
begš
(), wr™eq.q.
’d
(),

308 [
»q
](
Reque¡
& 
w»q
){ „eq.
addr
 =ğw»q.addr;}è!ğ
wr™eq
.
q
.
’d
()){

309 
»q
.
d•¬t
 = 
şk
 + 1;

310 
	g³ndšg
.
push_back
(
»q
);

311 
	g»adq
.
	gq
.
pİ_back
();

313  
	gŒue
;

316 
tick
()

318 
	gşk
++;

319 
	g»q_queue_Ëngth_sum
 +ğ
»adq
.
size
(è+ 
wr™eq
.size(è+ 
³ndšg
.size();

320 
	g»ad_»q_queue_Ëngth_sum
 +ğ
»adq
.
size
(è+ 
³ndšg
.size();

321 
	gwr™e_»q_queue_Ëngth_sum
 +ğ
wr™eq
.
size
();

324 ià(
	g³ndšg
.
size
()) {

325 
	gReque¡
& 
	g»q
 = 
³ndšg
[0];

326 ià(
	g»q
.
	gd•¬t
 <ğ
şk
) {

327 ià(
»q
.
d•¬t
 -„eq.
¬rive
 > 1) {

328 
»ad_Ï‹ncy_sum
 +ğ
»q
.
d•¬t
 -„eq.
¬rive
;

329 
	gchªÃl
->
upd©e_£rvšg_»que¡s
(

330 
»q
.
addr_vec
.
d©a
(), -1, 
şk
);

332 
	g»q
.
ÿÎback
(
»q
);

333 
	g³ndšg
.
pİ_äÚt
();

338 
	g»äesh
->
tick_»f
();

341 ià(!
	gwr™e_mode
) {

343 ià(
	gwr™eq
.
size
(è>ğ(0.8 * 
wr™eq
.
max
è|| 
»adq
.size() == 0)

344 
wr™e_mode
 = 
Œue
;

348 ià(
	gwr™eq
.
size
(è<ğ(0.2 * 
wr™eq
.
max
è&& 
»adq
.size() != 0)

349 
wr™e_mode
 = 
çl£
;

353 
Queue
* 
	gqueue
 = !
wr™e_mode
 ? &
»adq
 : &
wr™eq
;

354 ià(
	gÙh”q
.
size
())

355 
	gqueue
 = &
Ùh”q
;

357 autØ
	g»q
 = 
scheduËr
->
g‘_h—d
(
queue
->
q
);

358 ià(
	g»q
 =ğ
queue
->
q
.
’d
(è|| !
is_»ady
(
»q
)) {

360 autØ
cmd
 = 
T
::
Commªd
::
PRE
;

361 
	gveùÜ
<> 
	gviùim
 = 
rowpŞicy
->
g‘_viùim
(
cmd
);

362 ià(!
	gviùim
.
em±y
()){

363 
issue_cmd
(
cmd
, 
viùim
);

368 ià(
	g»q
->
	gis_fœ¡_commªd
) {

369 
	g»q
->
	gis_fœ¡_commªd
 = 
çl£
;

370 
	gcÜeid
 = 
»q
->
cÜeid
;

371 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
 || 
»q
->
ty³
 =ğReque¡::Ty³::
WRITE
) {

372 
chªÃl
->
upd©e_£rvšg_»que¡s
(
»q
->
addr_vec
.
d©a
(), 1, 
şk
);

374 
	gtx
 = (
chªÃl
->
¥ec
->
´eãtch_size
 * chªÃl->¥ec->
chªÃl_width
 / 8);

375 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

376 ià(
is_row_h™
(
»q
)) {

377 ++
»ad_row_h™s
[
cÜeid
];

378 ++
	grow_h™s
;

379 } ià(
is_row_İ’
(
»q
)) {

380 ++
	g»ad_row_cÚæiùs
[
cÜeid
];

381 ++
	grow_cÚæiùs
;

383 ++
	g»ad_row_mis£s
[
cÜeid
];

384 ++
	grow_mis£s
;

386 
	g»ad_Œª§ùiÚ_by‹s
 +ğ
tx
;

387 } ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

388 ià(
is_row_h™
(
»q
)) {

389 ++
wr™e_row_h™s
[
cÜeid
];

390 ++
	grow_h™s
;

391 } ià(
is_row_İ’
(
»q
)) {

392 ++
	gwr™e_row_cÚæiùs
[
cÜeid
];

393 ++
	grow_cÚæiùs
;

395 ++
	gwr™e_row_mis£s
[
cÜeid
];

396 ++
	grow_mis£s
;

398 
	gwr™e_Œª§ùiÚ_by‹s
 +ğ
tx
;

403 autØ
	gcmd
 = 
g‘_fœ¡_cmd
(
»q
);

404 
issue_cmd
(
cmd
, 
g‘_addr_vec
(cmd, 
»q
));

407 ià(
	gcmd
 !ğ
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
->
ty³
)])

411 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

412 
»q
->
d•¬t
 = 
şk
 + 
chªÃl
->
¥ec
->
»ad_Ï‹ncy
;

413 
	g³ndšg
.
push_back
(*
»q
);

416 ià(
	g»q
->
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

417 
chªÃl
->
upd©e_£rvšg_»que¡s
(
»q
->
addr_vec
.
d©a
(), -1, 
şk
);

421 
	gqueue
->
	gq
.
”a£
(
»q
);

424 
boŞ
 
is_»ady
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
)

426 
ty³Çme
 
T
::
Commªd
 
cmd
 = 
g‘_fœ¡_cmd
(
»q
);

427  
	gchªÃl
->
check
(
cmd
, 
»q
->
addr_vec
.
d©a
(), 
şk
);

430 
boŞ
 
is_»ady
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ 
veùÜ
<>& 
addr_vec
)

432  
	gchªÃl
->
check
(
cmd
, 
addr_vec
.
d©a
(), 
şk
);

435 
boŞ
 
is_row_h™
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
)

438 
ty³Çme
 
T
::
Commªd
 
cmd
 = 
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
->
ty³
)];

439  
	gchªÃl
->
check_row_h™
(
cmd
, 
»q
->
addr_vec
.
d©a
());

442 
boŞ
 
is_row_h™
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ 
veùÜ
<>& 
addr_vec
)

444  
	gchªÃl
->
check_row_h™
(
cmd
, 
addr_vec
.
d©a
());

447 
boŞ
 
is_row_İ’
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
)

450 
ty³Çme
 
T
::
Commªd
 
cmd
 = 
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
->
ty³
)];

451  
	gchªÃl
->
check_row_İ’
(
cmd
, 
»q
->
addr_vec
.
d©a
());

454 
boŞ
 
is_row_İ’
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ 
veùÜ
<>& 
addr_vec
)

456  
	gchªÃl
->
check_row_İ’
(
cmd
, 
addr_vec
.
d©a
());

459 
upd©e_‹mp
(
ALDRAM
::
Temp
 
cu¼’t_‹m³¿tu»
)

464 
boŞ
 
is_aùive
() {

465  (
chªÃl
->
cur_£rvšg_»que¡s
 > 0);

469 
boŞ
 
is_»äesh
() {

470  
	gşk
 <ğ
chªÃl
->
’d_of_»äeshšg
;

473 
»cÜd_cÜe
(
cÜeid
) {

474 #iâdeà
INTEGRATED_WITH_GEM5


475 
	g»cÜd_»ad_h™s
[
cÜeid
] = 
»ad_row_h™s
[coreid];

476 
	g»cÜd_»ad_mis£s
[
cÜeid
] = 
»ad_row_mis£s
[coreid];

477 
	g»cÜd_»ad_cÚæiùs
[
cÜeid
] = 
»ad_row_cÚæiùs
[coreid];

478 
	g»cÜd_wr™e_h™s
[
cÜeid
] = 
wr™e_row_h™s
[coreid];

479 
	g»cÜd_wr™e_mis£s
[
cÜeid
] = 
wr™e_row_mis£s
[coreid];

480 
	g»cÜd_wr™e_cÚæiùs
[
cÜeid
] = 
wr™e_row_cÚæiùs
[coreid];

484 
	g´iv©e
:

485 
ty³Çme
 
T
::
Commªd
 
g‘_fœ¡_cmd
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
)

487 
ty³Çme
 
T
::
Commªd
 
cmd
 = 
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
->
ty³
)];

488  
	gchªÃl
->
decode
(
cmd
, 
»q
->
addr_vec
.
d©a
());

491 
issue_cmd
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ 
veùÜ
<>& 
addr_vec
)

493 
as£¹
(
is_»ady
(
cmd
, 
addr_vec
));

494 
	gchªÃl
->
upd©e
(
cmd
, 
addr_vec
.
d©a
(), 
şk
);

495 
	growbË
->
upd©e
(
cmd
, 
addr_vec
, 
şk
);

496 ià(
	g»cÜd_cmd_Œaû
){

498 auto& 
	gfe
 = 
cmd_Œaû_fes
[
addr_vec
[1]];

499 
	g¡ršg
& 
	gcmd_Çme
 = 
chªÃl
->
¥ec
->
commªd_Çme
[(
cmd
)];

500 
	gfe
<<
	gşk
<<','<<
	gcmd_Çme
;

502 ià(
	gcmd_Çme
 =ğ"PREA" || 
cmd_Çme
 == "REF")

503 
fe
<<
’dl
;

505 
	gbªk_id
 = 
addr_vec
[(
T
::
Lev–
::
Bªk
)];

506 ià(
	gchªÃl
->
	g¥ec
->
	g¡ªd¬d_Çme
 =ğ"DDR4" || 
chªÃl
->
¥ec
->
¡ªd¬d_Çme
 == "GDDR5")

507 
bªk_id
 +ğ
addr_vec
[(
T
::
Lev–
::
Bªk
è- 1] * 
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[(T::Level::Bank)];

508 
	gfe
<<','<<
	gbªk_id
<<
	g’dl
;

511 ià(
	g´št_cmd_Œaû
){

512 
´štf
("%5 %10ld:", 
chªÃl
->
¥ec
->
commªd_Çme
[(
cmd
)].
c_¡r
(), 
şk
);

513 
	gËv
 = 0;†ev < (
	gT
::
Lev–
::
MAX
);†ev++)

514 
´štf
(" %5d", 
addr_vec
[
Ëv
]);

515 
´štf
("\n");

518 
	gveùÜ
<> 
g‘_addr_vec
(
ty³Çme
 
T
::
Commªd
 
cmd
, 
li¡
<
Reque¡
>::
™”©Ü
 
»q
){

519  
»q
->
addr_vec
;

523 
	g‹m¶©e
 <>

524 
	gveùÜ
<> 
	gCÚŒŞËr
<
	gSALP
>::
g‘_addr_vec
(

525 
SALP
::
Commªd
 
cmd
, 
li¡
<
Reque¡
>::
™”©Ü
 
»q
);

527 
	g‹m¶©e
 <>

528 
boŞ
 
	gCÚŒŞËr
<
	gSALP
>::
is_»ady
(
li¡
<
Reque¡
>::
™”©Ü
 
»q
);

530 
	g‹m¶©e
 <>

531 
	gCÚŒŞËr
<
	gALDRAM
>::
upd©e_‹mp
(
ALDRAM
::
Temp
 
cu¼’t_‹m³¿tu»
);

533 
	g‹m¶©e
 <>

534 
	gCÚŒŞËr
<
	gTLDRAM
>::
tick
();

	@DDR3.cpp

1 
	~"DDR3.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
usšg
 
Çme¥aû
 
	g¡d
;

8 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

10 
¡ršg
 
	gDDR3
::
¡ªd¬d_Çme
 = "DDR3";

12 
	gm­
<
	g¡ršg
, 
	gDDR3
::
Org
> 
DDR3
::
Üg_m­
 = {

13 {"DDR3_512Mb_x4", 
DDR3
::
Org
::
DDR3_512Mb_x4
}, {"DDR3_512Mb_x8", DDR3::Org::
DDR3_512Mb_x8
}, {"DDR3_512Mb_x16", DDR3::Org::
DDR3_512Mb_x16
},

14 {"DDR3_1Gb_x4", 
DDR3
::
Org
::
DDR3_1Gb_x4
}, {"DDR3_1Gb_x8", DDR3::Org::
DDR3_1Gb_x8
}, {"DDR3_1Gb_x16", DDR3::Org::
DDR3_1Gb_x16
},

15 {"DDR3_2Gb_x4", 
DDR3
::
Org
::
DDR3_2Gb_x4
}, {"DDR3_2Gb_x8", DDR3::Org::
DDR3_2Gb_x8
}, {"DDR3_2Gb_x16", DDR3::Org::
DDR3_2Gb_x16
},

16 {"DDR3_4Gb_x4", 
DDR3
::
Org
::
DDR3_4Gb_x4
}, {"DDR3_4Gb_x8", DDR3::Org::
DDR3_4Gb_x8
}, {"DDR3_4Gb_x16", DDR3::Org::
DDR3_4Gb_x16
},

17 {"DDR3_8Gb_x4", 
DDR3
::
Org
::
DDR3_8Gb_x4
}, {"DDR3_8Gb_x8", DDR3::Org::
DDR3_8Gb_x8
}, {"DDR3_8Gb_x16", DDR3::Org::
DDR3_8Gb_x16
},

20 
	gm­
<
	g¡ršg
, 
	gDDR3
::
S³ed
> 
DDR3
::
¥“d_m­
 = {

21 {"DDR3_800D", 
DDR3
::
S³ed
::
DDR3_800D
}, {"DDR3_800E", DDR3::S³ed::
DDR3_800E
},

22 {"DDR3_1066E", 
DDR3
::
S³ed
::
DDR3_1066E
}, {"DDR3_1066F", DDR3::S³ed::
DDR3_1066F
}, {"DDR3_1066G", DDR3::S³ed::
DDR3_1066G
},

23 {"DDR3_1333G", 
DDR3
::
S³ed
::
DDR3_1333G
}, {"DDR3_1333H", DDR3::S³ed::
DDR3_1333H
},

24 {"DDR3_1600H", 
DDR3
::
S³ed
::
DDR3_1600H
}, {"DDR3_1600J", DDR3::S³ed::
DDR3_1600J
}, {"DDR3_1600K", DDR3::S³ed::
DDR3_1600K
},

25 {"DDR3_1866K", 
DDR3
::
S³ed
::
DDR3_1866K
}, {"DDR3_1866L", DDR3::S³ed::
DDR3_1866L
},

26 {"DDR3_2133L", 
DDR3
::
S³ed
::
DDR3_2133L
}, {"DDR3_2133M", DDR3::S³ed::
DDR3_2133M
},

30 
	gDDR3
::
	$DDR3
(
Org
 
Üg
, 
S³ed
 
¥“d
) :

31 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

32 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

33 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

35 
	`š™_¥“d
();

36 
	`š™_´”eq
();

37 
	`š™_rowh™
();

38 
	`š™_rowİ’
();

39 
	`š™_Ïmbda
();

40 
	`š™_timšg
();

41 
	}
}

43 
	gDDR3
::
	$DDR3
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

44 
	$DDR3
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

46 
	}
}

48 
	gDDR3
::
	$£t_chªÃl_numb”
(
chªÃl
) {

49 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

50 
	}
}

52 
	gDDR3
::
	$£t_¿nk_numb”
(
¿nk
) {

53 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

54 
	}
}

56 
	gDDR3
::
	$š™_¥“d
()

59 
·ge
 = (
Üg_’Œy
.
dq
 * org_’Œy.
couÁ
[(
Lev–
::
CŞumn
)]) >> 13;

60 
¥“d_’Œy
.
¿‹
) {

61 800: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 4; s³ed_’Œy.
nFAW
 = (page==1) ? 16 : 20; ;

62 1066: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 27; ;

63 1333: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 5; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 30; ;

64 1600: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 24 : 32; ;

65 1866: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 26 : 33; ;

66 2133: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 27 : 34; ;

67 : 
	`as£¹
(
çl£
);

71 
ch
 = 
Üg_’Œy
.
size
;

72 
¥“d_’Œy
.
¿‹
) {

73 800: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 36 : (chip==1<<10) ? 44 : (chip==1<<11) ? 64 : (chip==1<<12) ? 104 : 140; ;

74 1066: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 48 : (chip==1<<10) ? 59 : (chip==1<<11) ? 86 : (chip==1<<12) ? 139 : 187; ;

75 1333: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 60 : (chip==1<<10) ? 74 : (chip==1<<11) ? 107 : (chip==1<<12) ? 174 : 234; ;

76 1600: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 72 : (chip==1<<10) ? 88 : (chip==1<<11) ? 128 : (chip==1<<12) ? 208 : 280; ;

77 1866: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 84 : (chip==1<<10) ? 103 : (chip==1<<11) ? 150 : (chip==1<<12) ? 243 : 327; ;

78 2133: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 96 : (chip==1<<10) ? 118 : (chip==1<<11) ? 171 : (chip==1<<12) ? 278 : 374; ;

79 : 
	`as£¹
(
çl£
);

81 
¥“d_’Œy
.
¿‹
) {

82 800: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 40 : (chip==1<<10) ? 48 : (chip==1<<11) ? 68 : (chip==1<<12) ? 108 : 144; ;

83 1066: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 54 : (chip==1<<10) ? 64 : (chip==1<<11) ? 91 : (chip==1<<12) ? 144 : 192; ;

84 1333: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 67 : (chip==1<<10) ? 80 : (chip==1<<11) ? 114 : (chip==1<<12) ? 180 : 240; ;

85 1600: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 80 : (chip==1<<10) ? 96 : (chip==1<<11) ? 136 : (chip==1<<12) ? 216 : 288; ;

86 1866: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 94 : (chip==1<<10) ? 112 : (chip==1<<11) ? 159 : (chip==1<<12) ? 252 : 336; ;

87 2133: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 107 : (chip==1<<10) ? 128 : (chip==1<<11) ? 182 : (chip==1<<12) ? 288 : 384; ;

88 : 
	`as£¹
(
çl£
);

90 
	}
}

93 
	gDDR3
::
	$š™_´”eq
()

96 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

97 (
node
->
¡©e
)) {

98 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

99 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

100 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

101 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

102 : 
	`as£¹
(
çl£
);

104 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

105 (
node
->
¡©e
)) {

106 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

107 (
S‹
::
O³Ãd
):

108 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

109  
cmd
;

110  
Commªd
::
PRE
;

111 : 
	`as£¹
(
çl£
);

115 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

116 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

119 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

120 autØ
bªk
 : 
node
->
chd»n
) {

121 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

123  
Commªd
::
PREA
;

125  
Commªd
::
REF
;};

128 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

129 (
node
->
¡©e
)) {

130 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

131 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

132 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

133 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

134 : 
	`as£¹
(
çl£
);

138 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

139 (
node
->
¡©e
)) {

140 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

141 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

142 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

143 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

144 : 
	`as£¹
(
çl£
);

146 
	}
}

150 
	gDDR3
::
	$š™_rowh™
()

153 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

154 (
node
->
¡©e
)) {

155 (
S‹
::
Clo£d
):  
çl£
;

156 (
S‹
::
O³Ãd
):

157 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

158  
Œue
;

159  
çl£
;

160 : 
	`as£¹
(
çl£
);

164 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

165 
	}
}

167 
	gDDR3
::
	$š™_rowİ’
()

170 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR3
>* 
node
, Commªd 
cmd
, 
id
) {

171 (
node
->
¡©e
)) {

172 (
S‹
::
Clo£d
):  
çl£
;

173 (
S‹
::
O³Ãd
):  
Œue
;

174 : 
	`as£¹
(
çl£
);

178 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

179 
	}
}

181 
	gDDR3
::
	$š™_Ïmbda
()

183 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

184 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

185 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

186 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

187 
node
->
¡©e
 = 
S‹
::
Clo£d
;

188 
node
->
row_¡©e
.
	`ş—r
();};

189 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

190 autØ
bªk
 : 
node
->
chd»n
) {

191 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

192 
bªk
->
row_¡©e
.
	`ş—r
();}};

193 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {};

194 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {};

195 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {};

196 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

197 
node
->
¡©e
 = 
S‹
::
Clo£d
;

198 
node
->
row_¡©e
.
	`ş—r
();};

199 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

200 
node
->
¡©e
 = 
S‹
::
Clo£d
;

201 
node
->
row_¡©e
.
	`ş—r
();};

202 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

203 autØ
bªk
 : 
node
->
chd»n
) {

204 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

206 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

209 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

210 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

211 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

212 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

213 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

214 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
DDR3
>* 
node
, 
id
) {

215 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

216 
	}
}

219 
	gDDR3
::
	$š™_timšg
()

221 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

222 
veùÜ
<
TimšgEÁry
> *
t
;

225 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

228 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

229 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

230 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

231 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

232 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

233 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

234 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

235 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

239 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

242 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

243 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

244 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

245 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

246 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

247 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

248 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

249 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

250 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

251 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

252 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

253 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

254 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

255 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

256 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

257 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

260 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

261 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

262 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

263 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

264 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

265 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

266 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

267 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

268 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

269 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

270 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

271 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

272 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

273 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

274 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

275 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

277 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

278 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

281 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

282 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

283 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

284 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

285 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

286 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

287 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

288 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

293 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

294 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

295 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

296 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

299 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

300 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

301 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

304 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

305 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

306 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

307 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

310 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

311 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

312 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

315 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

318 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

319 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

322 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

325 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

326 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

329 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

330 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

333 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

334 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

338 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

341 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

342 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

343 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

344 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

346 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

347 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

349 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

350 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

353 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

354 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

355 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

356 
	}
}

	@DDR3.h

1 #iâdeà
__DDR3_H


2 
	#__DDR3_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<m­
>

8 
	~<¡ršg
>

9 
	~<funùiÚ®
>

11 
usšg
 
Çme¥aû
 
	g¡d
;

13 
Çme¥aû
 
	g¿muÏtÜ


16 şas 
	cDDR3


18 
	gpublic
:

19 
¡ršg
 
¡ªd¬d_Çme
;

20 
şass
 
	gOrg
;

21 
şass
 
	gS³ed
;

22 
DDR3
(
Org
 
Üg
, 
S³ed
 
¥“d
);

23 
DDR3
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

25 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

26 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

28 şas 
	cLev–
 : 

30 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


34 şas 
	cCommªd
 : 

36 
ACT
, 
	gPRE
, 
	gPREA
,

37 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

38 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

39 
	gMAX


42 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

48 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

49 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

50 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

51 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

54 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

56 (
	gcmd
)) {

57 (
	gCommªd
::
ACT
):

58  
Œue
;

60  
çl£
;

64 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

66 (
	gcmd
)) {

67 (
	gCommªd
::
RD
):

68 (
Commªd
::
WR
):

69 (
Commªd
::
RDA
):

70 (
Commªd
::
WRA
):

71  
Œue
;

73  
çl£
;

77 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

79 (
	gcmd
)) {

80 (
	gCommªd
::
RDA
):

81 (
Commªd
::
WRA
):

82 (
Commªd
::
PRE
):

83 (
Commªd
::
PREA
):

84  
Œue
;

86  
çl£
;

90 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

92 (
	gcmd
)) {

93 (
	gCommªd
::
REF
):

94  
Œue
;

96  
çl£
;

102 şas 
	cS‹
 : 

104 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


105 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

106 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

110 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

111 
Commªd
::
RD
, Commªd::
WR
,

112 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


116 
	gfunùiÚ
<
Commªd
(
DRAM
<
DDR3
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

120 
	gfunùiÚ
<
boŞ
(
DRAM
<
DDR3
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

121 
	gfunùiÚ
<
boŞ
(
DRAM
<
DDR3
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

124 
	sTimšgEÁry


126 
Commªd
 
	gcmd
;

127 
	gdi¡
;

128 
	gv®
;

129 
boŞ
 
	gsiblšg
;

131 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

134 
	gfunùiÚ
<(
	gDRAM
<
	gDDR3
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

137 şas 
	cOrg
 : 

139 
DDR3_512Mb_x4
, 
	gDDR3_512Mb_x8
, 
	gDDR3_512Mb_x16
,

140 
	gDDR3_1Gb_x4
, 
	gDDR3_1Gb_x8
, 
	gDDR3_1Gb_x16
,

141 
	gDDR3_2Gb_x4
, 
	gDDR3_2Gb_x8
, 
	gDDR3_2Gb_x16
,

142 
	gDDR3_4Gb_x4
, 
	gDDR3_4Gb_x8
, 
	gDDR3_4Gb_x16
,

143 
	gDDR3_8Gb_x4
, 
	gDDR3_8Gb_x8
, 
	gDDR3_8Gb_x16
,

144 
	gMAX


147 
	sOrgEÁry
 {

148 
	gsize
;

149 
	gdq
;

150 
	gcouÁ
[(
Lev–
::
MAX
)];

151 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

157 }, 
	gÜg_’Œy
;

159 
£t_chªÃl_numb”
(
chªÃl
);

160 
£t_¿nk_numb”
(
¿nk
);

163 şas 
	cS³ed
 : 

165 
DDR3_800D
, 
	gDDR3_800E
,

166 
	gDDR3_1066E
, 
	gDDR3_1066F
, 
	gDDR3_1066G
,

167 
	gDDR3_1333G
, 
	gDDR3_1333H
,

168 
	gDDR3_1600H
, 
	gDDR3_1600J
, 
	gDDR3_1600K
,

169 
	gDDR3_1866K
, 
	gDDR3_1866L
,

170 
	gDDR3_2133L
, 
	gDDR3_2133M
,

171 
	gMAX


174 
	g´eãtch_size
 = 8;

175 
	gchªÃl_width
 = 64;

177 
	sS³edEÁry
 {

178 
	g¿‹
;

179 
	gäeq
, 
	gtCK
;

180 
	gnBL
, 
	gnCCD
, 
	gnRTRS
;

181 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnCWL
;

182 
	gnRAS
, 
	gnRC
;

183 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

184 
	gnRRD
, 
	gnFAW
;

185 
	gnRFC
, 
	gnREFI
;

186 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

187 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

188 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

203 }, 
	g¥“d_’Œy
;

205 
	g»ad_Ï‹ncy
;

207 
	g´iv©e
:

208 
š™_¥“d
();

209 
š™_Ïmbda
();

210 
š™_´”eq
();

211 
š™_rowh™
();

212 
š™_rowİ’
();

213 
š™_timšg
();

	@DDR4.cpp

1 
	~"DDR4.h
"

2 
	~"DRAM.h
"

4 
	~<veùÜ
>

5 
	~<funùiÚ®
>

6 
	~<ÿs£¹
>

8 
usšg
 
Çme¥aû
 
	g¡d
;

9 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

11 
¡ršg
 
	gDDR4
::
¡ªd¬d_Çme
 = "DDR4";

13 
	gm­
<
	g¡ršg
, 
	gDDR4
::
Org
> 
DDR4
::
Üg_m­
 = {

14 {"DDR4_2Gb_x4", 
DDR4
::
Org
::
DDR4_2Gb_x4
}, {"DDR4_2Gb_x8", DDR4::Org::
DDR4_2Gb_x8
}, {"DDR4_2Gb_x16", DDR4::Org::
DDR4_2Gb_x16
},

15 {"DDR4_4Gb_x4", 
DDR4
::
Org
::
DDR4_4Gb_x4
}, {"DDR4_4Gb_x8", DDR4::Org::
DDR4_4Gb_x8
}, {"DDR4_4Gb_x16", DDR4::Org::
DDR4_4Gb_x16
},

16 {"DDR4_8Gb_x4", 
DDR4
::
Org
::
DDR4_8Gb_x4
}, {"DDR4_8Gb_x8", DDR4::Org::
DDR4_8Gb_x8
}, {"DDR4_8Gb_x16", DDR4::Org::
DDR4_8Gb_x16
},

19 
	gm­
<
	g¡ršg
, 
	gDDR4
::
S³ed
> 
DDR4
::
¥“d_m­
 = {

20 {"DDR4_1600K", 
DDR4
::
S³ed
::
DDR4_1600K
}, {"DDR4_1600L", DDR4::S³ed::
DDR4_1600L
},

21 {"DDR4_1866M", 
DDR4
::
S³ed
::
DDR4_1866M
}, {"DDR4_1866N", DDR4::S³ed::
DDR4_1866N
},

22 {"DDR4_2133P", 
DDR4
::
S³ed
::
DDR4_2133P
}, {"DDR4_2133R", DDR4::S³ed::
DDR4_2133R
},

23 {"DDR4_2400R", 
DDR4
::
S³ed
::
DDR4_2400R
}, {"DDR4_2400U", DDR4::S³ed::
DDR4_2400U
},

27 
	gDDR4
::
	$DDR4
(
Org
 
Üg
, 
S³ed
 
¥“d
)

28 : 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

29 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

30 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

32 
	`š™_¥“d
();

33 
	`š™_´”eq
();

34 
	`š™_rowh™
();

35 
	`š™_rowİ’
();

36 
	`š™_Ïmbda
();

37 
	`š™_timšg
();

38 
	}
}

40 
	gDDR4
::
	$DDR4
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

41 
	$DDR4
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

43 
	}
}

45 
	gDDR4
::
	$£t_chªÃl_numb”
(
chªÃl
) {

46 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

47 
	}
}

49 
	gDDR4
::
	$£t_¿nk_numb”
(
¿nk
) {

50 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

51 
	}
}

53 
	gDDR4
::
	$š™_¥“d
()

55 cÚ¡ 
RRDS_TABLE
[2][4] = {

59 cÚ¡ 
RRDL_TABLE
[2][4] = {

63 cÚ¡ 
FAW_TABLE
[3][4] = {

68 cÚ¡ 
RFC_TABLE
[(
ReäeshMode
::
MAX
)][3][4] = {{

82 cÚ¡ 
REFI_TABLE
[4] = {

85 cÚ¡ 
XS_TABLE
[3][4] = {

91 
¥“d
 = 0, 
d’s™y
 = 0;

92 
¥“d_’Œy
.
¿‹
) {

93 1600: 
¥“d
 = 0; ;

94 1866: 
¥“d
 = 1; ;

95 2133: 
¥“d
 = 2; ;

96 2400: 
¥“d
 = 3; ;

97 : 
	`as£¹
(
çl£
);

99 
Üg_’Œy
.
size
 >> 10){

100 2: 
d’s™y
 = 0; ;

101 4: 
d’s™y
 = 1; ;

102 8: 
d’s™y
 = 2; ;

103 : 
	`as£¹
(
çl£
);

105 
¥“d_’Œy
.
nRRDS
 = 
RRDS_TABLE
[
Üg_’Œy
.
dq
 =ğ16? 1: 0][
¥“d
];

106 
¥“d_’Œy
.
nRRDL
 = 
RRDL_TABLE
[
Üg_’Œy
.
dq
 =ğ16? 1: 0][
¥“d
];

107 
¥“d_’Œy
.
nFAW
 = 
FAW_TABLE
[
Üg_’Œy
.
dq
 =ğ4? 0: org_’Œy.dq =ğ8? 1: 2][
¥“d
];

108 
¥“d_’Œy
.
nRFC
 = 
RFC_TABLE
[()
»äesh_mode
][
d’s™y
][
¥“d
];

109 
¥“d_’Œy
.
nREFI
 = (
REFI_TABLE
[
¥“d
] >> (
»äesh_mode
));

110 
¥“d_’Œy
.
nXS
 = 
XS_TABLE
[
d’s™y
][
¥“d
];

111 
	}
}

114 
	gDDR4
::
	$š™_´”eq
()

117 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

118 (
node
->
¡©e
)) {

119 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

120 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

121 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

122 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

123 : 
	`as£¹
(
çl£
);

125 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

126 (
node
->
¡©e
)) {

127 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

128 (
S‹
::
O³Ãd
):

129 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

130  
cmd
;

131  
Commªd
::
PRE
;

132 : 
	`as£¹
(
çl£
);

136 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

137 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

140 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

141 autØ
bg
 : 
node
->
chd»n
)

142 autØ
bªk
: 
bg
->
chd»n
) {

143 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

145  
Commªd
::
PREA
;

147  
Commªd
::
REF
;};

150 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

151 (
node
->
¡©e
)) {

152 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

153 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

154 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

155 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

156 : 
	`as£¹
(
çl£
);

160 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

161 (
node
->
¡©e
)) {

162 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

163 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

164 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

165 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

166 : 
	`as£¹
(
çl£
);

168 
	}
}

171 
	gDDR4
::
	$š™_rowh™
()

174 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

175 (
node
->
¡©e
)) {

176 (
S‹
::
Clo£d
):  
çl£
;

177 (
S‹
::
O³Ãd
):

178 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

179  
Œue
;

180  
çl£
;

181 : 
	`as£¹
(
çl£
);

185 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

186 
	}
}

188 
	gDDR4
::
	$š™_rowİ’
()

191 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR4
>* 
node
, Commªd 
cmd
, 
id
) {

192 (
node
->
¡©e
)) {

193 (
S‹
::
Clo£d
):  
çl£
;

194 (
S‹
::
O³Ãd
):  
Œue
;

195 : 
	`as£¹
(
çl£
);

199 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

200 
	}
}

202 
	gDDR4
::
	$š™_Ïmbda
()

204 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

205 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

206 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

207 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

208 
node
->
¡©e
 = 
S‹
::
Clo£d
;

209 
node
->
row_¡©e
.
	`ş—r
();};

210 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

211 autØ
bg
 : 
node
->
chd»n
)

212 autØ
bªk
 : 
bg
->
chd»n
) {

213 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

214 
bªk
->
row_¡©e
.
	`ş—r
();

216 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {};

217 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {};

218 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {};

219 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

220 
node
->
¡©e
 = 
S‹
::
Clo£d
;

221 
node
->
row_¡©e
.
	`ş—r
();};

222 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

223 
node
->
¡©e
 = 
S‹
::
Clo£d
;

224 
node
->
row_¡©e
.
	`ş—r
();};

225 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

226 autØ
bg
 : 
node
->
chd»n
)

227 autØ
bªk
 : 
bg
->
chd»n
) {

228 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

230 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

233 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

234 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

235 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

236 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

237 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

238 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
DDR4
>* 
node
, 
id
) {

239 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

240 
	}
}

243 
	gDDR4
::
	$š™_timšg
()

245 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

246 
veùÜ
<
TimšgEÁry
> *
t
;

249 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

252 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

253 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

254 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

255 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

256 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

257 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

258 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

259 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

263 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

266 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDS
});

267 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDS
});

268 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDS
});

269 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDS
});

270 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDS
});

271 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDS
});

272 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDS
});

273 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDS
});

274 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

275 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

276 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

277 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

278 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

279 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

280 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

281 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

284 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

285 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

286 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

287 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

288 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

289 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

290 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

291 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

292 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

293 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

294 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

295 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

296 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

297 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

298 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

299 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

301 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

302 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

305 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

306 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

307 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

308 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

309 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

310 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

311 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

312 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

317 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRDS
});

318 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

319 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

320 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

323 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

324 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

325 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

328 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

329 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

330 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

331 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

334 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

335 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

336 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

339 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

342 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

343 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

346 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

349 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

350 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

353 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

354 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

357 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

358 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

361 
t
 = 
timšg
[(
Lev–
::
BªkGroup
)];

363 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDL
});

364 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDL
});

365 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDL
});

366 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDL
});

367 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

368 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

369 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

370 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

371 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

372 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

373 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

374 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

375 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

376 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

377 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

378 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

381 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRDL
});

384 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

387 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

388 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

389 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

390 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

392 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

393 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

395 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

396 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

399 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

400 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

401 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

402 
	}
}

	@DDR4.h

1 #iâdeà
__DDR4_H


2 
	#__DDR4_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cDDR4


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
DDR4
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
DDR4
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

26 şas 
	cLev–
 : 

28 
ChªÃl
, 
	gRªk
, 
	gBªkGroup
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


32 şas 
	cCommªd
 : 

34 
ACT
, 
	gPRE
, 
	gPREA
,

35 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

36 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

37 
	gMAX


40 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

46 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

47 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

48 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

49 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

52 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

54 (
	gcmd
)) {

55 (
	gCommªd
::
ACT
):

56  
Œue
;

58  
çl£
;

62 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

64 (
	gcmd
)) {

65 (
	gCommªd
::
RD
):

66 (
Commªd
::
WR
):

67 (
Commªd
::
RDA
):

68 (
Commªd
::
WRA
):

69  
Œue
;

71  
çl£
;

75 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

77 (
	gcmd
)) {

78 (
	gCommªd
::
RDA
):

79 (
Commªd
::
WRA
):

80 (
Commªd
::
PRE
):

81 (
Commªd
::
PREA
):

82  
Œue
;

84  
çl£
;

88 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

90 (
	gcmd
)) {

91 (
	gCommªd
::
REF
):

92  
Œue
;

94  
çl£
;

99 şas 
	cS‹
 : 

101 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


102 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

103 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::MAX, S‹::
Clo£d
, State::Closed, State::MAX

107 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

108 
Commªd
::
RD
, Commªd::
WR
,

109 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


113 
	gfunùiÚ
<
Commªd
(
DRAM
<
DDR4
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

117 
	gfunùiÚ
<
boŞ
(
DRAM
<
DDR4
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

118 
	gfunùiÚ
<
boŞ
(
DRAM
<
DDR4
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

121 
	sTimšgEÁry


123 
Commªd
 
	gcmd
;

124 
	gdi¡
;

125 
	gv®
;

126 
boŞ
 
	gsiblšg
;

128 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

131 
	gfunùiÚ
<(
	gDRAM
<
	gDDR4
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

134 şas 
	cOrg
 : 

136 
DDR4_2Gb_x4
, 
	gDDR4_2Gb_x8
, 
	gDDR4_2Gb_x16
,

137 
	gDDR4_4Gb_x4
, 
	gDDR4_4Gb_x8
, 
	gDDR4_4Gb_x16
,

138 
	gDDR4_8Gb_x4
, 
	gDDR4_8Gb_x8
, 
	gDDR4_8Gb_x16
,

139 
	gMAX


142 
	sOrgEÁry
 {

143 
	gsize
;

144 
	gdq
;

145 
	gcouÁ
[(
Lev–
::
MAX
)];

146 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

150 }, 
	gÜg_’Œy
;

152 
£t_chªÃl_numb”
(
chªÃl
);

153 
£t_¿nk_numb”
(
¿nk
);

156 şas 
	cS³ed
 : 

158 
DDR4_1600K
, 
	gDDR4_1600L
,

159 
	gDDR4_1866M
, 
	gDDR4_1866N
,

160 
	gDDR4_2133P
, 
	gDDR4_2133R
,

161 
	gDDR4_2400R
, 
	gDDR4_2400U
,

162 
	gMAX


165 şas 
	cReäeshMode
 : 

167 
Reäesh_1X
,

168 
	gReäesh_2X
,

169 
	gReäesh_4X
,

170 
	gMAX


171 } 
	g»äesh_mode
 = 
ReäeshMode
::
Reäesh_1X
;

173 
	g´eãtch_size
 = 8;

174 
	gchªÃl_width
 = 64;

176 
	sS³edEÁry
 {

177 
	g¿‹
;

178 
	gäeq
, 
	gtCK
;

179 
	gnBL
, 
	gnCCDS
, 
	gnCCDL
, 
	gnRTRS
;

180 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnCWL
;

181 
	gnRAS
, 
	gnRC
;

182 
	gnRTP
, 
	gnWTRS
, 
	gnWTRL
, 
	gnWR
;

183 
	gnRRDS
, 
	gnRRDL
, 
	gnFAW
;

184 
	gnRFC
, 
	gnREFI
;

185 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

186 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

187 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

196 }, 
	g¥“d_’Œy
;

198 
	g»ad_Ï‹ncy
;

200 
	g´iv©e
:

201 
š™_¥“d
();

202 
š™_Ïmbda
();

203 
š™_´”eq
();

204 
š™_rowh™
();

205 
š™_rowİ’
();

206 
š™_timšg
();

	@DRAM.h

1 #iâdeà
__DRAM_H


2 
	#__DRAM_H


	)

4 
	~"Sti¡ics.h
"

5 
	~<io¡»am
>

6 
	~<veùÜ
>

7 
	~<deque
>

8 
	~<m­
>

9 
	~<funùiÚ®
>

10 
	~<®gÜ™hm
>

11 
	~<ÿs£¹
>

12 
	~<ty³_Œa™s
>

14 
usšg
 
Çme¥aû
 
	g¡d
;

16 
Çme¥aû
 
	g¿muÏtÜ


19 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

20 şas 
	cDRAM


22 
	gpublic
:

23 
SÿÏrSt
 
aùive_cyşes
;

24 
SÿÏrSt
 
	g»äesh_cyşes
;

25 
SÿÏrSt
 
	gbusy_cyşes
;

26 
SÿÏrSt
 
	gaùive_»äesh_ov”Ïp_cyşes
;

28 
SÿÏrSt
 
	g£rvšg_»que¡s
;

29 
SÿÏrSt
 
	gav”age_£rvšg_»que¡s
;

32 
DRAM
(
T
* 
¥ec
, 
ty³Çme
 T::
Lev–
 
Ëv–
);

33 ~
DRAM
();

36 
T
* 
	g¥ec
;

39 
ty³Çme
 
	gT
::
Lev–
 
Ëv–
;

40 
	gid
;

41 
	gsize
;

42 
DRAM
* 
	g·»Á
;

43 
	gveùÜ
<
	gDRAM
*> 
	gchd»n
;

46 
ty³Çme
 
	gT
::
S‹
 
¡©e
;

51 
	gm­
<, 
ty³Çme
 
	gT
::
S‹
> 
row_¡©e
;

54 
š£¹
(
DRAM
<
T
>* 
chd
);

57 
ty³Çme
 
	gT
::
Commªd
 
decode
Ñy³Çm
T
::Commªd 
cmd
, cÚ¡ * 
addr
);

60 
boŞ
 
check
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
);

63 
boŞ
 
check_row_h™
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
);

66 
boŞ
 
check_row_İ’
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
);

69 
g‘_Ãxt
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
);

72 
upd©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
);

76 
upd©e_£rvšg_»que¡s
(cÚ¡ * 
addr
, 
d–
, 
şk
);

79 
	gcur_£rvšg_»que¡s
 = 0;

80 
	gbegš_of_£rvšg
 = -1;

81 
	g’d_of_£rvšg
 = -1;

82 
	gbegš_of_cur_»qút
 = -1;

83 
	gbegš_of_»äeshšg
 = -1;

84 
	g’d_of_»äeshšg
 = -1;

85 
	g¡d
::
veùÜ
<
¡d
::
·œ
<, >> 
	g»äesh_š‹rv®s
;

88 
»gSts
(cÚ¡ 
¡d
::
¡ršg
& 
id’tif›r
);

90 
fšish
(
d¿m_cyşes
);

92 
	g´iv©e
:

94 
DRAM
(){}

97 
cur_şk
 = 0;

98 
	gÃxt
[(
T
::
Commªd
::
MAX
)];

99 
	gdeque
<> 
	g´ev
[(
T
::
Commªd
::
MAX
)];

103 
	gfunùiÚ
<
ty³Çme
 
	gT
::
Commªd
(
DRAM
<
T
>*,y³ÇmT::Commªd 
cmd
, )>* 
	g´”eq
;

108 
	gfunùiÚ
<
boŞ
(
DRAM
<
T
>*, 
ty³Çme
 T::
Commªd
 
cmd
, )>* 
	growh™
;

109 
	gfunùiÚ
<
boŞ
(
DRAM
<
T
>*, 
ty³Çme
 T::
Commªd
 
cmd
, )>* 
	growİ’
;

113 
	gfunùiÚ
<(
	gDRAM
<
	gT
>*, )>* 
	gÏmbda
;

117 
	gveùÜ
<
ty³Çme
 
	gT
::
TimšgEÁry
>* 
timšg
;

120 
upd©e_¡©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
);

121 
upd©e_timšg
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
);

126 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

127 
	gDRAM
<
	gT
>::
	$»gSts
(cÚ¡ 
¡d
::
¡ršg
& 
id’tif›r
) {

128 
aùive_cyşes


129 .
	`Çme
("aùive_cyşes" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

130 .
	`desc
("TÙ®‡ùivcyşe fÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

131 .
	`´ecisiÚ
(0)

133 
»äesh_cyşes


134 .
	`Çme
("»äesh_cyşes" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

135 .
	`desc
("(AÎ-bªk„eäesh oÆy, oÆy v®id fÜ„ªk†ev–èThsum oàcyşe th© i und”„eäesh…” memÜy cyşfÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

136 .
	`´ecisiÚ
(0)

137 .
	`æags
(
Sts
::
noz”o
)

139 
busy_cyşes


140 .
	`Çme
("busy_cyşes" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

141 .
	`desc
("(AÎ-bªk„eäesh oÆy. busy cyşe Úly inşud»äeshimš„ªk†ev–èThsum oàcyşe th©hDRAM…¬ˆi aùivÜ und”„eäesh fÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

142 .
	`´ecisiÚ
(0)

144 
aùive_»äesh_ov”Ïp_cyşes


145 .
	`Çme
("aùive_»äesh_ov”Ïp_cyşes" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

146 .
	`desc
("(AÎ-bªk„eäesh oÆy, oÆy v®id fÜ„ªk†ev–èThsum oàcyşe th©‡» bÙh‡ùivªd und”„eäesh…” memÜy cyşfÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

147 .
	`´ecisiÚ
(0)

148 .
	`æags
(
Sts
::
noz”o
)

150 
£rvšg_»que¡s


151 .
	`Çme
("£rvšg_»que¡s" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

152 .
	`desc
("Thsum oà»ad‡nd wr™»que¡ th©‡» s”ved iÀthi DRAMƒËm’ˆ³¸memÜy cyşfÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

153 .
	`´ecisiÚ
(0)

155 
av”age_£rvšg_»que¡s


156 .
	`Çme
("av”age_£rvšg_»que¡s" + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

157 .
	`desc
("Thav”agoà»ad‡nd wr™»que¡ th©‡» s”ved iÀthi DRAMƒËm’ˆ³¸memÜy cyşfÜ†ev– " + 
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
))

158 .
	`´ecisiÚ
(6)

161 ià(!
chd»n
.
	`size
()) {

166 autØ
chd
 : 
chd»n
) {

167 
chd
->
	`»gSts
(
id’tif›r
 + "_" + 
	`to_¡ršg
(
id
));

169 
	}
}

171 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

172 
	gDRAM
<
	gT
>::
	$fšish
(
d¿m_cyşes
) {

174 
busy_cyşes
 = 
aùive_cyşes
.
	`v®ue
(è+ 
»äesh_cyşes
.v®ue(è- 
aùive_»äesh_ov”Ïp_cyşes
.value();

177 
av”age_£rvšg_»que¡s
 = 
£rvšg_»que¡s
.
	`v®ue
(è/ 
d¿m_cyşes
;

179 ià(!
chd»n
.
	`size
()) {

183 autØ
chd
 : 
chd»n
) {

184 
chd
->
	`fšish
(
d¿m_cyşes
);

186 
	}
}

189 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

190 
	gDRAM
<
	gT
>::
	$DRAM
(
T
* 
¥ec
, 
ty³Çme
 T::
Lev–
 
Ëv–
) :

191 
	`¥ec
(
¥ec
), 
	`Ëv–
(
Ëv–
), 
	`id
(0), 
	$·»Á
(
NULL
)

194 
¡©e
 = 
¥ec
->
¡¬t
[()
Ëv–
];

195 
´”eq
 = 
¥ec
->´”eq[(
Ëv–
)];

196 
rowh™
 = 
¥ec
->rowh™[(
Ëv–
)];

197 
rowİ’
 = 
¥ec
->rowİ’[(
Ëv–
)];

198 
Ïmbda
 = 
¥ec
->Ïmbda[(
Ëv–
)];

199 
timšg
 = 
¥ec
->timšg[(
Ëv–
)];

201 
	`fl_n
(
Ãxt
, (
T
::
Commªd
::
MAX
), -1);

202 
cmd
 = 0; cmd < (
T
::
Commªd
::
MAX
); cmd++) {

203 
di¡
 = 0;

204 auto& 
t
 : 
timšg
[
cmd
])

205 
di¡
 = 
	`max
(di¡, 
t
.dist);

207 ià(
di¡
)

208 
´ev
[
cmd
].
	`»size
(
di¡
, -1);

212 
chd_Ëv–
 = (
Ëv–
) + 1;

213 ià(
chd_Ëv–
 =ğ(
T
::
Lev–
::
Row
))

216 
chd_max
 = 
¥ec
->
Üg_’Œy
.
couÁ
[
chd_Ëv–
];

217 ià(!
chd_max
)

221 
i
 = 0; i < 
chd_max
; i++) {

222 
DRAM
<
T
>* 
chd
 = 
Ãw
 DRAM<T>(
¥ec
, 
ty³Çme
 T::
	`Lev–
(
chd_Ëv–
));

223 
chd
->
·»Á
 = 
this
;

224 
chd
->
id
 = 
i
;

225 
chd»n
.
	`push_back
(
chd
);

228 
	}
}

230 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

231 
	gDRAM
<
	gT
>::~
	$DRAM
()

233 autØ
chd
: 
chd»n
)

234 
d–‘e
 
chd
;

235 
	}
}

238 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

239 
	gDRAM
<
	gT
>::
š£¹
(
DRAM
<
T
>* 
chd
)

241 
chd
->
·»Á
 = 
this
;

242 
	gchd
->
	gid
 = 
chd»n
.
size
();

243 
	gchd»n
.
push_back
(
chd
);

247 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

248 
ty³Çme
 
	gT
::
Commªd
 
DRAM
<
T
>::
	$decode
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
)

250 
chd_id
 = 
addr
[(
Ëv–
)+1];

251 ià(
´”eq
[(
cmd
)]) {

252 
ty³Çme
 
T
::
Commªd
 
´”eq_cmd
 = 
´”eq
[(
cmd
)](
this
, cmd, 
chd_id
);

253 ià(
´”eq_cmd
 !ğ
T
::
Commªd
::
MAX
)

254  
´”eq_cmd
;

257 ià(
chd_id
 < 0 || !
chd»n
.
	`size
())

258  
cmd
;

261  
chd»n
[
chd_id
]->
	`decode
(
cmd
, 
addr
);

262 
	}
}

266 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

267 
boŞ
 
	gDRAM
<
	gT
>::
	$check
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
)

269 ià(
Ãxt
[(
cmd
)] !ğ-1 && 
şk
 <‚ext[(cmd)])

270  
çl£
;

272 
chd_id
 = 
addr
[(
Ëv–
)+1];

273 ià(
chd_id
 < 0 || 
Ëv–
 =ğ
¥ec
->
scİe
[(
cmd
)] || !
chd»n
.
	`size
())

274  
Œue
;

277  
chd»n
[
chd_id
]->
	`check
(
cmd
, 
addr
, 
şk
);

278 
	}
}

282 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

283 
boŞ
 
	gDRAM
<
	gT
>::
	$check_row_h™
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
)

285 
chd_id
 = 
addr
[(
Ëv–
)+1];

286 ià(
rowh™
[(
cmd
)]) {

287  
rowh™
[(
cmd
)](
this
, cmd, 
chd_id
);

290 ià(
chd_id
 < 0 || !
chd»n
.
	`size
())

291  
çl£
;

294  
chd»n
[
chd_id
]->
	`check_row_h™
(
cmd
, 
addr
);

295 
	}
}

297 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

298 
boŞ
 
	gDRAM
<
	gT
>::
	$check_row_İ’
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
)

300 
chd_id
 = 
addr
[(
Ëv–
)+1];

301 ià(
rowİ’
[(
cmd
)]) {

302  
rowİ’
[(
cmd
)](
this
, cmd, 
chd_id
);

305 ià(
chd_id
 < 0 || !
chd»n
.
	`size
())

306  
çl£
;

309  
chd»n
[
chd_id
]->
	`check_row_İ’
(
cmd
, 
addr
);

310 
	}
}

312 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

313 
	gDRAM
<
	gT
>::
	$g‘_Ãxt
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
)

315 
Ãxt_şk
 = 
	`max
(
cur_şk
, 
Ãxt
[(
cmd
)]);

316 autØ
node
 = 
this
;

317 
l
 = (
Ëv–
);† < (
¥ec
->
scİe
[(
cmd
)]è&& 
node
->
chd»n
.
	`size
(è&& 
addr
[l + 1] >= 0;†++){

318 
node
 =‚ode->
chd»n
[
addr
[
l
 + 1]];

319 
Ãxt_şk
 = 
	`max
Òext_şk, 
node
->
Ãxt
[(
cmd
)]);

321  
Ãxt_şk
;

322 
	}
}

325 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

326 
	gDRAM
<
	gT
>::
	$upd©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
)

328 
cur_şk
 = 
şk
;

329 
	`upd©e_¡©e
(
cmd
, 
addr
);

330 
	`upd©e_timšg
(
cmd
, 
addr
, 
şk
);

331 
	}
}

335 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

336 
	gDRAM
<
	gT
>::
	$upd©e_¡©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
)

338 
chd_id
 = 
addr
[(
Ëv–
)+1];

339 ià(
Ïmbda
[(
cmd
)])

340 
Ïmbda
[(
cmd
)](
this
, 
chd_id
);

342 ià(
Ëv–
 =ğ
¥ec
->
scİe
[(
cmd
)] || !
chd»n
.
	`size
())

346 
chd»n
[
chd_id
]->
	`upd©e_¡©e
(
cmd
, 
addr
);

347 
	}
}

351 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

352 
	gDRAM
<
	gT
>::
	$upd©e_timšg
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ * 
addr
, 
şk
)

355 ià(
id
 !ğ
addr
[(
Ëv–
)]) {

356 auto& 
t
 : 
timšg
[(
cmd
)]) {

357 ià(!
t
.
siblšg
)

360 
	`as£¹
 (
t
.
di¡
 == 1);

362 
futu»
 = 
şk
 + 
t
.
v®
;

363 
Ãxt
[(
t
.
cmd
)] = 
	`max
Òext[Ñ.cmd)], 
futu»
);

370 ià(
´ev
[(
cmd
)].
	`size
()) {

371 
´ev
[(
cmd
)].
	`pİ_back
();

372 
´ev
[(
cmd
)].
	`push_äÚt
(
şk
);

375 auto& 
t
 : 
timšg
[(
cmd
)]) {

376 ià(
t
.
siblšg
)

379 
·¡
 = 
´ev
[(
cmd
)][
t
.
di¡
-1];

380 ià(
·¡
 < 0)

383 
futu»
 = 
·¡
 + 
t
.
v®
;

384 
Ãxt
[(
t
.
cmd
)] = 
	`max
Òext[Ñ.cmd)], 
futu»
);

386 ià(
¥ec
->
	`is_»äeshšg
(
cmd
è&& s³c->
	`is_İ’šg
(
t
.cmd)) {

387 
	`as£¹
(
·¡
 =ğ
şk
);

388 
begš_of_»äeshšg
 = 
şk
;

389 
’d_of_»äeshšg
 = 
	`max
Ónd_of_»äeshšg, 
Ãxt
[(
t
.
cmd
)]);

390 
»äesh_cyşes
 +ğ
’d_of_»äeshšg
 - 
şk
;

391 ià(
cur_£rvšg_»que¡s
 > 0) {

392 
»äesh_š‹rv®s
.
	`push_back
(
	`make_·œ
(
begš_of_»äeshšg
, 
’d_of_»äeshšg
));

399 ià(!
chd»n
.
	`size
())

403 autØ
chd
 : 
chd»n
)

404 
chd
->
	`upd©e_timšg
(
cmd
, 
addr
, 
şk
);

406 
	}
}

408 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

409 
	gDRAM
<
	gT
>::
	$upd©e_£rvšg_»que¡s
(cÚ¡ * 
addr
, 
d–
, 
şk
) {

410 
	`as£¹
(
id
 =ğ
addr
[(
Ëv–
)]);

411 
	`as£¹
(
d–
 == 1 || delta == -1);

413 ià(
begš_of_cur_»qút
 !ğ-1 && 
cur_£rvšg_»que¡s
 > 0) {

414 
£rvšg_»que¡s
 +ğ(
şk
 - 
begš_of_cur_»qút
è* 
cur_£rvšg_»que¡s
;

415 
aùive_cyşes
 +ğ
şk
 - 
begš_of_cur_»qút
;

418 
begš_of_cur_»qút
 = 
şk
;

419 
cur_£rvšg_»que¡s
 +ğ
d–
;

420 
	`as£¹
(
cur_£rvšg_»que¡s
 >= 0);

422 ià(
d–
 =ğ1 && 
cur_£rvšg_»que¡s
 == 1) {

424 
begš_of_£rvšg
 = 
şk
;

425 ià(
’d_of_»äeshšg
 > 
begš_of_£rvšg
) {

426 
aùive_»äesh_ov”Ïp_cyşes
 +ğ
’d_of_»äeshšg
 - 
begš_of_£rvšg
;

428 } ià(
cur_£rvšg_»que¡s
 == 0) {

430 
	`as£¹
(
begš_of_£rvšg
 != -1);

431 
	`as£¹
(
d–
 == -1);

432 
aùive_cyşes
 +ğ
şk
 - 
begš_of_cur_»qút
;

433 
’d_of_£rvšg
 = 
şk
;

435 cÚ¡‡uto& 
»f
: 
»äesh_š‹rv®s
) {

436 
aùive_»äesh_ov”Ïp_cyşes
 +ğ
	`mš
(
’d_of_£rvšg
, 
»f
.
£cÚd
è-„ef.
fœ¡
;

438 
»äesh_š‹rv®s
.
	`ş—r
();

441 
chd_id
 = 
addr
[(
Ëv–
) + 1];

443 ià(
chd_id
 < 0 || !
chd»n
.
	`size
(è|| ((
Ëv–
è> (
T
::
Lev–
::
Bªk
)) ) {

446 
chd»n
[
chd_id
]->
	`upd©e_£rvšg_»que¡s
(
addr
, 
d–
, 
şk
);

447 
	}
}

	@DSARP.cpp

12 
	~<veùÜ
>

13 
	~<funùiÚ®
>

14 
	~<ÿs£¹
>

15 
	~<m©h.h
>

16 
	~"DSARP.h
"

17 
	~"DRAM.h
"

19 
usšg
 
Çme¥aû
 
	g¡d
;

20 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

22 
¡ršg
 
	gDSARP
::
¡ªd¬d_Çme
 = "DSARP";

24 
	gm­
<
	g¡ršg
, 
	gDSARP
::
Org
> 
DSARP
::
Üg_m­
 = {

25 {"DSARP_8Gb_x8", 
DSARP
::
Org
::
DSARP_8Gb_x8
},

26 {"DSARP_16Gb_x9", 
DSARP
::
Org
::
DSARP_16Gb_x8
},

27 {"DSARP_32Gb_x8", 
DSARP
::
Org
::
DSARP_32Gb_x8
},

30 
	gm­
<
	g¡ršg
, 
	gDSARP
::
S³ed
> 
DSARP
::
¥“d_m­
 = {

31 {"DSARP_1333", 
DSARP
::
S³ed
::
DSARP_1333
},

34 
	gDSARP
::
	$DSARP
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
Ty³
 
ty³
, 
n_§
) :

35 
	`ty³
(
ty³
),

36 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

37 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

38 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
),

39 
	$n_§
(
n_§
)

41 
	`š™_¥“d
();

42 
	`š™_´”eq
();

43 
	`š™_rowh™
();

44 
	`š™_rowİ’
();

45 
	`š™_Ïmbda
();

46 
	`š™_timšg
();

49 
b_»f_¿nk
 = 
çl£
;

50 (
ty³
)){

51 (
Ty³
::
REFAB
):

52 
¡ªd¬d_Çme
 = "REFAB";

53 
b_»f_¿nk
 = 
Œue
;

55 (
Ty³
::
REFPB
): 
¡ªd¬d_Çme
 = "REFPB"; ;

56 (
Ty³
::
DARP
): 
¡ªd¬d_Çme
 = "DARP"; ;

57 (
Ty³
::
SARP
): 
¡ªd¬d_Çme
 = "SARP"; ;

58 (
Ty³
::
DSARP
): 
¡ªd¬d_Çme
 = "DSARP"; ;

62 
	`as£¹
(
n_§
 &&‚_sa <= 128 && (n_sa & (n_sa-1)) == 0);

63 
Üg_’Œy
.
couÁ
[(
Lev–
::
SubA¼ay
)] = 
n_§
;

64 
tmp
 = (
Üg_’Œy
.
dq
è* org_’Œy.
couÁ
[(
Lev–
::
Bªk
)] *

65 
n_§
 * 
Üg_’Œy
.
couÁ
[(
Lev–
::
CŞumn
)];

66 
Üg_’Œy
.
couÁ
[(
Lev–
::
Row
)] = (Üg_’Œy.
size
è* (1<<20è/ 
tmp
;

69 ià(!
b_»f_¿nk
)

70 
Œª¦©e
[(
Reque¡
::
Ty³
::
REFRESH
)] = 
Commªd
::
REFPB
;

71 
	}
}

73 
	gDSARP
::
	$DSARP
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
Ty³
 
ty³
, 
n_§
) :

74 
	$DSARP
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
], 
ty³
, 
n_§
è{
	}
}

76 
	gDSARP
::
	$£t_chªÃl_numb”
(
chªÃl
) {

77 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

78 
	}
}

80 
	gDSARP
::
	$£t_¿nk_numb”
(
¿nk
) {

81 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

82 
	}
}

85 
	gDSARP
::
	$š™_¥“d
()

92 cÚ¡ 
RFCAB_TABLE
[(
Org
::
MAX
)][(
S³ed
::MAX)] = {

97 cÚ¡ 
RFCPB_TABLE
[(
Org
::
MAX
)][(
S³ed
::MAX)] = {

102 cÚ¡ 
REFI_TABLE
[(
ReäeshMode
::
MAX
)][(
S³ed
::MAX)] = {

106 cÚ¡ 
REFIPB_TABLE
[(
ReäeshMode
::
MAX
)][(
S³ed
::MAX)] = {

110 
¥“d
 = 0, 
d’s™y
 = 0;

111 
¥“d_’Œy
.
¿‹
) {

112 1333: 
¥“d
 = 0; ;

113 : 
	`as£¹
(
çl£
);

115 
Üg_’Œy
.
size
 >> 10){

116 8: 
d’s™y
 = 0; ;

117 16: 
d’s™y
 = 1; ;

118 32: 
d’s™y
 = 2; ;

119 : 
	`as£¹
(
çl£
 && "Unknown density");

122 
¥“d_’Œy
.
nRFCpb
 = 
RFCPB_TABLE
[
d’s™y
][
¥“d
];

123 
¥“d_’Œy
.
nRFCab
 = 
RFCAB_TABLE
[
d’s™y
][
¥“d
];

124 
¥“d_’Œy
.
nREFI
 = 
REFI_TABLE
[(
»äesh_mode
)][
¥“d
];

125 
¥“d_’Œy
.
nREFIpb
 = 
REFIPB_TABLE
[(
»äesh_mode
)][
¥“d
];

126 
	}
}

128 
	gDSARP
::
	$š™_´”eq
()

131 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

132 (
node
->
¡©e
)) {

133 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

134 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

135 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

136 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

137 : 
	`as£¹
(
çl£
);

140 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

141 (
node
->
¡©e
)) {

142 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

143 (
S‹
::
O³Ãd
):

145 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

146  
Commªd
::
MAX
;

147  
Commªd
::
PRE
;

148 : 
	`as£¹
(
çl£
);

151 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

152 (
node
->
¡©e
)) {

153 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

154 (
S‹
::
O³Ãd
):

156 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

157  
cmd
;

158  
Commªd
::
PRE
;

159 : 
	`as£¹
(
çl£
);

163 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

164 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

165 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =…»»q[(Lev–::SubA¼ay)][(Commªd::
RD
)];

168 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

169 autØ
bªk
 : 
node
->
chd»n
) {

170 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

172  
Commªd
::
PREA
;

174  
Commªd
::
REF
;};

177 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
REFPB
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

178 ià(
node
->
¡©e
 =ğ
S‹
::
Clo£d
è 
Commªd
::
REFPB
;

179  
Commªd
::
PRE
;};

182 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

183 (
node
->
¡©e
)) {

184 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

185 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

186 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

187 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

188 : 
	`as£¹
(
çl£
);

192 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

193 (
node
->
¡©e
)) {

194 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

195 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

196 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

197 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

198 : 
	`as£¹
(
çl£
);

200 
	}
}

203 
	gDSARP
::
	$š™_rowh™
()

206 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

207 (
node
->
¡©e
)){

208 (
S‹
::
Clo£d
):  
çl£
;

209 (
S‹
::
O³Ãd
):

210 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Œue
;

211  
çl£
;

212 : 
	`as£¹
(
çl£
);

215 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owh™[(Lev–::SubA¼ay)][(Commªd::
RD
)];

216 
	}
}

218 
	gDSARP
::
	$š™_rowİ’
()

221 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, Commªd 
cmd
, 
id
) {

222 (
node
->
¡©e
)){

223 (
S‹
::
Clo£d
):  
çl£
;

224 (
S‹
::
O³Ãd
):  
Œue
;

225 : 
	`as£¹
(
çl£
);

228 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::SubA¼ay)][(Commªd::
RD
)];

229 
	}
}

231 
	gDSARP
::
	$š™_Ïmbda
()

234 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

235 
node
->
row_¡©e
.
	`ş—r
();

236 autØ
bªk
 : 
node
->
chd»n
) {

237 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

238 
bªk
->
row_¡©e
.
	`ş—r
();

239 autØ
§
 : 
bªk
->
chd»n
){

240 
§
->
¡©e
 = 
S‹
::
Clo£d
;

241 
§
->
row_¡©e
.
	`ş—r
();}}};

242 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {};

245 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

246 autØ
bªk
 : 
node
->
chd»n
) {

247 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

249 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

252 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

253 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

254 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

255 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

256 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

257 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

258 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

261 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

262 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

263 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

264 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

265 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

266 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

269 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

270 
node
->
¡©e
 = 
S‹
::
Clo£d
;

271 
node
->
row_¡©e
.
	`ş—r
();

272 autØ
§
 : 
node
->
chd»n
){

273 
§
->
¡©e
 = 
S‹
::
Clo£d
;

274 
§
->
row_¡©e
.
	`ş—r
();}};

276 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {};

277 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {};

280 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

281 
node
->
¡©e
 = 
S‹
::
Clo£d
;

282 
node
->
row_¡©e
.
	`ş—r
();};

284 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

285 
node
->
¡©e
 = 
S‹
::
Clo£d
;

286 
node
->
row_¡©e
.
	`ş—r
();};

289 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
REFPB
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

290 
	`as£¹
(
node
->
¡©e
 =ğ
S‹
::
Clo£d
);

291 
node
->
row_¡©e
.
	`ş—r
();};

294 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

295 
node
->
¡©e
 = 
S‹
::
Clo£d
;

296 
node
->
row_¡©e
.
	`ş—r
();};

297 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

298 
node
->
¡©e
 = 
S‹
::
Clo£d
;

299 
node
->
row_¡©e
.
	`ş—r
();};

302 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
DSARP
>* 
node
, 
id
) {

303 autØ
bªk
 : 
node
->
chd»n
)

304 autØ
§
 : 
bªk
->
chd»n
) {

305 ià(
§
->
¡©e
 =ğ
S‹
::
Clo£d
)

307 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

310 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

311 
	}
}

313 
	gDSARP
::
	$š™_timšg
()

315 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

316 
veùÜ
<
TimšgEÁry
> *
t
;

319 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

322 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

323 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

324 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

325 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

326 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

327 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

328 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

329 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

332 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

335 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

336 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

337 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

338 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

339 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

340 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

341 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

342 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

345 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

346 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

347 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

348 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

351 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

352 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

353 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

354 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

357 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

358 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

359 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

360 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

361 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

362 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

363 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

364 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

366 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

367 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

368 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

369 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

370 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

371 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

372 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

373 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

376 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

377 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

380 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

381 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

382 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

383 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

384 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

385 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

386 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

387 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

390 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

391 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

392 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

393 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPab
});

396 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPpb
});

397 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPab
});

398 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCab
});

401 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

402 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

403 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

404 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

407 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPpb
});

408 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPab
});

409 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

412 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFCab
});

413 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRFCab
});

414 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRFCpb
});

417 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

418 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
PDE
, 1, 1});

419 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

420 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXP
});

423 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

424 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXS
});

427 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

428 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

431 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

432 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

435 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

436 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

439 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::REFPB, 1, 
s
.
nRFCpb
 });

442 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

445 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

446 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

447 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

448 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

450 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

451 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

453 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
});

454 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRPpb
});

457 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

458 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

459 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPpb
});

460 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRPpb
});

463 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::REFPB, 1, 
s
.
nRFCpb
 });

466 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::REFPB, 1, 
s
.
nRFCpb
, 
Œue
});

467 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRRD
, 
Œue
});

468 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
, 
Œue
});

471 ià(!(
ty³
 =ğ
Ty³
::
DSARP
 ||y³ =ğTy³::
SARP
)) {

472 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRFCpb
 });

473 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
RD
, 1, 
s
.
nRFCpb
 });

474 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
RDA
, 1, 
s
.
nRFCpb
 });

475 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
WR
, 1, 
s
.
nRFCpb
 });

476 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
WRA
, 1, 
s
.
nRFCpb
 });

477 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
PRE
, 1, 
s
.
nRFCpb
 });

478 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
PREA
, 1, 
s
.
nRFCpb
 });

482 ià(
ty³
 =ğ
Ty³
::
DSARP
 ||y³ =ğTy³::
SARP
) {

483 
t
 = 
timšg
[(
Lev–
::
SubA¼ay
)];

486 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
REFPB
, 1,

487 ()
	`û
((()
s
.
nRRD
)*
nRRD_çùÜ
), 
Œue
});

488 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1,

489 ()
	`û
((()
s
.
nRRD
)*
nRRD_çùÜ
), 
Œue
});

492 
t
[(
Commªd
::
REF
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRFCab
 });

493 
t
[(
Commªd
::
REFPB
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRFCpb
 });

496 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::
RD
, 1, 
s
.
nRCD
 });

497 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::
RDA
, 1, 
s
.
nRCD
 });

498 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::
WR
, 1, 
s
.
nRCD
 });

499 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::
WRA
, 1, 
s
.
nRCD
 });

501 
t
[(
Commªd
::
RD
)].
	`push_back
Ğ{ Commªd::
PRE
, 1, 
s
.
nRTP
 });

502 
t
[(
Commªd
::
WR
)].
	`push_back
(

503 { 
Commªd
::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 });

505 
t
[(
Commªd
::
RDA
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
 });

506 
t
[(
Commªd
::
WRA
)].
	`push_back
(

507 { 
Commªd
::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRPpb
 });

510 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::ACT, 1, 
s
.
nRC
 });

511 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::
PRE
, 1, 
s
.
nRAS
 });

512 
t
[(
Commªd
::
PRE
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRPpb
 });

513 
t
[(
Commªd
::
PRE
)].
	`push_back
Ğ{ Commªd::
REFPB
, 1, 
s
.
nRPpb
 });

514 
t
[(
Commªd
::
PRE
)].
	`push_back
Ğ{ Commªd::
REF
, 1, 
s
.
nRPpb
 });

518 
t
[(
Commªd
::
ACT
)].
	`push_back
Ğ{ Commªd::ACT, 1, 
s
.
nRC
, 
Œue
 });

519 
t
[(
Commªd
::
PRE
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRPpb
, 
Œue
 });

520 
t
[(
Commªd
::
RDA
)].
	`push_back
Ğ{ Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
,

521 
Œue
 });

522 
t
[(
Commªd
::
WRA
)].
	`push_back
(

523 { 
Commªd
::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRPpb
, 
Œue
 });

525 
	}
}

	@DSARP.h

35 #iâdeà
DSARP_H_


36 
	#DSARP_H_


	)

38 
	~<veùÜ
>

39 
	~<funùiÚ®
>

40 
	~"DRAM.h
"

41 
	~"Reque¡.h
"

43 
usšg
 
Çme¥aû
 
	g¡d
;

45 
Çme¥aû
 
	g¿muÏtÜ


48 şas 
	cDSARP


50 
	gpublic
:

51 
¡ršg
 
¡ªd¬d_Çme
;

52 
şass
 
	gOrg
;

53 
şass
 
	gS³ed
;

54 
şass
 
	gTy³
;

55 
DSARP
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
Ty³
 
ty³
, 
n_§
);

56 
DSARP
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
Ty³
 
ty³
, 
n_§
);

58 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

59 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

61 şas 
	cTy³
 : 

63 
REFAB
, 
	gREFPB
, 
	gDARP
, 
	gSARP
, 
	gDSARP
, 
	gMAX


64 } 
	gty³
;

69 şas 
	cLev–
 : 

71 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gSubA¼ay
, 
	gRow
, 
	gCŞumn
, 
	gMAX


75 şas 
	cCommªd
 : 

77 
ACT
, 
	gPRE
, 
	gPREA
,

78 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

79 
	gREF
, 
	gREFPB
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

80 
	gMAX


83 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

91 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

92 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

93 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

94 
Lev–
::
Rªk
, Lev–::
Bªk
,

95 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank

98 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

100 (
	gcmd
)) {

101 (
	gCommªd
::
ACT
):

102  
Œue
;

104  
çl£
;

108 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

110 (
	gcmd
)) {

111 (
	gCommªd
::
RD
):

112 (
Commªd
::
WR
):

113 (
Commªd
::
RDA
):

114 (
Commªd
::
WRA
):

115  
Œue
;

117  
çl£
;

121 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

123 (
	gcmd
)) {

124 (
	gCommªd
::
RDA
):

125 (
Commªd
::
WRA
):

126 (
Commªd
::
PRE
):

127 (
Commªd
::
PREA
):

128  
Œue
;

130  
çl£
;

134 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

136 (
	gcmd
)) {

137 (
	gCommªd
::
REF
):

138 (
Commªd
::
REFPB
):

139  
Œue
;

141  
çl£
;

146 şas 
	cS‹
 : 

148 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


149 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

150 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

154 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

155 
Commªd
::
RD
, Commªd::
WR
,

156 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


160 
	gfunùiÚ
<
Commªd
(
DRAM
<
DSARP
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

164 
	gfunùiÚ
<
boŞ
(
DRAM
<
DSARP
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

165 
	gfunùiÚ
<
boŞ
(
DRAM
<
DSARP
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

168 
	sTimšgEÁry


170 
Commªd
 
	gcmd
;

171 
	gdi¡
;

172 
	gv®
;

173 
boŞ
 
	gsiblšg
;

175 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

178 
	gfunùiÚ
<(
	gDRAM
<
	gDSARP
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

181 şas 
	cOrg
 : 

184 
DSARP_8Gb_x8
,

185 
	gDSARP_16Gb_x8
,

186 
	gDSARP_32Gb_x8
,

187 
	gMAX


190 
	sOrgEÁry
 {

191 
	gsize
;

192 
	gdq
;

193 
	gcouÁ
[(
Lev–
::
MAX
)];

194 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

202 }, 
	gÜg_’Œy
;

204 
£t_chªÃl_numb”
(
chªÃl
);

205 
£t_¿nk_numb”
(
¿nk
);

208 şas 
	cS³ed
 : 

210 
DSARP_1333
,

211 
	gMAX


214 şas 
	cReäeshMode
 : 

216 
Reäesh_1X
,

217 
	gMAX


218 } 
	g»äesh_mode
 = 
ReäeshMode
::
Reäesh_1X
;

220 
	g´eãtch_size
 = 16;

221 
	gchªÃl_width
 = 32;

223 
	sS³edEÁry
 {

224 
	g¿‹
;

225 
	gäeq
, 
	gtCK
;

226 
	gnBL
, 
	gnCCD
, 
	gnRTRS
;

227 
	gnCL
, 
	gnRCD
, 
	gnRPpb
, 
	gnRPab
, 
	gnCWL
;

228 
	gnRAS
, 
	gnRC
;

229 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

230 
	gnRRD
, 
	gnFAW
;

231 
	gnRFCab
, 
	gnRFCpb
, 
	gnREFI
, 
	gnREFIpb
;

232 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

233 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

236 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

247 }, 
	g¥“d_’Œy
;

249 
	g»ad_Ï‹ncy
;

252 
	gn_§
;

255 
boŞ
 
	gb_»f_¿nk
;

258 
	gnRRD_çùÜ
 = 1.138;

260 
	g´iv©e
:

261 
š™_¥“d
();

262 
š™_Ïmbda
();

263 
š™_´”eq
();

264 
š™_rowh™
();

265 
š™_rowİ’
();

266 
š™_timšg
();

	@GDDR5.cpp

1 
	~"GDDR5.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
usšg
 
Çme¥aû
 
	g¡d
;

8 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

10 
¡ršg
 
	gGDDR5
::
¡ªd¬d_Çme
 = "GDDR5";

12 
	gm­
<
	g¡ršg
, 
	gGDDR5
::
Org
> 
GDDR5
::
Üg_m­
 = {

13 {"GDDR5_512Mb_x16", 
GDDR5
::
Org
::
GDDR5_512Mb_x16
}, {"GDDR5_512Mb_x32", GDDR5::Org::
GDDR5_512Mb_x32
},

14 {"GDDR5_1Gb_x16", 
GDDR5
::
Org
::
GDDR5_1Gb_x16
}, {"GDDR5_1Gb_x32", GDDR5::Org::
GDDR5_1Gb_x32
},

15 {"GDDR5_2Gb_x16", 
GDDR5
::
Org
::
GDDR5_2Gb_x16
}, {"GDDR5_2Gb_x32", GDDR5::Org::
GDDR5_2Gb_x32
},

16 {"GDDR5_4Gb_x16", 
GDDR5
::
Org
::
GDDR5_4Gb_x16
}, {"GDDR5_4Gb_x32", GDDR5::Org::
GDDR5_4Gb_x32
},

17 {"GDDR5_8Gb_x16", 
GDDR5
::
Org
::
GDDR5_8Gb_x16
}, {"GDDR5_8Gb_x32", GDDR5::Org::
GDDR5_8Gb_x32
},

20 
	gm­
<
	g¡ršg
, 
	gGDDR5
::
S³ed
> 
GDDR5
::
¥“d_m­
 = {

21 {"GDDR5_4000", 
GDDR5
::
S³ed
::
GDDR5_4000
}, {"GDDR5_4500", GDDR5::S³ed::
GDDR5_4500
},

22 {"GDDR5_5000", 
GDDR5
::
S³ed
::
GDDR5_5000
}, {"GDDR5_5500", GDDR5::S³ed::
GDDR5_5500
},

23 {"GDDR5_6000", 
GDDR5
::
S³ed
::
GDDR5_6000
}, {"GDDR5_6500", GDDR5::S³ed::
GDDR5_6500
},

24 {"GDDR5_7000", 
GDDR5
::
S³ed
::
GDDR5_7000
},

27 
	gGDDR5
::
	$GDDR5
(
Org
 
Üg
, 
S³ed
 
¥“d
) :

28 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

29 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

30 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

32 
	`š™_¥“d
();

33 
	`š™_´”eq
();

34 
	`š™_rowh™
();

35 
	`š™_rowİ’
();

36 
	`š™_Ïmbda
();

37 
	`š™_timšg
();

38 
	}
}

40 
	gGDDR5
::
	$GDDR5
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

41 
	$GDDR5
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

43 
	}
}

45 
	gGDDR5
::
	$£t_chªÃl_numb”
(
chªÃl
) {

46 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

47 
	}
}

49 
	gGDDR5
::
	$£t_¿nk_numb”
(
¿nk
) {

50 
	`as£¹
((
¿nk
 == 1) && "GDDR5„ank‚umber is fixedo 1.");

51 
	}
}

53 
	gGDDR5
::
	$š™_¥“d
()

55 cÚ¡ 
REFIL_TABLE
[(
S³ed
::
MAX
)] = {3900, 4388, 4875, 5363, 5850, 6338, 6825};

56 cÚ¡ 
REFIS_TABLE
[(
S³ed
::
MAX
)] = {1900, 2138, 2375, 2613, 2850, 3088, 3325};

57 cÚ¡ 
RFC_TABLE
[5][(
S³ed
::
MAX
)] = {

65 
¥“d
 = 0, 
d’s™y
 = 0;

66 
¥“d_’Œy
.
¿‹
){

67 4000: 
¥“d
 = 0; ;

68 4500: 
¥“d
 = 1; ;

69 5000: 
¥“d
 = 2; ;

70 5500: 
¥“d
 = 3; ;

71 6000: 
¥“d
 = 4; ;

72 6500: 
¥“d
 = 5; ;

73 7000: 
¥“d
 = 6; ;

74 : 
	`as£¹
(0);

76 
Üg_’Œy
.
size
 >> 9){

77 1: 
d’s™y
 = 0; ;

78 2: 
d’s™y
 = 1; ;

79 4: 
d’s™y
 = 2; ;

80 8: 
d’s™y
 = 3; ;

81 16: 
d’s™y
 = 4; ;

82 : 
	`as£¹
(0);

84 ià(
Üg_’Œy
.
size
 <ğ1024è
¥“d_’Œy
.
nREFI
 = 
REFIL_TABLE
[
¥“d
];

85 
¥“d_’Œy
.
nREFI
 = 
REFIS_TABLE
[
¥“d
];

86 
¥“d_’Œy
.
nRFC
 = 
RFC_TABLE
[
d’s™y
][
¥“d
];

87 
	}
}

90 
	gGDDR5
::
	$š™_´”eq
()

93 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

94 (
node
->
¡©e
)) {

95 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

96 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

97 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

98 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

99 : 
	`as£¹
(
çl£
);

101 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

102 (
node
->
¡©e
)) {

103 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

104 (
S‹
::
O³Ãd
):

105 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

106  
cmd
;

107  
Commªd
::
PRE
;

108 : 
	`as£¹
(
çl£
);

112 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

113 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

116 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

117 autØ
bg
 : 
node
->
chd»n
)

118 autØ
bªk
 : 
bg
->
chd»n
) {

119 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

121  
Commªd
::
PREA
;

123  
Commªd
::
REF
;};

126 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

127 (
node
->
¡©e
)) {

128 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

129 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

130 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

131 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

132 : 
	`as£¹
(
çl£
);

136 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

137 (
node
->
¡©e
)) {

138 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

139 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

140 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

141 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

142 : 
	`as£¹
(
çl£
);

144 
	}
}

147 
	gGDDR5
::
	$š™_rowh™
()

150 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

151 (
node
->
¡©e
)) {

152 (
S‹
::
Clo£d
):  
çl£
;

153 (
S‹
::
O³Ãd
):

154 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

155  
Œue
;

156  
çl£
;

157 : 
	`as£¹
(
çl£
);

161 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

162 
	}
}

164 
	gGDDR5
::
	$š™_rowİ’
()

167 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
GDDR5
>* 
node
, Commªd 
cmd
, 
id
) {

168 (
node
->
¡©e
)) {

169 (
S‹
::
Clo£d
):  
çl£
;

170 (
S‹
::
O³Ãd
):  
Œue
;

171 : 
	`as£¹
(
çl£
);

175 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

176 
	}
}

178 
	gGDDR5
::
	$š™_Ïmbda
()

180 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

181 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

182 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

183 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

184 
node
->
¡©e
 = 
S‹
::
Clo£d
;

185 
node
->
row_¡©e
.
	`ş—r
();};

186 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

187 autØ
bg
 : 
node
->
chd»n
)

188 autØ
bªk
 : 
bg
->
chd»n
) {

189 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

190 
bªk
->
row_¡©e
.
	`ş—r
();}};

191 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {};

192 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {};

193 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {};

194 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

195 
node
->
¡©e
 = 
S‹
::
Clo£d
;

196 
node
->
row_¡©e
.
	`ş—r
();};

197 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

198 
node
->
¡©e
 = 
S‹
::
Clo£d
;

199 
node
->
row_¡©e
.
	`ş—r
();};

200 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

201 autØ
bg
 : 
node
->
chd»n
)

202 autØ
bªk
 : 
bg
->
chd»n
) {

203 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

205 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

208 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

209 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

210 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

211 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

212 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

213 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
GDDR5
>* 
node
, 
id
) {

214 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

215 
	}
}

218 
	gGDDR5
::
	$š™_timšg
()

220 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

221 
veùÜ
<
TimšgEÁry
> *
t
;

224 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

227 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

228 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

229 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

230 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

231 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

232 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

233 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

234 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

238 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

241 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDS
});

242 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDS
});

243 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDS
});

244 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDS
});

245 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDS
});

246 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDS
});

247 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDS
});

248 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDS
});

249 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

250 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

251 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

252 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

253 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

254 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

255 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

256 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

258 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

259 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

262 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

263 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

264 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

265 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

266 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXPN
});

267 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXPN
});

268 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXPN
});

269 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXPN
});

274 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

275 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

276 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 32, 
s
.
n32AW
});

277 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

278 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

279 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::PRE, 1, 
s
.
nPPD
});

282 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

283 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

284 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

287 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

288 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXPN
});

289 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXPN
});

290 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXPN
});

293 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

294 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

295 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

298 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

301 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

302 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXPN
});

305 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

308 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

309 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXPN
});

312 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXPN
});

313 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

316 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

317 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

321 
t
 = 
timšg
[(
Lev–
::
BªkGroup
)];

323 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDL
});

324 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDL
});

325 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDL
});

326 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDL
});

327 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

328 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

329 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

330 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

331 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

332 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

333 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

334 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

337 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

340 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCDR
});

341 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCDR
});

342 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCDW
});

343 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCDW
});

345 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

346 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

348 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

349 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

352 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

353 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

354 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

355 
	}
}

	@GDDR5.h

1 #iâdeà
__GDDR5_H


2 
	#__GDDR5_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cGDDR5


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
GDDR5
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
GDDR5
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªkGroup
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPREA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

38 
	gMAX


41 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

47 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

48 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

49 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

50 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

53 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

55 (
	gcmd
)) {

56 (
	gCommªd
::
ACT
):

57  
Œue
;

59  
çl£
;

63 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

65 (
	gcmd
)) {

66 (
	gCommªd
::
RD
):

67 (
Commªd
::
WR
):

68 (
Commªd
::
RDA
):

69 (
Commªd
::
WRA
):

70  
Œue
;

72  
çl£
;

76 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

78 (
	gcmd
)) {

79 (
	gCommªd
::
RDA
):

80 (
Commªd
::
WRA
):

81 (
Commªd
::
PRE
):

82 (
Commªd
::
PREA
):

83  
Œue
;

85  
çl£
;

89 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

91 (
	gcmd
)) {

92 (
	gCommªd
::
REF
):

93  
Œue
;

95  
çl£
;

101 şas 
	cS‹
 : 

103 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


104 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

105 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::MAX, S‹::
Clo£d
, State::Closed, State::MAX

109 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

110 
Commªd
::
RD
, Commªd::
WR
,

111 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


115 
	gfunùiÚ
<
Commªd
(
DRAM
<
GDDR5
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

119 
	gfunùiÚ
<
boŞ
(
DRAM
<
GDDR5
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

120 
	gfunùiÚ
<
boŞ
(
DRAM
<
GDDR5
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

123 
	sTimšgEÁry


125 
Commªd
 
	gcmd
;

126 
	gdi¡
;

127 
	gv®
;

128 
boŞ
 
	gsiblšg
;

130 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

133 
	gfunùiÚ
<(
	gDRAM
<
	gGDDR5
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

136 şas 
	cOrg
 : 

138 
GDDR5_512Mb_x16
, 
	gGDDR5_512Mb_x32
,

139 
	gGDDR5_1Gb_x16
, 
	gGDDR5_1Gb_x32
,

140 
	gGDDR5_2Gb_x16
, 
	gGDDR5_2Gb_x32
,

141 
	gGDDR5_4Gb_x16
, 
	gGDDR5_4Gb_x32
,

142 
	gGDDR5_8Gb_x16
, 
	gGDDR5_8Gb_x32
,

143 
	gMAX


146 
	sOrgEÁry
 {

147 
	gsize
;

148 
	gdq
;

149 
	gcouÁ
[(
Lev–
::
MAX
)];

150 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

159 }, 
	gÜg_’Œy
;

161 
£t_chªÃl_numb”
(
chªÃl
);

162 
£t_¿nk_numb”
(
¿nk
);

165 şas 
	cS³ed
 : 

167 
GDDR5_4000
, 
	gGDDR5_4500
,

168 
	gGDDR5_5000
, 
	gGDDR5_5500
,

169 
	gGDDR5_6000
, 
	gGDDR5_6500
,

170 
	gGDDR5_7000
,

171 
	gMAX


174 
	g´eãtch_size
 = 8;

175 
	gchªÃl_width
 = 64;

177 
	sS³edEÁry
 {

178 
	g¿‹
;

179 
	gäeq
, 
	gtCK
;

180 
	gnBL
, 
	gnCCDS
, 
	gnCCDL
;

181 
	gnCL
, 
	gnRCDR
, 
	gnRCDW
, 
	gnRP
, 
	gnCWL
;

182 
	gnRAS
, 
	gnRC
;

183 
	gnPPD
, 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

184 
	gnRRD
, 
	gnFAW
, 
	gn32AW
;

185 
	gnRFC
, 
	gnREFI
;

186 
	gnPD
, 
	gnXPN
, 
	gnLK
;

187 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

188 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

196 }, 
	g¥“d_’Œy
;

198 
	g»ad_Ï‹ncy
;

200 
	g´iv©e
:

201 
š™_¥“d
();

202 
š™_Ïmbda
();

203 
š™_´”eq
();

204 
š™_rowh™
();

205 
š™_rowİ’
();

206 
š™_timšg
();

	@Gem5Wrapper.cpp

1 
	~<m­
>

3 
	~"Gem5W¿µ”.h
"

4 
	~"CÚfig.h
"

5 
	~"Reque¡.h
"

6 
	~"MemÜyFaùÜy.h
"

7 
	~"MemÜy.h
"

8 
	~"DDR3.h
"

9 
	~"DDR4.h
"

10 
	~"LPDDR3.h
"

11 
	~"LPDDR4.h
"

12 
	~"GDDR5.h
"

13 
	~"WideIO.h
"

14 
	~"WideIO2.h
"

15 
	~"HBM.h
"

16 
	~"SALP.h
"

18 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

20 
	gm­
<
	g¡ršg
, 
	gfunùiÚ
<
	gMemÜyBa£
 *(cÚ¡ 
	gCÚfig
&, )> > 
	gÇme_to_func
 = {

21 {"DDR3", &
MemÜyFaùÜy
<
DDR3
>::
ü—‹
}, {"DDR4", &MemÜyFaùÜy<
DDR4
>::create},

22 {"LPDDR3", &
MemÜyFaùÜy
<
LPDDR3
>::
ü—‹
}, {"LPDDR4", &MemÜyFaùÜy<
LPDDR4
>::create},

23 {"GDDR5", &
MemÜyFaùÜy
<
GDDR5
>::
ü—‹
},

24 {"WideIO", &
MemÜyFaùÜy
<
WideIO
>::
ü—‹
}, {"WideIO2", &MemÜyFaùÜy<
WideIO2
>::create},

25 {"HBM", &
MemÜyFaùÜy
<
HBM
>::
ü—‹
},

26 {"SALP-1", &
MemÜyFaùÜy
<
SALP
>::
ü—‹
}, {"SALP-2", &MemoryFactory<SALP>::create}, {"SALP-MASA", &MemoryFactory<SALP>::create},

30 
	gGem5W¿µ”
::
	$Gem5W¿µ”
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
)

32 cÚ¡ 
¡ršg
& 
¡d_Çme
 = 
cÚfigs
["standard"];

33 
	`as£¹
(
Çme_to_func
.
	`fšd
(
¡d_Çme
è!ğÇme_to_func.
	`’d
() && "unrecognized standard‚ame");

34 
mem
 = 
Çme_to_func
[
¡d_Çme
](
cÚfigs
, 
ÿch–še
);

35 
tCK
 = 
mem
->
	`şk_ns
();

36 
	}
}

39 
	gGem5W¿µ”
::~
	$Gem5W¿µ”
() {

40 
d–‘e
 
mem
;

41 
	}
}

43 
	gGem5W¿µ”
::
	$tick
()

45 
mem
->
	`tick
();

46 
	}
}

48 
boŞ
 
	gGem5W¿µ”
::
	$£nd
(
Reque¡
 
»q
)

50  
mem
->
	`£nd
(
»q
);

51 
	}
}

53 
	gGem5W¿µ”
::
	$fšish
() {

54 
mem
->
	`fšish
();

55 
	}
}

	@Gem5Wrapper.h

1 #iâdeà
__GEM5_WRAPPER_H


2 
	#__GEM5_WRAPPER_H


	)

4 
	~<¡ršg
>

6 
	~"CÚfig.h
"

8 
usšg
 
Çme¥aû
 
	g¡d
;

10 
Çme¥aû
 
	g¿muÏtÜ


13 
şass
 
	gReque¡
;

14 
şass
 
	gMemÜyBa£
;

16 şas 
	cGem5W¿µ”


18 
	g´iv©e
:

19 
MemÜyBa£
 *
mem
;

20 
	gpublic
:

21 
tCK
;

22 
Gem5W¿µ”
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
);

23 ~
Gem5W¿µ”
();

24 
tick
();

25 
boŞ
 
£nd
(
Reque¡
 
»q
);

26 
fšish
();

	@HBM.cpp

1 
	~"HBM.h
"

2 
	~"DRAM.h
"

4 
	~<veùÜ
>

5 
	~<funùiÚ®
>

6 
	~<ÿs£¹
>

8 
usšg
 
Çme¥aû
 
	g¡d
;

9 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

11 
¡ršg
 
	gHBM
::
¡ªd¬d_Çme
 = "HBM";

13 
	gm­
<
	g¡ršg
, 
	gHBM
::
Org
> 
HBM
::
Üg_m­
 = {

14 {"HBM_1Gb", 
HBM
::
Org
::
HBM_1Gb
},

15 {"HBM_2Gb", 
HBM
::
Org
::
HBM_2Gb
},

16 {"HBM_4Gb", 
HBM
::
Org
::
HBM_4Gb
},

19 
	gm­
<
	g¡ršg
, 
	gHBM
::
S³ed
> 
HBM
::
¥“d_m­
 = {

20 {"HBM_1Gbps", 
HBM
::
S³ed
::
HBM_1Gbps
},

23 
	gHBM
::
	$HBM
(
Org
 
Üg
, 
S³ed
 
¥“d
)

24 : 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

25 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

26 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

28 
	`š™_¥“d
();

29 
	`š™_´”eq
();

30 
	`š™_rowh™
();

31 
	`š™_rowİ’
();

32 
	`š™_Ïmbda
();

33 
	`š™_timšg
();

34 
	}
}

36 
	gHBM
::
	$HBM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

37 
	$HBM
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

39 
	}
}

41 
	gHBM
::
	$£t_chªÃl_numb”
(
chªÃl
) {

42 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

43 
	}
}

45 
	gHBM
::
	$£t_¿nk_numb”
(
¿nk
) {

46 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

47 
	}
}

50 
	gHBM
::
	$š™_¥“d
()

52 cÚ¡ 
RFC_TABLE
[(
S³ed
::
MAX
)][(
Org
::MAX)] = {

55 cÚ¡ 
REFI1B_TABLE
[(
S³ed
::
MAX
)][(
Org
::MAX)] = {

58 cÚ¡ 
XS_TABLE
[(
S³ed
::
MAX
)][(
Org
::MAX)] = {

62 
¥“d
 = 0, 
d’s™y
 = 0;

63 
¥“d_’Œy
.
¿‹
) {

64 1000: 
¥“d
 = 0; ;

65 : 
	`as£¹
(
çl£
);

67 
Üg_’Œy
.
size
 >> 10){

68 1: 
d’s™y
 = 0; ;

69 2: 
d’s™y
 = 1; ;

70 4: 
d’s™y
 = 2; ;

71 : 
	`as£¹
(
çl£
);

73 
¥“d_’Œy
.
nRFC
 = 
RFC_TABLE
[
¥“d
][
d’s™y
];

74 
¥“d_’Œy
.
nREFI1B
 = 
REFI1B_TABLE
[
¥“d
][
d’s™y
];

75 
¥“d_’Œy
.
nXS
 = 
XS_TABLE
[
¥“d
][
d’s™y
];

76 
	}
}

79 
	gHBM
::
	$š™_´”eq
()

82 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

83 (
node
->
¡©e
)) {

84 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

85 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

86 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

87 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

88 : 
	`as£¹
(
çl£
);

90 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

91 (
node
->
¡©e
)) {

92 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

93 (
S‹
::
O³Ãd
):

94 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

95  
cmd
;

96  
Commªd
::
PRE
;

97 : 
	`as£¹
(
çl£
);

101 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

102 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

105 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

106 autØ
bg
 : 
node
->
chd»n
)

107 autØ
bªk
: 
bg
->
chd»n
) {

108 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

110  
Commªd
::
PREA
;

112  
Commªd
::
REF
;};

115 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
REFSB
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

116 ià(
node
->
¡©e
 =ğ
S‹
::
Clo£d
è 
Commªd
::
REFSB
;

117  
Commªd
::
PRE
;};

120 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

121 (
node
->
¡©e
)) {

122 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

123 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

124 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

125 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

126 : 
	`as£¹
(
çl£
);

130 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

131 (
node
->
¡©e
)) {

132 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

133 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

134 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

135 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

136 : 
	`as£¹
(
çl£
);

138 
	}
}

141 
	gHBM
::
	$š™_rowh™
()

144 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

145 (
node
->
¡©e
)) {

146 (
S‹
::
Clo£d
):  
çl£
;

147 (
S‹
::
O³Ãd
):

148 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

149  
Œue
;

150  
çl£
;

151 : 
	`as£¹
(
çl£
);

155 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

156 
	}
}

158 
	gHBM
::
	$š™_rowİ’
()

161 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
HBM
>* 
node
, Commªd 
cmd
, 
id
) {

162 (
node
->
¡©e
)) {

163 (
S‹
::
Clo£d
):  
çl£
;

164 (
S‹
::
O³Ãd
):  
Œue
;

165 : 
	`as£¹
(
çl£
);

169 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

170 
	}
}

172 
	gHBM
::
	$š™_Ïmbda
()

174 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

175 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

176 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

177 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

178 
node
->
¡©e
 = 
S‹
::
Clo£d
;

179 
node
->
row_¡©e
.
	`ş—r
();};

180 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

181 autØ
bg
 : 
node
->
chd»n
)

182 autØ
bªk
 : 
bg
->
chd»n
) {

183 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

184 
bªk
->
row_¡©e
.
	`ş—r
();

186 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {};

187 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {};

188 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {};

189 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

190 
node
->
¡©e
 = 
S‹
::
Clo£d
;

191 
node
->
row_¡©e
.
	`ş—r
();};

192 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

193 
node
->
¡©e
 = 
S‹
::
Clo£d
;

194 
node
->
row_¡©e
.
	`ş—r
();};

195 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

196 autØ
bg
 : 
node
->
chd»n
)

197 autØ
bªk
 : 
bg
->
chd»n
) {

198 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

200 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

203 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

204 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

205 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

206 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

207 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

208 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
HBM
>* 
node
, 
id
) {

209 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

210 
	}
}

213 
	gHBM
::
	$š™_timšg
()

215 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

216 
veùÜ
<
TimšgEÁry
> *
t
;

219 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

222 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

223 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

224 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

225 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

226 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

227 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

228 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

229 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

233 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

236 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDS
});

237 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDS
});

238 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDS
});

239 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDS
});

240 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDS
});

241 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDS
});

242 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDS
});

243 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDS
});

244 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

245 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

246 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

247 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCDS
 + 2 - s.
nCWL
});

248 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

249 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

250 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

251 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRS
});

253 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

254 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

257 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

258 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

259 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

260 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

261 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

262 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

263 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

264 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

269 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRDS
});

270 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

271 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

272 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

275 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

276 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

277 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

280 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

281 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

282 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

283 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

286 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

287 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

288 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

291 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

294 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

295 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

298 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

301 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

302 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

305 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

306 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

309 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

310 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

313 
t
 = 
timšg
[(
Lev–
::
BªkGroup
)];

315 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCDL
});

316 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCDL
});

317 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCDL
});

318 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCDL
});

319 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

320 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

321 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

322 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

323 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCDL
});

324 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCDL
});

325 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCDL
});

326 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCDL
});

327 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

328 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

329 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

330 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTRL
});

333 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRDL
});

336 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

339 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCDR
});

340 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCDR
});

341 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCDW
});

342 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCDW
});

344 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

345 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

347 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

348 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

351 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

352 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

353 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

356 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REFSB
, 1, 
s
.
nRP
});

357 
t
[(
Commªd
::
REFSB
)].
	`push_back
({Commªd::REFSB, 1, 
s
.
nRFC
});

358 
t
[(
Commªd
::
REFSB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

359 
	}
}

	@HBM.h

1 #iâdeà
__HBM_H


2 
	#__HBM_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cHBM


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
HBM
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
HBM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªkGroup
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPREA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gREFSB
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

38 
	gMAX


45 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

51 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

52 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

53 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

54 
Lev–
::
Rªk
, Lev–::
Bªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

57 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

59 (
	gcmd
)) {

60 (
	gCommªd
::
ACT
):

61  
Œue
;

63  
çl£
;

67 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

69 (
	gcmd
)) {

70 (
	gCommªd
::
RD
):

71 (
Commªd
::
WR
):

72 (
Commªd
::
RDA
):

73 (
Commªd
::
WRA
):

74  
Œue
;

76  
çl£
;

80 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

82 (
	gcmd
)) {

83 (
	gCommªd
::
RDA
):

84 (
Commªd
::
WRA
):

85 (
Commªd
::
PRE
):

86 (
Commªd
::
PREA
):

87  
Œue
;

89  
çl£
;

93 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

95 (
	gcmd
)) {

96 (
	gCommªd
::
REF
):

97 (
Commªd
::
REFSB
):

98  
Œue
;

100  
çl£
;

105 şas 
	cS‹
 : 

107 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


108 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

109 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::MAX, S‹::
Clo£d
, State::Closed, State::MAX

113 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

114 
Commªd
::
RD
, Commªd::
WR
,

115 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


119 
	gfunùiÚ
<
Commªd
(
DRAM
<
HBM
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

123 
	gfunùiÚ
<
boŞ
(
DRAM
<
HBM
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

124 
	gfunùiÚ
<
boŞ
(
DRAM
<
HBM
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

127 
	sTimšgEÁry


129 
Commªd
 
	gcmd
;

130 
	gdi¡
;

131 
	gv®
;

132 
boŞ
 
	gsiblšg
;

134 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

137 
	gfunùiÚ
<(
	gDRAM
<
	gHBM
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

140 şas 
	cOrg
 : 

142 
HBM_1Gb
,

143 
	gHBM_2Gb
,

144 
	gHBM_4Gb
,

145 
	gMAX


148 
	sOrgEÁry
 {

149 
	gsize
;

150 
	gdq
;

151 
	gcouÁ
[(
Lev–
::
MAX
)];

152 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

156 }, 
	gÜg_’Œy
;

158 
£t_chªÃl_numb”
(
chªÃl
);

159 
£t_¿nk_numb”
(
¿nk
);

162 şas 
	cS³ed
 : 

164 
HBM_1Gbps
,

165 
	gMAX


168 
	g´eãtch_size
 = 4;

169 
	gchªÃl_width
 = 128;

171 
	sS³edEÁry
 {

172 
	g¿‹
;

173 
	gäeq
, 
	gtCK
;

174 
	gnBL
, 
	gnCCDS
, 
	gnCCDL
;

175 
	gnCL
, 
	gnRCDR
, 
	gnRCDW
, 
	gnRP
, 
	gnCWL
;

176 
	gnRAS
, 
	gnRC
;

177 
	gnRTP
, 
	gnWTRS
, 
	gnWTRL
, 
	gnWR
;

178 
	gnRRDS
, 
	gnRRDL
, 
	gnFAW
;

179 
	gnRFC
, 
	gnREFI
, 
	gnREFI1B
;

180 
	gnPD
, 
	gnXP
;

181 
	gnCKESR
, 
	gnXS
;

182 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

184 }, 
	g¥“d_’Œy
;

186 
	g»ad_Ï‹ncy
;

188 
	g´iv©e
:

189 
š™_¥“d
();

190 
š™_Ïmbda
();

191 
š™_´”eq
();

192 
š™_rowh™
();

193 
š™_rowİ’
();

194 
š™_timšg
();

	@LPDDR3.cpp

1 
	~"LPDDR3.h
"

2 
	~"DRAM.h
"

4 
	~<veùÜ
>

5 
	~<funùiÚ®
>

6 
	~<ÿs£¹
>

8 
usšg
 
Çme¥aû
 
	g¡d
;

9 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

11 
¡ršg
 
	gLPDDR3
::
¡ªd¬d_Çme
 = "LPDDR3";

13 
	gm­
<
	g¡ršg
, 
	gLPDDR3
::
Org
> 
LPDDR3
::
Üg_m­
 = {

14 {"LPDDR3_4Gb_x16", 
LPDDR3
::
Org
::
LPDDR3_4Gb_x16
}, {"LPDDR3_4Gb_x32", LPDDR3::Org::
LPDDR3_4Gb_x32
},

15 {"LPDDR3_6Gb_x16", 
LPDDR3
::
Org
::
LPDDR3_6Gb_x16
}, {"LPDDR3_6Gb_x32", LPDDR3::Org::
LPDDR3_6Gb_x32
},

16 {"LPDDR3_8Gb_x16", 
LPDDR3
::
Org
::
LPDDR3_8Gb_x16
}, {"LPDDR3_8Gb_x32", LPDDR3::Org::
LPDDR3_8Gb_x32
},

17 {"LPDDR3_12Gb_x16", 
LPDDR3
::
Org
::
LPDDR3_12Gb_x16
}, {"LPDDR3_12Gb_x32", LPDDR3::Org::
LPDDR3_12Gb_x32
},

18 {"LPDDR3_16Gb_x16", 
LPDDR3
::
Org
::
LPDDR3_16Gb_x16
}, {"LPDDR3_16Gb_x32", LPDDR3::Org::
LPDDR3_16Gb_x32
},

21 
	gm­
<
	g¡ršg
, 
	gLPDDR3
::
S³ed
> 
LPDDR3
::
¥“d_m­
 = {

22 {"LPDDR3_1333", 
LPDDR3
::
S³ed
::
LPDDR3_1333
},

23 {"LPDDR3_1600", 
LPDDR3
::
S³ed
::
LPDDR3_1600
},

24 {"LPDDR3_1866", 
LPDDR3
::
S³ed
::
LPDDR3_1866
},

25 {"LPDDR3_2133", 
LPDDR3
::
S³ed
::
LPDDR3_2133
},

28 
	gLPDDR3
::
	$LPDDR3
(
Org
 
Üg
, 
S³ed
 
¥“d
)

29 : 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

30 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

31 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nDQSCK
 + s³ed_’Œy.
nBL
)

33 
	`š™_¥“d
();

34 
	`š™_´”eq
();

35 
	`š™_rowh™
();

36 
	`š™_rowİ’
();

37 
	`š™_Ïmbda
();

38 
	`š™_timšg
();

39 
	}
}

41 
	gLPDDR3
::
	$LPDDR3
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

42 
	$LPDDR3
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

44 
	}
}

46 
	gLPDDR3
::
	$£t_chªÃl_numb”
(
chªÃl
) {

47 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

48 
	}
}

50 
	gLPDDR3
::
	$£t_¿nk_numb”
(
¿nk
) {

51 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

52 
	}
}

54 
	gLPDDR3
::
	$š™_¥“d
()

58 cÚ¡ 
RFCPB_TABLE
[3][4] = {

64 cÚ¡ 
RFCAB_TABLE
[3][4] = {

70 cÚ¡ 
XSR_TABLE
[3][4] = {

76 
¥“d
 = 0, 
d’s™y
 = 0;

77 
¥“d_’Œy
.
¿‹
) {

78 1333: 
¥“d
 = 0; ;

79 1600: 
¥“d
 = 1; ;

80 1866: 
¥“d
 = 2; ;

81 2133: 
¥“d
 = 3; ;

82 : 
	`as£¹
(
çl£
);

84 
Üg_’Œy
.
size
 >> 10){

85 4: 
d’s™y
 = 0; ;

86 6: 
d’s™y
 = 1; ;

87 8: 
d’s™y
 = 2; ;

88 : 
	`as£¹
(
çl£
 && "12Gb/16Gb is still TBD");

90 
¥“d_’Œy
.
nRFCpb
 = 
RFCPB_TABLE
[
d’s™y
][
¥“d
];

91 
¥“d_’Œy
.
nRFCab
 = 
RFCAB_TABLE
[
d’s™y
][
¥“d
];

92 
¥“d_’Œy
.
nXSR
 = 
XSR_TABLE
[
d’s™y
][
¥“d
];

93 
	}
}

96 
	gLPDDR3
::
	$š™_´”eq
()

99 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

100 (
node
->
¡©e
)) {

101 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

102 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

103 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

104 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

105 : 
	`as£¹
(
çl£
);

107 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

108 (
node
->
¡©e
)) {

109 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

110 (
S‹
::
O³Ãd
):

111 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

112  
cmd
;

113  
Commªd
::
PRE
;

114 : 
	`as£¹
(
çl£
);

118 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

119 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

122 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

123 autØ
bªk
 : 
node
->
chd»n
) {

124 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

126  
Commªd
::
PRA
;

128  
Commªd
::
REF
;};

131 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
REFPB
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

132 ià(
node
->
¡©e
 =ğ
S‹
::
Clo£d
è 
Commªd
::
REFPB
;

133  
Commªd
::
PRE
;};

136 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

137 (
node
->
¡©e
)) {

138 (
S‹
::
Pow”Up
):  
Commªd
::
PD
;

139 (
S‹
::
AùPow”Down
):  
Commªd
::
PD
;

140 (
S‹
::
P»Pow”Down
):  
Commªd
::
PD
;

141 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

142 : 
	`as£¹
(
çl£
);

146 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

147 (
node
->
¡©e
)) {

148 (
S‹
::
Pow”Up
):  
Commªd
::
SREF
;

149 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

150 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

151 (
S‹
::
S–fReäesh
):  
Commªd
::
SREF
;

152 : 
	`as£¹
(
çl£
);

154 
	}
}

157 
	gLPDDR3
::
	$š™_rowh™
()

160 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

161 (
node
->
¡©e
)) {

162 (
S‹
::
Clo£d
):  
çl£
;

163 (
S‹
::
O³Ãd
):

164 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

165  
Œue
;

166  
çl£
;

167 : 
	`as£¹
(
çl£
);

171 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

172 
	}
}

174 
	gLPDDR3
::
	$š™_rowİ’
()

177 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, Commªd 
cmd
, 
id
) {

178 (
node
->
¡©e
)) {

179 (
S‹
::
Clo£d
):  
çl£
;

180 (
S‹
::
O³Ãd
):  
Œue
;

181 : 
	`as£¹
(
çl£
);

185 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

186 
	}
}

188 
	gLPDDR3
::
	$š™_Ïmbda
()

190 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

191 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

192 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

193 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

194 
node
->
¡©e
 = 
S‹
::
Clo£d
;

195 
node
->
row_¡©e
.
	`ş—r
();};

196 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRA
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

197 autØ
bªk
 : 
node
->
chd»n
) {

198 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

199 
bªk
->
row_¡©e
.
	`ş—r
();}};

200 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {};

201 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {};

202 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {};

203 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

204 
node
->
¡©e
 = 
S‹
::
Clo£d
;

205 
node
->
row_¡©e
.
	`ş—r
();};

206 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

207 
node
->
¡©e
 = 
S‹
::
Clo£d
;

208 
node
->
row_¡©e
.
	`ş—r
();};

209 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

210 autØ
bªk
 : 
node
->
chd»n
) {

211 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

213 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

216 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

217 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

218 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

219 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

220 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

221 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREFX
)] = [] (
DRAM
<
LPDDR3
>* 
node
, 
id
) {

222 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

223 
	}
}

226 
	gLPDDR3
::
	$š™_timšg
()

228 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

229 
veùÜ
<
TimšgEÁry
> *
t
;

232 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

235 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

236 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

237 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

238 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

239 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

240 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

241 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

242 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

246 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

249 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

250 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

251 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

252 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

253 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

254 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

255 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

256 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

258 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

259 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

260 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

261 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

263 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

264 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

265 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

266 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

269 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

270 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

271 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

272 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

273 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

274 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

275 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

276 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

277 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

278 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

279 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

280 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

281 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

282 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

283 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

284 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

287 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRTP
});

288 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

291 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

292 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

293 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

294 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

295 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

296 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

297 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

298 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

301 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

302 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

303 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRAS
});

304 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPab
});

307 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPpb
});

308 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPab
});

309 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCab
});

312 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PD
, 1, 1});

313 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

314 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

315 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nXP
});

318 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPpb
});

319 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPab
});

320 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXSR
});

323 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFCab
});

324 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRFCab
});

325 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRFCpb
});

328 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PD
, 1, 1});

329 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
PD
, 1, 1});

330 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

331 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXP
});

334 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXSR
});

335 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXSR
});

338 
t
[(
Commªd
::
PD
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nCKE
});

339 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXP
});

342 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXP
});

343 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXSR
});

346 
t
[(
Commªd
::
SREF
)].
	`push_back
({Commªd::
SREFX
, 1, 
s
.
nCKESR
});

347 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXSR
});

350 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

353 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

354 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

355 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

356 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

358 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

359 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

361 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
});

362 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRPpb
});

365 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

366 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

367 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPpb
});

368 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRPpb
});

371 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRRD
, 
Œue
});

372 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
, 
Œue
});

375 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::REFPB, 1, 
s
.
nRFCpb
});

376 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCpb
});

377 
	}
}

	@LPDDR3.h

1 #iâdeà
__LPDDR3_H


2 
	#__LPDDR3_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cLPDDR3


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
LPDDR3
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
LPDDR3
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPRA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gREFPB
, 
	gPD
, 
	gPDX
, 
	gSREF
, 
	gSREFX
,

38 
	gMAX


41 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

47 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

48 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

49 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

50 
Lev–
::
Rªk
, Lev–::
Bªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

53 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

55 (
	gcmd
)) {

56 (
	gCommªd
::
ACT
):

57  
Œue
;

59  
çl£
;

63 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

65 (
	gcmd
)) {

66 (
	gCommªd
::
RD
):

67 (
Commªd
::
WR
):

68 (
Commªd
::
RDA
):

69 (
Commªd
::
WRA
):

70  
Œue
;

72  
çl£
;

76 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

78 (
	gcmd
)) {

79 (
	gCommªd
::
RDA
):

80 (
Commªd
::
WRA
):

81 (
Commªd
::
PRE
):

82 (
Commªd
::
PRA
):

83  
Œue
;

85  
çl£
;

89 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

91 (
	gcmd
)) {

92 (
	gCommªd
::
REF
):

93 (
Commªd
::
REFPB
):

94  
Œue
;

96  
çl£
;

101 şas 
	cS‹
 : 

103 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


104 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

105 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

109 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

110 
Commªd
::
RD
, Commªd::
WR
,

111 
Commªd
::
REF
, Commªd::
PD
, Commªd::
SREF


115 
	gfunùiÚ
<
Commªd
(
DRAM
<
LPDDR3
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

119 
	gfunùiÚ
<
boŞ
(
DRAM
<
LPDDR3
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

120 
	gfunùiÚ
<
boŞ
(
DRAM
<
LPDDR3
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

123 
	sTimšgEÁry


125 
Commªd
 
	gcmd
;

126 
	gdi¡
;

127 
	gv®
;

128 
boŞ
 
	gsiblšg
;

130 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

133 
	gfunùiÚ
<(
	gDRAM
<
	gLPDDR3
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

136 şas 
	cOrg
 : 

138 
LPDDR3_4Gb_x16
, 
	gLPDDR3_4Gb_x32
,

139 
	gLPDDR3_6Gb_x16
, 
	gLPDDR3_6Gb_x32
,

140 
	gLPDDR3_8Gb_x16
, 
	gLPDDR3_8Gb_x32
,

141 
	gLPDDR3_12Gb_x16
, 
	gLPDDR3_12Gb_x32
,

142 
	gLPDDR3_16Gb_x16
, 
	gLPDDR3_16Gb_x32
,

143 
	gMAX


146 
	sOrgEÁry
 {

147 
	gsize
;

148 
	gdq
;

149 
	gcouÁ
[(
Lev–
::
MAX
)];

150 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

156 }, 
	gÜg_’Œy
;

158 
£t_chªÃl_numb”
(
chªÃl
);

159 
£t_¿nk_numb”
(
¿nk
);

162 şas 
	cS³ed
 : 

164 
LPDDR3_1333
,

165 
	gLPDDR3_1600
,

166 
	gLPDDR3_1866
,

167 
	gLPDDR3_2133
,

168 
	gMAX


171 
	g´eãtch_size
 = 8;

172 
	gchªÃl_width
 = 64;

174 
	sS³edEÁry
 {

175 
	g¿‹
;

176 
	gäeq
, 
	gtCK
;

177 
	gnBL
, 
	gnCCD
, 
	gnRTRS
, 
	gnDQSCK
;

178 
	gnCL
, 
	gnRCD
, 
	gnRPpb
, 
	gnRPab
, 
	gnCWL
;

179 
	gnRAS
, 
	gnRC
;

180 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

181 
	gnRRD
, 
	gnFAW
;

182 
	gnRFCab
, 
	gnRFCpb
, 
	gnREFI
;

183 
	gnCKE
, 
	gnXP
;

184 
	gnCKESR
, 
	gnXSR
;

185 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

190 }, 
	g¥“d_’Œy
;

195 
	g»ad_Ï‹ncy
;

197 
	g´iv©e
:

198 
š™_¥“d
();

199 
š™_Ïmbda
();

200 
š™_´”eq
();

201 
š™_rowh™
();

202 
š™_rowİ’
();

203 
š™_timšg
();

	@LPDDR4.cpp

1 
	~"LPDDR4.h
"

2 
	~"DRAM.h
"

4 
	~<veùÜ
>

5 
	~<funùiÚ®
>

6 
	~<ÿs£¹
>

8 
usšg
 
Çme¥aû
 
	g¡d
;

9 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

11 
¡ršg
 
	gLPDDR4
::
¡ªd¬d_Çme
 = "LPDDR4";

13 
	gm­
<
	g¡ršg
, 
	gLPDDR4
::
Org
> 
LPDDR4
::
Üg_m­
 = {

14 {"LPDDR4_4Gb_x16", 
LPDDR4
::
Org
::
LPDDR4_4Gb_x16
},

15 {"LPDDR4_6Gb_x16", 
LPDDR4
::
Org
::
LPDDR4_6Gb_x16
},

16 {"LPDDR4_8Gb_x16", 
LPDDR4
::
Org
::
LPDDR4_8Gb_x16
},

19 
	gm­
<
	g¡ršg
, 
	gLPDDR4
::
S³ed
> 
LPDDR4
::
¥“d_m­
 = {

20 {"LPDDR4_1600", 
LPDDR4
::
S³ed
::
LPDDR4_1600
},

21 {"LPDDR4_2400", 
LPDDR4
::
S³ed
::
LPDDR4_2400
},

22 {"LPDDR4_3200", 
LPDDR4
::
S³ed
::
LPDDR4_3200
},

25 
	gLPDDR4
::
	$LPDDR4
(
Org
 
Üg
, 
S³ed
 
¥“d
)

26 : 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

27 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

28 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nDQSCK
 + s³ed_’Œy.
nBL
)

30 
	`š™_¥“d
();

31 
	`š™_´”eq
();

32 
	`š™_rowh™
();

33 
	`š™_rowİ’
();

34 
	`š™_Ïmbda
();

35 
	`š™_timšg
();

36 
	}
}

38 
	gLPDDR4
::
	$LPDDR4
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

39 
	$LPDDR4
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

41 
	}
}

43 
	gLPDDR4
::
	$£t_chªÃl_numb”
(
chªÃl
) {

44 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

45 
	}
}

47 
	gLPDDR4
::
	$£t_¿nk_numb”
(
¿nk
) {

48 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

49 
	}
}

52 
	gLPDDR4
::
	$š™_¥“d
()

56 cÚ¡ 
RFCPB_TABLE
[(
Org
::
MAX
)][(
S³ed
::MAX)] = {

62 cÚ¡ 
RFCAB_TABLE
[(
Org
::
MAX
)][(
S³ed
::MAX)] = {

68 cÚ¡ 
REFI_TABLE
[(
ReäeshMode
::
MAX
)][(
S³ed
::MAX)] = {

74 cÚ¡ 
XSR_TABLE
[(
Org
::
MAX
)][(
S³ed
::MAX)] = {

80 
¥“d
 = 0, 
d’s™y
 = 0;

81 
¥“d_’Œy
.
¿‹
) {

82 1600: 
¥“d
 = 0; ;

83 2400: 
¥“d
 = 1; ;

84 3200: 
¥“d
 = 2; ;

85 : 
	`as£¹
(
çl£
);

87 
Üg_’Œy
.
size
 >> 10){

88 2: 
d’s™y
 = 0; ;

89 3: 
d’s™y
 = 1; ;

90 4: 
d’s™y
 = 2; ;

91 : 
	`as£¹
(
çl£
 && "12Gb/16Gb is still TBD");

93 
¥“d_’Œy
.
nRFCpb
 = 
RFCPB_TABLE
[
d’s™y
][
¥“d
];

94 
¥“d_’Œy
.
nRFCab
 = 
RFCAB_TABLE
[
d’s™y
][
¥“d
];

95 
¥“d_’Œy
.
nREFI
 = 
REFI_TABLE
[(
»äesh_mode
)][
¥“d
];

96 
¥“d_’Œy
.
nXSR
 = 
XSR_TABLE
[
d’s™y
][
¥“d
];

97 
	}
}

100 
	gLPDDR4
::
	$š™_´”eq
()

103 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

104 (
node
->
¡©e
)) {

105 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

106 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

107 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

108 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

109 : 
	`as£¹
(
çl£
);

111 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

112 (
node
->
¡©e
)) {

113 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

114 (
S‹
::
O³Ãd
):

115 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

116  
cmd
;

117  
Commªd
::
PRE
;

118 : 
	`as£¹
(
çl£
);

122 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

123 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

126 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

127 autØ
bªk
 : 
node
->
chd»n
) {

128 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

130  
Commªd
::
PREA
;

132  
Commªd
::
REF
;};

135 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

136 (
node
->
¡©e
)) {

137 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

138 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

139 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

140 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

141 : 
	`as£¹
(
çl£
);

145 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

146 (
node
->
¡©e
)) {

147 (
S‹
::
Pow”Up
):  
Commªd
::
SREF
;

148 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

149 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

150 (
S‹
::
S–fReäesh
):  
Commªd
::
SREF
;

151 : 
	`as£¹
(
çl£
);

153 
	}
}

156 
	gLPDDR4
::
	$š™_rowh™
()

159 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

160 (
node
->
¡©e
)) {

161 (
S‹
::
Clo£d
):  
çl£
;

162 (
S‹
::
O³Ãd
):

163 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

164  
Œue
;

165  
çl£
;

166 : 
	`as£¹
(
çl£
);

170 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

171 
	}
}

173 
	gLPDDR4
::
	$š™_rowİ’
()

176 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR4
>* 
node
, Commªd 
cmd
, 
id
) {

177 (
node
->
¡©e
)) {

178 (
S‹
::
Clo£d
):  
çl£
;

179 (
S‹
::
O³Ãd
):  
Œue
;

180 : 
	`as£¹
(
çl£
);

184 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

185 
	}
}

187 
	gLPDDR4
::
	$š™_Ïmbda
()

189 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

190 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

191 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

192 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

193 
node
->
¡©e
 = 
S‹
::
Clo£d
;

194 
node
->
row_¡©e
.
	`ş—r
();};

195 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

196 autØ
bªk
 : 
node
->
chd»n
) {

197 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

198 
bªk
->
row_¡©e
.
	`ş—r
();}};

199 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {};

200 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {};

201 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {};

202 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

203 
node
->
¡©e
 = 
S‹
::
Clo£d
;

204 
node
->
row_¡©e
.
	`ş—r
();};

205 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

206 
node
->
¡©e
 = 
S‹
::
Clo£d
;

207 
node
->
row_¡©e
.
	`ş—r
();};

208 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

209 autØ
bªk
 : 
node
->
chd»n
) {

210 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

212 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

215 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

216 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

217 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

218 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

219 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

220 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREFX
)] = [] (
DRAM
<
LPDDR4
>* 
node
, 
id
) {

221 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

222 
	}
}

225 
	gLPDDR4
::
	$š™_timšg
()

227 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

228 
veùÜ
<
TimšgEÁry
> *
t
;

231 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

234 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

235 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

236 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

237 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

238 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

239 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

240 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

241 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

245 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

248 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

249 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

250 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

251 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

252 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

253 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

254 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

255 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

257 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

258 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

259 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

260 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 - s.
nCWL
});

262 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

263 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

264 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

265 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
 + 1});

269 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

270 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

271 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

272 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

273 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

274 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

275 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

276 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

277 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

278 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

279 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

280 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

281 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

282 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

283 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

284 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

287 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

288 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

291 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

292 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

293 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

294 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

295 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

296 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

297 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

298 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

301 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

302 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

303 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

304 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPab
});

305 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::PRE, 1, 
s
.
nPPD
});

308 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPpb
});

309 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPab
});

310 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCab
});

313 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

314 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

315 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

316 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nXP
});

319 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPpb
});

320 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPab
});

321 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXSR
});

324 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFCab
});

325 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRFCab
});

326 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRFCpb
});

329 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

330 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
PDE
, 1, 1});

331 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

332 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXP
});

335 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXSR
});

336 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXSR
});

339 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nCKE
});

340 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

343 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXP
});

344 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXSR
});

347 
t
[(
Commªd
::
SREF
)].
	`push_back
({Commªd::
SREFX
, 1, 
s
.
nSR
});

348 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXSR
});

351 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

354 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

355 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

356 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

357 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

359 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

360 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

362 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
});

363 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRPpb
});

366 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

367 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

368 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPpb
});

369 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRPpb
});

372 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRRD
, 
Œue
});

373 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
, 
Œue
});

376 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::REFPB, 1, 
s
.
nRFCpb
});

377 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCpb
});

378 
	}
}

	@LPDDR4.h

1 #iâdeà
__LPDDR4_H


2 
	#__LPDDR4_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cLPDDR4


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
LPDDR4
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
LPDDR4
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPREA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gREFPB
, 
	gPDE
, 
	gPDX
, 
	gSREF
, 
	gSREFX
,

38 
	gMAX


43 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

49 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

50 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

51 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

52 
Lev–
::
Rªk
, Lev–::
Bªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

55 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

57 (
	gcmd
)) {

58 (
	gCommªd
::
ACT
):

59  
Œue
;

61  
çl£
;

65 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

67 (
	gcmd
)) {

68 (
	gCommªd
::
RD
):

69 (
Commªd
::
WR
):

70 (
Commªd
::
RDA
):

71 (
Commªd
::
WRA
):

72  
Œue
;

74  
çl£
;

78 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

80 (
	gcmd
)) {

81 (
	gCommªd
::
RDA
):

82 (
Commªd
::
WRA
):

83 (
Commªd
::
PRE
):

84 (
Commªd
::
PREA
):

85  
Œue
;

87  
çl£
;

91 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

93 (
	gcmd
)) {

94 (
	gCommªd
::
REF
):

95 (
Commªd
::
REFPB
):

96  
Œue
;

98  
çl£
;

103 şas 
	cS‹
 : 

105 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


106 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

107 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

111 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

112 
Commªd
::
RD
, Commªd::
WR
,

113 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SREF


117 
	gfunùiÚ
<
Commªd
(
DRAM
<
LPDDR4
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

121 
	gfunùiÚ
<
boŞ
(
DRAM
<
LPDDR4
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

122 
	gfunùiÚ
<
boŞ
(
DRAM
<
LPDDR4
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

125 
	sTimšgEÁry


127 
Commªd
 
	gcmd
;

128 
	gdi¡
;

129 
	gv®
;

130 
boŞ
 
	gsiblšg
;

132 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

135 
	gfunùiÚ
<(
	gDRAM
<
	gLPDDR4
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

138 şas 
	cOrg
 : 

141 
LPDDR4_4Gb_x16
,

142 
	gLPDDR4_6Gb_x16
,

143 
	gLPDDR4_8Gb_x16
,

146 
	gMAX


149 
	sOrgEÁry
 {

150 
	gsize
;

151 
	gdq
;

152 
	gcouÁ
[(
Lev–
::
MAX
)];

153 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

157 }, 
	gÜg_’Œy
;

159 
£t_chªÃl_numb”
(
chªÃl
);

160 
£t_¿nk_numb”
(
¿nk
);

164 şas 
	cS³ed
 : 

166 
LPDDR4_1600
,

167 
	gLPDDR4_2400
,

168 
	gLPDDR4_3200
,

169 
	gMAX


172 şas 
	cReäeshMode
 : 

174 
Reäesh_1X
,

175 
	gReäesh_2X
,

176 
	gReäesh_4X
,

177 
	gMAX


178 } 
	g»äesh_mode
 = 
ReäeshMode
::
Reäesh_1X
;

180 
	g´eãtch_size
 = 16;

181 
	gchªÃl_width
 = 32;

183 
	sS³edEÁry
 {

184 
	g¿‹
;

185 
	gäeq
, 
	gtCK
;

186 
	gnBL
, 
	gnCCD
, 
	gnRTRS
, 
	gnDQSCK
;

187 
	gnCL
, 
	gnRCD
, 
	gnRPpb
, 
	gnRPab
, 
	gnCWL
;

188 
	gnRAS
, 
	gnRC
;

189 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

190 
	gnPPD
, 
	gnRRD
, 
	gnFAW
;

191 
	gnRFCab
, 
	gnRFCpb
, 
	gnREFI
;

192 
	gnCKE
, 
	gnXP
;

193 
	gnSR
, 
	gnXSR
;

194 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

204 }, 
	g¥“d_’Œy
;

209 
	g»ad_Ï‹ncy
;

211 
	g´iv©e
:

212 
š™_¥“d
();

213 
š™_Ïmbda
();

214 
š™_´”eq
();

215 
š™_rowh™
();

216 
š™_rowİ’
();

217 
š™_timšg
();

	@Main.cpp

1 
	~"MemW¿µ”.h
"

2 
	~"³.h
"

4 
	$sc_maš
(
¬gc
, *
¬gv
[]){

6 
	`sc_£t_time_»sŞutiÚ
(1, 
SC_NS
);

7 
sc_sigÇl
<
Bur¡Op
> 
bur¡Req
;

8 
sc_sigÇl
<
Bur¡Op
> 
bur¡Re¥
;

9 
sc_sigÇl
<
boŞ
> 
bfsDÚe
;

11 
³ClkCyşe
 = 10;

12 
memClkCyşe
 = 2;

13 
sc_şock
 
	`³Clk
("³Clk", 
³ClkCyşe
, 
SC_NS
, 0.5);

16 
GL
::
	`cfgBfsP¬am
("./config.txt");

17 
MemW¿µ”
 
	`memW¿µ”
("memW¿µ”", 
memClkCyşe
, 
³ClkCyşe
, 
¬gc
, 
¬gv
);

18 
memW¿µ”
.
	`£tNewS¹V”‹x
(
GL
::
¡¬tšgV”tiûs
[0]);

19 
¡d
::
cout
 << "S¹šg v”‹x i " << 
GL
::
¡¬tšgV”tiûs
[0] << std::
’dl
;

20 
memW¿µ”
.
	`bur¡Req
(
bur¡Req
);

21 
memW¿µ”
.
	`bur¡Re¥
(
bur¡Re¥
);

22 
memW¿µ”
.
	`bfsDÚe
(
bfsDÚe
);

24 
³
 
	`³In¡
("³In¡", 0, 
³ClkCyşe
);

25 
³In¡
.
	`bur¡Req
(
bur¡Req
);

26 
³In¡
.
	`bur¡Re¥
(
bur¡Re¥
);

27 
³In¡
.
	`bfsDÚe
(
bfsDÚe
);

28 
³In¡
.
	`³Clk
(
³Clk
);

30 
	`sc_¡¬t
();

34 
	}
}

	@MemWrapper.cpp

1 
	~"MemW¿µ”.h
"

5 
	gMemW¿µ”
::
	$MemW¿µ”
(
sc_moduË_Çme
 
_Çme
,

6 
_memClkCyşe
,

7 
_³ClkCyşe
,

8 
¬gc
,

9 * 
¬gv
[])

10 : 
	`sc_moduË
(
_Çme
), 
	$cÚfigs
(
¬gv
[1]){

12 
	`lßdCÚfig
(
¬gc
, 
¬gv
);

13 
memClkCyşe
 = 
_memClkCyşe
;

14 
³ClkCyşe
 = 
_³ClkCyşe
;

15 
GL
::
bur¡L’
 = 
	`ÿlBur¡L’
();

16 
	`¿mIn™
("./config.txt");

18 
	`SC_THREAD
(
runMemSim
);

19 
	`SC_THREAD
(
g‘Bur¡Req
);

20 
	`SC_THREAD
(
£ndBur¡Re¥
);

21 
	`SC_THREAD
(
»¥MÚ™Ü
);

22 
	`SC_THREAD
(
¡©usMÚ™Ü
);

24 
	}
}

26 
G¿ph
* 
	gMemW¿µ”
::
	$lßdG¿ph
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
){

27 
¡d
::
if¡»am
 
	`fhªdË
(
cfgFeName
.
	`c_¡r
());

28 if(!
fhªdË
.
	`is_İ’
()){

29 
HERE
;

30 
¡d
::
cout
 << "FaedØİ’ " << 
cfgFeName
 << std::
’dl
;

31 
	`ex™
(
EXIT_FAILURE
);

34 
¡d
::
¡ršg
 
g¿phName
;

35 
¡d
::
¡ršg
 
g¿phDœ
;

36 !
fhªdË
.
	`eof
()){

37 
¡d
::
¡ršg
 
cfgKey
;

38 
fhªdË
 >> 
cfgKey
;

39 if(
cfgKey
 == "graphName"){

40 
fhªdË
 >> 
g¿phName
;

42 if(
cfgKey
 == "graphDir"){

43 
fhªdË
 >> 
g¿phDœ
;

46 
fhªdË
.
	`şo£
();

48 
G¿ph
* 
g±r
;

49 
¡d
::
¡ršg
 
âame
;

50 if(
g¿phName
 == "dblp"){

51 
âame
 = 
g¿phDœ
 + "dblp.ungraph.txt";

53 if(
g¿phName
 == "youtube"){

54 
âame
 = 
g¿phDœ
 + "youtube.ungraph.txt";

56 if(
g¿phName
 == "lj"){

57 
âame
 = 
g¿phDœ
 + "lj.ungraph.txt";

59 if(
g¿phName
 == "pokec"){

60 
âame
 = 
g¿phDœ
 + "pokec-relationships.txt";

62 if(
g¿phName
 == "wiki-talk"){

63 
âame
 = 
g¿phDœ
 + "wiki-Talk.txt";

65 if(
g¿phName
 == "lj1"){

66 
âame
 = 
g¿phDœ
 + "LiveJournal1.txt";

68 if(
g¿phName
 == "orkut"){

69 
âame
 = 
g¿phDœ
 + "orkut.ungraph.txt";

71 if(
g¿phName
 == "rmat"){

72 
âame
 = 
g¿phDœ
 + "rmat-2m-256m.txt";

74 if(
g¿phName
 == "example"){

75 
âame
 = 
g¿phDœ
 + "rmat-1k-10k.txt";

77 if(
g¿phName
 == "twitter"){

78 
âame
 = 
g¿phDœ
 + "twitter_rv.txt";

80 if(
g¿phName
 == "friendster"){

81 
âame
 = 
g¿phDœ
 + "friendster.ungraph.txt";

84 
HERE
;

85 
¡d
::
cout
 << "UÄecognized g¿ph " << 
g¿phName
 << std::
’dl
;

86 
	`ex™
(
EXIT_FAILURE
);

88 
g±r
 = 
Ãw
 
	`G¿ph
(
âame
.
	`c_¡r
());

91 
GL
::
v”‹xNum
 = 
g±r
->
v”‹x_num
;

92 
GL
::
edgeNum
 = 
g±r
->
edge_num
;

93 
g±r
->
	`g‘RªdomS¹Indiûs
(
GL
::
¡¬tšgV”tiûs
);

96  
g±r
;

98 
	}
}

102 
	gMemW¿µ”
::
	$ş—nRam
(){

103 
d•thAddr
 = 
GL
::
d•thMemAddr
;

104 
i
 = 0; i < 
GL
::
v”‹xNum
; i++){

105 
upd©eSšgËD©aToRam
<sigÃd >(
d•thAddr
, -1);

106 
d•thAddr
 += ()(signed );

109 
äÚt›rAddr
 = 
GL
::
äÚt›rMemAddr
;

110 
i
 = 0; i < 
GL
::
v”‹xNum
; i++){

111 
upd©eSšgËD©aToRam
<>(
äÚt›rAddr
, -1);

112 
äÚt›rAddr
 += ()();

114 
	}
}

116 
	gMemW¿µ”
::
	$£tNewS¹V”‹x
(
idx
){

117 
addr
 = 
GL
::
d•thMemAddr
 + 
idx
 * (signed );

118 
upd©eSšgËD©aToRam
<sigÃd >(
addr
, 0);

119 
	}
}

129 
	gMemW¿µ”
::
	$upd©eBur¡ToRam
(
w©chedBur¡Idx
){

130 autØ
™
 = 
bur¡ReqQueue
.
	`begš
(); iˆ!ğbur¡ReqQueue.
	`’d
(); it++){

133 if(
™
->
bur¡Idx
 =ğ
w©chedBur¡Idx
){

137 if(
™
->
ty³
 =ğ
¿muÏtÜ
::
Reque¡
::
Ty³
::
WRITE
 &&

138 
wr™ebackHi¡Üy
[
™
->
bur¡Idx
] =ğ
çl£
)

140 
™
->
	`»qToRam
(
¿mD©a
);

141 
wr™ebackHi¡Üy
[
™
->
bur¡Idx
] = 
Œue
;

145 
	}
}

151 
	gMemW¿µ”
::
	$»¥MÚ™Ü
(){

152 
Œue
){

153 autØ
b™
 = 
bur¡ReqQueue
.
	`begš
(); b™ !ğbur¡ReqQueue.
	`’d
(); bit++){

156 if(
bur¡Stus
[
b™
->
bur¡Idx
]) ;

159 
boŞ
 
bur¡Re¥R—dy
 = 
Œue
;

160 if(
bur¡Stus
[
b™
->
bur¡Idx
] =ğ
çl£
){

161 autØ
r™
 = 
b™
->
»qVec
.
	`begš
();„™ !ğb™->»qVec.
	`’d
();„it++){

162 if(
»qStus
[*
r™
] =ğ
çl£
){

163 
bur¡Re¥R—dy
 = 
çl£
;

169 if(
bur¡Re¥R—dy
){

170 
bur¡Stus
[
b™
->
bur¡Idx
] = 
Œue
;

171 
Bur¡Op
 
»¥
 = *
b™
;

172 
»¥
.
	`£tA¼iveMemTime
(
	`g‘MšA¼iveTime
(
b™
->
»qVec
));

173 
»¥
.
	`£tD•¬tMemTime
(
	`g‘MaxD•¬tTime
(
b™
->
»qVec
));

174 
bur¡Re¥Queue
.
	`push_back
(
»¥
);

175 
	`ş—nRe¥Queue
(
b™
->
»qVec
);

179 
	`wa™
(
memClkCyşe
, 
SC_NS
);

181 
	}
}

185 
	gMemW¿µ”
::
g‘MšA¼iveTime
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
){

186 
¡d
::
veùÜ
<> 
¬riveTime
;

187 autØ
	gr™
 = 
»qVec
.
begš
();„™ !ğ»qVec.
’d
();„it++){

188 autØ
	g™
 = 
»¥Queue
.
begš
(); iˆ!ğ»¥Queue.
’d
(); it++){

189 if(
	g™
->
	gudf
.
	g»qIdx
 =ğ*
r™
){

190 
¬riveTime
.
push_back
(
™
->
udf
.
¬riveMemTime
);

196 autØ
	gm™
 = 
¡d
::
mš_–em’t
(
¬riveTime
.
begš
(),‡¼iveTime.
’d
());

197  *
	gm™
;

201 
	gMemW¿µ”
::
g‘MaxD•¬tTime
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
){

202 
¡d
::
veùÜ
<> 
d•¬tTime
;

203 autØ
	gr™
 = 
»qVec
.
begš
();„™ !ğ»qVec.
’d
();„it++){

204 autØ
	g™
 = 
»¥Queue
.
begš
(); iˆ!ğ»¥Queue.
’d
(); it++){

205 if(
	g™
->
	gudf
.
	g»qIdx
 =ğ*
r™
){

206 
d•¬tTime
.
push_back
(
™
->
udf
.
d•¬tMemTime
);

212 autØ
	g™
 = 
¡d
::
max_–em’t
(
d•¬tTime
.
begš
(), d•¬tTime.
’d
());

213  *
	g™
;

219 
	gMemW¿µ”
::
	$ş—nProûs£dReque¡s
(
idx
){

220 autØ
™
 = 
bur¡ReqQueue
.
	`begš
(); iˆ!ğbur¡ReqQueue.
	`’d
(); ){

221 if(
™
->
bur¡Idx
 <ğ
idx
 && 
bur¡Stus
[it->burstIdx]){

222 
bur¡ReqQueue
.
	`”a£
(
™
++);

228 
	}
}

231 
	gMemW¿µ”
::
	$g‘Bur¡Req
(){

232 
couÁ”
 = 0;

233 
Œue
){

234 
Bur¡Op
 
İ
 = 
bur¡Req
.
	`»ad
();

235 if(
İ
.
v®id
){

236 
bur¡ReqQueue
.
	`push_back
(
İ
);

237 
bur¡Stus
[
İ
.
bur¡Idx
] = 
çl£
;

238 if(
İ
.
ty³
 =ğ
¿muÏtÜ
::
Reque¡
::
Ty³
::
WRITE
){

239 
wr™ebackHi¡Üy
[
İ
.
bur¡Idx
] = 
çl£
;

242 
İ
.
	`cÚv”tToReq
(
»qQueue
);

245 autØ
™
 = 
İ
.
»qVec
.
	`begš
(); iˆ!ğİ.»qVec.
	`’d
(); it++){

246 
»qStus
[*
™
] = 
çl£
;

249 if(
İ
.
ty³
 =ğ
¿muÏtÜ
::
Reque¡
::
Ty³
::
READ
){

250 
couÁ”
++;

253 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

255 
	}
}

260 
	gMemW¿µ”
::
	$£ndBur¡Re¥
(){

261 
Œue
){

262 
cu¼’tTimeSmp
 = ()(
	`sc_time_¡amp
()/
	`sc_time
(1, 
SC_NS
));

263 if(
bur¡Re¥Queue
.
	`em±y
()){

264 
Bur¡Op
 
	`İ
(
çl£
);

265 
bur¡Re¥
.
	`wr™e
(
İ
);

272 autØ
™
 = 
bur¡Re¥Queue
.
	`begš
();

273 
™
 !ğ
bur¡Re¥Queue
.
	`’d
()){

274 
»¥R—dyTime
 = 
™
->
	`g‘D•¬tMemTime
();

275 if(
»¥R—dyTime
 <ğ
cu¼’tTimeSmp
){

276 if(
™
->
ty³
 =ğ
¿muÏtÜ
::
Reque¡
::
Ty³
::
READ
){

279 
	`upd©eBur¡ToRam
(
™
->
bur¡Idx
);

280 
™
->
	`¿mToReq
(
¿mD©a
);

283 
	`ş—nProûs£dReque¡s
(
™
->
bur¡Idx
);

286 
bur¡Re¥
.
	`wr™e
(*
™
);

287 
bur¡Re¥Queue
.
	`”a£
(
™
++);

291 
™
++;

296 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

298 
	}
}

300 
	gMemW¿µ”
::
	$ÿlBur¡L’
(){

302 
bur¡Ën
;

303 ià(
¡ªd¬d
 == "DDR3") {

304 
DDR3
* 
ddr3
 = 
Ãw
 
	`DDR3
(
cÚfigs
["org"], configs["speed"]);

305 
bur¡Ën
 = 
ddr3
->
´eãtch_size
 * ddr3->
chªÃl_width
 / 8;

306 } ià(
¡ªd¬d
 == "DDR4") {

307 
DDR4
* 
ddr4
 = 
Ãw
 
	`DDR4
(
cÚfigs
["org"], configs["speed"]);

308 
bur¡Ën
 = 
ddr4
->
´eãtch_size
 * ddr4->
chªÃl_width
 / 8;

309 } ià(
¡ªd¬d
 == "SALP-MASA") {

310 
SALP
* 
§Í8
 = 
Ãw
 
	`SALP
(
cÚfigs
["Üg"], cÚfigs["¥“d"], "SALP-MASA", cÚfigs.
	`g‘_sub¬¿ys
());

311 
bur¡Ën
 = 
§Í8
->
´eãtch_size
 * s®p8->
chªÃl_width
 / 8;

312 } ià(
¡ªd¬d
 == "LPDDR3") {

313 
LPDDR3
* 
Íddr3
 = 
Ãw
 
	`LPDDR3
(
cÚfigs
["org"], configs["speed"]);

314 
bur¡Ën
 = 
Íddr3
->
´eãtch_size
 *†pddr3->
chªÃl_width
 / 8;

315 } ià(
¡ªd¬d
 == "LPDDR4") {

317 
LPDDR4
* 
Íddr4
 = 
Ãw
 
	`LPDDR4
(
cÚfigs
["org"], configs["speed"]);

318 
bur¡Ën
 = 
Íddr4
->
´eãtch_size
 *†pddr4->
chªÃl_width
 / 8;

319 } ià(
¡ªd¬d
 == "GDDR5") {

320 
GDDR5
* 
gddr5
 = 
Ãw
 
	`GDDR5
(
cÚfigs
["org"], configs["speed"]);

321 
bur¡Ën
 = 
gddr5
->
´eãtch_size
 * gddr5->
chªÃl_width
 / 8;

322 } ià(
¡ªd¬d
 == "HBM") {

323 
HBM
* 
hbm
 = 
Ãw
 
	`HBM
(
cÚfigs
["org"], configs["speed"]);

324 
bur¡Ën
 = 
hbm
->
´eãtch_size
 * hbm->
chªÃl_width
 / 8;

325 } ià(
¡ªd¬d
 == "WideIO") {

327 
WideIO
* 
wio
 = 
Ãw
 
	`WideIO
(
cÚfigs
["org"], configs["speed"]);

328 
bur¡Ën
 = 
wio
->
´eãtch_size
 * wio->
chªÃl_width
 / 8;

329 } ià(
¡ªd¬d
 == "WideIO2") {

331 
WideIO2
* 
wio2
 = 
Ãw
 
	`WideIO2
(
cÚfigs
["Üg"], cÚfigs["¥“d"], cÚfigs.
	`g‘_chªÃls
());

332 
wio2
->
chªÃl_width
 *= 2;

333 
bur¡Ën
 = 
wio2
->
´eãtch_size
 * wio2->
chªÃl_width
 / 8;

336 ià(
¡ªd¬d
 == "DSARP") {

337 
DSARP
* 
dsddr3_d§½
 = 
Ãw
 
	`DSARP
(
cÚfigs
["Üg"], cÚfigs["¥“d"], DSARP::
Ty³
::DSARP, cÚfigs.
	`g‘_sub¬¿ys
());

338 
bur¡Ën
 = 
dsddr3_d§½
->
´eãtch_size
 * dsddr3_d§½->
chªÃl_width
 / 8;

339 } ià(
¡ªd¬d
 == "ALDRAM") {

340 
ALDRAM
* 
®d¿m
 = 
Ãw
 
	`ALDRAM
(
cÚfigs
["org"], configs["speed"]);

341 
bur¡Ën
 = 
®d¿m
->
´eãtch_size
 *‡ld¿m->
chªÃl_width
 / 8;

342 } ià(
¡ªd¬d
 == "TLDRAM") {

343 
TLDRAM
* 
d¿m
 = 
Ãw
 
	`TLDRAM
(
cÚfigs
["Üg"], cÚfigs["¥“d"], cÚfigs.
	`g‘_sub¬¿ys
());

344 
bur¡Ën
 = 
d¿m
->
´eãtch_size
 *ld¿m->
chªÃl_width
 / 8;

347 
HERE
;

348 
¡d
::
cout
 << "UnknowÀmemÜy snd¬d." << std::
’dl
;

349 
	`ex™
(
EXIT_FAILURE
);

352  
bur¡Ën
;

353 
	}
}

355 
	gMemW¿µ”
::
	$runMemSim
(){

357 ià(
¡ªd¬d
 == "DDR3") {

358 
DDR3
* 
ddr3
 = 
Ãw
 
	`DDR3
(
cÚfigs
["org"], configs["speed"]);

359 
	`¡¬t_run
(
cÚfigs
, 
ddr3
, 
fes
);

360 } ià(
¡ªd¬d
 == "DDR4") {

361 
DDR4
* 
ddr4
 = 
Ãw
 
	`DDR4
(
cÚfigs
["org"], configs["speed"]);

362 
	`¡¬t_run
(
cÚfigs
, 
ddr4
, 
fes
);

363 } ià(
¡ªd¬d
 == "SALP-MASA") {

364 
SALP
* 
§Í8
 = 
Ãw
 
	`SALP
(
cÚfigs
["Üg"], cÚfigs["¥“d"], "SALP-MASA", cÚfigs.
	`g‘_sub¬¿ys
());

365 
	`¡¬t_run
(
cÚfigs
, 
§Í8
, 
fes
);

366 } ià(
¡ªd¬d
 == "LPDDR3") {

367 
LPDDR3
* 
Íddr3
 = 
Ãw
 
	`LPDDR3
(
cÚfigs
["org"], configs["speed"]);

368 
	`¡¬t_run
(
cÚfigs
, 
Íddr3
, 
fes
);

369 } ià(
¡ªd¬d
 == "LPDDR4") {

371 
LPDDR4
* 
Íddr4
 = 
Ãw
 
	`LPDDR4
(
cÚfigs
["org"], configs["speed"]);

372 
	`¡¬t_run
(
cÚfigs
, 
Íddr4
, 
fes
);

373 } ià(
¡ªd¬d
 == "GDDR5") {

374 
GDDR5
* 
gddr5
 = 
Ãw
 
	`GDDR5
(
cÚfigs
["org"], configs["speed"]);

375 
	`¡¬t_run
(
cÚfigs
, 
gddr5
, 
fes
);

376 } ià(
¡ªd¬d
 == "HBM") {

377 
HBM
* 
hbm
 = 
Ãw
 
	`HBM
(
cÚfigs
["org"], configs["speed"]);

378 
	`¡¬t_run
(
cÚfigs
, 
hbm
, 
fes
);

379 } ià(
¡ªd¬d
 == "WideIO") {

381 
WideIO
* 
wio
 = 
Ãw
 
	`WideIO
(
cÚfigs
["org"], configs["speed"]);

382 
	`¡¬t_run
(
cÚfigs
, 
wio
, 
fes
);

383 } ià(
¡ªd¬d
 == "WideIO2") {

385 
WideIO2
* 
wio2
 = 
Ãw
 
	`WideIO2
(
cÚfigs
["Üg"], cÚfigs["¥“d"], cÚfigs.
	`g‘_chªÃls
());

386 
wio2
->
chªÃl_width
 *= 2;

387 
	`¡¬t_run
(
cÚfigs
, 
wio2
, 
fes
);

390 ià(
¡ªd¬d
 == "DSARP") {

391 
DSARP
* 
dsddr3_d§½
 = 
Ãw
 
	`DSARP
(
cÚfigs
["Üg"], cÚfigs["¥“d"], DSARP::
Ty³
::DSARP, cÚfigs.
	`g‘_sub¬¿ys
());

392 
	`¡¬t_run
(
cÚfigs
, 
dsddr3_d§½
, 
fes
);

393 } ià(
¡ªd¬d
 == "ALDRAM") {

394 
ALDRAM
* 
®d¿m
 = 
Ãw
 
	`ALDRAM
(
cÚfigs
["org"], configs["speed"]);

395 
	`¡¬t_run
(
cÚfigs
, 
®d¿m
, 
fes
);

396 } ià(
¡ªd¬d
 == "TLDRAM") {

397 
TLDRAM
* 
d¿m
 = 
Ãw
 
	`TLDRAM
(
cÚfigs
["Üg"], cÚfigs["¥“d"], cÚfigs.
	`g‘_sub¬¿ys
());

398 
	`¡¬t_run
(
cÚfigs
, 
d¿m
, 
fes
);

400 
	`´štf
("SimuÏtiÚ dÚe. Sti¡ic wr™‹ÀtØ%s\n", 
¡©s_out
.
	`c_¡r
());

402 
	}
}

404 
	gMemW¿µ”
::
	$lßdCÚfig
(
¬gc
, * 
¬gv
[]){

405 ià(
¬gc
 < 2) {

406 
	`´štf
("U§ge: % <cÚfigs-fe> --mode=ıu,d¿m,acø[--¡© <f’ame>] <Œaû-f’ame1> <Œaû-f’ame2> Exam¶e: % ¿muÏtÜ-cÚfigs.cfg --mode=ıu cpu.Œaû cpu.Œaû\n", 
¬gv
[0],‡rgv[0]);

409 
¡ªd¬d
 = 
cÚfigs
["standard"];

410 
	`as£¹
(
¡ªd¬d
 != "" || "DRAM standard should be specified.");

412 cÚ¡ *
Œaû_ty³
 = 
	`¡r¡r
(
¬gv
[2], "=");

413 
Œaû_ty³
++;

414 ià(
	`¡rcmp
(
Œaû_ty³
, "acc") == 0){

415 
cÚfigs
.
	`add
("trace_type", "acc");

417 
	`´štf
("šv®id¿ûy³: %s\n", 
Œaû_ty³
);

418 
	`as£¹
(
çl£
);

421 
Œaû_¡¬t
 = 3;

422 
Sts
::
¡©li¡
.
	`ouut
(
¡ªd¬d
+".stats");

423 
¡©s_out
 = 
¡ªd¬d
 + 
	`¡ršg
(".stats");

426 if(
¬gc
 >=3){

427 
i
 = 
Œaû_¡¬t
; i < 
¬gc
; i++){

428 
fes
.
	`push_back
(
¬gv
[
i
]);

432 
cÚfigs
.
	`£t_cÜe_num
(
¬gc
 - 
Œaû_¡¬t
);

433 
	}
}

435 
	g‹m¶©e
<
ty³Çme
 
	gT
>

436 
	gMemW¿µ”
::
¡¬t_run
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
T
* 
¥ec
, cÚ¡ 
veùÜ
<cÚ¡ *>& 
fes
) {

438 
	gC
 = 
cÚfigs
.
g‘_chªÃls
(), 
	gR
 = cÚfigs.
g‘_¿nks
();

440 
	g¥ec
->
£t_chªÃl_numb”
(
C
);

441 
	g¥ec
->
£t_¿nk_numb”
(
R
);

442 
	g¡d
::
veùÜ
<
CÚŒŞËr
<
T
>*> 
ù¾s
;

443 
	gc
 = 0 ; c < 
	gC
 ; c++) {

444 
	gDRAM
<
	gT
>* 
	gchªÃl
 = 
Ãw
 
DRAM
<
T
>(
¥ec
, T::
Lev–
::
ChªÃl
);

445 
	gchªÃl
->
	gid
 = 
c
;

446 
	gchªÃl
->
»gSts
("");

447 
	gCÚŒŞËr
<
	gT
>* 
	gù¾
 = 
Ãw
 
CÚŒŞËr
<
T
>(
cÚfigs
, 
	gchªÃl
);

448 
	gù¾s
.
push_back
(
ù¾
);

450 
	gMemÜy
<
	gT
, 
	gCÚŒŞËr
> 
memÜy
(
cÚfigs
, 
ù¾s
);

452 ià(
	gcÚfigs
["trace_type"] == "acc") {

453 
run_acc
(
cÚfigs
, 
memÜy
);

456 
	g¡d
::
cout
 << "E¼Ü: uÃx³ùed¿ûy³." << 
¡d
::
’dl
;

457 
ex™
(
EXIT_FAILURE
);

469 
boŞ
 
	gMemW¿µ”
::
	$g‘MemReq
(
Reque¡
 &
»q
){

470 
¡d
::
li¡
<
Reque¡
>::
™”©Ü
 
™
;

471 if(!
»qQueue
.
	`em±y
()){

472 
™
 = 
»qQueue
.
	`begš
();

473 
	`sh®lowReqCİy
(*
™
, 
»q
);

474 
»q
.
udf
.
¬riveMemTime
 = ()(
	`sc_time_¡amp
()/
	`sc_time
(1, 
SC_NS
));

475 
»qQueue
.
	`pİ_äÚt
();

476  
Œue
;

479  
çl£
;

481 
	}
}

483 
	g‹m¶©e
<
ty³Çme
 
	gT
>

484 
	gMemW¿µ”
::
run_acc
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
MemÜy
<
T
, 
CÚŒŞËr
>& 
memÜy
) {

486 
boŞ
 
	g¡®l
 = 
çl£
;

487 
boŞ
 
	g’d
 = 
çl£
;

488 
	g»ads
 = 0;

489 
	gwr™es
 = 0;

490 
	gşks
 = 0;

491 
	gReque¡
::
Ty³
 
ty³
 = 
Reque¡
::Ty³::
READ
;

492 
	gm­
<, > 
	gÏ‹nc›s
;

495 autØ
	g»ad_com¶‘e
 = [
this
, &
Ï‹nc›s
](
	gReque¡
& 
	gr
){

496 
	gÏ‹ncy
 = 
r
.
d•¬t
 -„.
¬rive
;

497 
	gÏ‹nc›s
[
Ï‹ncy
]++;

499 
	gr
.
	gudf
.
	gd•¬tMemTime
 = 
r
.
udf
.
¬riveMemTime
 + 
memClkCyşe
 * 
Ï‹ncy
;

500 
	g»¥Queue
.
push_back
(
r
);

501 
	g»qStus
[
r
.
udf
.
»qIdx
] = 
Œue
;

506 
	g¡d
::
veùÜ
<> 
addr_vec
;

507 
Reque¡
 
»q
(
addr_vec
, 
ty³
, 
»ad_com¶‘e
);

510 
	gŒue
){

511 ià(!
	g¡®l
){

512 
	g’d
 = !
g‘MemReq
(
»q
);

515 ià(!
	g’d
){

516 
	g¡®l
 = !
memÜy
.
£nd
(
»q
);

517 ià(!
	g¡®l
){

518 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
){

519 
»ads
++;

522 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
){

523 
wr™es
++;

524 
	gcu¼’tTimeSmp
 = ()(
sc_time_¡amp
()/
sc_time
(1, 
SC_NS
));

525 
	g»q
.
	gudf
.
	gd•¬tMemTime
 = 
cu¼’tTimeSmp
;

526 
	g»¥Queue
.
push_back
(
»q
);

527 
	g»qStus
[
»q
.
udf
.
»qIdx
] = 
Œue
;

532 
wa™
(
memClkCyşe
, 
SC_NS
);

533 
	gmemÜy
.
tick
();

534 
	gşks
 ++;

535 
	gSts
::
curTick
++;

544 
	gMemW¿µ”
::
	$sh®lowReqCİy
(cÚ¡ 
Reque¡
 &
sim¶eReq
, Reque¡ &
»q
){

545 
»q
.
ty³
 = 
sim¶eReq
.type;

546 
»q
.
cÜeid
 = 
sim¶eReq
.coreid;

547 
»q
.
addr
 = 
sim¶eReq
.addr;

548 
»q
.
udf
.
bur¡Idx
 = 
sim¶eReq
.udf.burstIdx;

549 
»q
.
udf
.
»qIdx
 = 
sim¶eReq
.udf.reqIdx;

550 
»q
.
udf
.
³Idx
 = 
sim¶eReq
.udf.peIdx;

551 
»q
.
udf
.
d•¬tPeTime
 = 
sim¶eReq
.udf.departPeTime;

552 
»q
.
udf
.
¬riveMemTime
 = 
sim¶eReq
.udf.arriveMemTime;

553 
»q
.
udf
.
d•¬tMemTime
 = 
sim¶eReq
.udf.departMemTime;

554 
»q
.
udf
.
¬rivePeTime
 = 
sim¶eReq
.udf.arrivePeTime;

555 
	}
}

559 
	gMemW¿µ”
::
	$¿mIn™
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
){

560 
G¿ph
* 
g±r
 = 
	`lßdG¿ph
(
cfgFeName
);

561 
¿mD©a
.
	`»size
(
GL
::
edgeNum
 * 4 * 4);

563 
¡d
::
veùÜ
<sigÃd > 
d•th
;

565 
¡d
::
veùÜ
<> 
½ao
;

566 
¡d
::
veùÜ
<> 
cŸo
;

567 
¡d
::
veùÜ
<> 
½ai
;

568 
¡d
::
veùÜ
<> 
cŸi
;

569 
¡d
::
veùÜ
<> 
äÚt›r
;

571 
½ao
.
	`»size
(
g±r
->
v”‹x_num
 + 1);

572 
½ai
.
	`»size
(
g±r
->
v”‹x_num
 + 1);

573 
½ao
[0] = 0;

574 
½ai
[0] = 0;

575 
i
 = 0; i < 
g±r
->
v”‹x_num
; i++){

576 
½ao
[
i
+1] =„·o[i] + 
g±r
->
v”tiûs
[i]->
out_deg
;

577 
½ai
[
i
+1] =„·i[i] + 
g±r
->
v”tiûs
[i]->
š_deg
;

580 
i
 = 0; i < 
g±r
->
v”‹x_num
; i++){

581 autØ
id
 : 
g±r
->
v”tiûs
[
i
]->
out_vids
){

582 
cŸo
.
	`push_back
(
id
);

584 autØ
id
 : 
g±r
->
v”tiûs
[
i
]->
š_vids
){

585 
cŸi
.
	`push_back
(
id
);

589 
d•th
.
	`»size
(
g±r
->
v”‹x_num
);

590 
äÚt›r
.
	`»size
(
g±r
->
v”‹x_num
);

591 
i
 = 0; i < 
g±r
->
v”‹x_num
; i++){

592 
d•th
[
i
] = -1;

593 
äÚt›r
[
i
] = -1;

596 autØ
®ignMy£lf
 = [](
addr
)->{

597 
bw
 = 8;

598 
mask
 = 0xFF;

599 
»suÉ
 = 
addr
;

600 if((
addr
 & 
mask
) != 0){

601 
»suÉ
 = ((
addr
 >> 
bw
) + 1) << bw;

604  
»suÉ
;

608 
d•thAddr
 = 
GL
::
d•thMemAddr
 = 0;

610 
½aoAddr
 = 
d•thAddr
 + ()(sigÃd è* 
GL
::
v”‹xNum
;

611 
GL
::
½aoMemAddr
 = 
½aoAddr
 = 
	`®ignMy£lf
(rpaoAddr);

613 
cŸoAddr
 = 
½aoAddr
 + ()(è* (
GL
::
v”‹xNum
 + 1);

614 
GL
::
cŸoMemAddr
 = 
cŸoAddr
 = 
	`®ignMy£lf
(ciaoAddr);

616 
½aiAddr
 = 
cŸoAddr
 + ()(è* 
GL
::
edgeNum
;

617 
GL
::
½aiMemAddr
 = 
½aiAddr
 = 
	`®ignMy£lf
(rpaiAddr);

619 
cŸiAddr
 = 
½aiAddr
 + ()(è* (
GL
::
v”‹xNum
 + 1);

620 
GL
::
cŸiMemAddr
 = 
cŸiAddr
 = 
	`®ignMy£lf
(ciaiAddr);

622 
äÚt›rAddr
 = 
cŸiAddr
 + ()(è* 
GL
::
edgeNum
;

623 
GL
::
äÚt›rMemAddr
 = 
äÚt›rAddr
 = 
	`®ignMy£lf
(frontierAddr);

625 autØ
d
 : 
d•th
){

626 
upd©eSšgËD©aToRam
<sigÃd >(
d•thAddr
, 
d
);

627 
d•thAddr
 += ()(signed );

631 autØ
flMem
 = [
this
](cÚ¡ 
¡d
::
veùÜ
<> &
vec
, &
addr
){

632 autØ
v®
 : 
vec
){

633 
upd©eSšgËD©aToRam
<>(
addr
, 
v®
);

634 
addr
 += ()();

638 
	`flMem
(
½ao
, 
½aoAddr
);

639 
	`flMem
(
cŸo
, 
cŸoAddr
);

640 
	`flMem
(
½ai
, 
½aiAddr
);

641 
	`flMem
(
cŸi
, 
cŸiAddr
);

642 
	`flMem
(
äÚt›r
, 
äÚt›rAddr
);

643 
	}
}

647 
	gMemW¿µ”
::
ş—nRe¥Queue
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
){

648 autØ
r™
 = 
»qVec
.
begš
(); 
	gr™
 !ğ»qVec.
’d
();„it++){

649 autØ
	g™
 = 
»¥Queue
.
begš
(); iˆ!ğ»¥Queue.
’d
(); it++){

650 if(
	g™
->
	gudf
.
	g»qIdx
 =ğ*
r™
){

651 
»¥Queue
.
”a£
(
™
);

658 
	gMemW¿µ”
::
	$dumpD•th
(cÚ¡ 
¡d
::
¡ršg
 &
âame
){

659 
¡d
::
of¡»am
 
	`fhªdË
(
âame
.
	`c_¡r
());

660 if(!
fhªdË
.
	`is_İ’
()){

661 
HERE
;

662 
¡d
::
cout
 << "FaedØİ’ " << 
âame
 << std::
’dl
;

663 
	`ex™
(
EXIT_FAILURE
);

666 
addr
 = 
GL
::
d•thMemAddr
;

667 
i
 = 0; i < 
GL
::
v”‹xNum
; i++){

668 
fhªdË
 << ()(
g‘SšgËD©aFromRam
<>(
addr
)è<< 
¡d
::
’dl
;

669 
addr
 += ();

671 
	}
}

673 
boŞ
 
	gMemW¿µ”
::
	$upd©eWr™eRe¥
(){

674 autØ
™
 = 
bur¡ReqQueue
.
	`begš
(); iˆ!ğbur¡ReqQueue.
	`’d
(); it++){

675 if(
™
->
ty³
 =ğ
¿muÏtÜ
::
Reque¡
::
Ty³
::
WRITE
 &&

676 
wr™ebackHi¡Üy
[
™
->
bur¡Idx
] =ğ
çl£
)

678  
çl£
;

684  
Œue
;

685 
	}
}

687 
	gMemW¿µ”
::
	$¡©usMÚ™Ü
(){

688 
Œue
){

689 if(
bfsDÚe
.
	`»ad
()){

690 if(
	`upd©eWr™eRe¥
(è=ğ
çl£
){

691 
¡d
::
cout
 << "Th”¬¡È»que¡ ÃededØb´oûs£d." << std::
’dl
;

693 
	`dumpD•th
("./depth.txt");

694 
¡d
::
cout
 << "SimuÏtiÚ com¶‘es." << std::
’dl
;

695 
	`sc_¡İ
();

697 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

699 
	}
}

	@MemWrapper.h

1 #iâdeà
__MEM_WRAPPER_H__


2 
	#__MEM_WRAPPER_H__


	)

4 
	~"ProûssÜ.h
"

5 
	~"CÚfig.h
"

6 
	~"CÚŒŞËr.h
"

7 
	~"S³edyCÚŒŞËr.h
"

8 
	~"MemÜy.h
"

9 
	~"DRAM.h
"

10 
	~"Sti¡ics.h
"

11 
	~<c¡dio
>

12 
	~<c¡dlib
>

13 
	~<c¡ršg
>

14 
	~<¡dlib.h
>

15 
	~<funùiÚ®
>

16 
	~<m­
>

17 
	~<™”©Ü
>

18 
	~<li¡
>

19 
	~<veùÜ
>

20 
	~<®gÜ™hm
>

21 
	~"commÚ.h
"

22 
	~"g¿ph.h
"

25 
	~"Gem5W¿µ”.h
"

26 
	~"DDR3.h
"

27 
	~"DDR4.h
"

28 
	~"DSARP.h
"

29 
	~"GDDR5.h
"

30 
	~"LPDDR3.h
"

31 
	~"LPDDR4.h
"

32 
	~"WideIO.h
"

33 
	~"WideIO2.h
"

34 
	~"HBM.h
"

35 
	~"SALP.h
"

36 
	~"ALDRAM.h
"

37 
	~"TLDRAM.h
"

39 şas 
	cMemW¿µ”
 : 
public
 
sc_moduË
{

41 
SC_HAS_PROCESS
(
MemW¿µ”
);

43 
	mpublic
:

45 
¡d
::
¡ršg
 
Çme
;

46 
	m¡d
::
¡ršg
 
¡ªd¬d
;

47 
CÚfig
 
	mcÚfigs
;

48 
¡ršg
 
	m¡©s_out
;

49 
	m¡d
::
veùÜ
<cÚ¡ *> 
fes
;

52 
	msc_š
 <
	mBur¡Op
> 
	mbur¡Req
;

53 
	msc_out
 <
	mBur¡Op
> 
	mbur¡Re¥
;

54 
	msc_š
 <
	mboŞ
> 
	mbfsDÚe
;

60 
	m¡d
::
li¡
<
Bur¡Op
> 
bur¡ReqQueue
;

64 
	m¡d
::
li¡
<
Bur¡Op
> 
bur¡Re¥Queue
;

68 
	m¡d
::
li¡
<
Reque¡
> 
»qQueue
;

73 
	m¡d
::
li¡
<
Reque¡
> 
»¥Queue
;

75 
MemW¿µ”
(
sc_moduË_Çme
 
_Çme
,

76 
_memClkCyşe
,

77 
_³ClkCyşe
,

78 
¬gc
,

79 * 
¬gv
[]);

81 
	m‹m¶©e
<
ty³Çme
 
	mT
>

82 
run_acc
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
MemÜy
<
T
, 
CÚŒŞËr
>& 
memÜy
);

84 
	m‹m¶©e
<
ty³Çme
 
	mT
>

85 
¡¬t_run
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
T
* 
¥ec
, cÚ¡ 
veùÜ
<cÚ¡ *>& 
fes
);

86 
g‘Bur¡Req
();

87 
runMemSim
();

88 
boŞ
 
g‘MemReq
(
Reque¡
 &
»q
);

89 
£ndBur¡Re¥
();

90 
memReqMÚ™Ü
();

91 
»¥MÚ™Ü
();

92 
upd©eBur¡ToRam
(
w©chedBur¡Idx
);

93 
ş—nRam
();

94 
£tNewS¹V”‹x
(
idx
);

95 
¡©usMÚ™Ü
();

96 ~
	$MemW¿µ”
(){};

99 
‹m¶©e
<
ty³Çme
 
T
>

100 
T
 
	$g‘SšgËD©aFromRam
(
addr
){

101 
T
 
t
;

102 
T
* 
p
 = &
t
;

103 
i
 = 0; i < ()(
T
); i++){

104 *((*)
p
 + 
i
èğ
¿mD©a
[
addr
 + i];

106  
t
;

107 
	}
}

110 
	g´iv©e
:

111 
memSize
;

112 
	g¡d
::
veùÜ
<> 
¿mD©a
;

120 
	g¡d
::
m­
<, 
	gboŞ
> 
	g»qStus
;

123 
	g¡d
::
m­
<, 
	gboŞ
> 
	gbur¡Stus
;

129 
	g¡d
::
m­
<, 
	gboŞ
> 
	gwr™ebackHi¡Üy
;

131 
	gmemClkCyşe
;

132 
	g³ClkCyşe
;

134 
lßdCÚfig
(
¬gc
, * 
¬gv
[]);

135 
G¿ph
* 
lßdG¿ph
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
);

136 
ÿlBur¡L’
();

137 
g‘MaxD•¬tTime
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
);

138 
g‘MšA¼iveTime
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
);

139 
ş—nProûs£dReque¡s
(
idx
);

140 
sh®lowReqCİy
(cÚ¡ 
Reque¡
 &
sim¶eReq
, Reque¡ &
»q
);

141 
¿mIn™
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
);

142 
dumpD•th
(cÚ¡ 
¡d
::
¡ršg
 &
âame
);

143 
boŞ
 
upd©eWr™eRe¥
();

146 
ş—nRe¥Queue
(cÚ¡ 
¡d
::
veùÜ
<> &
»qVec
);

149 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

150 
	$upd©eSšgËD©aToRam
(
addr
, 
T
 
t
){

151 
T
* 
p
 = &
t
;

152 
i
 = 0; i < ()(
T
); i++){

153 
¿mD©a
[
addr
+
i
] = *((*)
p
 + i);

155 
	}
}

	@Memory.h

1 #iâdeà
__MEMORY_H


2 
	#__MEMORY_H


	)

4 
	~"CÚfig.h
"

5 
	~"DRAM.h
"

6 
	~"Reque¡.h
"

7 
	~"CÚŒŞËr.h
"

8 
	~"S³edyCÚŒŞËr.h
"

9 
	~"Sti¡ics.h
"

10 
	~"GDDR5.h
"

11 
	~"HBM.h
"

12 
	~"LPDDR3.h
"

13 
	~"LPDDR4.h
"

14 
	~"WideIO2.h
"

15 
	~"DSARP.h
"

16 
	~<veùÜ
>

17 
	~<funùiÚ®
>

18 
	~<cm©h
>

19 
	~<ÿs£¹
>

20 
	~<tu¶e
>

22 
usšg
 
Çme¥aû
 
	g¡d
;

24 
Çme¥aû
 
	g¿muÏtÜ


27 şas 
	cMemÜyBa£
{

28 
	gpublic
:

29 
MemÜyBa£
() {}

30 
vœtu®
 ~
MemÜyBa£
() {}

31 
vœtu®
 
şk_ns
() = 0;

32 
vœtu®
 
tick
() = 0;

33 
vœtu®
 
boŞ
 
£nd
(
Reque¡
 
»q
) = 0;

34 
vœtu®
 
³ndšg_»que¡s
() = 0;

35 
vœtu®
 
fšish
() = 0;

36 
vœtu®
 
·ge_®loÿtÜ
(
addr
, 
cÜeid
) = 0;

37 
vœtu®
 
»cÜd_cÜe
(
cÜeid
) = 0;

40 
	g‹m¶©e
 <
şass
 
	gT
,em¶©e<
	gty³Çme
> cÏs 
	gCÚŒŞËr
 = 
CÚŒŞËr
 >

41 şas 
	cMemÜy
 : 
public
 
MemÜyBa£


43 
´Ùeùed
:

44 
SÿÏrSt
 
d¿m_ÿ·c™y
;

45 
SÿÏrSt
 
	gnum_d¿m_cyşes
;

46 
SÿÏrSt
 
	gnum_šcomšg_»que¡s
;

47 
VeùÜSt
 
	gnum_»ad_»que¡s
;

48 
VeùÜSt
 
	gnum_wr™e_»que¡s
;

49 
SÿÏrSt
 
	g¿muÏtÜ_aùive_cyşes
;

50 
VeùÜSt
 
	gšcomšg_»que¡s_³r_chªÃl
;

51 
VeùÜSt
 
	gšcomšg_»ad_»qs_³r_chªÃl
;

53 
SÿÏrSt
 
	gphysiÿl_·ge_»¶aûm’t
;

54 
SÿÏrSt
 
	gmaximum_bªdwidth
;

55 
SÿÏrSt
 
	gš_queue_»q_num_sum
;

56 
SÿÏrSt
 
	gš_queue_»ad_»q_num_sum
;

57 
SÿÏrSt
 
	gš_queue_wr™e_»q_num_sum
;

58 
SÿÏrSt
 
	gš_queue_»q_num_avg
;

59 
SÿÏrSt
 
	gš_queue_»ad_»q_num_avg
;

60 
SÿÏrSt
 
	gš_queue_wr™e_»q_num_avg
;

62 #iâdeà
INTEGRATED_WITH_GEM5


63 
VeùÜSt
 
	g»cÜd_»ad_»que¡s
;

64 
VeùÜSt
 
	g»cÜd_wr™e_»que¡s
;

67 
	gmax_add»ss
;

68 
	gpublic
:

69 şas 
	cTy³
 {

70 
ChRaBaRoCo
,

71 
	gRoBaRaCoCh
,

72 
	gMAX
,

73 } 
	gty³
 = 
Ty³
::
RoBaRaCoCh
;

75 şas 
	cT¿n¦©iÚ
 {

76 
	gNÚe
,

77 
	gRªdom
,

78 
	gMAX
,

79 } 
	gŒª¦©iÚ
 = 
T¿n¦©iÚ
::
NÚe
;

81 
	g¡d
::
m­
<
¡ršg
, 
	gT¿n¦©iÚ
> 
	gÇme_to_Œª¦©iÚ
 = {

82 {"NÚe", 
T¿n¦©iÚ
::
NÚe
},

83 {"Rªdom", 
T¿n¦©iÚ
::
Rªdom
},

86 
	gveùÜ
<> 
	gä“_physiÿl_·ges
;

87 
	gä“_physiÿl_·ges_»maššg
;

88 
	gm­
<
	g·œ
<, >, > 
	g·ge_Œª¦©iÚ
;

90 
	gveùÜ
<
	gCÚŒŞËr
<
	gT
>*> 
	gù¾s
;

91 
T
 * 
	g¥ec
;

92 
	gveùÜ
<> 
	gaddr_b™s
;

94 
	gtx_b™s
;

96 
MemÜy
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
veùÜ
<
CÚŒŞËr
<
T
>*> 
ù¾s
)

97 : 
ù¾s
(ctrls),

98 
¥ec
(
ù¾s
[0]->
chªÃl
->spec),

99 
addr_b™s
((
T
::
Lev–
::
MAX
))

103 *
sz
 = 
¥ec
->
Üg_’Œy
.
couÁ
;

104 
as£¹
((
sz
[0] & (sz[0] - 1)) == 0);

105 
as£¹
((
sz
[1] & (sz[1] - 1)) == 0);

107 
	gtx
 = (
¥ec
->
´eãtch_size
 * s³c->
chªÃl_width
 / 8);

108 
	gtx_b™s
 = 
ÿlc_log2
(
tx
);

109 
as£¹
((1<<
tx_b™s
è=ğ
tx
);

112 ià(
	gty³
 !ğ
Ty³
::
RoBaRaCoCh
 && 
¥ec
->
¡ªd¬d_Çme
.
sub¡r
(0, 5) == "LPDDR")

113 
as£¹
((
sz
[(
T
::
Lev–
::
Row
)] & (sz[(T::Level::Row)] - 1)) == 0);

115 
	gmax_add»ss
 = 
¥ec
->
chªÃl_width
 / 8;

117 
	gËv
 = 0;†ev < 
	gaddr_b™s
.
size
();†ev++) {

118 
	gaddr_b™s
[
Ëv
] = 
ÿlc_log2
(
sz
[lev]);

119 
	gmax_add»ss
 *ğ
sz
[
Ëv
];

122 
	gaddr_b™s
[(
T
::
Lev–
::
MAX
è- 1] -ğ
ÿlc_log2
(
¥ec
->
´eãtch_size
);

125 ià(
	gcÚfigs
.
cÚšs
("translation")) {

126 
	gŒª¦©iÚ
 = 
Çme_to_Œª¦©iÚ
[
cÚfigs
["translation"]];

128 ià(
	gŒª¦©iÚ
 !ğ
T¿n¦©iÚ
::
NÚe
) {

131 
ä“_physiÿl_·ges_»maššg
 = 
max_add»ss
 >> 12;

133 
	gä“_physiÿl_·ges
.
»size
(
ä“_physiÿl_·ges_»maššg
, -1);

136 
	gd¿m_ÿ·c™y


137 .
Çme
("dram_capacity")

138 .
desc
("Number of bytes in simulated DRAM")

139 .
´ecisiÚ
(0)

141 
	gd¿m_ÿ·c™y
 = 
max_add»ss
;

143 
	gnum_d¿m_cyşes


144 .
Çme
("dram_cycles")

145 .
desc
("Number of DRAM cycles simulated")

146 .
´ecisiÚ
(0)

148 
	gnum_šcomšg_»que¡s


149 .
Çme
("incoming_requests")

150 .
desc
("Number of incoming„equestso DRAM")

151 .
´ecisiÚ
(0)

153 
	gnum_»ad_»que¡s


154 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

155 .
Çme
("read_requests")

156 .
desc
("Number of incoming„ead„equestso DRAM…er core")

157 .
´ecisiÚ
(0)

159 
	gnum_wr™e_»que¡s


160 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

161 .
Çme
("write_requests")

162 .
desc
("Number of incoming write„equestso DRAM…er core")

163 .
´ecisiÚ
(0)

165 
	gšcomšg_»que¡s_³r_chªÃl


166 .
š™
(
sz
[(
T
::
Lev–
::
ChªÃl
)])

167 .
Çme
("incoming_requests_per_channel")

168 .
desc
("Number of incoming„equestsoƒach DRAM channel")

170 
	gšcomšg_»ad_»qs_³r_chªÃl


171 .
š™
(
sz
[(
T
::
Lev–
::
ChªÃl
)])

172 .
Çme
("incoming_read_reqs_per_channel")

173 .
desc
("Number of incoming„ead„equestsoƒach DRAM channel")

176 
	g¿muÏtÜ_aùive_cyşes


177 .
Çme
("ramulator_active_cycles")

178 .
desc
("Theotal‚umber of cycleshathe DRAM…art is‡ctive (serving R/W)")

179 .
´ecisiÚ
(0)

181 
	gphysiÿl_·ge_»¶aûm’t


182 .
Çme
("physical_page_replacement")

183 .
desc
("The‚umber ofimeshat…hysical…age„eplacement happens.")

184 .
´ecisiÚ
(0)

186 
	gmaximum_bªdwidth


187 .
Çme
("maximum_bandwidth")

188 .
desc
("Theheoretical maximum bandwidth (Bps)")

189 .
´ecisiÚ
(0)

191 
	gš_queue_»q_num_sum


192 .
Çme
("in_queue_req_num_sum")

193 .
desc
("Sum of„ead/write queue†ength")

194 .
´ecisiÚ
(0)

196 
	gš_queue_»ad_»q_num_sum


197 .
Çme
("in_queue_read_req_num_sum")

198 .
desc
("Sum of„ead queue†ength")

199 .
´ecisiÚ
(0)

201 
	gš_queue_wr™e_»q_num_sum


202 .
Çme
("in_queue_write_req_num_sum")

203 .
desc
("Sum of write queue†ength")

204 .
´ecisiÚ
(0)

206 
	gš_queue_»q_num_avg


207 .
Çme
("in_queue_req_num_avg")

208 .
desc
("Average of„ead/write queue†ength…er memory cycle")

209 .
´ecisiÚ
(6)

211 
	gš_queue_»ad_»q_num_avg


212 .
Çme
("in_queue_read_req_num_avg")

213 .
desc
("Average of„ead queue†ength…er memory cycle")

214 .
´ecisiÚ
(6)

216 
	gš_queue_wr™e_»q_num_avg


217 .
Çme
("in_queue_write_req_num_avg")

218 .
desc
("Average of write queue†ength…er memory cycle")

219 .
´ecisiÚ
(6)

221 #iâdeà
INTEGRATED_WITH_GEM5


222 
	g»cÜd_»ad_»que¡s


223 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

224 .
Çme
("record_read_requests")

225 .
desc
("record„ead„equests forhis core when it„eaches„equest†imit oroheƒnd")

228 
	g»cÜd_wr™e_»que¡s


229 .
š™
(
cÚfigs
.
g‘_cÜe_num
())

230 .
Çme
("record_write_requests")

231 .
desc
("record write„equests forhis core when it„eaches„equest†imit oroheƒnd")

237 ~
MemÜy
()

239 autØ
	gù¾
: 
ù¾s
)

240 
d–‘e
 
ù¾
;

241 
d–‘e
 
	g¥ec
;

244 
şk_ns
()

246  
	g¥ec
->
	g¥“d_’Œy
.
	gtCK
;

249 
»cÜd_cÜe
(
cÜeid
) {

250 #iâdeà
INTEGRATED_WITH_GEM5


251 
	g»cÜd_»ad_»que¡s
[
cÜeid
] = 
num_»ad_»que¡s
[coreid];

252 
	g»cÜd_wr™e_»que¡s
[
cÜeid
] = 
num_wr™e_»que¡s
[coreid];

254 autØ
	gù¾
 : 
ù¾s
) {

255 
ù¾
->
»cÜd_cÜe
(
cÜeid
);

259 
tick
()

261 ++
	gnum_d¿m_cyşes
;

262 
	gcur_que_»q_num
 = 0;

263 
	gcur_que_»ad»q_num
 = 0;

264 
	gcur_que_wr™”eq_num
 = 0;

265 autØ
	gù¾
 : 
ù¾s
) {

266 
cur_que_»q_num
 +ğ
ù¾
->
»adq
.
size
(è+ cŒl->
wr™eq
.size(è+ cŒl->
³ndšg
.size();

267 
	gcur_que_»ad»q_num
 +ğ
ù¾
->
»adq
.
size
(è+ cŒl->
³ndšg
.size();

268 
	gcur_que_wr™”eq_num
 +ğ
ù¾
->
wr™eq
.
size
();

270 
	gš_queue_»q_num_sum
 +ğ
cur_que_»q_num
;

271 
	gš_queue_»ad_»q_num_sum
 +ğ
cur_que_»ad»q_num
;

272 
	gš_queue_wr™e_»q_num_sum
 +ğ
cur_que_wr™”eq_num
;

274 
boŞ
 
	gis_aùive
 = 
çl£
;

275 autØ
	gù¾
 : 
ù¾s
) {

276 
is_aùive
 = is_aùiv|| 
ù¾
->is_active();

277 
	gù¾
->
tick
();

279 ià(
	gis_aùive
) {

280 
	g¿muÏtÜ_aùive_cyşes
++;

284 
boŞ
 
£nd
(
Reque¡
 
»q
)

286 
	g»q
.
	gaddr_vec
.
»size
(
addr_b™s
.
size
());

287 
	gaddr
 = 
»q
.
addr
;

288 
	gcÜeid
 = 
»q
.
cÜeid
;

291 
ş—r_low”_b™s
(
addr
, 
tx_b™s
);

293 (
	gty³
)){

294 (
	gTy³
::
ChRaBaRoCo
):

295 
i
 = 
addr_b™s
.
size
(è- 1; 
	gi
 >= 0; i--)

296 
	g»q
.
	gaddr_vec
[
i
] = 
¦iû_low”_b™s
(
addr
, 
addr_b™s
[i]);

298 (
	gTy³
::
RoBaRaCoCh
):

299 
»q
.
addr_vec
[0] = 
¦iû_low”_b™s
(
addr
, 
addr_b™s
[0]);

300 
	g»q
.
	gaddr_vec
[
addr_b™s
.
size
(è- 1] = 
¦iû_low”_b™s
(
addr
,‡ddr_bits[addr_bits.size() - 1]);

301 
	gi
 = 1; i <ğ(
T
::
Lev–
::
Row
); i++)

302 
	g»q
.
	gaddr_vec
[
i
] = 
¦iû_low”_b™s
(
addr
, 
addr_b™s
[i]);

305 
as£¹
(
çl£
);

308 if(
	gù¾s
[
»q
.
addr_vec
[0]]->
’queue
(req)) {

310 ++
	gnum_šcomšg_»que¡s
;

311 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

312 ++
num_»ad_»que¡s
[
cÜeid
];

313 
	gtmp
 = (è(
T
::
Lev–
::
ChªÃl
);

314 ++
	gšcomšg_»ad_»qs_³r_chªÃl
[
»q
.
addr_vec
[
tmp
]];

316 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
WRITE
) {

317 ++
num_wr™e_»que¡s
[
cÜeid
];

319 ++
	gšcomšg_»que¡s_³r_chªÃl
[
»q
.
addr_vec
[(
T
::
Lev–
::
ChªÃl
)]];

320  
	gŒue
;

323  
	gçl£
;

326 
³ndšg_»que¡s
()

328 
	g»qs
 = 0;

329 autØ
	gù¾
: 
ù¾s
)

330 
»qs
 +ğ
ù¾
->
»adq
.
size
(è+ cŒl->
wr™eq
.size(è+ cŒl->
Ùh”q
.size(è+ cŒl->
³ndšg
.size();

331  
	g»qs
;

334 
fšish
() {

335 
	gd¿m_ÿ·c™y
 = 
max_add»ss
;

336 *
	gsz
 = 
¥ec
->
Üg_’Œy
.
couÁ
;

337 
	gmaximum_bªdwidth
 = 
¥ec
->
¥“d_’Œy
.
¿‹
 * 1e6 * s³c->
chªÃl_width
 * 
sz
[(
T
::
Lev–
::
ChªÃl
)] / 8;

338 
	gd¿m_cyşes
 = 
num_d¿m_cyşes
.
v®ue
();

339 autØ
	gù¾
 : 
ù¾s
) {

340 
»ad_»q
 = (
šcomšg_»ad_»qs_³r_chªÃl
[
ù¾
->
chªÃl
->
id
].
v®ue
());

341 
	gù¾
->
fšish
(
»ad_»q
, 
d¿m_cyşes
);

345 
	gš_queue_»q_num_avg
 = 
š_queue_»q_num_sum
.
v®ue
(è/ 
d¿m_cyşes
;

346 
	gš_queue_»ad_»q_num_avg
 = 
š_queue_»ad_»q_num_sum
.
v®ue
(è/ 
d¿m_cyşes
;

347 
	gš_queue_wr™e_»q_num_avg
 = 
š_queue_wr™e_»q_num_sum
.
v®ue
(è/ 
d¿m_cyşes
;

350 
·ge_®loÿtÜ
(
addr
, 
cÜeid
) {

351 
	gvœtu®_·ge_numb”
 = 
addr
 >> 12;

353 (
	gŒª¦©iÚ
)) {

354 (
	gT¿n¦©iÚ
::
NÚe
): {

355  
addr
;

357 (
	gT¿n¦©iÚ
::
Rªdom
): {

358 autØ
rg‘
 = 
make_·œ
(
cÜeid
, 
vœtu®_·ge_numb”
);

359 if(
	g·ge_Œª¦©iÚ
.
fšd
(
rg‘
è=ğ
·ge_Œª¦©iÚ
.
’d
()) {

365 ià(!
ä“_physiÿl_·ges_»maššg
) {

366 
physiÿl_·ge_»¶aûm’t
++;

367 
	gphys_·ge_to_»ad
 = 
Ìªd
(è% 
ä“_physiÿl_·ges
.
size
();

368 
as£¹
(
ä“_physiÿl_·ges
[
phys_·ge_to_»ad
] != -1);

369 
	g·ge_Œª¦©iÚ
[
rg‘
] = 
phys_·ge_to_»ad
;

372 
	gphys_·ge_to_»ad
 = 
Ìªd
(è% 
ä“_physiÿl_·ges
.
size
();

374 if(
	gä“_physiÿl_·ges
[
phys_·ge_to_»ad
] != -1) {

375 
¡¬tšg_·ge_of_£¬ch
 = 
phys_·ge_to_»ad
;

380 ++
	gphys_·ge_to_»ad
;

381 
	gphys_·ge_to_»ad
 %ğ
ä“_physiÿl_·ges
.
size
();

383 (
	gphys_·ge_to_»ad
 !ğ
¡¬tšg_·ge_of_£¬ch
è&& 
ä“_physiÿl_·ges
[
phys_·ge_to_»ad
] != -1);

386 
as£¹
(
ä“_physiÿl_·ges
[
phys_·ge_to_»ad
] == -1);

388 
	g·ge_Œª¦©iÚ
[
rg‘
] = 
phys_·ge_to_»ad
;

389 
	gä“_physiÿl_·ges
[
phys_·ge_to_»ad
] = 
cÜeid
;

390 --
	gä“_physiÿl_·ges_»maššg
;

395  (
	g·ge_Œª¦©iÚ
[
rg‘
] << 12è| (
	gaddr
 & ((1 << 12) - 1));

398 
as£¹
(
çl£
);

403 
	g´iv©e
:

405 
ÿlc_log2
(
v®
){

406 
n
 = 0;

407 (
	gv®
 >>= 1))

408 
n
 ++;

409  
	gn
;

411 
¦iû_low”_b™s
(& 
addr
, 
b™s
)

413 
	glb™s
 = 
addr
 & ((1<<
b™s
) - 1);

414 
	gaddr
 >>ğ
b™s
;

415  
	glb™s
;

417 
ş—r_low”_b™s
(& 
addr
, 
b™s
)

419 
	gaddr
 >>ğ
b™s
;

421 
Ìªd
() {

423  
	g¡©ic_ÿ¡
<>(
¿nd
()) << (() * 8) |„and();

426  
¿nd
();

	@MemoryFactory.cpp

1 
	~"MemÜyFaùÜy.h
"

2 
	~"LPDDR4.h
"

3 
	~"WideIO.h
"

4 
	~"WideIO2.h
"

5 
	~"HBM.h
"

6 
	~"SALP.h
"

8 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

10 
Çme¥aû
 
	g¿muÏtÜ


13 
	g‹m¶©e
 <>

14 
	gMemÜyFaùÜy
<
	gLPDDR4
>::
v®id©e
(
chªÃls
, 
¿nks
, cÚ¡ 
CÚfig
& 
cÚfigs
) {

15 
as£¹
(
chªÃls
 >= 2 && "LPDDR4„equires 2, 4, 8 ... channels");

18 
	g‹m¶©e
 <>

19 
	gMemÜyFaùÜy
<
	gWideIO
>::
v®id©e
(
chªÃls
, 
¿nks
, cÚ¡ 
CÚfig
& 
cÚfigs
) {

20 
as£¹
(
chªÃls
 == 4 && "WideIO comes with 4 channels");

23 
	g‹m¶©e
 <>

24 
	gMemÜyFaùÜy
<
	gWideIO2
>::
v®id©e
(
chªÃls
, 
¿nks
, cÚ¡ 
CÚfig
& 
cÚfigs
) {

25 
as£¹
((
chªÃls
 == 4 || channels == 8) && "WideIO2 comes with 4 or 8 channels");

26 
as£¹
((
¿nks
 == 1 ||„anks == 2) && "WideIO2 comes with 1 or 2„anks");

29 
	g‹m¶©e
 <>

30 
	gMemÜyFaùÜy
<
	gHBM
>::
v®id©e
(
chªÃls
, 
¿nks
, cÚ¡ 
CÚfig
& 
cÚfigs
) {

31 
as£¹
(
chªÃls
 == 8 && "HBM comes with 8 channels");

34 
	g‹m¶©e
 <>

35 
MemÜyBa£
 *
	gMemÜyFaùÜy
<
	gWideIO2
>::
ü—‹
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
) {

36 
	gchªÃls
 = 
¡oi
(
cÚfigs
["chªÃls"], 
NULL
, 0);

37 
	g¿nks
 = 
¡oi
(
cÚfigs
["¿nks"], 
NULL
, 0);

38 
v®id©e
(
chªÃls
, 
¿nks
, 
cÚfigs
);

40 cÚ¡ 
	g¡ršg
& 
	gÜg_Çme
 = 
cÚfigs
["org"];

41 cÚ¡ 
	g¡ršg
& 
	g¥“d_Çme
 = 
cÚfigs
["speed"];

43 
WideIO2
 *
	g¥ec
 = 
Ãw
 WideIO2(
Üg_Çme
, 
¥“d_Çme
, 
chªÃls
);

45 
ex‹nd_chªÃl_width
(
¥ec
, 
ÿch–še
);

47  (
	gMemÜyBa£
 *)
pİuÏ‹_memÜy
(
cÚfigs
, 
¥ec
, 
chªÃls
, 
¿nks
);

51 
	g‹m¶©e
 <>

52 
MemÜyBa£
 *
	gMemÜyFaùÜy
<
	gSALP
>::
ü—‹
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
) {

53 
	gchªÃls
 = 
¡oi
(
cÚfigs
["chªÃls"], 
NULL
, 0);

54 
	g¿nks
 = 
¡oi
(
cÚfigs
["¿nks"], 
NULL
, 0);

55 
	gsub¬¿ys
 = 
¡oi
(
cÚfigs
["sub¬¿ys"], 
NULL
, 0);

56 
v®id©e
(
chªÃls
, 
¿nks
, 
cÚfigs
);

58 cÚ¡ 
	g¡ršg
& 
	g¡d_Çme
 = 
cÚfigs
["standard"];

59 cÚ¡ 
	g¡ršg
& 
	gÜg_Çme
 = 
cÚfigs
["org"];

60 cÚ¡ 
	g¡ršg
& 
	g¥“d_Çme
 = 
cÚfigs
["speed"];

62 
SALP
 *
	g¥ec
 = 
Ãw
 SALP(
Üg_Çme
, 
¥“d_Çme
, 
¡d_Çme
, 
sub¬¿ys
);

64 
ex‹nd_chªÃl_width
(
¥ec
, 
ÿch–še
);

66  (
	gMemÜyBa£
 *)
pİuÏ‹_memÜy
(
cÚfigs
, 
¥ec
, 
chªÃls
, 
¿nks
);

76 
lib¿muÏtÜ_is_´e£Á
()

	@MemoryFactory.h

1 #iâdeà
__MEMORY_FACTORY_H


2 
	#__MEMORY_FACTORY_H


	)

4 
	~<m­
>

5 
	~<¡ršg
>

6 
	~<ÿs£¹
>

8 
	~"CÚfig.h
"

9 
	~"MemÜy.h
"

11 
	~"WideIO2.h
"

12 
	~"SALP.h
"

14 
usšg
 
Çme¥aû
 
	g¡d
;

16 
Çme¥aû
 
	g¿muÏtÜ


19 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

20 şas 
	cMemÜyFaùÜy
 {

21 
	gpublic
:

22 
ex‹nd_chªÃl_width
(
T
* 
¥ec
, 
ÿch–še
)

24 
	gchªÃl_un™
 = 
¥ec
->
´eãtch_size
 * s³c->
chªÃl_width
 / 8;

25 
	ggªg_numb”
 = 
ÿch–še
 / 
chªÃl_un™
;

27 
as£¹
(
gªg_numb”
 >= 1 &&

30 
as£¹
(
ÿch–še
 =ğ
gªg_numb”
 * 
chªÃl_un™
 &&

33 
	g¥ec
->
	gchªÃl_width
 *ğ
gªg_numb”
;

36 
	gMemÜy
<
	gT
> *
pİuÏ‹_memÜy
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
T
 *
¥ec
, 
chªÃls
, 
¿nks
) {

37 & 
	gdeçuÉ_¿nks
 = 
¥ec
->
Üg_’Œy
.
couÁ
[(
T
::
Lev–
::
Rªk
)];

38 & 
	gdeçuÉ_chªÃls
 = 
¥ec
->
Üg_’Œy
.
couÁ
[(
T
::
Lev–
::
ChªÃl
)];

40 ià(
	gdeçuÉ_chªÃls
 =ğ0è
deçuÉ_chªÃls
 = 
chªÃls
;

41 ià(
	gdeçuÉ_¿nks
 =ğ0è
deçuÉ_¿nks
 = 
¿nks
;

43 
	gveùÜ
<
	gCÚŒŞËr
<
	gT
> *> 
	gù¾s
;

44 
	gc
 = 0; c < 
	gchªÃls
; c++){

45 
	gDRAM
<
	gT
>* 
	gchªÃl
 = 
Ãw
 
DRAM
<
T
>(
¥ec
, T::
Lev–
::
ChªÃl
);

46 
	gchªÃl
->
	gid
 = 
c
;

47 
	gchªÃl
->
»gSts
("");

48 
	gù¾s
.
push_back
(
Ãw
 
CÚŒŞËr
<
T
>(
cÚfigs
, 
chªÃl
));

50  
Ãw
 
	gMemÜy
<
	gT
>(
	gcÚfigs
, 
	gù¾s
);

53 
v®id©e
(
chªÃls
, 
¿nks
, cÚ¡ 
CÚfig
& 
cÚfigs
) {

54 
as£¹
(
chªÃls
 > 0 && 
¿nks
 > 0);

57 
MemÜyBa£
 *
ü—‹
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
)

59 
	gchªÃls
 = 
¡oi
(
cÚfigs
["chªÃls"], 
NULL
, 0);

60 
	g¿nks
 = 
¡oi
(
cÚfigs
["¿nks"], 
NULL
, 0);

62 
v®id©e
(
chªÃls
, 
¿nks
, 
cÚfigs
);

64 cÚ¡ 
	g¡ršg
& 
	gÜg_Çme
 = 
cÚfigs
["org"];

65 cÚ¡ 
	g¡ršg
& 
	g¥“d_Çme
 = 
cÚfigs
["speed"];

67 
T
 *
	g¥ec
 = 
Ãw
 T(
Üg_Çme
, 
¥“d_Çme
);

69 
ex‹nd_chªÃl_width
(
¥ec
, 
ÿch–še
);

71  (
	gMemÜyBa£
 *)
pİuÏ‹_memÜy
(
cÚfigs
, 
¥ec
, 
chªÃls
, 
¿nks
);

75 
	g‹m¶©e
 <>

76 
MemÜyBa£
 *
	gMemÜyFaùÜy
<
	gWideIO2
>::
ü—‹
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
);

77 
	g‹m¶©e
 <>

78 
MemÜyBa£
 *
	gMemÜyFaùÜy
<
	gSALP
>::
ü—‹
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
ÿch–še
);

	@Processor.cpp

1 
	~"ProûssÜ.h
"

2 
	~<ÿs£¹
>

4 
usšg
 
Çme¥aû
 
	g¡d
;

5 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

7 
	gProûssÜ
::
ProûssÜ
(cÚ¡ 
CÚfig
& 
cÚfigs
,

8 
veùÜ
<cÚ¡ *> 
Œaû_li¡
,

9 
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd_memÜy
,

10 
MemÜyBa£
& 
memÜy
)

11 : 
cs
(
Œaû_li¡
.
size
(), -1),

12 
—¾y_ex™
(
cÚfigs
.
is_—¾y_ex™
()),

13 
no_cÜe_ÿches
(!
cÚfigs
.
has_cÜe_ÿches
()),

14 
no_sh¬ed_ÿche
(!
cÚfigs
.
has_l3_ÿche
()),

15 
ÿchesys
(
Ãw
 
CacheSy¡em
(
cÚfigs
, 
£nd_memÜy
)),

16 
Îc
(
l3_size
, 
l3_assoc
, 
l3_blocksz
,

17 
mshr_³r_bªk
 * 
Œaû_li¡
.
size
(),

18 
Cache
::
Lev–
::
L3
, 
ÿchesys
) {

20 
as£¹
(
ÿchesys
 !ğ
nuÎ±r
);

21 
	gŒaûnum
 = 
Œaû_li¡
.
size
();

22 
as£¹
(
Œaûnum
 > 0);

23 
´štf
("Œaûnum: %d\n", 
Œaûnum
);

24 
	gi
 = 0 ; i < 
	gŒaûnum
 ; ++i) {

25 
´štf
("Œaû_li¡[%d]: %s\n", 
i
, 
Œaû_li¡
[i]);

27 ià(
	gno_sh¬ed_ÿche
) {

28 
	gi
 = 0 ; i < 
	gŒaûnum
 ; ++i) {

29 
	gcÜes
.
em¶aû_back
(
Ãw
 
CÜe
(

30 
cÚfigs
, 
i
, 
Œaû_li¡
[i], 
£nd_memÜy
, 
nuÎ±r
,

31 
ÿchesys
, 
memÜy
));

34 
	gi
 = 0 ; i < 
	gŒaûnum
 ; ++i) {

35 
	gcÜes
.
em¶aû_back
(
Ãw
 
CÜe
(
cÚfigs
, 
i
, 
Œaû_li¡
[i],

36 
¡d
::
bšd
(&
Cache
::
£nd
, &
Îc
, std::
¶aûhŞd”s
::
_1
),

37 &
Îc
, 
ÿchesys
, 
memÜy
));

40 
	gi
 = 0 ; i < 
	gŒaûnum
 ; ++i) {

41 
	gcÜes
[
i
]->
	gÿÎback
 = 
¡d
::
bšd
(&
ProûssÜ
::
»ûive
, 
this
,

42 
¶aûhŞd”s
::
_1
);

46 
	gıu_cyşes
.
Çme
("cpu_cycles")

47 .
desc
("cpu cycle‚umber")

48 .
´ecisiÚ
(0)

50 
	gıu_cyşes
 = 0;

53 
	gProûssÜ
::
	$tick
() {

54 
ıu_cyşes
++;

55 ià(!(
no_cÜe_ÿches
 && 
no_sh¬ed_ÿche
)) {

56 
ÿchesys
->
	`tick
();

58 
i
 = 0 ; i < 
cÜes
.
	`size
() ; ++i) {

59 
CÜe
* 
cÜe
 = 
cÜes
[
i
].
	`g‘
();

60 
cÜe
->
	`tick
();

62 
	}
}

64 
	gProûssÜ
::
	$»ûive
(
Reque¡
& 
»q
) {

65 ià(!
no_sh¬ed_ÿche
) {

66 
Îc
.
	`ÿÎback
(
»q
);

67 } ià(!
cÜes
[0]->
no_cÜe_ÿches
) {

70 
i
 = 0 ; i < 
cÜes
.
	`size
() ; ++i) {

71 
CÜe
* 
cÜe
 = 
cÜes
[
i
].
	`g‘
();

72 
cÜe
->
ÿches
[0]->
	`ÿÎback
(
»q
);

75 
i
 = 0 ; i < 
cÜes
.
	`size
() ; ++i) {

76 
CÜe
* 
cÜe
 = 
cÜes
[
i
].
	`g‘
();

77 
cÜe
->
	`»ûive
(
»q
);

79 
	}
}

81 
boŞ
 
	gProûssÜ
::
	$fšished
() {

82 ià(
—¾y_ex™
) {

83 
i
 = 0 ; i < 
cÜes
.
	`size
(); ++i) {

84 ià(
cÜes
[
i
]->
	`fšished
()) {

85 
j
 = 0 ; j < 
cÜes
.
	`size
() ; ++j) {

86 
c
 +ğ
cÜes
[
j
]->
	`ÿlc_c
();

88  
Œue
;

91  
çl£
;

93 
i
 = 0 ; i < 
cÜes
.
	`size
(); ++i) {

94 ià(!
cÜes
[
i
]->
	`fšished
()) {

95  
çl£
;

97 ià(
cs
[
i
] < 0) {

98 
cs
[
i
] = 
cÜes
[i]->
	`ÿlc_c
();

99 
c
 +ğ
cs
[
i
];

102  
Œue
;

104 
	}
}

106 
boŞ
 
	gProûssÜ
::
	$has_»ached_lim™
() {

107 
i
 = 0 ; i < 
cÜes
.
	`size
() ; ++i) {

108 ià(!
cÜes
[
i
]->
	`has_»ached_lim™
()) {

109  
çl£
;

112  
Œue
;

113 
	}
}

115 
	gCÜe
::
CÜe
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
cÜeid
,

116 cÚ¡ * 
Œaû_âame
, 
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd_Ãxt
,

117 
Cache
* 
Îc
, 
¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
, 
MemÜyBa£
& 
memÜy
)

118 : 
id
(
cÜeid
), 
no_cÜe_ÿches
(!
cÚfigs
.
has_cÜe_ÿches
()),

119 
no_sh¬ed_ÿche
(!
cÚfigs
.
has_l3_ÿche
()),

120 
Îc
Ölc), 
Œaû
(
Œaû_âame
), 
	$memÜy
(
memÜy
)

123 ià(
no_cÜe_ÿches
) {

124 
£nd
 = 
£nd_Ãxt
;

127 
ÿches
.
	`em¶aû_back
(
Ãw
 
	`Cache
(

128 
l2_size
, 
l2_assoc
, 
l2_blocksz
, 
l2_mshr_num
,

129 
Cache
::
Lev–
::
L2
, 
ÿchesys
));

131 
ÿches
.
	`em¶aû_back
(
Ãw
 
	`Cache
(

132 
l1_size
, 
l1_assoc
, 
l1_blocksz
, 
l1_mshr_num
,

133 
Cache
::
Lev–
::
L1
, 
ÿchesys
));

134 
£nd
 = 
	`bšd
(&
Cache
::£nd, 
ÿches
[1].
	`g‘
(), 
¶aûhŞd”s
::
_1
);

135 ià(
Îc
 !ğ
nuÎ±r
) {

136 
ÿches
[0]->
	`cÚÿow”
(
Îc
);

138 
ÿches
[1]->
	`cÚÿow”
(ÿches[0].
	`g‘
());

140 ià(
no_cÜe_ÿches
) {

141 
mÜe_»qs
 = 
Œaû
.
	`g‘_f‹»d_»que¡
(

142 
bubbË_út
, 
»q_addr
, 
»q_ty³
);

143 
»q_addr
 = 
memÜy
.
	`·ge_®loÿtÜ
Ôeq_addr, 
id
);

145 
mÜe_»qs
 = 
Œaû
.
	`g‘_unf‹»d_»que¡
(

146 
bubbË_út
, 
»q_addr
, 
»q_ty³
);

147 
»q_addr
 = 
memÜy
.
	`·ge_®loÿtÜ
Ôeq_addr, 
id
);

151 
ex³ùed_lim™_š¡s
 = 
cÚfigs
.
	`g‘_ex³ùed_lim™_š¡s
();

154 
»cÜd_cycs
.
	`Çme
("»cÜd_cycs_cÜe_" + 
	`to_¡ršg
(
id
))

155 .
	`desc
("Record cycle‚umber for calculating weighted speedup. (Only valid whenƒxpected†imit instruction‚umber is‚on zero in config file.)")

156 .
	`´ecisiÚ
(0)

159 
»cÜd_š¡s
.
	`Çme
("»cÜd_š¡s_cÜe_" + 
	`to_¡ršg
(
id
))

160 .
	`desc
("Retired instruction‚umber when„ecord cycle‚umber. (Only valid whenƒxpected†imit instruction‚umber is‚on zero in config file.)")

161 .
	`´ecisiÚ
(0)

164 
memÜy_acûss_cyşes
.
	`Çme
("memÜy_acûss_cyşes_cÜe_" + 
	`to_¡ršg
(
id
))

165 .
	`desc
("memory‡ccess cycles in memoryime domain")

166 .
	`´ecisiÚ
(0)

168 
memÜy_acûss_cyşes
 = 0;

169 
ıu_š¡
.
	`Çme
("ıu_š¡ruùiÚs_cÜe_" + 
	`to_¡ršg
(
id
))

170 .
	`desc
("cpu instruction‚umber")

171 .
	`´ecisiÚ
(0)

173 
ıu_š¡
 = 0;

174 
	}
}

177 
	gCÜe
::
	$ÿlc_c
()

179 
	`´štf
("[%d]»tœed: %ld, clk, %ld\n", 
id
, 
»tœed
, 
şk
);

180  (è
»tœed
 / 
şk
;

181 
	}
}

183 
	gCÜe
::
	$tick
()

185 
şk
++;

187 
»tœed
 +ğ
wšdow
.
	`»tœe
();

189 ià(
ex³ùed_lim™_š¡s
 =ğ0 && !
mÜe_»qs
) ;

192 
š£¹ed
 = 0;

193 
bubbË_út
 > 0) {

194 ià(
š£¹ed
 =ğ
wšdow
.
c
) ;

195 ià(
wšdow
.
	`is_fuÎ
()) ;

197 
wšdow
.
	`š£¹
(
Œue
, -1);

198 
š£¹ed
++;

199 
bubbË_út
--;

200 
ıu_š¡
++;

201 ià((
ıu_š¡
.
	`v®ue
()è=ğ
ex³ùed_lim™_š¡s
 && !
»ached_lim™
) {

202 
»cÜd_cycs
 = 
şk
;

203 
»cÜd_š¡s
 = (
ıu_š¡
.
	`v®ue
());

204 
memÜy
.
	`»cÜd_cÜe
(
id
);

205 
»ached_lim™
 = 
Œue
;

209 ià(
»q_ty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

211 ià(
š£¹ed
 =ğ
wšdow
.
c
) ;

212 ià(
wšdow
.
	`is_fuÎ
()) ;

214 
Reque¡
 
	`»q
(
»q_addr
, 
»q_ty³
, 
ÿÎback
, 
id
);

215 ià(!
	`£nd
(
»q
)) ;

217 
wšdow
.
	`š£¹
(
çl£
, 
»q_addr
);

218 
ıu_š¡
++;

222 
	`as£¹
(
»q_ty³
 =ğ
Reque¡
::
Ty³
::
WRITE
);

223 
Reque¡
 
	`»q
(
»q_addr
, 
»q_ty³
, 
ÿÎback
, 
id
);

224 ià(!
	`£nd
(
»q
)) ;

225 
ıu_š¡
++;

227 ià((
ıu_š¡
.
	`v®ue
()è=ğ
ex³ùed_lim™_š¡s
 && !
»ached_lim™
) {

228 
»cÜd_cycs
 = 
şk
;

229 
»cÜd_š¡s
 = (
ıu_š¡
.
	`v®ue
());

230 
memÜy
.
	`»cÜd_cÜe
(
id
);

231 
»ached_lim™
 = 
Œue
;

234 ià(
no_cÜe_ÿches
) {

235 
mÜe_»qs
 = 
Œaû
.
	`g‘_f‹»d_»que¡
(

236 
bubbË_út
, 
»q_addr
, 
»q_ty³
);

237 ià(
»q_addr
 != -1) {

238 
»q_addr
 = 
memÜy
.
	`·ge_®loÿtÜ
Ôeq_addr, 
id
);

241 
mÜe_»qs
 = 
Œaû
.
	`g‘_unf‹»d_»que¡
(

242 
bubbË_út
, 
»q_addr
, 
»q_ty³
);

243 ià(
»q_addr
 != -1) {

244 
»q_addr
 = 
memÜy
.
	`·ge_®loÿtÜ
Ôeq_addr, 
id
);

247 ià(!
mÜe_»qs
) {

248 ià(!
»ached_lim™
) {

249 
»cÜd_cycs
 = 
şk
;

250 
»cÜd_š¡s
 = (
ıu_š¡
.
	`v®ue
());

251 
memÜy
.
	`»cÜd_cÜe
(
id
);

252 
»ached_lim™
 = 
Œue
;

255 
	}
}

257 
boŞ
 
	gCÜe
::
	$fšished
()

259  !
mÜe_»qs
 && 
wšdow
.
	`is_em±y
();

260 
	}
}

262 
boŞ
 
	gCÜe
::
	$has_»ached_lim™
() {

263  
»ached_lim™
;

264 
	}
}

266 
	gCÜe
::
	$»ûive
(
Reque¡
& 
»q
)

268 
wšdow
.
	`£t_»ady
(
»q
.
addr
, ~(
l1_blocksz
 - 1l));

269 ià(
»q
.
¬rive
 !ğ-1 &&„eq.
d•¬t
 > 
Ï¡
) {

270 
memÜy_acûss_cyşes
 +ğ(
»q
.
d•¬t
 - 
	`max
(
Ï¡
,„eq.
¬rive
));

271 
Ï¡
 = 
»q
.
d•¬t
;

273 
	}
}

275 
boŞ
 
	gWšdow
::
	$is_fuÎ
()

277  
lßd
 =ğ
d•th
;

278 
	}
}

280 
boŞ
 
	gWšdow
::
	$is_em±y
()

282  
lßd
 == 0;

283 
	}
}

286 
	gWšdow
::
	$š£¹
(
boŞ
 
»ady
, 
addr
)

288 
	`as£¹
(
lßd
 <ğ
d•th
);

290 
»ady_li¡
.
	`©
(
h—d
èğ
»ady
;

291 
addr_li¡
.
	`©
(
h—d
èğ
addr
;

293 
h—d
 = (h—d + 1è% 
d•th
;

294 
lßd
++;

295 
	}
}

298 
	gWšdow
::
	$»tœe
()

300 
	`as£¹
(
lßd
 <ğ
d•th
);

302 ià(
lßd
 == 0)  0;

304 
»tœed
 = 0;

305 
lßd
 > 0 && 
»tœed
 < 
c
) {

306 ià(!
»ady_li¡
.
	`©
(

))

309 

 = ( + 1è% 
d•th
;

310 
lßd
--;

311 
»tœed
++;

314  
»tœed
;

315 
	}
}

318 
	gWšdow
::
	$£t_»ady
(
addr
, 
mask
)

320 ià(
lßd
 == 0) ;

322 
i
 = 0; i < 
lßd
; i++) {

323 
šdex
 = (

 + 
i
è% 
d•th
;

324 ià((
addr_li¡
.
	`©
(
šdex
è& 
mask
è!ğ(
addr
 & mask))

326 
»ady_li¡
.
	`©
(
šdex
èğ
Œue
;

328 
	}
}

332 
	gT¿û
::
	$T¿û
(cÚ¡ * 
Œaû_âame
è: 
	`fe
Ñ¿û_âame), 
	$Œaû_Çme
(
Œaû_âame
)

334 ià(!
fe
.
	`good
()) {

335 
¡d
::
û¼
 << "Bad¿û fe: " << 
Œaû_âame
 << std::
’dl
;

336 
	`ex™
(1);

338 
	}
}

340 
boŞ
 
	gT¿û
::
	$g‘_unf‹»d_»que¡
(& 
bubbË_út
, & 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
)

342 
¡ršg
 
lše
;

343 
	`g‘lše
(
fe
, 
lše
);

344 ià(
fe
.
	`eof
()) {

345 
fe
.
	`ş—r
();

346 
fe
.
	`£ekg
(0, fe.
beg
);

347  
çl£
;

349 
size_t
 
pos
, 
’d
;

350 
bubbË_út
 = 
¡d
::
	`¡oul
(
lše
, &
pos
, 10);

351 
pos
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(' ',…os+1);

352 
»q_addr
 = 
¡d
::
	`¡oul
(
lše
.
	`sub¡r
(
pos
), &
’d
, 0);

354 
pos
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(' ',…os+
’d
);

356 ià(
pos
 =ğ
¡ršg
::
Åos
 || 
lše
.
	`sub¡r
(pos)[0] == 'R')

357 
»q_ty³
 = 
Reque¡
::
Ty³
::
READ
;

358 ià(
lše
.
	`sub¡r
(
pos
)[0] == 'W')

359 
»q_ty³
 = 
Reque¡
::
Ty³
::
WRITE
;

360 
	`as£¹
(
çl£
);

361  
Œue
;

362 
	}
}

364 
boŞ
 
	gT¿û
::
	$g‘_f‹»d_»que¡
(& 
bubbË_út
, & 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
)

366 
boŞ
 
has_wr™e
 = 
çl£
;

367 
wr™e_addr
;

368 
lše_num
 = 0;

369 ià(
has_wr™e
){

370 
bubbË_út
 = 0;

371 
»q_addr
 = 
wr™e_addr
;

372 
»q_ty³
 = 
Reque¡
::
Ty³
::
WRITE
;

373 
has_wr™e
 = 
çl£
;

374  
Œue
;

376 
¡ršg
 
lše
;

377 
	`g‘lše
(
fe
, 
lše
);

378 
lše_num
 ++;

379 ià(
fe
.
	`eof
(è|| 
lše
.
	`size
() == 0) {

380 
fe
.
	`ş—r
();

381 
fe
.
	`£ekg
(0, fe.
beg
);

382 
has_wr™e
 = 
çl£
;

383 
lše_num
 = 0;

384  
çl£
;

387 
size_t
 
pos
, 
’d
;

388 
bubbË_út
 = 
¡d
::
	`¡oul
(
lše
, &
pos
, 10);

390 
pos
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(' ',…os+1);

391 
»q_addr
 = 
	`¡oul
(
lše
.
	`sub¡r
(
pos
), &
’d
, 0);

392 
»q_ty³
 = 
Reque¡
::
Ty³
::
READ
;

394 
pos
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(' ',…os+
’d
);

395 ià(
pos
 !ğ
¡ršg
::
Åos
){

396 
has_wr™e
 = 
Œue
;

397 
wr™e_addr
 = 
	`¡oul
(
lše
.
	`sub¡r
(
pos
), 
NULL
, 0);

399  
Œue
;

400 
	}
}

402 
boŞ
 
	gT¿û
::
	$g‘_d¿mŒaû_»que¡
(& 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
)

404 
¡ršg
 
lše
;

405 
	`g‘lše
(
fe
, 
lše
);

406 ià(
fe
.
	`eof
()) {

407  
çl£
;

409 
size_t
 
pos
;

410 
»q_addr
 = 
¡d
::
	`¡oul
(
lše
, &
pos
, 16);

412 
pos
 = 
lše
.
	`fšd_fœ¡_nÙ_of
(' ',…os+1);

414 ià(
pos
 =ğ
¡ršg
::
Åos
 || 
lše
.
	`sub¡r
(pos)[0] == 'R')

415 
»q_ty³
 = 
Reque¡
::
Ty³
::
READ
;

416 ià(
lše
.
	`sub¡r
(
pos
)[0] == 'W')

417 
»q_ty³
 = 
Reque¡
::
Ty³
::
WRITE
;

418 
	`as£¹
(
çl£
);

419  
Œue
;

420 
	}
}

	@Processor.h

1 #iâdeà
__PROCESSOR_H


2 
	#__PROCESSOR_H


	)

4 
	~"Cache.h
"

5 
	~"CÚfig.h
"

6 
	~"MemÜy.h
"

7 
	~"Reque¡.h
"

8 
	~"Sti¡ics.h
"

9 
	~<io¡»am
>

10 
	~<veùÜ
>

11 
	~<f¡»am
>

12 
	~<¡ršg
>

13 
	~<ùy³.h
>

14 
	~<funùiÚ®
>

16 
Çme¥aû
 
	g¿muÏtÜ


19 şas 
	cT¿û
 {

20 
	gpublic
:

21 
T¿û
(cÚ¡ * 
Œaû_âame
);

24 
boŞ
 
g‘_unf‹»d_»que¡
(& 
bubbË_út
, & 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
);

25 
boŞ
 
g‘_f‹»d_»que¡
(& 
bubbË_út
, & 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
);

28 
boŞ
 
g‘_d¿mŒaû_»que¡
(& 
»q_addr
, 
Reque¡
::
Ty³
& 
»q_ty³
);

30 
	g´iv©e
:

31 
¡d
::
if¡»am
 
fe
;

32 
	g¡d
::
¡ršg
 
Œaû_Çme
;

36 şas 
	cWšdow
 {

37 
	gpublic
:

38 
c
 = 4;

39 
	gd•th
 = 128;

41 
Wšdow
(è: 
»ady_li¡
(
d•th
), 
addr_li¡
(depth, -1) {}

42 
boŞ
 
is_fuÎ
();

43 
boŞ
 
is_em±y
();

44 
š£¹
(
boŞ
 
»ady
, 
addr
);

45 
»tœe
();

46 
£t_»ady
(
addr
, 
mask
);

48 
	g´iv©e
:

49 
lßd
 = 0;

50 
	gh—d
 = 0;

51 
	g
 = 0;

52 
	g¡d
::
veùÜ
<
boŞ
> 
»ady_li¡
;

53 
	g¡d
::
veùÜ
<> 
addr_li¡
;

57 şas 
	cCÜe
 {

58 
	gpublic
:

59 
şk
 = 0;

60 
	g»tœed
 = 0;

61 
	gid
 = 0;

62 
	gfunùiÚ
<
boŞ
(
Reque¡
)> 
	g£nd
;

64 
CÜe
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
cÜeid
,

65 cÚ¡ * 
Œaû_âame
,

66 
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd_Ãxt
, 
Cache
* 
Îc
,

67 
¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
, 
MemÜyBa£
& 
memÜy
);

68 
tick
();

69 
»ûive
(
Reque¡
& 
»q
);

70 
ÿlc_c
();

71 
boŞ
 
fšished
();

72 
boŞ
 
has_»ached_lim™
();

73 
	gfunùiÚ
<(
	gReque¡
&)> 
	gÿÎback
;

75 
boŞ
 
	gno_cÜe_ÿches
 = 
Œue
;

76 
boŞ
 
	gno_sh¬ed_ÿche
 = 
Œue
;

77 
	gl1_size
 = 1 << 15;

78 
	gl1_assoc
 = 1 << 3;

79 
	gl1_blocksz
 = 1 << 6;

80 
	gl1_mshr_num
 = 16;

82 
	gl2_size
 = 1 << 18;

83 
	gl2_assoc
 = 1 << 3;

84 
	gl2_blocksz
 = 1 << 6;

85 
	gl2_mshr_num
 = 16;

86 
	g¡d
::
veùÜ
<
¡d
::
sh¬ed_±r
<
Cache
>> 
ÿches
;

87 
Cache
* 
	gÎc
;

89 
SÿÏrSt
 
	g»cÜd_cycs
;

90 
SÿÏrSt
 
	g»cÜd_š¡s
;

91 
	gex³ùed_lim™_š¡s
;

93 
boŞ
 
	g»ached_lim™
 = 
çl£
;

95 
	g´iv©e
:

96 
T¿û
 
Œaû
;

97 
Wšdow
 
	gwšdow
;

99 
	gbubbË_út
;

100 
	g»q_addr
 = -1;

101 
	gReque¡
::
Ty³
 
»q_ty³
;

102 
boŞ
 
	gmÜe_»qs
;

103 
	gÏ¡
 = 0;

105 
SÿÏrSt
 
	gmemÜy_acûss_cyşes
;

106 
SÿÏrSt
 
	gıu_š¡
;

107 
	gMemÜyBa£
& 
	gmemÜy
;

110 şas 
	cProûssÜ
 {

111 
	gpublic
:

112 
ProûssÜ
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
veùÜ
<cÚ¡ *> 
Œaû_li¡
,

113 
funùiÚ
<
boŞ
(
Reque¡
)> 
£nd
, 
MemÜyBa£
& 
memÜy
);

114 
tick
();

115 
»ûive
(
Reque¡
& 
»q
);

116 
boŞ
 
fšished
();

117 
boŞ
 
has_»ached_lim™
();

119 
	g¡d
::
veùÜ
<
¡d
::
unique_±r
<
CÜe
>> 
cÜes
;

120 
	g¡d
::
veùÜ
<> 
cs
;

121 
	gc
 = 0;

124 
boŞ
 
	g—¾y_ex™
;

126 
boŞ
 
	gno_cÜe_ÿches
 = 
Œue
;

127 
boŞ
 
	gno_sh¬ed_ÿche
 = 
Œue
;

129 
	gl3_size
 = 1 << 23;

130 
	gl3_assoc
 = 1 << 3;

131 
	gl3_blocksz
 = 1 << 6;

132 
	gmshr_³r_bªk
 = 16;

134 
	g¡d
::
sh¬ed_±r
<
CacheSy¡em
> 
ÿchesys
;

135 
Cache
 
	gÎc
;

137 
SÿÏrSt
 
	gıu_cyşes
;

	@Refresh.cpp

10 
	~<¡dlib.h
>

12 
	~"Reäesh.h
"

13 
	~"CÚŒŞËr.h
"

14 
	~"DRAM.h
"

15 
	~"DSARP.h
"

17 
usšg
 
Çme¥aû
 
	g¡d
;

18 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

20 
Çme¥aû
 
	g¿muÏtÜ
 {

23 
	g‹m¶©e
<>

24 
	gReäesh
<
	gDSARP
>::
Reäesh
(
CÚŒŞËr
<
DSARP
>* 
ù¾
) : ctrl(ctrl) {

25 
şk
 = 
»äeshed
 = 0;

26 
	gmax_¿nk_couÁ
 = 
ù¾
->
chªÃl
->
chd»n
.
size
();

27 
	gmax_bªk_couÁ
 = 
ù¾
->
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[()
DSARP
::
Lev–
::
Bªk
];

28 
	gmax_§_couÁ
 = 
ù¾
->
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[()
DSARP
::
Lev–
::
SubA¼ay
];

31 
	gr
 = 0;„ < 
	gmax_¿nk_couÁ
;„++) {

32 
	gbªk_»f_couÁ”s
.
push_back
(0);

33 
	gbªk_»äesh_backlog
.
push_back
(
Ãw
 
veùÜ
<>(
max_bªk_couÁ
, 0));

34 
	gveùÜ
<> 
§_couÁ”s
(
ù¾
->
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[()
DSARP
::
Lev–
::
SubA¼ay
], 0);

35 
	gsub¬¿y_»f_couÁ”s
.
push_back
(
§_couÁ”s
);

38 
	gËv–_chª
 = ()
DSARP
::
Lev–
::
ChªÃl
;

39 
	gËv–_¿nk
 = ()
DSARP
::
Lev–
::
Rªk
;

40 
	gËv–_bªk
 = ()
DSARP
::
Lev–
::
Bªk
;

41 
	gËv–_§
 = ()
DSARP
::
Lev–
::
SubA¼ay
;

44 
	g‹m¶©e
<>

45 
	gReäesh
<
	gDSARP
>::
—¾y_šjeù_»äesh
() {

47 ià(
ù¾
->
wr™e_mode
)

51 
	gveùÜ
<
	gboŞ
> 
is_bªk_occup›d
(
max_¿nk_couÁ
 * 
max_bªk_couÁ
, 
çl£
);

52 
	gCÚŒŞËr
<
	gDSARP
>::
Queue
& 
rdq
 = 
ù¾
->
»adq
;

55 autØ
	g»q
: 
rdq
.
q
)

57 
as£¹
(
»q
.
addr_vec
[
Ëv–_chª
] =ğ
ù¾
->
chªÃl
->
id
);

58 
	gridx
 = 
»q
.
addr_vec
[
Ëv–_¿nk
] * 
max_bªk_couÁ
;

59 
	gbidx
 = 
»q
.
addr_vec
[
Ëv–_bªk
];

60 
	gis_bªk_occup›d
[
ridx
+
bidx
] = 
Œue
;

64 
	gr
 = 0;„ < 
	gmax_¿nk_couÁ
;„++) {

66 
	gbidx_¡¬t
 = 
¿nd
(è% 
max_bªk_couÁ
;

68 
	gb
 = 0; b < 
	gmax_bªk_couÁ
; b++)

70 
	gbidx
 = (
bidx_¡¬t
 + 
b
è% 
max_bªk_couÁ
;

72 ià(
	gis_bªk_occup›d
[(
r
 * 
max_bªk_couÁ
è+ 
bidx
])

76 
boŞ
 
	g³ndšg_»f
 = 
çl£
;

77 
Reque¡
 
	g»q
 : 
ù¾
->
Ùh”q
.
q
)

78 ià(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
REFRESH


79 && 
»q
.
addr_vec
[
Ëv–_chª
] =ğ
ù¾
->
chªÃl
->
id


80 && 
»q
.
addr_vec
[
Ëv–_¿nk
] =ğ
r
 &&„eq.addr_vec[
Ëv–_bªk
] =ğ
bidx
)

81 
³ndšg_»f
 = 
Œue
;

82 ià(
	g³ndšg_»f
)

86 ià((*(
	gbªk_»äesh_backlog
[
r
]))[
bidx
] >ğ
backlog_—¾y_puÎ_th»shŞd
 ||

87 
ù¾
->
Ùh”q
.
q
.
size
(è>ğù¾->Ùh”q.
max
)

91 
»äesh_rg‘
(
ù¾
, 
r
, 
bidx
, 
sub¬¿y_»f_couÁ”s
[r][bidx]);

93 (*(
	gbªk_»äesh_backlog
[
r
]))[
bidx
]++;

94 
	gsub¬¿y_»f_couÁ”s
[
r
][
bidx
] = (
sub¬¿y_»f_couÁ”s
[r][bidx]+1è% 
max_§_couÁ
;

100 
	g‹m¶©e
<>

101 
	gReäesh
<
	gDSARP
>::
šjeù_»äesh
(
boŞ
 
b_»f_¿nk
) {

103 ià(
b_»f_¿nk
)

104 autØ
¿nk
 : 
ù¾
->
chªÃl
->
chd»n
)

105 
»äesh_rg‘
(
ù¾
, 
¿nk
->
id
, -1, -1);

108 autØ
	g¿nk
 : 
ù¾
->
chªÃl
->
chd»n
) {

109 
rid
 = 
¿nk
->
id
;

110 
	gbid
 = 
bªk_»f_couÁ”s
[
rid
];

113 (*(
	gbªk_»äesh_backlog
[
rid
]))[
bid
]--;

116 
	gbªk_»f_couÁ”s
[
rid
] = (
bªk_»f_couÁ”s
[rid] + 1è% 
max_bªk_couÁ
;

119 ià(
	gù¾
->
	gchªÃl
->
	g¥ec
->
	gty³
 =ğ
DSARP
::
Ty³
::
DARP
 ||

120 
ù¾
->
chªÃl
->
¥ec
->
ty³
 =ğ
DSARP
::
Ty³
::DSARP) {

122 
boŞ
 
»f_now
 = 
çl£
;

124 
boŞ
 
	g³ndšg_»f
 = 
çl£
;

125 
Reque¡
 
	g»q
 : 
ù¾
->
Ùh”q
.
q
) {

126 ià(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
REFRESH
) {

127 
³ndšg_»f
 = 
Œue
;

133 ià(!
	g³ndšg_»f
 && 
	gù¾
->
	g»adq
.
size
() == 0)

134 
»f_now
 = 
Œue
;

137 ià((*(
	gbªk_»äesh_backlog
[
rid
]))[
bid
] <ğ
backlog_mš
)

138 
»f_now
 = 
Œue
;

141 ià(!
	g»f_now
)

145 
»äesh_rg‘
(
ù¾
, 
rid
, 
bid
, 
sub¬¿y_»f_couÁ”s
[rid][bid]);

147 (*(
	gbªk_»äesh_backlog
[
rid
]))[
bid
]++;

149 
	gsub¬¿y_»f_couÁ”s
[
rid
][
bid
] = (
sub¬¿y_»f_couÁ”s
[rid][bid]+1è% 
max_§_couÁ
;

152 
	g»äeshed
 = 
şk
;

156 
	g·œ
<, > 
	twrq_idx
;

157 
boŞ
 
wrq_comp
 (
wrq_idx
 
l
, wrq_idx 
r
)

159  
	gl
.
	gfœ¡
 < 
	gr
.first;

163 
	g‹m¶©e
<>

164 
	gReäesh
<
	gDSARP
>::
w½
() {

165 
»f_rid
 = 0; 
	g»f_rid
 < 
	gmax_¿nk_couÁ
;„ef_rid++)

168 
boŞ
 
	g³ndšg_»f
 = 
çl£
;

169 
Reque¡
 
	g»q
 : 
ù¾
->
Ùh”q
.
q
) {

170 ià(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
REFRESH
 &&„eq.
addr_vec
[
Ëv–_¿nk
] =ğ
»f_rid
) {

171 
³ndšg_»f
 = 
Œue
;

175 ià(
	g³ndšg_»f
)

179 
	gveùÜ
<
	gwrq_idx
> 
	gsÜ‹d_bªk_demªd
;

180 
	gb
 = 0; b < 
	gmax_bªk_couÁ
; b++)

181 
	gsÜ‹d_bªk_demªd
.
push_back
(
wrq_idx
(0,
b
));

183 
	gtÙ®_wr
 = 0;

184 autØ
	g»q
 : 
ù¾
->
wr™eq
.
q
) {

185 ià(
»q
.
addr_vec
[
Ëv–_¿nk
] =ğ
»f_rid
) {

186 
sÜ‹d_bªk_demªd
[
»q
.
addr_vec
[
Ëv–_bªk
]].
fœ¡
++;

187 
	gtÙ®_wr
++;

191 ià(
	gtÙ®_wr
 == 0)

195 autØ
	g»q
 : 
ù¾
->
»adq
.
q
)

196 ià(
»q
.
addr_vec
[
Ëv–_¿nk
] =ğ
»f_rid
)

197 
sÜ‹d_bªk_demªd
[
»q
.
addr_vec
[
Ëv–_bªk
]].
fœ¡
++;

200 
	g¡d
::
sÜt
(
sÜ‹d_bªk_demªd
.
begš
(), sÜ‹d_bªk_demªd.
’d
(), 
wrq_comp
);

203 
	gtİ_idË_idx
 = 0;

204 
	gi
 = 0; i < 
	gmax_bªk_couÁ
; i++) {

205 ià(
	gsÜ‹d_bªk_demªd
[
i
].
	g£cÚd
 != 0) {

206 
tİ_idË_idx
 = 
i
;

212 
	g»f_bid_idx
 = (
tİ_idË_idx
 =ğ0è? 0 : 
¿nd
() %op_idle_idx;

213 
	g»f_bid
 = 
sÜ‹d_bªk_demªd
[
»f_bid_idx
].
£cÚd
;

216 ià((*(
	gbªk_»äesh_backlog
[
»f_rid
]))[
»f_bid
] < 
	gbacklog_max


217 && 
	gù¾
->
	gÙh”q
.
	gq
.
size
(è< cŒl->Ùh”q.
	gmax
) {

218 
»äesh_rg‘
(
ù¾
, 
»f_rid
, 
»f_bid
, 
sub¬¿y_»f_couÁ”s
[ref_rid][ref_bid]);

220 (*(
	gbªk_»äesh_backlog
[
»f_rid
]))[
»f_bid
]++;

221 
	gsub¬¿y_»f_couÁ”s
[
»f_rid
][
»f_bid
] = (
sub¬¿y_»f_couÁ”s
[»f_rid][»f_bid]+1è% 
max_§_couÁ
;

227 
	g‹m¶©e
<>

228 
	gReäesh
<
	gDSARP
>::
tick_»f
() {

229 
şk
++;

231 
boŞ
 
	gb_»f_¿nk
 = 
ù¾
->
chªÃl
->
¥ec
->
b_»f_¿nk
;

232 
	g»äesh_š‹rv®
 =

233 (
b_»f_¿nk
) ?

234 
ù¾
->
chªÃl
->
¥ec
->
¥“d_’Œy
.
nREFI
 :

235 
ù¾
->
chªÃl
->
¥ec
->
¥“d_’Œy
.
nREFIpb
;

238 ià(
	gù¾
->
	gchªÃl
->
	g¥ec
->
	gty³
 =ğ
DSARP
::
Ty³
::
DARP
 ||

239 
ù¾
->
chªÃl
->
¥ec
->
ty³
 =ğ
DSARP
::
Ty³
::DSARP) {

241 ià(!
ù¾_wr™e_mode
 && 
ù¾
->
wr™e_mode
)

242 
w½
();

244 
	gù¾_wr™e_mode
 = 
ù¾
->
wr™e_mode
;

246 
—¾y_šjeù_»äesh
();

250 ià((
	gşk
 - 
	g»äeshed
è>ğ
»äesh_š‹rv®
)

251 
šjeù_»äesh
(
b_»f_¿nk
);

	@Refresh.h

16 #iâdeà
__REFRESH_H_


17 
	#__REFRESH_H_


	)

19 
	~<¡ddef.h
>

20 
	~<ÿs£¹
>

21 
	~<io¡»am
>

22 
	~<veùÜ
>

24 
	~"Reque¡.h
"

25 
	~"DSARP.h
"

26 
	~"ALDRAM.h
"

28 
usšg
 
Çme¥aû
 
	g¡d
;

29 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

31 
Çme¥aû
 
	g¿muÏtÜ
 {

33 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

34 
şass
 
	gCÚŒŞËr
;

36 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

37 şas 
	cReäesh
 {

38 
	gpublic
:

39 
CÚŒŞËr
<
T
>* 
ù¾
;

40 
	gşk
, 
	g»äeshed
;

42 
	gveùÜ
<> 
	gbªk_»f_couÁ”s
;

43 
	gmax_¿nk_couÁ
, 
	gmax_bªk_couÁ
;

44 
	gËv–_chª
, 
	gËv–_¿nk
, 
	gËv–_bªk
, 
	gËv–_§
;

47 
Reäesh
(
CÚŒŞËr
<
T
>* 
ù¾
) : ctrl(ctrl) {

48 
şk
 = 
»äeshed
 = 0;

49 
	gmax_¿nk_couÁ
 = 
ù¾
->
chªÃl
->
chd»n
.
size
();

50 
	gmax_bªk_couÁ
 = 
ù¾
->
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[()
T
::
Lev–
::
Bªk
];

53 
	gr
 = 0;„ < 
	gmax_¿nk_couÁ
;„++) {

54 
	gbªk_»f_couÁ”s
.
push_back
(0);

55 
	gbªk_»äesh_backlog
.
push_back
(
Ãw
 
veùÜ
<>(
max_bªk_couÁ
, 0));

58 
	gËv–_chª
 = ()
T
::
Lev–
::
ChªÃl
;

59 
	gËv–_¿nk
 = ()
T
::
Lev–
::
Rªk
;

60 
	gËv–_bªk
 = ()
T
::
Lev–
::
Bªk
;

61 
	gËv–_§
 = -1;

65 
	gvœtu®
 ~
Reäesh
() {

67 
	gi
 = 0; i < 
	gbªk_»äesh_backlog
.
size
(); i++)

68 
d–‘e
 
	gbªk_»äesh_backlog
[
i
];

72 
tick_»f
() {

73 
	gşk
++;

75 
	g»äesh_š‹rv®
 = 
ù¾
->
chªÃl
->
¥ec
->
¥“d_’Œy
.
nREFI
;

78 ià((
	gşk
 - 
	g»äeshed
è>ğ
»äesh_š‹rv®
) {

79 
šjeù_»äesh
(
Œue
);

81 
	gALDRAM
::
Temp
 
cu¼’t_‹m³¿tu»
 = 
ALDRAM
::Temp::
COLD
;

82 
	gù¾
->
upd©e_‹mp
(
cu¼’t_‹m³¿tu»
);

86 
	g´iv©e
:

88 
veùÜ
<veùÜ<>*> 
bªk_»äesh_backlog
;

90 
	gveùÜ
<veùÜ<>> 
	gsub¬¿y_»f_couÁ”s
;

91 
	gmax_§_couÁ
 = 0;

93 
	gbacklog_max
 = 8;

94 
	gbacklog_mš
 = -8;

95 
	gbacklog_—¾y_puÎ_th»shŞd
 = -6;

96 
boŞ
 
	gù¾_wr™e_mode
 = 
çl£
;

99 
»äesh_rg‘
(
CÚŒŞËr
<
T
>* 
ù¾
, 
¿nk
, 
bªk
, 
§
)

101 
	gveùÜ
<> 
addr_vec
((
T
::
Lev–
::
MAX
), -1);

102 
	gaddr_vec
[0] = 
ù¾
->
chªÃl
->
id
;

103 
	gaddr_vec
[1] = 
¿nk
;

104 
	gaddr_vec
[2] = 
bªk
;

105 
	gaddr_vec
[3] = 
§
;

106 
Reque¡
 
»q
(
addr_vec
, Reque¡::
Ty³
::
REFRESH
, 
NULL
);

107 
boŞ
 
	g»s
 = 
ù¾
->
’queue
(
»q
);

108 
as£¹
(
»s
);

112 
šjeù_»äesh
(
boŞ
 
b_»f_¿nk
) {

114 ià(
	gb_»f_¿nk
) {

115 autØ
	g¿nk
 : 
ù¾
->
chªÃl
->
chd»n
)

116 
»äesh_rg‘
(
ù¾
, 
¿nk
->
id
, -1, -1);

120 autØ
	g¿nk
 : 
ù¾
->
chªÃl
->
chd»n
)

121 
»äesh_rg‘
(
ù¾
, 
¿nk
->
id
, 
bªk_»f_couÁ”s
[rank->id], -1);

123 
	g»äeshed
 = 
şk
;

127 
—¾y_šjeù_»äesh
();

128 
w½
();

133 
	g‹m¶©e
<> 
	gReäesh
<
	gDSARP
>::
Reäesh
(
CÚŒŞËr
<
DSARP
>* 
ù¾
);

134 
	g‹m¶©e
<> 
	gReäesh
<
	gDSARP
>::
tick_»f
();

	@Request.h

1 #iâdeà
__REQUEST_H


2 
	#__REQUEST_H


	)

4 
	~<veùÜ
>

5 
	~<funùiÚ®
>

6 
	~<io¡»am
>

7 
	~"U£r.h
"

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


17 
	sUDF
{

18 
	gbur¡Idx
;

19 
	g»qIdx
;

20 
	g³Idx
;

21 
PÜtTy³
 
	g±y³
;

23 
	gd•¬tPeTime
;

24 
	g¬riveMemTime
;

25 
	gd•¬tMemTime
;

26 
	g¬rivePeTime
;

29 şas 
	cReque¡


31 
	gpublic
:

32 
boŞ
 
is_fœ¡_commªd
;

33 
	gaddr
;

39 
	gveùÜ
<> 
	gaddr_vec
;

42 
	gcÜeid
;

44 
UDF
 
	gudf
;

46 şas 
	cTy³


48 
	gREAD
,

49 
	gWRITE
,

50 
	gREFRESH
,

51 
	gPOWERDOWN
,

52 
	gSELFREFRESH
,

53 
	gEXTENSION
,

54 
	gMAX


55 } 
	gty³
;

57 
	g¬rive
 = -1;

58 
	gd•¬t
;

59 
	gfunùiÚ
<(
	gReque¡
&)> 
	gÿÎback
;

61 
Reque¡
(
addr
, 
Ty³
 
ty³
, 
cÜeid
 = 0)

62 : 
is_fœ¡_commªd
(
Œue
), 
addr
×ddr), 
cÜeid
(cÜeid), 
ty³
(type),

63 
ÿÎback
([](
Reque¡
& 
»q
){}) {

66 
Reque¡
(
addr
, 
Ty³
 
ty³
, 
funùiÚ
<(Reque¡&)> 
ÿÎback
, 
cÜeid
 = 0)

67 : 
is_fœ¡_commªd
(
Œue
), 
addr
×ddr), 
cÜeid
(cÜeid), 
ty³
Ñy³), 
ÿÎback
(callback) {

70 
Reque¡
(
veùÜ
<>& 
addr_vec
, 
Ty³
 
ty³
, 
funùiÚ
<(Reque¡&)> 
ÿÎback
, 
cÜeid
 = 0)

71 : 
is_fœ¡_commªd
(
Œue
), 
addr_vec
×ddr_vec), 
cÜeid
(cÜeid), 
ty³
Ñy³), 
ÿÎback
(callback) {

74 
Reque¡
()

75 : 
is_fœ¡_commªd
(
Œue
), 
cÜeid
(0) {

	@SALP.cpp

1 
	~"SALP.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

9 
	gm­
<
	g¡ršg
, 
	gSALP
::
Org
> 
SALP
::
Üg_m­
 = {

10 {"SALP_512Mb_x4", 
SALP
::
Org
::
SALP_512Mb_x4
}, {"SALP_512Mb_x8", SALP::Org::
SALP_512Mb_x8
}, {"SALP_512Mb_x16", SALP::Org::
SALP_512Mb_x16
},

11 {"SALP_1Gb_x4", 
SALP
::
Org
::
SALP_1Gb_x4
}, {"SALP_1Gb_x8", SALP::Org::
SALP_1Gb_x8
}, {"SALP_1Gb_x16", SALP::Org::
SALP_1Gb_x16
},

12 {"SALP_2Gb_x4", 
SALP
::
Org
::
SALP_2Gb_x4
}, {"SALP_2Gb_x8", SALP::Org::
SALP_2Gb_x8
}, {"SALP_2Gb_x16", SALP::Org::
SALP_2Gb_x16
},

13 {"SALP_4Gb_x4", 
SALP
::
Org
::
SALP_4Gb_x4
}, {"SALP_4Gb_x8", SALP::Org::
SALP_4Gb_x8
}, {"SALP_4Gb_x16", SALP::Org::
SALP_4Gb_x16
},

14 {"SALP_8Gb_x4", 
SALP
::
Org
::
SALP_8Gb_x4
}, {"SALP_8Gb_x8", SALP::Org::
SALP_8Gb_x8
}, {"SALP_8Gb_x16", SALP::Org::
SALP_8Gb_x16
},

17 
	gm­
<
	g¡ršg
, 
	gSALP
::
S³ed
> 
SALP
::
¥“d_m­
 = {

18 {"SALP_800D", 
SALP
::
S³ed
::
SALP_800D
}, {"SALP_800E", SALP::S³ed::
SALP_800E
},

19 {"SALP_1066E", 
SALP
::
S³ed
::
SALP_1066E
}, {"SALP_1066F", SALP::S³ed::
SALP_1066F
}, {"SALP_1066G", SALP::S³ed::
SALP_1066G
},

20 {"SALP_1333G", 
SALP
::
S³ed
::
SALP_1333G
}, {"SALP_1333H", SALP::S³ed::
SALP_1333H
},

21 {"SALP_1600H", 
SALP
::
S³ed
::
SALP_1600H
}, {"SALP_1600J", SALP::S³ed::
SALP_1600J
}, {"SALP_1600K", SALP::S³ed::
SALP_1600K
},

22 {"SALP_1866K", 
SALP
::
S³ed
::
SALP_1866K
}, {"SALP_1866L", SALP::S³ed::
SALP_1866L
},

23 {"SALP_2133L", 
SALP
::
S³ed
::
SALP_2133L
}, {"SALP_2133M", SALP::S³ed::
SALP_2133M
},

26 
	gm­
<
	g¡ršg
, 
	gSALP
::
Ty³
> 
SALP
::
ty³_m­
 = {

27 {"SALP-1", 
SALP
::
Ty³
::
SALP_1
},

28 {"SALP-2", 
SALP
::
Ty³
::
SALP_2
},

29 {"SALP-MASA", 
SALP
::
Ty³
::
MASA
},

32 
	gSALP
::
	$SALP
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
Ty³
 
ty³
, 
n_§
) :

33 
	`ty³
(
ty³
),

34 
	`n_§
(
n_§
),

35 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

36 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

37 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

39 (
ty³
)){

40 (
Ty³
::
SALP_1
): 
¡ªd¬d_Çme
 = "SALP-1"; ;

41 (
Ty³
::
SALP_2
): 
¡ªd¬d_Çme
 = "SALP-2"; ;

42 (
Ty³
::
MASA
): 
¡ªd¬d_Çme
 = "SALP-MASA"; ;

44 ià(
ty³
 =ğ
Ty³
::
SALP_1
) {

45 
scİe
[(
Commªd
::
PRE
)] = 
Lev–
::
Bªk
;

47 
	`as£¹
(
n_§
 &&‚_sa <= 128 && (n_sa & (n_sa-1)) == 0);

48 
Üg_’Œy
.
couÁ
[(
Lev–
::
SubA¼ay
)] = 
n_§
;

49 
tmp
 = (
Üg_’Œy
.
dq
è* org_’Œy.
couÁ
[(
Lev–
::
Bªk
)] * 
n_§
 * org_’Œy.couÁ[(Lev–::
CŞumn
)];

50 
Üg_’Œy
.
couÁ
[(
Lev–
::
Row
)] = (Üg_’Œy.
size
è* (1<<20è/ 
tmp
;

51 
	`š™_¥“d
();

52 
	`š™_´”eq
();

53 
	`š™_rowh™
();

54 
	`š™_rowİ’
();

55 
	`š™_Ïmbda
();

56 
	`š™_timšg
();

57 
	}
}

59 
	gSALP
::
	$SALP
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, cÚ¡ sŒšg& 
ty³_¡r
, 
n_§
) :

60 
	$SALP
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
], 
ty³_m­
[
ty³_¡r
], 
n_§
)

62 
	}
}

64 
	gSALP
::
	$£t_chªÃl_numb”
(
chªÃl
) {

65 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

66 
	}
}

68 
	gSALP
::
	$£t_¿nk_numb”
(
¿nk
) {

69 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

70 
	}
}

72 
	gSALP
::
	$š™_¥“d
()

75 
·ge
 = (
Üg_’Œy
.
dq
 * org_’Œy.
couÁ
[(
Lev–
::
CŞumn
)]) >> 13;

76 
¥“d_’Œy
.
¿‹
) {

77 800: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 4; s³ed_’Œy.
nFAW
 = (page==1) ? 16 : 20; ;

78 1066: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 27; ;

79 1333: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 4 : 5; s³ed_’Œy.
nFAW
 = (page==1) ? 20 : 30; ;

80 1600: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 24 : 32; ;

81 1866: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 26 : 33; ;

82 2133: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1è? 5 : 6; s³ed_’Œy.
nFAW
 = (page==1) ? 27 : 34; ;

83 : 
	`as£¹
(
çl£
);

87 
ch
 = 
Üg_’Œy
.
size
;

88 
¥“d_’Œy
.
¿‹
) {

89 800: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 36 : (chip==1<<10) ? 44 : (chip==1<<11) ? 64 : (chip==1<<12) ? 104 : 140; ;

90 1066: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 48 : (chip==1<<10) ? 59 : (chip==1<<11) ? 86 : (chip==1<<12) ? 139 : 187; ;

91 1333: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 60 : (chip==1<<10) ? 74 : (chip==1<<11) ? 107 : (chip==1<<12) ? 174 : 234; ;

92 1600: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 72 : (chip==1<<10) ? 88 : (chip==1<<11) ? 128 : (chip==1<<12) ? 208 : 280; ;

93 1866: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 84 : (chip==1<<10) ? 103 : (chip==1<<11) ? 150 : (chip==1<<12) ? 243 : 327; ;

94 2133: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 96 : (chip==1<<10) ? 118 : (chip==1<<11) ? 171 : (chip==1<<12) ? 278 : 374; ;

95 : 
	`as£¹
(
çl£
);

97 
¥“d_’Œy
.
¿‹
) {

98 800: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 40 : (chip==1<<10) ? 48 : (chip==1<<11) ? 68 : (chip==1<<12) ? 108 : 144; ;

99 1066: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 54 : (chip==1<<10) ? 64 : (chip==1<<11) ? 91 : (chip==1<<12) ? 144 : 192; ;

100 1333: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 67 : (chip==1<<10) ? 80 : (chip==1<<11) ? 114 : (chip==1<<12) ? 180 : 240; ;

101 1600: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 80 : (chip==1<<10) ? 96 : (chip==1<<11) ? 136 : (chip==1<<12) ? 216 : 288; ;

102 1866: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 94 : (chip==1<<10) ? 112 : (chip==1<<11) ? 159 : (chip==1<<12) ? 252 : 336; ;

103 2133: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 107 : (chip==1<<10) ? 128 : (chip==1<<11) ? 182 : (chip==1<<12) ? 288 : 384; ;

104 : 
	`as£¹
(
çl£
);

106 
	}
}

109 
	gSALP
::
	$š™_´”eq
()

111 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

112 (
node
->
¡©e
)) {

113 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

114 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

115 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

116 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

117 : 
	`as£¹
(
çl£
);

119 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

121 (
ty³
)){

122 (
Ty³
::
SALP_1
):

123 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

124 (
node
->
¡©e
)){

125 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

126 (
S‹
::
O³Ãd
):

127  
Commªd
::
MAX
;

128 : 
	`as£¹
(
çl£
);}};

129 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

130 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

131 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()) {

132  
cmd
;

133 } ià(
node
->
row_¡©e
.
	`size
()) {

134  
Commªd
::
PRE
;

136  
Commªd
::
PRE_OTHER
;

139 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =…»»q[(Lev–::SubA¼ay)][(Commªd::
RD
)];

140 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

141 autØ
bªk
 : 
node
->
chd»n
) {

142 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

144  
Commªd
::
PRER
;

146  
Commªd
::
REF
;};

148 (
Ty³
::
SALP_2
):

149 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

150 (
node
->
¡©e
)){

151 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

152 (
S‹
::
O³Ãd
):

153 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()) {

154 autØ
§
 : 
node
->
·»Á
->
chd»n
) {

155 ià(
§
 !ğ
node
 && sa->
¡©e
 =ğ
S‹
::
O³Ãd
) {

156  
Commªd
::
PRE_OTHER
;

159  
cmd
;

163  
Commªd
::
PRE
;

165 : 
	`as£¹
(
çl£
);}};

166 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =…»»q[(Lev–::SubA¼ay)][(Commªd::
RD
)];

167 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

168 autØ
bªk
 : 
node
->
chd»n
)

169 autØ
§
 : 
bªk
->
chd»n
) {

170 ià(
§
->
¡©e
 =ğ
S‹
::
Clo£d
)

172  
Commªd
::
PRER
;

174  
Commªd
::
REF
;};

176 (
Ty³
::
MASA
):

177 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

178 (
node
->
¡©e
)){

179 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

180 (
S‹
::
O³Ãd
):

181 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Commªd
::
SASEL
;

182  
Commªd
::
PRE
;

183 (
S‹
::
S–eùed
):

184 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
cmd
;

185  
Commªd
::
PRE
;

186 : 
	`as£¹
(
çl£
);

188 
´”eq
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =…»»q[(Lev–::SubA¼ay)][(Commªd::
RD
)];

189 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

190 autØ
bªk
 : 
node
->
chd»n
)

191 autØ
§
 : 
bªk
->
chd»n
){

192 ià(
§
->
¡©e
 =ğ
S‹
::
Clo£d
)

194  
Commªd
::
PRER
;

196  
Commªd
::
REF
;};

198 : 
	`as£¹
(
çl£
);

201 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

202 (
node
->
¡©e
)) {

203 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

204 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

205 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

206 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

207 : 
	`as£¹
(
çl£
);

211 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

212 (
node
->
¡©e
)) {

213 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

214 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

215 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

216 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

217 : 
	`as£¹
(
çl£
);

219 
	}
}

222 
	gSALP
::
	$š™_rowh™
()

224 (
ty³
)) {

225 (
Ty³
::
SALP_1
):

227 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

228 (
node
->
¡©e
)) {

229 (
S‹
::
Clo£d
):  
çl£
;

230 (
S‹
::
O³Ãd
):

231 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Œue
;

232  
çl£
;

233 : 
	`as£¹
(
çl£
);

237 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owh™[(Lev–::SubA¼ay)][(Commªd::
RD
)];

239 (
Ty³
::
SALP_2
):

241 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

242 (
node
->
¡©e
)){

243 (
S‹
::
Clo£d
):  
çl£
;

244 (
S‹
::
O³Ãd
):

245 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Œue
;

246  
çl£
;

247 : 
	`as£¹
(
çl£
);

250 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owh™[(Lev–::SubA¼ay)][(Commªd::
RD
)];

252 (
Ty³
::
MASA
):

254 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

255 (
node
->
¡©e
)){

256 (
S‹
::
Clo£d
):  
çl£
;

257 (
S‹
::
O³Ãd
):

259 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Œue
;

260  
çl£
;

261 (
S‹
::
S–eùed
):

262 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
()è 
Œue
;

263  
çl£
;

264 : 
	`as£¹
(
çl£
);

267 
rowh™
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owh™[(Lev–::SubA¼ay)][(Commªd::
RD
)];

269 : 
	`as£¹
(
çl£
);

271 
	}
}

273 
	gSALP
::
	$š™_rowİ’
()

275 (
ty³
)) {

276 (
Ty³
::
SALP_1
):

278 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

279 (
node
->
¡©e
)){

280 (
S‹
::
Clo£d
):  
çl£
;

281 (
S‹
::
O³Ãd
):  
Œue
;

282 : 
	`as£¹
(
çl£
);

285 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

287 (
Ty³
::
SALP_2
):

289 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

290 (
node
->
¡©e
)){

291 (
S‹
::
Clo£d
):  
çl£
;

292 (
S‹
::
O³Ãd
):  
Œue
;

293 : 
	`as£¹
(
çl£
);

296 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::SubA¼ay)][(Commªd::
RD
)];

298 (
Ty³
::
MASA
):

300 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RD
)] = [] (
DRAM
<
SALP
>* 
node
, Commªd 
cmd
, 
id
) {

301 (
node
->
¡©e
)){

302 (
S‹
::
Clo£d
):  
çl£
;

303 (
S‹
::
O³Ãd
):  
Œue
;

304 (
S‹
::
S–eùed
):  
Œue
;

305 : 
	`as£¹
(
çl£
);

308 
rowİ’
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::SubA¼ay)][(Commªd::
RD
)];

310 : 
	`as£¹
(
çl£
);

312 
	}
}

314 
	gSALP
::
	$š™_Ïmbda
()

316 (
ty³
)){

317 (
Ty³
::
SALP_1
):

318 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

319 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

321 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

322 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

323 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;

325 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

326 
node
->
¡©e
 = 
S‹
::
Clo£d
;

330 
node
->
chd»n
[
id
]->
¡©e
 = 
S‹
::
Clo£d
;

331 
node
->
chd»n
[
id
]->
row_¡©e
.
	`ş—r
();

333 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE_OTHER
)] =†ambda[(Lev–::Bªk)][(Commªd::
PRE
)];

334 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRER
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

335 autØ
bªk
 : 
node
->
chd»n
) {

336 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

337 autØ
§
 : 
bªk
->
chd»n
){

338 
§
->
¡©e
 = 
S‹
::
Clo£d
;

339 
§
->
row_¡©e
.
	`ş—r
();}}};

340 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

341 
node
->
¡©e
 = 
S‹
::
Clo£d
;

342 
node
->
chd»n
[
id
]->
¡©e
 = 
S‹
::
Clo£d
;

343 
node
->
chd»n
[
id
]->
row_¡©e
.
	`ş—r
();};

344 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] =†ambda[(Lev–::Bªk)][(Commªd::
RDA
)];

345 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

346 autØ
bªk
 : 
node
->
chd»n
) {

347 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

349 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

352 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

354 (
Ty³
::
SALP_2
):

355 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

356 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

357 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

358 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

359 
node
->
¡©e
 = 
S‹
::
Clo£d
;

360 
node
->
row_¡©e
.
	`ş—r
();};

361 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
PRE_OTHER
)] =†ambda[(Lev–::SubA¼ay)][(Commªd::
PRE
)];

362 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRER
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

363 autØ
bªk
 : 
node
->
chd»n
)

364 autØ
§
 : 
bªk
->
chd»n
) {

365 
§
->
¡©e
 = 
S‹
::
Clo£d
;

366 
§
->
row_¡©e
.
	`ş—r
();}};

367 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

368 
node
->
¡©e
 = 
S‹
::
Clo£d
;

369 
node
->
row_¡©e
.
	`ş—r
();};

370 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

371 
node
->
¡©e
 = 
S‹
::
Clo£d
;

372 
node
->
row_¡©e
.
	`ş—r
();};

373 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

374 autØ
bªk
 : 
node
->
chd»n
)

375 autØ
§
 : 
bªk
->
chd»n
) {

376 ià(
§
->
¡©e
 =ğ
S‹
::
Clo£d
)

378 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

381 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

383 (
Ty³
::
MASA
):

384 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

385 
node
->
¡©e
 = 
S‹
::
S–eùed
;

386 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;

387 autØ
§
 : 
node
->
·»Á
->
chd»n
)

388 ià(
§
 !ğ
node
 && sa->
¡©e
 =ğ
S‹
::
S–eùed
) {

389 
§
->
¡©e
 = 
S‹
::
O³Ãd
;

391 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
SASEL
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

392 
node
->
¡©e
 = 
S‹
::
S–eùed
;

393 autØ
§
 : 
node
->
·»Á
->
chd»n
)

394 ià(
§
 !ğ
node
 && sa->
¡©e
 =ğ
S‹
::
S–eùed
) {

395 
§
->
¡©e
 = 
S‹
::
O³Ãd
;

397 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

398 
node
->
¡©e
 = 
S‹
::
Clo£d
;

399 
node
->
row_¡©e
.
	`ş—r
();};

401 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRER
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

402 autØ
bªk
 : 
node
->
chd»n
)

403 autØ
§
 : 
bªk
->
chd»n
) {

404 
§
->
¡©e
 = 
S‹
::
Clo£d
;

405 
§
->
row_¡©e
.
	`ş—r
();}};

406 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

407 
node
->
¡©e
 = 
S‹
::
Clo£d
;

408 
node
->
row_¡©e
.
	`ş—r
();};

409 
Ïmbda
[(
Lev–
::
SubA¼ay
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

410 
node
->
¡©e
 = 
S‹
::
Clo£d
;

411 
node
->
row_¡©e
.
	`ş—r
();};

412 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

413 autØ
bªk
 : 
node
->
chd»n
)

414 autØ
§
 : 
bªk
->
chd»n
) {

415 ià(
§
->
¡©e
 =ğ
S‹
::
Clo£d
)

417 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

420 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

422 : 
	`as£¹
(
çl£
);

424 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

425 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

426 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

427 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

428 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
SALP
>* 
node
, 
id
) {

429 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

430 
	}
}

432 
	gSALP
::
	$š™_timšg
()

434 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

435 
veùÜ
<
TimšgEÁry
> *
t
;

438 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

441 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

442 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

443 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

444 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

445 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

446 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

447 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

448 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

452 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

455 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

456 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

457 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

458 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

459 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

460 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

461 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

462 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

463 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

464 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

465 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

466 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

467 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

468 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

469 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

470 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

473 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

474 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

475 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

476 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

477 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

478 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

479 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

480 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

481 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

482 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

483 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

484 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

485 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

486 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

487 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

488 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

491 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRER
, 1, 
s
.
nRTP
});

492 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRER
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

497 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

498 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

499 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

500 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

501 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

502 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

503 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

504 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

509 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

510 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

512 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRER
, 1, 
s
.
nRAS
});

513 
t
[(
Commªd
::
PRER
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

516 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

517 
t
[(
Commªd
::
PRER
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

518 
t
[(
Commªd
::
PRE_OTHER
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

519 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

522 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

523 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

524 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

525 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRER
, 1, 
s
.
nXP
});

528 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

529 
t
[(
Commªd
::
PRER
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

530 
t
[(
Commªd
::
PRE_OTHER
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

531 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

534 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

537 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

538 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

541 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

544 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

545 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

548 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

549 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

552 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

553 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

557 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

559 (
ty³
)) {

560 (
Ty³
::
SALP_1
):

564 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

565 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

566 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
,});

567 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE_OTHER
, 1, 
s
.
nRAS
});

568 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE_OTHER
, 1, 
s
.
nRTP
});

569 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE_OTHER
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
,});

570 (
Ty³
::
SALP_2
):

571 (
Ty³
::
MASA
):

573 : 
	`as£¹
(
çl£
);

577 
t
 = 
timšg
[(
Lev–
::
SubA¼ay
)];

580 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

581 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

582 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

583 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

585 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

586 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

588 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

589 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

592 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

593 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

594 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

596 (
ty³
)) {

597 (
Ty³
::
SALP_1
):

598 (
Ty³
::
SALP_2
):

600 (
Ty³
::
MASA
):

601 
t
[(
Commªd
::
SASEL
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nSCD
});

602 
t
[(
Commªd
::
SASEL
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nSCD
});

603 
t
[(
Commªd
::
SASEL
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nSCD
});

604 
t
[(
Commªd
::
SASEL
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nSCD
});

606 : 
	`as£¹
(
çl£
);

610 (
ty³
)) {

611 (
Ty³
::
SALP_1
):

612 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nPA
, 
Œue
});

613 
t
[(
Commªd
::
PRE_OTHER
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nPA
, 
Œue
});

615 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
 - s.
nRP
 + s.
nPA
, 
Œue
});

616 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nPA
, 
Œue
});

617 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nPA
, 
Œue
});

620 (
Ty³
::
SALP_2
):

621 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRCD
 + s.
nRA
, 
Œue
});

622 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRA
, 
Œue
});

623 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRA
, 
Œue
});

624 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nWA
, 
Œue
});

625 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nWA
, 
Œue
});

627 (
Ty³
::
MASA
):

628 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRA
, 
Œue
});

629 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRA
, 
Œue
});

630 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nWA
, 
Œue
});

631 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nWA
, 
Œue
});

633 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
SASEL
, 1, 
s
.
nRA
, 
Œue
});

634 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
SASEL
, 1, 
s
.
nRA
, 
Œue
});

635 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
SASEL
, 1, 
s
.
nWA
, 
Œue
});

636 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
SASEL
, 1, 
s
.
nWA
, 
Œue
});

638 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nRA
, 
Œue
});

639 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nRA
, 
Œue
});

640 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nWA
, 
Œue
});

641 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nWA
, 
Œue
});

643 : 
	`as£¹
(
çl£
);

646 
	}
}

	@SALP.h

1 #iâdeà
__SALP_H


2 
	#__SALP_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cSALP


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
şass
 
	gTy³
;

21 
SALP
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
Ty³
 
ty³
 = Ty³::
MASA
, 
n_§
 = 8);

22 
SALP
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, cÚ¡ sŒšg& 
ty³_¡r
 = "SALP-MASA", 
n_§
 = 8);

24 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

25 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

26 
	gm­
<
	g¡ršg
, 
	gTy³
> 
	gty³_m­
;

28 şas 
	cTy³
 : 

30 
SALP_1
, 
	gSALP_2
, 
	gMASA
, 
	gMAX


31 } 
	gty³
;

33 şas 
	cLev–
 : 

35 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gSubA¼ay
, 
	gRow
, 
	gCŞumn
, 
	gMAX


39 şas 
	cCommªd
 : 

41 
ACT
, 
	gSASEL
, 
	gPRE
, 
	gPRER
,

42 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

43 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

44 
	gPRE_OTHER
,

45 
	gMAX


48 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

55 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

56 
Lev–
::
Row
, Lev–::
SubA¼ay
, Lev–::SubA¼ay, Lev–::
Rªk
,

57 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

58 
Lev–
::
Rªk
, Lev–::Rªk, Lev–::Rªk, Lev–::Rªk, Lev–::Rªk, Lev–::
SubA¼ay


61 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

63 (
	gcmd
)) {

64 (
	gCommªd
::
ACT
):

65  
Œue
;

67  
çl£
;

71 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

73 (
	gcmd
)) {

74 (
	gCommªd
::
RD
):

75 (
Commªd
::
WR
):

76 (
Commªd
::
RDA
):

77 (
Commªd
::
WRA
):

78  
Œue
;

80  
çl£
;

84 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

86 (
	gcmd
)) {

87 (
	gCommªd
::
RDA
):

88 (
Commªd
::
WRA
):

89 (
Commªd
::
PRE
):

90 (
Commªd
::
PRER
):

91 (
Commªd
::
PRE_OTHER
):

92  
Œue
;

94  
çl£
;

98 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

100 (
	gcmd
)) {

101 (
	gCommªd
::
REF
):

102  
Œue
;

104  
çl£
;

110 şas 
	cS‹
 : 

112 
O³Ãd
, 
	gClo£d
, 
	gS–eùed
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


113 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

114 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::Closed, State::MAX

118 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

119 
Commªd
::
RD
, Commªd::
WR
,

120 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE


124 
	gfunùiÚ
<
Commªd
(
DRAM
<
SALP
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

128 
	gfunùiÚ
<
boŞ
(
DRAM
<
SALP
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

129 
	gfunùiÚ
<
boŞ
(
DRAM
<
SALP
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

132 
	sTimšgEÁry


134 
Commªd
 
	gcmd
;

135 
	gdi¡
;

136 
	gv®
;

137 
boŞ
 
	gsiblšg
;

139 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

142 
	gfunùiÚ
<(
	gDRAM
<
	gSALP
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

145 şas 
	cOrg
 : 

147 
SALP_512Mb_x4
, 
	gSALP_512Mb_x8
, 
	gSALP_512Mb_x16
,

148 
	gSALP_1Gb_x4
, 
	gSALP_1Gb_x8
, 
	gSALP_1Gb_x16
,

149 
	gSALP_2Gb_x4
, 
	gSALP_2Gb_x8
, 
	gSALP_2Gb_x16
,

150 
	gSALP_4Gb_x4
, 
	gSALP_4Gb_x8
, 
	gSALP_4Gb_x16
,

151 
	gSALP_8Gb_x4
, 
	gSALP_8Gb_x8
, 
	gSALP_8Gb_x16
,

152 
	gMAX


155 
	gn_§
;

157 
	sOrgEÁry
 {

158 
	gsize
;

159 
	gdq
;

160 
	gcouÁ
[(
Lev–
::
MAX
)];

161 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

167 }, 
	gÜg_’Œy
;

169 
£t_chªÃl_numb”
(
chªÃl
);

170 
£t_¿nk_numb”
(
¿nk
);

173 şas 
	cS³ed
 : 

175 
SALP_800D
, 
	gSALP_800E
,

176 
	gSALP_1066E
, 
	gSALP_1066F
, 
	gSALP_1066G
,

177 
	gSALP_1333G
, 
	gSALP_1333H
,

178 
	gSALP_1600H
, 
	gSALP_1600J
, 
	gSALP_1600K
,

179 
	gSALP_1866K
, 
	gSALP_1866L
,

180 
	gSALP_2133L
, 
	gSALP_2133M
,

181 
	gMAX


184 
	g´eãtch_size
 = 8;

185 
	gchªÃl_width
 = 64;

187 
	sS³edEÁry
 {

188 
	g¿‹
;

189 
	gäeq
, 
	gtCK
;

190 
	gnBL
, 
	gnCCD
, 
	gnRTRS
;

191 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnPA
, 
	gnCWL
;

192 
	gnRAS
, 
	gnRC
;

193 
	gnRTP
, 
	gnWTR
, 
	gnWR
, 
	gnRA
, 
	gnWA
;

194 
	gnRRD
, 
	gnFAW
;

195 
	gnRFC
, 
	gnREFI
;

196 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

197 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

198 
	gnSCD
;

199 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

214 }, 
	g¥“d_’Œy
;

216 
	g»ad_Ï‹ncy
;

218 
	g´iv©e
:

219 
š™_¥“d
();

220 
š™_Ïmbda
();

221 
š™_´”eq
();

222 
š™_rowh™
();

223 
š™_rowİ’
();

224 
š™_timšg
();

	@Scheduler.h

1 #iâdeà
__SCHEDULER_H


2 
	#__SCHEDULER_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~"CÚŒŞËr.h
"

7 
	~<veùÜ
>

8 
	~<m­
>

9 
	~<li¡
>

10 
	~<funùiÚ®
>

11 
	~<ÿs£¹
>

13 
usšg
 
Çme¥aû
 
	g¡d
;

15 
Çme¥aû
 
	g¿muÏtÜ


18 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

19 
şass
 
	gCÚŒŞËr
;

21 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

22 şas 
	cScheduËr


24 
	gpublic
:

25 
CÚŒŞËr
<
T
>* 
ù¾
;

27 şas 
	cTy³
 {

28 
	gFCFS
, 
	gFRFCFS
, 
	gFRFCFS_C­
, 
	gFRFCFS_PriÜH™
, 
	gMAX


29 } 
	gty³
 = 
Ty³
::
FRFCFS_PriÜH™
;

31 
	gÿp
 = 16;

33 
ScheduËr
(
CÚŒŞËr
<
T
>* 
ù¾
) : ctrl(ctrl) {}

35 
li¡
<
Reque¡
>::
™”©Ü
 
g‘_h—d
Öi¡<Reque¡>& 
q
)

38 ià(
ty³
 !ğ
Ty³
::
FRFCFS_PriÜH™
) {

39 ià(!
q
.
size
())

40  
q
.
’d
();

42 autØ
	gh—d
 = 
q
.
begš
();

43 autØ
	g™r
 = 
Ãxt
(
q
.
begš
(), 1); iŒ !ğq.
’d
(); itr++)

44 
	gh—d
 = 
com·»
[(
ty³
)](
h—d
, 
	g™r
);

46  
	gh—d
;

48 ià(!
	gq
.
size
())

49  
	gq
.
’d
();

51 autØ
	gh—d
 = 
q
.
begš
();

52 autØ
	g™r
 = 
Ãxt
(
q
.
begš
(), 1); iŒ !ğq.
’d
(); itr++) {

53 
	gh—d
 = 
com·»
[(
Ty³
::
FRFCFS_PriÜH™
)](
h—d
, 
	g™r
);

56 ià(
	gthis
->
	gù¾
->
is_»ady
(
h—d
è&&his->ù¾->
is_row_h™
(head)) {

57  
	gh—d
;

61 
	gveùÜ
<veùÜ<>> 
	gh™_»qs
;

62 autØ
	g™r
 = 
q
.
begš
(è; iŒ !ğq.
’d
() ; ++itr) {

63 ià(
	gthis
->
	gù¾
->
is_row_h™
(
™r
)) {

64 autØ
	gbegš
 = 
™r
->
addr_vec
.
begš
();

67 autØ
	g’d
 = 
begš
 + (
ù¾
->
chªÃl
->
¥ec
->
scİe
[(
T
::
Commªd
::
PRE
)]) + 1;

68 
	gveùÜ
<> 
rowgroup
(
begš
, 
’d
);

69 
	gh™_»qs
.
push_back
(
rowgroup
);

74 
	gh—d
 = 
q
.
’d
();

75 autØ
	g™r
 = 
q
.
begš
(); iŒ !ğq.
’d
(); itr++) {

76 
boŞ
 
	gviŞ©e_h™
 = 
çl£
;

77 ià((!
	gthis
->
	gù¾
->
is_row_h™
(
™r
)è&&his->ù¾->
is_row_İ’
(itr)) {

79 autØ
	gbegš
 = 
™r
->
addr_vec
.
begš
();

82 autØ
	g’d
 = 
begš
 + (
ù¾
->
chªÃl
->
¥ec
->
scİe
[(
T
::
Commªd
::
PRE
)]) + 1;

83 
	gveùÜ
<> 
rowgroup
(
begš
, 
’d
);

84 cÚ¡‡uto& 
	gh™_»q_rowgroup
 : 
h™_»qs
) {

85 ià(
rowgroup
 =ğ
h™_»q_rowgroup
) {

86 
viŞ©e_h™
 = 
Œue
;

91 ià(
	gviŞ©e_h™
) {

95 ià(
	gh—d
 =ğ
q
.
’d
()) {

96 
h—d
 = 
™r
;

98 
	gh—d
 = 
com·»
[(
Ty³
::
FRFCFS
)](
h—d
, 
	g™r
);

102  
	gh—d
;

106 
	g´iv©e
:

107 
li¡
<
	tReque¡
>::
	t™”©Ü
 
	tReqI‹r
;

108 
	gfunùiÚ
<
ReqI‹r
(ReqI‹r, ReqI‹r)> 
	gcom·»
[(
Ty³
::
MAX
)] = {

110 [
this
] (
ReqI‹r
 
»q1
, ReqI‹¸
»q2
) {

111 ià(
»q1
->
¬rive
 <ğ
»q2
->arrive) „eq1;

112  
	g»q2
;},

115 [
this
] (
ReqI‹r
 
	g»q1
, ReqI‹¸
	g»q2
) {

116 
boŞ
 
	g»ady1
 = 
this
->
ù¾
->
is_»ady
(
»q1
);

117 
boŞ
 
	g»ady2
 = 
this
->
ù¾
->
is_»ady
(
»q2
);

119 ià(
	g»ady1
 ^ 
	g»ady2
) {

120 ià(
	g»ady1
è 
	g»q1
;

121  
	g»q2
;

124 ià(
	g»q1
->
	g¬rive
 <ğ
»q2
->
¬rive
è 
»q1
;

125  
	g»q2
;},

128 [
this
] (
ReqI‹r
 
	g»q1
, ReqI‹¸
	g»q2
) {

129 
boŞ
 
	g»ady1
 = 
this
->
ù¾
->
is_»ady
(
»q1
);

130 
boŞ
 
	g»ady2
 = 
this
->
ù¾
->
is_»ady
(
»q2
);

132 
	g»ady1
 = 
»ady1
 && (
this
->
ù¾
->
rowbË
->
g‘_h™s
(
»q1
->
addr_vec
è<ğthis->
ÿp
);

133 
	g»ady2
 = 
»ady2
 && (
this
->
ù¾
->
rowbË
->
g‘_h™s
(
»q2
->
addr_vec
è<ğthis->
ÿp
);

135 ià(
	g»ady1
 ^ 
	g»ady2
) {

136 ià(
	g»ady1
è 
	g»q1
;

137  
	g»q2
;

140 ià(
	g»q1
->
	g¬rive
 <ğ
»q2
->
¬rive
è 
»q1
;

141  
	g»q2
;},

143 [
this
] (
ReqI‹r
 
	g»q1
, ReqI‹¸
	g»q2
) {

144 
boŞ
 
	g»ady1
 = 
this
->
ù¾
->
is_»ady
(
»q1
è&&his->ù¾->
is_row_h™
(req1);

145 
boŞ
 
	g»ady2
 = 
this
->
ù¾
->
is_»ady
(
»q2
è&&his->ù¾->
is_row_h™
(req2);

147 ià(
	g»ady1
 ^ 
	g»ady2
) {

148 ià(
	g»ady1
è 
	g»q1
;

149  
	g»q2
;

152 ià(
	g»q1
->
	g¬rive
 <ğ
»q2
->
¬rive
è 
»q1
;

153  
	g»q2
;}

158 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

159 şas 
	cRowPŞicy


161 
	gpublic
:

162 
CÚŒŞËr
<
T
>* 
ù¾
;

164 şas 
	cTy³
 {

165 
	gClo£d
, 
	gO³Ãd
, 
	gTimeout
, 
	gMAX


166 } 
	gty³
 = 
Ty³
::
O³Ãd
;

168 
	gtimeout
 = 50;

170 
RowPŞicy
(
CÚŒŞËr
<
T
>* 
ù¾
) : ctrl(ctrl) {}

172 
veùÜ
<> 
g‘_viùim
(
ty³Çme
 
T
::
Commªd
 
cmd
)

174  
pŞicy
[(
ty³
)](
cmd
);

177 
	g´iv©e
:

178 
funùiÚ
<
veùÜ
<>(
ty³Çme
 
T
::
Commªd
)> 
pŞicy
[(
Ty³
::
MAX
)] = {

180 [
this
] (
ty³Çme
 
T
::
Commªd
 
cmd
è-> 
veùÜ
<> {

181 auto& 
kv
 : 
this
->
ù¾
->
rowbË
->
bË
) {

182 ià(!
this
->
ù¾
->
is_»ady
(
cmd
, 
kv
.
fœ¡
))

184  
	gkv
.
	gfœ¡
;

186  
	gveùÜ
<>();},

189 [
this
] (
ty³Çme
 
	gT
::
Commªd
 
cmd
) {

190  
veùÜ
<>();},

193 [
this
] (
ty³Çme
 
	gT
::
Commªd
 
cmd
è-> 
veùÜ
<> {

194 auto& 
kv
 : 
this
->
ù¾
->
rowbË
->
bË
) {

195 auto& 
’Œy
 = 
kv
.
£cÚd
;

196 ià(
	gthis
->
	gù¾
->
	gşk
 - 
	g’Œy
.
	gtime¡amp
 < 
	gtimeout
)

198 ià(!
	gthis
->
	gù¾
->
is_»ady
(
cmd
, 
kv
.
fœ¡
))

200  
	gkv
.
	gfœ¡
;

202  
	gveùÜ
<>();}

208 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

209 şas 
	cRowTabË


211 
	gpublic
:

212 
CÚŒŞËr
<
T
>* 
ù¾
;

214 
	sEÁry
 {

215 
	grow
;

216 
	gh™s
;

217 
	gtime¡amp
;

220 
	gm­
<
	gveùÜ
<>, 
	gEÁry
> 
	gbË
;

222 
RowTabË
(
CÚŒŞËr
<
T
>* 
ù¾
) : ctrl(ctrl) {}

224 
upd©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, cÚ¡ 
veùÜ
<>& 
addr_vec
, 
şk
)

226 autØ
	gbegš
 = 
addr_vec
.
begš
();

227 autØ
	g’d
 = 
begš
 + (
T
::
Lev–
::
Row
);

228 
	gveùÜ
<> 
rowgroup
(
begš
, 
’d
);

229 
	grow
 = *
’d
;

231 
T
* 
	g¥ec
 = 
ù¾
->
chªÃl
->
¥ec
;

233 ià(
	g¥ec
->
is_İ’šg
(
cmd
))

234 
	gbË
.
š£¹
({
rowgroup
, {
row
, 0, 
şk
}});

236 ià(
	g¥ec
->
is_acûssšg
(
cmd
)) {

238 autØ
	gm©ch
 = 
bË
.
fšd
(
rowgroup
);

239 
as£¹
(
m©ch
 !ğ
bË
.
’d
());

240 
as£¹
(
m©ch
->
£cÚd
.
row
 ==„ow);

241 
	gm©ch
->
	g£cÚd
.
	gh™s
++;

242 
	gm©ch
->
	g£cÚd
.
	gtime¡amp
 = 
şk
;

245 ià(
	g¥ec
->
is_şosšg
(
cmd
)) {

247 
	gn_rm
 = 0;

248 
	gscİe
 = (
¥ec
->
scİe
[(
cmd
)]);

249 autØ
	g™
 = 
bË
.
begš
(); iˆ!ğbË.
’d
();) {

250 ià(
equ®
(
begš
, begš + 
scİe
 + 1, 
™
->
fœ¡
.begin())) {

251 
	gn_rm
++;

252 
	g™
 = 
bË
.
”a£
(
™
);

255 
	g™
++;

257 
as£¹
(
n_rm
 > 0);

261 
g‘_h™s
(
veùÜ
<>& 
addr_vec
)

263 autØ
	gbegš
 = 
addr_vec
.
begš
();

264 autØ
	g’d
 = 
begš
 + (
T
::
Lev–
::
Row
);

266 
	gveùÜ
<> 
rowgroup
(
begš
, 
’d
);

267 
	grow
 = *
’d
;

269 autØ
	g™r
 = 
bË
.
fšd
(
rowgroup
);

270 ià(
	g™r
 =ğ
bË
.
’d
(è|| 
™r
->
£cÚd
.
row
 !=„ow)

273  
	g™r
->
	g£cÚd
.
	gh™s
;

	@SpeedyController.h

1 #iâdeà
__SPEEDYCONTROLLER_H


2 
	#__SPEEDYCONTROLLER_H


	)

4 
	~"CÚfig.h
"

5 
	~"DRAM.h
"

6 
	~"Reque¡.h
"

7 
	~"Sti¡ics.h
"

8 
	~<io¡»am
>

9 
	~<f¡»am
>

10 
	~<veùÜ
>

11 
	~<¡ršg
>

12 
	~<®gÜ™hm
>

13 
	~<ÿs£¹
>

14 
	~<ut™y
>

15 
	~<queue
>

17 
usšg
 
Çme¥aû
 
	g¡d
;

19 
Çme¥aû
 
	g¿muÏtÜ


22 
	g‹m¶©e
 <
ty³Çme
 
	gT
>

23 şas 
	cS³edyCÚŒŞËr


27 
	g´Ùeùed
:

28 
SÿÏrSt
 
row_h™s
;

29 
SÿÏrSt
 
	grow_mis£s
;

30 
	g´iv©e
:

31 şas 
	ccom·œ_d•¬t_şk
{

32 
public
:

33 
boŞ
 
İ”©Ü
()(cÚ¡ 
Reque¡
& 
lhs
, cÚ¡ 
	gReque¡
& 
	grhs
) {

34  
	glhs
.
	gd•¬t
 > 
	grhs
.depart;

37 
	gpublic
:

39 
¡ršg
 
cmd_Œaû_´efix
 = "cmd-trace-";

40 
	gveùÜ
<
	gof¡»am
> 
	gcmd_Œaû_fes
;

41 
boŞ
 
	g»cÜd_cmd_Œaû
 = 
çl£
;

43 
boŞ
 
	g´št_cmd_Œaû
 = 
çl£
;

45 cÚ¡ 
	gqueue_ÿ·c™y
 = 32;

46 
	gşk
 = 0;

47 
	gDRAM
<
	gT
>* 
	gchªÃl
;

49 
	gwr™e_hi
 = 0.875;

50 
	gwr™e_low
 = 0.5;

53 
	gtu¶e
<
	tReque¡
, 
	tty³Çme
 
	tT
::
	tCommªd
, > 
	t»que¡_šfo
;

54 
	gveùÜ
<
	t»que¡_šfo
> 
	t»que¡_queue
;

55 
»que¡_queue
 
	g»adq
;

56 
»que¡_queue
 
	gwr™eq
;

57 
»que¡_queue
 
	gÙh”q
;

60 
	g´iÜ™y_queue
<
	gReque¡
, 
	gveùÜ
<Reque¡>, 
	gcom·œ_d•¬t_şk
> 
	g³ndšg
;

62 
boŞ
 
	gwr™e_mode
 = 
çl£
;

63 
	g»äeshed
 = 0;

66 
S³edyCÚŒŞËr
(cÚ¡ 
CÚfig
& 
cÚfigs
, 
DRAM
<
T
>* 
chªÃl
) :

67 
chªÃl
(channel)

69 
»cÜd_cmd_Œaû
 = 
cÚfigs
.record_cmd_trace();

70 
	g´št_cmd_Œaû
 = 
cÚfigs
.
´št_cmd_Œaû
();

71 ià(
	g»cÜd_cmd_Œaû
){

72 
¡ršg
 
	g´efix
 = 
cmd_Œaû_´efix
 + "chª-" + 
to_¡ršg
(
chªÃl
->
id
) + "-rank-";

73 
¡ršg
 
	gsuffix
 = ".cmdtrace";

74 
	gi
 = 0; i < 
	gchªÃl
->
	gchd»n
.
size
(); i++)

75 
	gcmd_Œaû_fes
.
em¶aû_back
(
´efix
 + 
to_¡ršg
(
i
è+ 
suffix
);

77 
	g»adq
.
»£rve
(
queue_ÿ·c™y
);

78 
	gwr™eq
.
»£rve
(
queue_ÿ·c™y
);

79 
	gÙh”q
.
»£rve
(
queue_ÿ·c™y
);

83 
	grow_h™s


84 .
Çme
("row_h™s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
))

85 .
desc
("Number of„ow hits")

86 .
´ecisiÚ
(0)

88 
	grow_mis£s


89 .
Çme
("row_mis£s_chªÃl_"+
to_¡ršg
(
chªÃl
->
id
))

90 .
desc
("Number of„ow misses")

91 .
´ecisiÚ
(0)

95 ~
S³edyCÚŒŞËr
(){

96 
d–‘e
 
	gchªÃl
;

97 auto& 
	gfe
 : 
cmd_Œaû_fes
)

98 
fe
.
şo£
();

103 
fšish
(
»ad_»q
, 
wr™e_»q
, 
d¿m_cyşes
) {

105 
	gchªÃl
->
fšish
(
d¿m_cyşes
);

108 
boŞ
 
’queue
(
Reque¡
& 
»q
)

110 
	g»que¡_queue
& 
	gq
 =

111 
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
READ
? 
»adq
:

112 
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
WRITE
? 
wr™eq
:

113 
Ùh”q
;

114 ià(
	gqueue_ÿ·c™y
 =ğ
q
.
size
())

115  
çl£
;

117 
	g»q
.
	g¬rive
 = 
şk
;

118 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
){

119 auto& 
šfo
 : 
wr™eq
)

120 ià(
»q
.
addr
 =ğ
g‘
<0>(
šfo
).addr){

121 
»q
.
d•¬t
 = 
şk
 + 1;

122 
	g³ndšg
.
push
(
»q
);

123  
	gŒue
;

126 
ty³Çme
 
	gT
::
Commªd
 
fœ¡_cmd
 = 
g‘_fœ¡_cmd
(
»q
);

127 
	gfœ¡_şk
 = 
chªÃl
->
g‘_Ãxt
(
fœ¡_cmd
, 
»q
.
addr_vec
.
d©a
());

128 
	gq
.
em¶aû_back
(
»q
, 
fœ¡_cmd
, 
fœ¡_şk
);

129 
push_h—p
(
q
.
begš
(), q.
’d
(), 
com·œ_fœ¡_şk
);;

130  
	gŒue
;

133 
tick
()

135 
	gşk
++;

138 ià(
	g³ndšg
.
size
()) {

139 
Reque¡
 
	g»q
 = 
³ndšg
.
tİ
();

140 ià(
	g»q
.
	gd•¬t
 <ğ
şk
) {

141 
»q
.
d•¬t
 = 
şk
;

142 
	g»q
.
ÿÎback
(
»q
);

143 
	g³ndšg
.
pİ
();

148 
	g»äesh_š‹rv®
 = 
chªÃl
->
¥ec
->
¥“d_’Œy
.
nREFI
;

149 ià(
	gşk
 - 
	g»äeshed
 >ğ
»äesh_š‹rv®
) {

150 autØ
»q_ty³
 = 
Reque¡
::
Ty³
::
REFRESH
;

151 
	gveùÜ
<> 
addr_vec
((
T
::
Lev–
::
MAX
), -1);

152 
	gaddr_vec
[0] = 
chªÃl
->
id
;

153 autØ
	gchd
 : 
chªÃl
->
chd»n
) {

154 
addr_vec
[1] = 
chd
->
id
;

155 
Reque¡
 
»q
(
addr_vec
, 
»q_ty³
, 
NULL
);

156 
boŞ
 
	g»s
 = 
’queue
(
»q
);

157 
as£¹
(
»s
);

160 
	g»äeshed
 = 
şk
;

164 ià(!
	gwr™e_mode
) {

166 ià(
	gwr™eq
.
size
(è>ğ()(
wr™e_hi
 * 
queue_ÿ·c™y
è|| 
»adq
.size() == 0)

167 
wr™e_mode
 = 
Œue
;

171 ià(
	gwr™eq
.
size
(è<ğ()(
wr™e_low
 * 
queue_ÿ·c™y
è&& 
»adq
.size() != 0)

172 
wr™e_mode
 = 
çl£
;

176 
	g»que¡_queue
& 
	gq
 = 
Ùh”q
.
size
()? oth”q: 
wr™e_mode
 ? 
wr™eq
 : 
»adq
;

178 
scheduË
(
q
);

181 
boŞ
 
is_row_h™
(
Reque¡
& 
»q
)

183 
ty³Çme
 
	gT
::
Commªd
 
cmd
 = 
g‘_fœ¡_cmd
(
»q
);

184  
	gchªÃl
->
check_row_h™
(
cmd
, 
»q
.
addr_vec
.
d©a
());

187 
	g´iv©e
:

189 
boŞ
 
com·œ_fœ¡_şk
(cÚ¡ 
»que¡_šfo
& 
lhs
, cÚ¡„eque¡_šfo& 
rhs
) {

190  (
	gg‘
<2>(
	glhs
è> g‘<2>(
	grhs
));

193 
ty³Çme
 
	gT
::
Commªd
 
g‘_fœ¡_cmd
(
Reque¡
& 
»q
)

195 
ty³Çme
 
T
::
Commªd
 
cmd
 = 
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
.
ty³
)];

196 (
	g»q
.
	gty³
)){

197 (
	gReque¡
::
Ty³
::
READ
):

198 (
Reque¡
::
Ty³
::
WRITE
):{

199 autØ
node
 = 
chªÃl
;

200 
	gi
 = 1; i < (
	gT
::
Lev–
::
Row
); i++)

201 
	gnode
 = 
node
->
chd»n
[
»q
.
addr_vec
[
i
]];

202 
as£¹
((
node
->
Ëv–
è=ğ(
T
::
Lev–
::
Row
) - 1);

203 ià(
	gnode
->
	g¡©e
 =ğ
T
::
S‹
::
Clo£d
è T::
Commªd
::
ACT
;

204 ià(
	gnode
->
	grow_¡©e
.
fšd
(
»q
.
addr_vec
[(
T
::
Lev–
::
Row
)]è!ğ
node
->
row_¡©e
.
’d
()è 
cmd
;

205  
	gT
::
Commªd
::
PRE
;

207 (
	gReque¡
::
Ty³
::
REFRESH
):

208  
chªÃl
->
decode
(
cmd
, 
»q
.
addr_vec
.
d©a
());

210 
as£¹
(
çl£
);

214 
upd©e
(
ty³Çme
 
T
::
Commªd
 
cmd
, 
boŞ
 
¡©e_chªge
, 
veùÜ
<>::
™”©Ü
& 
begš
, veùÜ<>::™”©Ü& 
’d
, 
»que¡_queue
& 
q
){

215 ià(
	gq
.
em±y
()) ;

217 auto& 
	gšfo
 : 
q
) {

218 
boŞ
 
addr_eq
 = 
equ®
(
begš
, 
’d
, 
g‘
<0>(
šfo
).
addr_vec
.begin());

219 ià(
	g¡©e_chªge
 && 
	gaddr_eq
)

220 
	gg‘
<1>(
	gšfo
èğ
g‘_fœ¡_cmd
(
g‘
<0>(
šfo
));

221 ià((
	gcmd
 =ğ
T
::
Commªd
::
RD
 || 
cmd
 =ğT::Commªd::
WR
)

222 && 
g‘
<1>(
šfo
è=ğ
T
::
Commªd
::
ACT
)

224 
	gg‘
<2>(
	gšfo
èğ
chªÃl
->
g‘_Ãxt
(
g‘
<1>(
šfo
), g‘<0>(šfo).
addr_vec
.
d©a
());

226 
make_h—p
(
q
.
begš
(), q.
’d
(), 
com·œ_fœ¡_şk
);

229 
scheduË
(
»que¡_queue
& 
q
){

230 ià(
	gq
.
em±y
()) ;

232 
	gReque¡
& 
	g»q
 = 
g‘
<0>(
q
[0]);

233 
ty³Çme
 
	gT
::
Commªd
& 
fœ¡_cmd
 = 
g‘
<1>(
q
[0]);

234 
	gfœ¡_şk
 = 
g‘
<2>(
q
[0]);

236 ià(
	gfœ¡_şk
 > 
	gşk
) ;

238 ià(
	g»q
.
	gis_fœ¡_commªd
) {

239 
	g»q
.
	gis_fœ¡_commªd
 = 
çl£
;

240 ià(
	g»q
.
	gty³
 =ğ
Reque¡
::
Ty³
::
READ
 || 
»q
.
ty³
 =ğReque¡::Ty³::
WRITE
) {

241 ià(
is_row_h™
(
»q
))

242 ++
row_h™s
;

244 ++
	grow_mis£s
;

248 
issue_cmd
(
fœ¡_cmd
, 
»q
.
addr_vec
.
d©a
());

250 ià(
	gfœ¡_cmd
 =ğ
chªÃl
->
¥ec
->
Œª¦©e
[(
»q
.
ty³
)]){

251 ià(
»q
.
ty³
 =ğ
Reque¡
::
Ty³
::
READ
) {

252 
»q
.
d•¬t
 = 
şk
 + 
chªÃl
->
¥ec
->
»ad_Ï‹ncy
;

253 
	g³ndšg
.
push
(
»q
);

255 
pİ_h—p
(
q
.
begš
(), q.
’d
(), 
com·œ_fœ¡_şk
);

256 
	gq
.
pİ_back
();

259 
boŞ
 
	g¡©e_chªge
 = 
chªÃl
->
¥ec
->
is_İ’šg
(
fœ¡_cmd
)

260 || 
chªÃl
->
¥ec
->
is_şosšg
(
fœ¡_cmd
)

261 || 
chªÃl
->
¥ec
->
is_»äeshšg
(
fœ¡_cmd
);

263 autØ
	gbegš
 = 
»q
.
addr_vec
.
begš
();

264 autØ
	g’d
 = 
begš
 + 1;

265 ; 
	g’d
 < 
	gbegš
 + (
	gT
::
Lev–
::
Row
è&& *
’d
 >= 0;ƒnd++);

267 
upd©e
(
fœ¡_cmd
, 
¡©e_chªge
, 
begš
, 
’d
, 
»adq
);

268 
upd©e
(
fœ¡_cmd
, 
¡©e_chªge
, 
begš
, 
’d
, 
wr™eq
);

269 
upd©e
(
fœ¡_cmd
, 
¡©e_chªge
, 
begš
, 
’d
, 
Ùh”q
);

272 
issue_cmd
(
ty³Çme
 
T
::
Commªd
 
cmd
, * 
addr_vec
)

275 
	gchªÃl
->
upd©e
(
cmd
, 
addr_vec
, 
şk
);

277 ià(
	g»cÜd_cmd_Œaû
){

279 auto& 
	gfe
 = 
cmd_Œaû_fes
[
addr_vec
[1]];

280 
	g¡ršg
& 
	gcmd_Çme
 = 
chªÃl
->
¥ec
->
commªd_Çme
[(
cmd
)];

281 
	gfe
<<
	gşk
<<','<<
	gcmd_Çme
;

283 ià(
	gcmd_Çme
 =ğ"PREA" || 
cmd_Çme
 == "REF")

284 
fe
<<
’dl
;

286 
	gbªk_id
 = 
addr_vec
[(
T
::
Lev–
::
Bªk
)];

287 ià(
	gchªÃl
->
	g¥ec
->
	g¡ªd¬d_Çme
 =ğ"DDR4" || 
chªÃl
->
¥ec
->
¡ªd¬d_Çme
 == "GDDR5")

288 
bªk_id
 +ğ
addr_vec
[(
T
::
Lev–
::
Bªk
) - 1] *

289 
chªÃl
->
¥ec
->
Üg_’Œy
.
couÁ
[(
T
::
Lev–
::
Bªk
)];

290 
	gfe
<<','<<
	gbªk_id
<<
	g’dl
;

293 ià(
	g´št_cmd_Œaû
){

294 
´štf
("%5 %10ld:", 
chªÃl
->
¥ec
->
commªd_Çme
[(
cmd
)].
c_¡r
(), 
şk
);

295 
	gËv
 = 0;†ev < (
	gT
::
Lev–
::
MAX
);†ev++)

296 
´štf
(" %5d", 
addr_vec
[
Ëv
]);

297 
´štf
("\n");

	@StatType.cpp

1 
	~"StTy³.h
"

3 
Çme¥aû
 
	gSts
 {

6 
StLi¡
 
	g¡©li¡
;

9 
Tick
 
	gcurTick
 = 0;

12 
	gHi¡og¿m
::
grow_out
()

14 
size
 = 
cvec
.size();

15 
	gz”o
 = 
size
 / 2;

16 
	gtİ_h®f
 = 
z”o
 + (
size
 - zero + 1) / 2;

17 
	gbÙtom_h®f
 = (
size
 - 
z”o
) / 2;

20 
	glow_·œ
 = 
z”o
 - 1;

21 
	gi
 = 
z”o
 - 1; i >ğ
bÙtom_h®f
; i--) {

22 
	gcvec
[
i
] = 
cvec
[
low_·œ
];

23 ià(
	glow_·œ
 - 1 >= 0)

24 
cvec
[
i
] +ğcvec[
low_·œ
 - 1];

25 
	glow_·œ
 -= 2;

27 
as£¹
(
low_·œ
 == 0 ||†ow_pair == -1 ||†ow_pair == -2);

29 
	gi
 = 
bÙtom_h®f
 - 1; i >= 0; i--)

30 
	gcvec
[
i
] = 
CouÁ”
();

33 
	ghigh_·œ
 = 
z”o
;

34 
	gi
 = 
z”o
; i < 
	gtİ_h®f
; i++) {

35 
	gcvec
[
i
] = 
cvec
[
high_·œ
];

36 ià(
	ghigh_·œ
 + 1 < 
	gsize
)

37 
	gcvec
[
i
] +ğ
cvec
[
high_·œ
 + 1];

38 
	ghigh_·œ
 += 2;

40 
as£¹
(
high_·œ
 =ğ
size
 || high_pair == size + 1);

42 
	gi
 = 
tİ_h®f
; i < 
	gsize
; i++)

43 
	gcvec
[
i
] = 
CouÁ”
();

45 
	gmax_buck‘
 *= 2;

46 
	gmš_buck‘
 *= 2;

47 
	gbuck‘_size
 *= 2;

51 
	gHi¡og¿m
::
grow_cÚv”t
()

53 
size
 = 
cvec
.size();

54 
	gh®f
 = (
size
 + 1) / 2;

57 
	g·œ
 = 
size
 - 1;

58 
	gi
 = 
size
 - 1; i >ğ
h®f
; --i) {

59 
	gcvec
[
i
] = 
cvec
[
·œ
];

60 ià(
	g·œ
 - 1 >= 0)

61 
cvec
[
i
] +ğcvec[
·œ
 - 1];

62 
	g·œ
 -= 2;

65 
	gi
 = 
h®f
 - 1; i >= 0; i--)

66 
	gcvec
[
i
] = 
CouÁ”
();

68 
	gmš_buck‘
 = -
max_buck‘
;

69 
	gbuck‘_size
 *= 2;

73 
	gHi¡og¿m
::
grow_up
()

75 
size
 = 
cvec
.size();

76 
	gh®f
 = (
size
 + 1) / 2;

78 
	g·œ
 = 0;

79 
	gi
 = 0; i < 
	gh®f
; i++) {

80 
	gcvec
[
i
] = 
cvec
[
·œ
];

81 ià(
	g·œ
 + 1 < 
	gsize
)

82 
	gcvec
[
i
] +ğ
cvec
[
·œ
 + 1];

83 
	g·œ
 += 2;

85 
as£¹
(
·œ
 =ğ
size
 ||…air == size + 1);

87 
	gi
 = 
h®f
; i < 
	gsize
; i++)

88 
	gcvec
[
i
] = 
CouÁ”
();

90 
	gmax_buck‘
 *= 2;

91 
	gbuck‘_size
 *= 2;

95 
	gHi¡og¿m
::
add
(
Hi¡og¿m
 &
hs
)

97 
size_ty³
 
b_size
 = 
hs
.
size
();

98 
as£¹
(
size
(è=ğ
b_size
);

99 
as£¹
(
mš_buck‘
 =ğ
hs
.min_bucket);

101 
	gsum
 +ğ
hs
.
sum
;

102 
	glogs
 +ğ
hs
.
logs
;

103 
	gsqu¬es
 +ğ
hs
.
squ¬es
;

104 
	g§m¶es
 +ğ
hs
.
§m¶es
;

106 
	gbuck‘_size
 > 
	ghs
.bucket_size)

107 
	ghs
.
grow_up
();

108 
	gbuck‘_size
 < 
	ghs
.bucket_size)

109 
grow_up
();

111 
ušt32_t
 
	gi
 = 0; i < 
	gb_size
; i++)

112 
	gcvec
[
i
] +ğ
hs
.
cvec
[i];

116 
	gHi¡og¿m
::
§m¶e
(
CouÁ”
 
v®
, 
numb”
)

118 
as£¹
(
mš_buck‘
 < 
max_buck‘
);

119 ià(
	gv®
 < 
	gmš_buck‘
) {

120 ià(
	gmš_buck‘
 == 0)

121 
grow_cÚv”t
();

123 
	gv®
 < 
	gmš_buck‘
)

124 
grow_out
();

125 } ià(
	gv®
 >ğ
max_buck‘
 + 
buck‘_size
) {

126 ià(
mš_buck‘
 == 0) {

127 
v®
 >ğ
max_buck‘
 + 
buck‘_size
)

128 
grow_up
();

130 
	gv®
 >ğ
max_buck‘
 + 
buck‘_size
)

131 
grow_out
();

135 
size_ty³
 
	gšdex
 =

136 (
št64_t
)
¡d
::
æoÜ
((
v®
 - 
mš_buck‘
è/ 
buck‘_size
);

138 
as£¹
(
šdex
 >ğ0 && index < 
size
());

139 
	gcvec
[
šdex
] +ğ
numb”
;

141 
	gsum
 +ğ
v®
 * 
numb”
;

142 
	gsqu¬es
 +ğ
v®
 * v® * 
numb”
;

143 
	glogs
 +ğ
log
(
v®
è* 
numb”
;

144 
	g§m¶es
 +ğ
numb”
;

	@StatType.h

1 #iâdeà
__STATTYPE_H


2 
	#__STATTYPE_H


	)

4 
	~<lim™s
>

5 
	~<f¡»am
>

6 
	~<¡ršg
>

7 
	~<veùÜ
>

9 
	~<ÿs£¹
>

10 
	~<cm©h
>

11 
	~<c¡dlib
>

13 
Çme¥aû
 
	g¿muÏtÜ
 {

15 
şass
 
	gSÿÏrSt
;

16 
şass
 
	gAv”ageSt
;

17 
şass
 
	gVeùÜSt
;

18 
şass
 
	gAv”ageVeùÜSt
;

21 
Çme¥aû
 
	gSts
 {

23 cÚ¡ 
	g•s
 = 1e-8;

25 
	tsize_ty³
;

26 
	toff_ty³
;

27 
	tCouÁ”
;

28 
	tResuÉ
;

29 
ušt64_t
 
	tTick
;

30 
	g¡d
::
	tveùÜ
<
	tCouÁ”
> 
	tVCouÁ”
;

31 
	g¡d
::
	tveùÜ
<
	tResuÉ
> 
	tVResuÉ
;

32 
	g¡d
::
	tnum”ic_lim™s
<
	tCouÁ”
> 
	tCouÁ”Lim™s
;

35 cÚ¡ 
ušt16_t
 
	gš™
 = 0x00000001;

36 cÚ¡ 
ušt16_t
 
	gdi¥Ïy
 = 0x00000002;

37 cÚ¡ 
ušt16_t
 
	gtÙ®
 = 0x00000010;

38 cÚ¡ 
ušt16_t
 
	gpdf
 = 0x00000020;

39 cÚ¡ 
ušt16_t
 
	gcdf
 = 0x00000040;

40 cÚ¡ 
ušt16_t
 
	gdi¡
 = 0x00000080;

41 cÚ¡ 
ušt16_t
 
	gnoz”o
 = 0x00000100;

42 cÚ¡ 
ušt16_t
 
	gnÚª
 = 0x00000200;

44 şas 
	cFÏgs
 {

45 
	g´Ùeùed
:

46 
ušt16_t
 
æags
;

47 
	gpublic
:

48 
FÏgs
(){}

49 
FÏgs
(
ušt16_t
 
æags
):flags(flags){}

50 
İ”©Ü
=(
ušt16_t
 
_æags
){
æags
 = _flags;}

51 
boŞ
 
is_tÙ®
(ècÚ¡ { 
	gæags
 & 
	gtÙ®
;}

52 
boŞ
 
is_pdf
(ècÚ¡ { 
	gæags
 & 
	gpdf
;}

53 
boŞ
 
is_noz”o
(ècÚ¡ { 
	gæags
 & 
	gnoz”o
;}

54 
boŞ
 
is_nÚª
(ècÚ¡ { 
	gæags
 & 
	gnÚª
;}

55 
boŞ
 
is_cdf
(ècÚ¡ { 
	gæags
 & 
	gcdf
;}

56 
boŞ
 
is_di¥Ïy
(ècÚ¡ { 
	gæags
 & 
	gdi¥Ïy
;}

59 şas 
	cStBa£
 {

60 
	gpublic
:

63 
vœtu®
 
´št
(
¡d
::
of¡»am
& 
fe
) = 0;

65 
vœtu®
 
size_ty³
 
size
() const = 0;

66 
vœtu®
 
boŞ
 
z”o
() const = 0;

67 
vœtu®
 
´•¬e
() = 0;

68 
vœtu®
 
»£t
() = 0;

70 
vœtu®
 
VResuÉ
 
v»suÉ
() const {  VResult(); };

71 
vœtu®
 
ResuÉ
 
tÙ®
() const {  Result(); };

73 
vœtu®
 
boŞ
 
is_di¥Ïy
() const = 0;

74 
vœtu®
 
boŞ
 
is_noz”o
() const = 0;

77 şas 
	cStLi¡
 {

78 
	g´Ùeùed
:

79 
¡d
::
veùÜ
<
StBa£
*> 
li¡
;

80 
	g¡d
::
of¡»am
 
¡©_ouut
;

81 
	gpublic
:

82 
add
(
StBa£
* 
¡©
) {

83 
li¡
.
push_back
(
¡©
);

85 
ouut
(
¡d
::
¡ršg
 
f’ame
) {

86 
¡©_ouut
.
İ’
(
f’ame
.
c_¡r
(), 
¡d
::
ios_ba£
::
out
);

87 ià(!
	g¡©_ouut
.
good
()) {

88 
as£¹
(
çl£
 && "!stat_output.good()");

91 
´šÎ
() {

92 
off_ty³
 
	gi
 = 0 ; i < 
	gli¡
.
size
() ; ++i) {

93 ià(!
	gli¡
[
i
]) {

96 ià(
	gli¡
[
i
]->
is_noz”o
(è&&†i¡[i]->
z”o
()) {

99 ià(
	gli¡
[
i
]->
is_di¥Ïy
()) {

100 
	gli¡
[
i
]->
´•¬e
();

101 
	gli¡
[
i
]->
´št
(
¡©_ouut
);

105 ~
StLi¡
() {

106 
	g¡©_ouut
.
şo£
();

110 
StLi¡
 
¡©li¡
;

112 
	g‹m¶©e
<
şass
 
	gD”ived
>

113 şas 
	cSt
 : 
public
 
StBa£
 {

114 
´Ùeùed
:

115 
¡d
::
¡ršg
 
_Çme
;

116 
	g¡d
::
¡ršg
 
_desc
;

117 
	g_´ecisiÚ
 = 1;

118 
FÏgs
 
	g_æags
 = 
di¥Ïy
;

119 
	g¡d
::
¡ršg
 
£·¿tÜSŒšg
;

120 
	gpublic
:

121 
St
() {

122 
¡©li¡
.
add
(
£låŒ
());

124 
	gD”ived
 &
£lf
(è{ *
	g¡©ic_ÿ¡
<D”ived*>(
	gthis
);}

125 
D”ived
 *
£låŒ
(è{ 
	g¡©ic_ÿ¡
<
	gD”ived
*>(
	gthis
);}

126 
	gD”ived
 &
Çme
(cÚ¡ 
¡d
::
¡ršg
 &
__Çme
) {

127 
_Çme
 = 
__Çme
;

128  
£lf
();

130 
	gD”ived
 &
desc
(cÚ¡ 
¡d
::
¡ršg
 &
__desc
) {

131 
_desc
 = 
__desc
;

132  
£lf
();

134 
	gD”ived
 &
´ecisiÚ
(
__´ecisiÚ
) {

135 
	g_´ecisiÚ
 = 
__´ecisiÚ
;

136  
£lf
();

138 
	gD”ived
 &
æags
(
FÏgs
 
__æags
) {

139 
	g_æags
 = 
__æags
;

140  
£lf
();

143 
	g‹m¶©e
 <
şass
 
	gG’”icSt
>

144 
	gD”ived
 &
´”eq
(cÚ¡ 
G’”icSt
 &…rereq) {

147  
£lf
();

150 
	gD”ived
 &
£tS•¬©Ü
(
¡d
::
¡ršg
 
¡r
) {

151 
£·¿tÜSŒšg
 = 
¡r
;

152  
£lf
();

154 cÚ¡ 
	g¡d
::
¡ršg
& 
£tS•¬©Ü
(ècÚ¡ { 
£·¿tÜSŒšg
;}

156 
size_ty³
 
size
() const {  0; }

158 
vœtu®
 
´št
(
¡d
::
of¡»am
& 
fe
) {};

159 
vœtu®
 
´šŠame
(
¡d
::
of¡»am
& 
fe
) {

160 
fe
.
width
(40);

161 
	gfe
 << 
	g_Çme
;

164 
vœtu®
 
´štdesc
(
¡d
::
of¡»am
& 
fe
) {

165 
fe
.
width
(40);

166 
	gfe
 << "# " << 
	g_desc
 << 
	g¡d
::
’dl
;

169 
vœtu®
 
boŞ
 
is_di¥Ïy
() const {

170  
	g_æags
.
is_di¥Ïy
();

173 
vœtu®
 
boŞ
 
is_noz”o
() const {

174  
	g_æags
.
is_noz”o
();

178 
	g‹m¶©e
 <
şass
 
	gSÿÏrTy³
>

179 
şass
 
	gSÿÏrBa£
: 
public
 
St
<
SÿÏrTy³
> {

180 
public
:

181 
vœtu®
 
CouÁ”
 
v®ue
() const = 0;

182 
vœtu®
 
ResuÉ
 
»suÉ
() const = 0;

183 
vœtu®
 
ResuÉ
 
tÙ®
() const = 0;

185 
size_ty³
 
size
() const { 1;}

186 
VResuÉ
 
v»suÉ
(ècÚ¡ { VResuÉ(1, 
»suÉ
());}

188 
vœtu®
 
´št
(
¡d
::
of¡»am
& 
fe
) {

189 
St
<
SÿÏrTy³
>::
´šŠame
(
fe
);

191 
	gfe
.
´ecisiÚ
(
St
<
SÿÏrTy³
>::
_´ecisiÚ
);

192 
	gfe
.
width
(20);

193 
ResuÉ
 
	g»s
 = 
St
<
SÿÏrTy³
>::
£lf
().
»suÉ
();

194 
	gfe
 << 
	g¡d
::
fixed
 << 
»s
;

195 
	gSt
<
	gSÿÏrTy³
>::
´štdesc
(
fe
);

199 
şass
 
	gCÚ¡V®ue
: 
public
 
SÿÏrBa£
<
CÚ¡V®ue
> {

200 
´iv©e
:

201 
CouÁ”
 
_v®ue
;

202 
	gpublic
:

203 
CÚ¡V®ue
(
CouÁ”
 
__v®ue
):
_v®ue
(__value){}

205 
İ”©Ü
 ++ (è{ ++
_v®ue
; }

206 
	gİ”©Ü
 -- (è{ --
	g_v®ue
; }

207 
	gİ”©Ü
 ++ (è{ 
	g_v®ue
++; }

208 
	gİ”©Ü
 -- (è{ 
	g_v®ue
--; }

210 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

211 
	gİ”©Ü
 = (cÚ¡ 
U
 &
v
è{ 
_v®ue
 = v; }

213 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

214 
	gİ”©Ü
 +ğ(cÚ¡ 
U
 &
v
è{ 
_v®ue
 += v;}

216 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

217 
	gİ”©Ü
 -ğ(cÚ¡ 
U
 &
v
è{ 
_v®ue
 -= v;}

220 
CouÁ”
 
v®ue
(ècÚ¡ { 
	g_v®ue
;}

221 
ResuÉ
 
»suÉ
(ècÚ¡ { (
	gResuÉ
)
	g_v®ue
;}

222 
ResuÉ
 
tÙ®
(ècÚ¡ { 
»suÉ
();}

223 
boŞ
 
z”o
(ècÚ¡ { (
çbs
(
_v®ue
è< 
	g•s
);}

224 
´•¬e
() {}

225 
»£t
() {}

228 
şass
 
	gSÿÏr
: 
public
 
SÿÏrBa£
<
SÿÏr
> {

229 
´iv©e
:

230 
CouÁ”
 
_v®ue
;

231 
	gpublic
:

232 
SÿÏr
():
_v®ue
(0) {}

233 
CouÁ”
 
v®ue
(ècÚ¡ { 
_v®ue
;}

234 
ResuÉ
 
»suÉ
(ècÚ¡ { (
	gResuÉ
)
	g_v®ue
;}

235 
ResuÉ
 
tÙ®
(ècÚ¡ { (
	gResuÉ
)
	g_v®ue
;}

237 
	gİ”©Ü
 ++ (è{ ++
	g_v®ue
; }

238 
	gİ”©Ü
 -- (è{ --
	g_v®ue
; }

239 
	gİ”©Ü
 ++ (è{ 
	g_v®ue
++; }

240 
	gİ”©Ü
 -- (è{ 
	g_v®ue
--; }

242 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

243 
	gİ”©Ü
 = (cÚ¡ 
U
 &
v
è{ 
_v®ue
 = v; }

245 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

246 
	gİ”©Ü
 +ğ(cÚ¡ 
U
 &
v
è{ 
_v®ue
 += v;}

248 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

249 
	gİ”©Ü
 -ğ(cÚ¡ 
U
 &
v
è{ 
_v®ue
 -= v;}

252 
vœtu®
 
boŞ
 
z”o
(ècÚ¡ { (
çbs
(
_v®ue
è< 
	g•s
);}

253 
´•¬e
() {}

254 
»£t
(è{
	g_v®ue
 = 
CouÁ”
();}

258 
Tick
 
curTick
;

260 
şass
 
	gAv”age
: 
public
 
SÿÏrBa£
<
Av”age
> {

261 
´iv©e
:

262 
CouÁ”
 
cu¼’t
;

263 
Tick
 
	gÏ¡Re£t
;

264 
ResuÉ
 
	gtÙ®_v®
;

265 
Tick
 
	gÏ¡
;

266 
	gpublic
:

267 
Av”age
():
cu¼’t
(0), 
Ï¡Re£t
(0), 
tÙ®_v®
(0), 
Ï¡
(0){}

269 
£t
(
CouÁ”
 
v®
) {

270 
	gtÙ®_v®
 +ğ
cu¼’t
 * (
curTick
 - 
Ï¡
);

271 
	gÏ¡
 = 
curTick
;

272 
	gcu¼’t
 = 
v®
;

274 
šc
(
CouÁ”
 
v®
) {

275 
£t
(
cu¼’t
 + 
v®
);

277 
dec
(
CouÁ”
 
v®
) {

278 
£t
(
cu¼’t
 - 
v®
);

280 
	gİ”©Ü
 ++ (è{ 
šc
(1); }

281 
	gİ”©Ü
 -- (è{ 
dec
(1); }

282 
	gİ”©Ü
 ++ (è{ 
šc
(1); }

283 
	gİ”©Ü
 -- (è{ 
dec
(1); }

285 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

286 
	gİ”©Ü
 = (cÚ¡ 
U
 &
v
è{ 
£t
(v); }

288 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

289 
	gİ”©Ü
 +ğ(cÚ¡ 
U
 &
v
è{ 
šc
(v);}

291 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

292 
	gİ”©Ü
 -ğ(cÚ¡ 
U
 &
v
è{ 
dec
(v);}

295 
boŞ
 
z”o
(ècÚ¡ {  (
çbs
(
tÙ®_v®
è< 
	g•s
); }

296 
´•¬e
() {

297 
	gtÙ®_v®
 +ğ
cu¼’t
 * (
curTick
 - 
Ï¡
);

298 
	gÏ¡
 = 
curTick
;

300 
»£t
() {

301 
	gtÙ®_v®
 = 0.0;

302 
	gÏ¡
 = 
curTick
;

303 
	gÏ¡Re£t
 = 
curTick
;

306 
CouÁ”
 
v®ue
(ècÚ¡ {  
	gcu¼’t
; }

307 
ResuÉ
 
»suÉ
() const {

308 
as£¹
(
Ï¡
 =ğ
curTick
);

309  (
	gResuÉ
)(
	gtÙ®_v®
 + 
	gcu¼’t
)/ (ResuÉ)(
	gcurTick
 - 
	gÏ¡Re£t
 + 1);

311 
ResuÉ
 
tÙ®
(ècÚ¡ { 
»suÉ
();}

314 
	g‹m¶©e
<
şass
 
	gD”ived
, cÏs 
	gEËm’t
>

315 
şass
 
	gVeùÜBa£
: 
public
 
St
<
D”ived
> {

316 
´iv©e
:

317 
size_ty³
 
_size
 = 0;

318 
	g¡d
::
veùÜ
<
EËm’t
> 
d©a
;

320 
	gpublic
:

321 
š™
(
size_ty³
 
__size
) {

322 
_size
 = 
__size
;

323 
	gd©a
.
»size
(
size
());

324 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

325 
	gd©a
[
i
].
æags
(0)

326 .
Çme
("[" + 
¡d
::
¡ršg
(1, (
i
 + '0')) + "]");

329 
size_ty³
 
size
(ècÚ¡ { 
	g_size
;}

331 
v®ue
(
VCouÁ”
& 
vec
) const {

332 
	gvec
.
»size
(
size
());

333 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

334 
	gvec
[
i
] = 
d©a
[i].
v®ue
();

338 
»suÉ
(
VResuÉ
& 
vec
) const {

339 
	gvec
.
»size
(
size
());

340 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

341 
	gvec
[
i
] = 
d©a
[i].
»suÉ
();

345 
ResuÉ
 
tÙ®
() const {

346 
ResuÉ
 
	gsum
 = 0.0;

347 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

348 
	gsum
 +ğ
d©a
[
i
].
»suÉ
();

350  
	gsum
;

353 
VResuÉ
 
v»suÉ
() const {

354 
VResuÉ
 
	gv»s
;

355 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

356 
	gv»s
[
i
] = 
d©a
[i].
»suÉ
();

358  
	gv»s
;

361 
boŞ
 
check
() const {

364  
	gŒue
;

367 
	gEËm’t
 &
	gİ”©Ü
[](
off_ty³
 
	gšdex
) {

368 
as£¹
(
šdex
 >ğ0 && index < 
size
());

369  
	gd©a
[
šdex
];

372 
boŞ
 
z”o
() const {

373  (
çbs
(
tÙ®
()è< 
	g•s
);

376 
´•¬e
() {

377 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

378 
	gd©a
[
i
].
´•¬e
();

381 
»£t
() {

382 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

383 
	gd©a
[
i
].
»£t
();

386 
´št
(
¡d
::
of¡»am
& 
fe
) {

387 
St
<
D”ived
>::
´šŠame
(
fe
);

388 
	gfe
.
´ecisiÚ
(
St
<
D”ived
>::
_´ecisiÚ
);

389 
	gfe
.
width
(20);

390 
	gfe
 << 
	g¡d
::
fixed
 << 
tÙ®
();

391 
	gSt
<
	gD”ived
>::
´štdesc
(
fe
);

392 
off_ty³
 
	gi
 = 0 ; i < 
size
() ; ++i) {

393 
	gd©a
[
i
].
´št
(
fe
);

398 
şass
 
	gVeùÜ
: 
public
 
VeùÜBa£
<
VeùÜ
, 
	gSÿÏr
> {

401 
şass
 
	gAv”ageVeùÜ
: 
public
 
VeùÜBa£
<
Av”ageVeùÜ
, 
	gAv”age
> {

404 
şass
 
	gDi¡ributiÚ
: 
public
 
St
<
Di¡ributiÚ
> {

405 
´iv©e
:

407 
CouÁ”
 
·¿m_mš
;

408 
CouÁ”
 
	g·¿m_max
;

409 
CouÁ”
 
	g·¿m_buck‘_size
;

410 
CouÁ”
 
	g·¿m_buck‘s
;

413 
CouÁ”
 
	gmš_Œack
;

415 
CouÁ”
 
	gmax_Œack
;

417 
CouÁ”
 
	gbuck‘_size
;

419 
CouÁ”
 
	gmš_v®
;

420 
CouÁ”
 
	gmax_v®
;

422 
CouÁ”
 
	gund”æow
;

424 
CouÁ”
 
	gov”æow
;

426 
CouÁ”
 
	gsum
;

428 
CouÁ”
 
	gsqu¬es
;

430 
CouÁ”
 
	g§m¶es
;

432 
VCouÁ”
 
	gcvec
;

434 
	gpublic
:

435 
Di¡ributiÚ
():
·¿m_mš
(
CouÁ”
()), 
·¿m_max
(Counter()),

436 
·¿m_buck‘_size
(
CouÁ”
()è{ 
»£t
(); }

437 
š™
(
CouÁ”
 
mš
, CouÁ” 
max
, CouÁ” 
bkt
) {

438 
	g·¿m_mš
 = 
mš
;

439 
	g·¿m_max
 = 
max
;

440 
	g·¿m_buck‘_size
 = 
bkt
;

441 
	g·¿m_buck‘s
 = (
size_ty³
)
û
((
max
 - 
mš
 + 1.0è/ 
bkt
);

442 
	gcvec
.
»size
(
·¿m_buck‘s
);

444 
»£t
();

446 
§m¶e
(
CouÁ”
 
v®
, 
numb”
) {

447 ià(
	gv®
 < 
	gmš_Œack
)

448 
	gund”æow
 +ğ
numb”
;

449 ià(
	gv®
 > 
	gmax_Œack
)

450 
	gov”æow
 +ğ
numb”
;

452 
size_ty³
 
	gšdex
 =

453 (
size_ty³
)
¡d
::
æoÜ
((
v®
 - 
mš_Œack
è/ 
buck‘_size
);

454 
as£¹
(
šdex
 < 
size
());

455 
	gcvec
[
šdex
] +ğ
numb”
;

458 ià(
	gv®
 < 
	gmš_v®
)

459 
	gmš_v®
 = 
v®
;

461 ià(
	gv®
 > 
	gmax_v®
)

462 
	gmax_v®
 = 
v®
;

464 
	gsum
 +ğ
v®
 * 
numb”
;

465 
	gsqu¬es
 +ğ
v®
 * v® * 
numb”
;

466 
	g§m¶es
 +ğ
numb”
;

469 
size_ty³
 
size
(ècÚ¡ { 
	gcvec
.size();}

470 
boŞ
 
z”o
() const {

471  (
çbs
(
§m¶es
è< 
	g•s
);

473 
´•¬e
() {};

474 
»£t
() {

475 
	gmš_Œack
 = 
·¿m_mš
;

476 
	gmax_Œack
 = 
·¿m_max
;

477 
	gbuck‘_size
 = 
·¿m_buck‘_size
;

479 
	gmš_v®
 = 
CouÁ”Lim™s
::
max
();

480 
	gmax_v®
 = 
CouÁ”Lim™s
::
mš
();

481 
	gund”æow
 = 
CouÁ”
();

482 
	gov”æow
 = 
CouÁ”
();

484 
size_ty³
 
	g_size
 = 
cvec
.
size
();

485 
off_ty³
 
	gi
 = 0 ; i < 
	g_size
 ; ++i) {

486 
	gcvec
[
i
] = 
CouÁ”
();

489 
	gsum
 = 
CouÁ”
();

490 
	gsqu¬es
 = 
CouÁ”
();

491 
	g§m¶es
 = 
CouÁ”
();

493 
add
(
Di¡ributiÚ
 &
d
) {

494 
size_ty³
 
	gd_size
 = 
d
.
size
();

495 
as£¹
(
size
(è=ğ
d_size
);

496 
as£¹
(
mš_Œack
 =ğ
d
.min_track);

497 
as£¹
(
max_Œack
 =ğ
d
.max_track);

499 
	gund”æow
 +ğ
d
.
und”æow
;

500 
	gov”æow
 +ğ
d
.
ov”æow
;

502 
	gsum
 +ğ
d
.
sum
;

503 
	gsqu¬es
 +ğ
d
.
squ¬es
;

504 
	g§m¶es
 +ğ
d
.
§m¶es
;

506 ià(
	gd
.
	gmš_v®
 < min_val) {

507 
	gmš_v®
 = 
d
.
mš_v®
;

510 ià(
	gd
.
	gmax_v®
 > max_val) {

511 
	gmax_v®
 = 
d
.
max_v®
;

514 
off_ty³
 
	gi
 = 0 ; i < 
	gd_size
 ; ++i) {

515 
	gcvec
[
i
] +ğ
d
.
cvec
[i];

520 
şass
 
	gHi¡og¿m
: 
public
 
St
<
Hi¡og¿m
> {

521 
´iv©e
:

522 
size_ty³
 
·¿m_buck‘s
;

524 
CouÁ”
 
	gmš_buck‘
;

525 
CouÁ”
 
	gmax_buck‘
;

526 
CouÁ”
 
	gbuck‘_size
;

528 
CouÁ”
 
	gsum
;

529 
CouÁ”
 
	glogs
;

530 
CouÁ”
 
	gsqu¬es
;

531 
CouÁ”
 
	g§m¶es
;

532 
VCouÁ”
 
	gcvec
;

534 
	gpublic
:

535 
Hi¡og¿m
():
·¿m_buck‘s
(0è{ 
»£t
(); }

536 
Hi¡og¿m
(
size_ty³
 
__buck‘s
):
cvec
(__buckets) {

537 
š™
(
__buck‘s
);

539 
š™
(
size_ty³
 
__buck‘s
) {

540 
	gcvec
.
»size
(
__buck‘s
);

541 
	g·¿m_buck‘s
 = 
__buck‘s
;

542 
»£t
();

545 
grow_up
();

546 
grow_out
();

547 
grow_cÚv”t
();

548 
add
(
Hi¡og¿m
& 
hs
);

549 
§m¶e
(
CouÁ”
 
v®
, 
numb”
);

551 
boŞ
 
z”o
() const {

552  (
çbs
(
§m¶es
è< 
	g•s
);

554 
´•¬e
() {}

555 
»£t
() {

556 
	gmš_buck‘
 = 0;

557 
	gmax_buck‘
 = 
·¿m_buck‘s
 - 1;

558 
	gbuck‘_size
 = 1;

560 
size_ty³
 
	gsize
 = 
·¿m_buck‘s
;

561 
off_ty³
 
	gi
 = 0 ; i < 
	gsize
 ; ++i) {

562 
	gcvec
[
i
] = 
CouÁ”
();

565 
	gsum
 = 
CouÁ”
();

566 
	gsqu¬es
 = 
CouÁ”
();

567 
	g§m¶es
 = 
CouÁ”
();

568 
	glogs
 = 
CouÁ”
();

571 
size_ty³
 
size
(ècÚ¡ { 
	g·¿m_buck‘s
;}

574 
şass
 
	gSnd¬dDevŸtiÚ
: 
public
 
St
<
Snd¬dDevŸtiÚ
> {

575 
´iv©e
:

576 
CouÁ”
 
sum
;

577 
CouÁ”
 
	gsqu¬es
;

578 
CouÁ”
 
	g§m¶es
;

580 
	gpublic
:

581 
Snd¬dDevŸtiÚ
():
sum
(
CouÁ”
()), 
squ¬es
(Counter()),

582 
§m¶es
(
CouÁ”
()) {}

583 
§m¶e
(
CouÁ”
 
v®
, 
numb”
) {

584 
CouÁ”
 
	gv®ue
 = 
v®
 * 
numb”
;

585 
	gsum
 +ğ
v®ue
;

586 
	gsqu¬es
 +ğ
v®ue
 * value;

587 
	g§m¶es
 +ğ
numb”
;

589 
size_ty³
 
size
() const { 1;}

590 
boŞ
 
z”o
(ècÚ¡ { (
çbs
(
§m¶es
è< 
	g•s
);}

591 
´•¬e
() {}

592 
»£t
() {

593 
	gsum
 = 
CouÁ”
();

594 
	gsqu¬es
 = 
CouÁ”
();

595 
	g§m¶es
 = 
CouÁ”
();

597 
add
(
Snd¬dDevŸtiÚ
& 
sd
) {

598 
	gsum
 +ğ
sd
.
sum
;

599 
	gsqu¬es
 +ğ
sd
.
squ¬es
;

600 
	g§m¶es
 +ğ
sd
.
§m¶es
;

604 
şass
 
	gAv”ageDevŸtiÚ
: 
public
 
St
<
Av”ageDevŸtiÚ
> {

605 
´iv©e
:

606 
CouÁ”
 
sum
;

607 
CouÁ”
 
	gsqu¬es
;

609 
	gpublic
:

610 
Av”ageDevŸtiÚ
():
sum
(
CouÁ”
()), 
squ¬es
(Counter()) {}

611 
§m¶e
(
CouÁ”
 
v®
, 
numb”
) {

612 
CouÁ”
 
	gv®ue
 = 
v®
 * 
numb”
;

613 
	gsum
 +ğ
v®ue
;

614 
	gsqu¬es
 +ğ
v®ue
 * value;

616 
size_ty³
 
size
() const { 1;}

617 
boŞ
 
z”o
(ècÚ¡ { (
çbs
(
sum
è< 
	g•s
);}

618 
´•¬e
() {}

619 
»£t
() {

620 
	gsum
 = 
CouÁ”
();

621 
	gsqu¬es
 = 
CouÁ”
();

623 
add
(
Av”ageDevŸtiÚ
& 
ad
) {

624 
	gsum
 +ğ
ad
.
sum
;

625 
	gsqu¬es
 +ğ
ad
.
squ¬es
;

629 şas 
	cOp
 {

630 
	g´iv©e
:

631 
¡d
::
¡ršg
 
İ¡ršg
;

632 
	gpublic
:

633 
Op
() {}

634 
Op
(
¡d
::
¡ršg
 
__İ¡ršg
):
İ¡ršg
(__opstring){}

635 
ResuÉ
 
İ”©Ü
(è(ResuÉ 
r
) const {

636 ià(
İ¡ršg
 == "-") {

637  -
r
;

639 
as£¹
("UÇry o³¿tiÚ cª oÆy buÇry‚eg©iÚ." && 
çl£
);

642 
ResuÉ
 
İ”©Ü
(è(ResuÉ 
	gl
, ResuÉ 
	gr
) const {

643 ià(
	gİ¡ršg
 == "+") {

644  
l
 + 
r
;

645 } ià(
	gİ¡ršg
 == "-") {

646  
l
 - 
r
;

647 } ià(
	gİ¡ršg
 == "*") {

648  
l
 * 
r
;

649 } ià(
	gİ¡ršg
 == "/") {

650 
as£¹
(
çbs
(
r
) > 1e-8 || "divide zeroƒrror");

651  
	gl
 / 
	gr
;

653 
as£¹
("šv®id bš¬y op¡ršg " && 
çl£
);

	@Statistics.h

1 #iâdeà
__STATISTICS_H


2 
	#__STATISTICS_H


	)

4 
	~<¡ršg
>

7 #ià!
defšed
(
RAMULATOR
)

8 
	#INTEGRATED_WITH_GEM5


	)

11 #ifdeà
INTEGRATED_WITH_GEM5


12 
	~"ba£/¡©i¡ics.hh
"

14 
	~"StTy³.h
"

43 
Çme¥aû
 
	g¿muÏtÜ
 {

45 
	g‹m¶©e
<
şass
 
	gStTy³
>

46 şas 
	cStBa£
 {

47 
	g´Ùeùed
:

48 
StTy³
 
¡©
;

49 
	g¡d
::
¡ršg
 
¡©Name
;

51 
	gStBa£
<
	gStTy³
> & 
£lf
(è{  *
	gthis
; }

52 
	gpublic
:

53 
StBa£
() {}

55 #iâdeà
INTEGRATED_WITH_GEM5


56 cÚ¡ 
StTy³
* 
g‘_¡©
() const {

57  &
¡©
;

61 
StBa£
(
¡d
::
¡ršg
 
_Çme
) {

62 
Çme
(
_Çme
);

65 
StBa£
(
¡d
::
¡ršg
 
_Çme
, std::¡ršg 
_desc
) {

66 
Çme
(
_Çme
);

67 
desc
(
_desc
);

70 
	gStBa£
<
	gStTy³
> & 
Çme
(
¡d
::
¡ršg
 
_Çme
) {

71 
¡©Name
 = 
_Çme
;

72 
	g¡©
.
Çme
("¿muÏtÜ." + 
_Çme
);

74  
£lf
();

77 cÚ¡ 
	g¡d
::
¡ršg
 &
Çme
(ècÚ¡ {  
¡©Name
; }

79 
	gStBa£
<
	gStTy³
> & 
£tS•¬©Ü
(cÚ¡ 
¡d
::
¡ršg
 & 
_£p
) {

80 
¡©
.
£tS•¬©Ü
(
_£p
);

81  
£lf
();

84 cÚ¡ 
	g¡d
::
¡ršg
 &
£tS•¬©Ü
(ècÚ¡ {  
¡©
.setSeparator(); }

86 
	gStBa£
<
	gStTy³
> & 
desc
(
¡d
::
¡ršg
 
_desc
) {

87 
¡©
.
desc
(
_desc
);

88  
£lf
();

91 
	gStBa£
<
	gStTy³
> & 
´ecisiÚ
(
_´ecisiÚ
) {

92 
	g¡©
.
´ecisiÚ
(
_´ecisiÚ
);

93  
£lf
();

96 
	gStBa£
<
	gStTy³
> & 
æags
(
Sts
::
FÏgs
 
_æags
) {

97 
¡©
.
æags
(
_æags
);

98  
£lf
();

101 
	g‹m¶©e
 <
şass
 
	gSt
>

102 
	gStBa£
<
	gStTy³
> & 
´”eq
(cÚ¡ 
St
 & 
_´”eq
) {

103 
	g¡©
.
´”eq
(
_´”eq
);

104  
£lf
();

107 
	gSts
::
size_ty³
 
size
(ècÚ¡ {  
¡©
.size(); }

108 
boŞ
 
z”o
(ècÚ¡ {  
	g¡©
.zero(); }

109 
´•¬e
(è{ 
	g¡©
.prepare(); }

110 
»£t
(è{ 
	g¡©
.reset(); }

113 
	g‹m¶©e
<
şass
 
	gStTy³
>

114 
şass
 
	gStBa£Vec
 : 
public
 
StBa£
<
StTy³
> {

115 
´Ùeùed
:

116 
StBa£Vec
<
StTy³
> & 
£lf
(è{  *
this
; }

118 
	gpublic
:

119 
StBa£Vec
<
StTy³
> & 
subÇme
(
Sts
::
off_ty³
 
šdex
, cÚ¡ 
¡d
::
¡ršg
 & 
Çme
) {

120 
StBa£
<
StTy³
>::
¡©
.
subÇme
(
šdex
, 
Çme
);

121  
£lf
();

124 
	gStBa£Vec
<
	gStTy³
> & 
subdesc
(
Sts
::
off_ty³
 
šdex
, cÚ¡ 
¡d
::
¡ršg
 & 
desc
) {

125 
StBa£
<
StTy³
>::
¡©
.
subdesc
(
šdex
, 
desc
);

126  
£lf
();

130 
	g‹m¶©e
<
şass
 
	gStTy³
>

131 
şass
 
	gSÿÏrStBa£
 : 
public
 
StBa£
<
StTy³
> {

132 
public
:

133 
Sts
::
CouÁ”
 
v®ue
(ècÚ¡ {  
StBa£
<
StTy³
>::
¡©
.value(); };

134 
	gİ”©Ü
++(è{ ++
	gStBa£
<
	gStTy³
>::
¡©
; }

135 
	gİ”©Ü
--(è{ --
	gStBa£
<
	gStTy³
>::
¡©
; }

137 
	gİ”©Ü
++(è{ 
	gStBa£
<
	gStTy³
>::
¡©
++; }

138 
	gİ”©Ü
--(è{ 
	gStBa£
<
	gStTy³
>::
¡©
--; }

140 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

141 
	gİ”©Ü
=(cÚ¡ 
U
 &
v
è{ 
StBa£
<
StTy³
>::
¡©
 = v; }

143 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

144 
	gİ”©Ü
+=(cÚ¡ 
U
 &
v
è{ 
StBa£
<
StTy³
>::
¡©
 += v; }

146 
	g‹m¶©e
 <
ty³Çme
 
	gU
>

147 
	gİ”©Ü
-=(cÚ¡ 
U
 &
v
è{ 
StBa£
<
StTy³
>::
¡©
 -= v; }

150 
	g‹m¶©e
<
şass
 
	gStTy³
, cÏs 
	gEËm’t
>

151 
şass
 
	gVeùÜStBa£
 : 
public
 
StBa£Vec
<
StTy³
> {

152 
´Ùeùed
:

153 
VeùÜStBa£
<
StTy³
, 
	gEËm’t
> & 
£lf
(è{  *
	gthis
; }

155 
	gpublic
:

156 
v®ue
(
Sts
::
VCouÁ”
 & 
vec
ècÚ¡ { 
StBa£
<
StTy³
>::
¡©
.value(vec); }

157 
»suÉ
(
Sts
::
VResuÉ
 & 
vec
ècÚ¡ { 
StBa£
<
StTy³
>::
¡©
.result(vec); }

158 
	gSts
::
ResuÉ
 
tÙ®
(ècÚ¡ {  
StBa£
<
StTy³
>::
¡©
.total(); }

160 
boŞ
 
check
(ècÚ¡ {  
	gStBa£
<
	gStTy³
>::
¡©
.check(); }

162 
	gVeùÜStBa£
<
	gStTy³
, 
	gEËm’t
> & 
š™
(
Sts
::
size_ty³
 
size
) {

163 
StBa£
<
StTy³
>::
¡©
.
š™
(
size
);

164  
£lf
();

167 #ifdeà
INTEGRATED_WITH_GEM5


168 
	gSts
::
SÿÏrProxy
<
StTy³
> 
İ”©Ü
[](
Sts
::
off_ty³
 
šdex
è{  
StBa£
<StTy³>::
¡©
[index]; }

170 
	gEËm’t
 &
	gİ”©Ü
[](
	gSts
::
off_ty³
 
šdex
è{  
StBa£
<
StTy³
>::
¡©
[index]; }

175 
	g‹m¶©e
<
şass
 
	gStTy³
>

176 
şass
 
	gDi¡StBa£
 : 
public
 
StBa£
<
StTy³
> {

177 
public
:

178 
‹m¶©e
<
ty³Çme
 
U
>

179 
§m¶e
(cÚ¡ 
U
 &
v
, 
n
 = 1è{ 
StBa£
<
StTy³
>::
¡©
.sample(v,‚); }

181 
add
(
Di¡StBa£
 & 
d
è{ 
	gStBa£
<
	gStTy³
>::
¡©
.add(d.
StBa£
<
StTy³
>::stat); }

189 
şass
 
	gSÿÏrSt
 : 
public
 
SÿÏrStBa£
<
Sts
::
SÿÏr
> {

190 
public
:

191 
usšg
 
SÿÏrStBa£
<
Sts
::
SÿÏr
>::
İ”©Ü
=;

194 
şass
 
	gAv”ageSt
 : 
public
 
SÿÏrStBa£
<
Sts
::
Av”age
> {

195 
public
:

196 
usšg
 
SÿÏrStBa£
<
Sts
::
Av”age
>::
İ”©Ü
=;

199 
şass
 
	gVeùÜSt
 : 
public
 
VeùÜStBa£
<
Sts
::
VeùÜ
, 
	gSts
::
SÿÏr
> {

202 
şass
 
	gAv”ageVeùÜSt
 : 
public
 
VeùÜStBa£
<
Sts
::
Av”ageVeùÜ
, 
	gSts
::
Av”age
> {

205 
şass
 
	gDi¡ributiÚSt
 : 
public
 
Di¡StBa£
<
Sts
::
Di¡ributiÚ
> {

206 
´Ùeùed
:

207 
Di¡ributiÚSt
 & 
£lf
(è{  *
this
; }

209 
	gpublic
:

210 
Di¡ributiÚSt
 & 
š™
(
Sts
::
CouÁ”
 
mš
, Sts::CouÁ” 
max
, Sts::CouÁ” 
bkt
) {

211 
StBa£
<
Sts
::
Di¡ributiÚ
>::
¡©
.
š™
(
mš
, 
max
, 
bkt
);

212  
£lf
();

217 
şass
 
	gHi¡og¿mSt
 : 
public
 
Di¡StBa£
<
Sts
::
Hi¡og¿m
> {

218 
´Ùeùed
:

219 
Hi¡og¿mSt
 & 
£lf
(è{  *
this
; }

221 
	gpublic
:

222 
Hi¡og¿mSt
 & 
š™
(
Sts
::
size_ty³
 
size
) {

223 
StBa£
<
Sts
::
Hi¡og¿m
>::
¡©
.
š™
(
size
);

224  
£lf
();

228 
şass
 
	gSnd¬dDevŸtiÚSt
 : 
public
 
Di¡StBa£
<
Sts
::
Snd¬dDevŸtiÚ
> {

231 
şass
 
	gAv”ageDevŸtiÚSt
 : 
public
 
Di¡StBa£
<
Sts
::
Av”ageDevŸtiÚ
> {

	@TLDRAM.cpp

1 
	~"TLDRAM.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
	~<io¡»am
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

10 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

12 
¡ršg
 
	gTLDRAM
::
¡ªd¬d_Çme
 = "TLDRAM";

14 
	gm­
<
	g¡ršg
, 
	gTLDRAM
::
Org
> 
TLDRAM
::
Üg_m­
 = {

15 {"TLDRAM_512Mb_x4", 
TLDRAM
::
Org
::
TLDRAM_512Mb_x4
},

16 {"TLDRAM_512Mb_x8", 
TLDRAM
::
Org
::
TLDRAM_512Mb_x8
},

17 {"TLDRAM_512Mb_x16", 
TLDRAM
::
Org
::
TLDRAM_512Mb_x16
},

18 {"TLDRAM_1Gb_x4", 
TLDRAM
::
Org
::
TLDRAM_1Gb_x4
},

19 {"TLDRAM_1Gb_x8", 
TLDRAM
::
Org
::
TLDRAM_1Gb_x8
},

20 {"TLDRAM_1Gb_x16", 
TLDRAM
::
Org
::
TLDRAM_1Gb_x16
},

21 {"TLDRAM_2Gb_x4", 
TLDRAM
::
Org
::
TLDRAM_2Gb_x4
},

22 {"TLDRAM_2Gb_x8", 
TLDRAM
::
Org
::
TLDRAM_2Gb_x8
},

23 {"TLDRAM_2Gb_x16", 
TLDRAM
::
Org
::
TLDRAM_2Gb_x16
},

24 {"TLDRAM_4Gb_x4", 
TLDRAM
::
Org
::
TLDRAM_4Gb_x4
},

25 {"TLDRAM_4Gb_x8", 
TLDRAM
::
Org
::
TLDRAM_4Gb_x8
},

26 {"TLDRAM_4Gb_x16", 
TLDRAM
::
Org
::
TLDRAM_4Gb_x16
},

27 {"TLDRAM_8Gb_x4", 
TLDRAM
::
Org
::
TLDRAM_8Gb_x4
},

28 {"TLDRAM_8Gb_x8", 
TLDRAM
::
Org
::
TLDRAM_8Gb_x8
},

29 {"TLDRAM_8Gb_x16", 
TLDRAM
::
Org
::
TLDRAM_8Gb_x16
},

32 
	gm­
<
	g¡ršg
, 
	gTLDRAM
::
S³ed
> 
TLDRAM
::
¥“d_m­
 = {

33 {"TLDRAM_800D", 
TLDRAM
::
S³ed
::
TLDRAM_800D
},

34 {"TLDRAM_800E", 
TLDRAM
::
S³ed
::
TLDRAM_800E
},

35 {"TLDRAM_1066E", 
TLDRAM
::
S³ed
::
TLDRAM_1066E
},

36 {"TLDRAM_1066F", 
TLDRAM
::
S³ed
::
TLDRAM_1066F
},

37 {"TLDRAM_1066G", 
TLDRAM
::
S³ed
::
TLDRAM_1066G
},

38 {"TLDRAM_1333G", 
TLDRAM
::
S³ed
::
TLDRAM_1333G
},

39 {"TLDRAM_1333H", 
TLDRAM
::
S³ed
::
TLDRAM_1333H
},

40 {"TLDRAM_1600H", 
TLDRAM
::
S³ed
::
TLDRAM_1600H
},

41 {"TLDRAM_1600J", 
TLDRAM
::
S³ed
::
TLDRAM_1600J
},

42 {"TLDRAM_1600K", 
TLDRAM
::
S³ed
::
TLDRAM_1600K
},

43 {"TLDRAM_1866K", 
TLDRAM
::
S³ed
::
TLDRAM_1866K
},

44 {"TLDRAM_1866L", 
TLDRAM
::
S³ed
::
TLDRAM_1866L
},

45 {"TLDRAM_2133L", 
TLDRAM
::
S³ed
::
TLDRAM_2133L
},

46 {"TLDRAM_2133M", 
TLDRAM
::
S³ed
::
TLDRAM_2133M
},

50 
	gTLDRAM
::
	$TLDRAM
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
£gm’t_¿tio
) :

51 
	`£gm’t_¿tio
(
£gm’t_¿tio
),

52 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

53 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

54 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nBL
)

56 
this
->
£gm’t_¿tio
 = segment_ratio;

57 
	`š™_¥“d
();

58 
	`š™_´”eq
();

59 
	`š™_rowh™
();

60 
	`š™_rowİ’
();

61 
	`š™_Ïmbda
();

62 
	`š™_timšg
();

63 
	}
}

65 
	gTLDRAM
::
	$TLDRAM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
£gm’t_¿tio
) :

66 
	$TLDRAM
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
], 
£gm’t_¿tio
)

68 
this
->
£gm’t_¿tio
 = segment_ratio;

69 
	}
}

71 
	gTLDRAM
::
	$£t_chªÃl_numb”
(
chªÃl
) {

72 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

73 
	}
}

75 
	gTLDRAM
::
	$£t_¿nk_numb”
(
¿nk
) {

76 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

77 
	}
}

79 
	gTLDRAM
::
	$š™_¥“d
()

82 
·ge
 = (
Üg_’Œy
.
dq
 * org_’Œy.
couÁ
[(
Lev–
::
CŞumn
)]) >> 13;

83 
¥“d_’Œy
.
¿‹
) {

84 800: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 4 : 4;

85 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 16 : 20;

87 1066: 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 4 : 6;

88 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 20 : 27;

91 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 4 : 5;

92 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 20 : 30;

95 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 5 : 6;

96 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 24 : 32;

99 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 5 : 6;

100 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 26 : 33;

103 
¥“d_’Œy
.
nRRD
 = (
·ge
==1) ? 5 : 6;

104 
¥“d_’Œy
.
nFAW
 = (
·ge
==1) ? 27 : 34;

106 : 
	`as£¹
(
çl£
);

110 
ch
 = 
Üg_’Œy
.
size
;

111 
¥“d_’Œy
.
¿‹
) {

112 800: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 36 : (chip==1<<10) ? 44

113 : (
ch
==1<<11) ? 64 : (chip==1<<12) ? 104 : 140; ;

114 1066: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 48 : (chip==1<<10) ? 59

115 : (
ch
==1<<11) ? 86 : (chip==1<<12) ? 139 : 187; ;

116 1333: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 60 : (chip==1<<10) ? 74

117 : (
ch
==1<<11) ? 107 : (chip==1<<12) ? 174 : 234; ;

118 1600: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 72 : (chip==1<<10) ? 88

119 : (
ch
==1<<11) ? 128 : (chip==1<<12) ? 208 : 280; ;

120 1866: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 84 : (chip==1<<10) ? 103

121 : (
ch
==1<<11) ? 150 : (chip==1<<12) ? 243 : 327; ;

122 2133: 
¥“d_’Œy
.
nRFC
 = (
ch
==512) ? 96 : (chip==1<<10) ? 118

123 : (
ch
==1<<11) ? 171 : (chip==1<<12) ? 278 : 374; ;

124 : 
	`as£¹
(
çl£
);

126 
¥“d_’Œy
.
¿‹
) {

127 800: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 40 : (chip==1<<10) ? 48

128 : (
ch
==1<<11) ? 68 : (chip==1<<12) ? 108 : 144; ;

129 1066: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 54 : (chip==1<<10) ? 64

130 : (
ch
==1<<11) ? 91 : (chip==1<<12) ? 144 : 192; ;

131 1333: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 67 : (chip==1<<10) ? 80

132 : (
ch
==1<<11) ? 114 : (chip==1<<12) ? 180 : 240; ;

133 1600: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 80 : (chip==1<<10) ? 96

134 : (
ch
==1<<11) ? 136 : (chip==1<<12) ? 216 : 288; ;

135 1866: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 94 : (chip==1<<10) ? 112

136 : (
ch
==1<<11) ? 159 : (chip==1<<12) ? 252 : 336; ;

137 2133: 
¥“d_’Œy
.
nXS
 = (
ch
==512) ? 107 : (chip==1<<10) ? 128

138 : (
ch
==1<<11) ? 182 : (chip==1<<12) ? 288 : 384; ;

139 : 
	`as£¹
(
çl£
);

141 
	}
}

144 
	gTLDRAM
::
	$š™_´”eq
()

147 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

148 (
node
->
¡©e
)) {

149 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

150 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

151 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

152 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

153 : 
	`as£¹
(
çl£
);

156 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
MIG
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

158 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

159 (
node
->
¡©e
)) {

160 (
S‹
::
Clo£d
):

161 ià(
id
 % 
node
->
¥ec
->
£gm’t_¿tio
)

162  
Commªd
::
ACT
;

164  
Commªd
::
ACTF
;

165 (
S‹
::
O³Ãd
):

166 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

167  
cmd
;

168 ià(
id
 % 
node
->
¥ec
->
£gm’t_¿tio
)

169  
Commªd
::
PRE
;

171  
Commªd
::
PREF
;

172 : 
	`as£¹
(
çl£
);

175 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
MIG
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

176 (
node
->
¡©e
)) {

177 (
S‹
::
Clo£d
):

178  
Commªd
::
ACTM
;

179 (
S‹
::
O³Ãd
):

180 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

181  
cmd
;

182  
Commªd
::
PREM
;

183 : 
	`as£¹
(
çl£
);

188 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

189 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

192 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

193 autØ
bªk
 : 
node
->
chd»n
) {

194 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

196 ià(
id
 % 
node
->
¥ec
->
£gm’t_¿tio
)

197  
Commªd
::
PREA
;

199  
Commªd
::
PREAF
;

201  
Commªd
::
REF
;

205 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

206 (
node
->
¡©e
)) {

207 (
S‹
::
Pow”Up
):  
Commªd
::
PDE
;

208 (
S‹
::
AùPow”Down
):  
Commªd
::
PDE
;

209 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDE
;

210 (
S‹
::
S–fReäesh
):  
Commªd
::
SRX
;

211 : 
	`as£¹
(
çl£
);

216 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

217 (
node
->
¡©e
)) {

218 (
S‹
::
Pow”Up
):  
Commªd
::
SRE
;

219 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

220 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

221 (
S‹
::
S–fReäesh
):  
Commªd
::
SRE
;

222 : 
	`as£¹
(
çl£
);

225 
	}
}

228 
	gTLDRAM
::
	$š™_rowh™
()

231 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

232 (
node
->
¡©e
)) {

233 (
S‹
::
Clo£d
):  
çl£
;

234 (
S‹
::
O³Ãd
):

235 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

236  
Œue
;

237  
çl£
;

238 : 
	`as£¹
(
çl£
);

242 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

243 
	}
}

245 
	gTLDRAM
::
	$š™_rowİ’
()

248 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
TLDRAM
>* 
node
, Commªd 
cmd
, 
id
) {

249 (
node
->
¡©e
)) {

250 (
S‹
::
Clo£d
):  
çl£
;

251 (
S‹
::
O³Ãd
):  
Œue
;

252 : 
	`as£¹
(
çl£
);

256 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

257 
	}
}

259 
	gTLDRAM
::
	$š™_Ïmbda
()

261 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

262 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

263 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;

265 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACTF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

266 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

267 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;

269 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACTM
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

270 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

271 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;

273 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

274 
node
->
¡©e
 = 
S‹
::
Clo£d
;

275 
node
->
row_¡©e
.
	`ş—r
();

277 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PREF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

278 
node
->
¡©e
 = 
S‹
::
Clo£d
;

279 
node
->
row_¡©e
.
	`ş—r
();

281 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PREM
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

282 
node
->
¡©e
 = 
S‹
::
Clo£d
;

283 
node
->
row_¡©e
.
	`ş—r
();

285 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREA
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

286 autØ
bªk
 : 
node
->
chd»n
) {

287 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

288 
bªk
->
row_¡©e
.
	`ş—r
();

291 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREAF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

292 autØ
bªk
 : 
node
->
chd»n
) {

293 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

294 
bªk
->
row_¡©e
.
	`ş—r
();

297 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PREAM
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

298 autØ
bªk
 : 
node
->
chd»n
) {

299 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

300 
bªk
->
row_¡©e
.
	`ş—r
();

303 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {};

304 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {};

305 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {};

306 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {};

307 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
MIG
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {};

308 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDE
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

309 autØ
bªk
 : 
node
->
chd»n
) {

310 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

312 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

315 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;

317 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

318 
node
->
¡©e
 = 
S‹
::
Pow”Up
;

320 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRE
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

321 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;

323 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SRX
)] = [] (
DRAM
<
TLDRAM
>* 
node
, 
id
) {

324 
node
->
¡©e
 = 
S‹
::
Pow”Up
;

326 
	}
}

329 
	gTLDRAM
::
	$š™_timšg
()

331 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

332 
veùÜ
<
TimšgEÁry
> *
t
;

335 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

338 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

339 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nBL
});

340 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

341 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::MIG, 1, 
s
.
nBL
});

342 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

346 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

349 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

350 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nCCD
});

351 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

352 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::MIG, 1, 
s
.
nCCD
});

354 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

355 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nCCD
 + 2 - s.
nCWL
});

356 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

357 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

359 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

362 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

363 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

364 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

365 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

366 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

367 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nRTP
});

368 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nRTP
});

370 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

371 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::MIG, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

372 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

373 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

374 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRTP
});

375 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nRTP
});

376 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nRTP
});

378 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

379 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

380 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

381 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

382 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

385 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

386 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

387 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

388 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

389 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nXP
});

390 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

395 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

396 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

397 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRRD
});

398 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTF
, 4, 
s
.
nFAW
});

399 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRRD
});

400 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTM
, 4, 
s
.
nFAW
});

401 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

402 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRAS
});

403 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRAS
});

404 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nRAS
});

405 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRAS
});

406 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nRAS
});

408 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
});

409 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACT
, 4, 
s
.
nFAW
});

410 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::ACTF, 1, 
s
.
nRRD
});

411 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::ACTF, 4, 
s
.
nFAW
});

412 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRRD
});

413 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACTM
, 4, 
s
.
nFAW
});

414 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRASF
});

415 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRASF
});

416 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRASF
});

417 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nRASF
});

418 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRASF
});

419 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nRASF
});

421 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
});

422 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACT
, 4, 
s
.
nFAW
});

423 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRRD
});

424 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACTF
, 4, 
s
.
nFAW
});

425 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::ACTM, 1, 
s
.
nRRD
});

426 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::ACTM, 4, 
s
.
nFAW
});

427 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRASM
});

428 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREA
, 1, 
s
.
nRASM
});

429 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRASM
});

430 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREAF
, 1, 
s
.
nRASM
});

431 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRASM
});

432 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREAM
, 1, 
s
.
nRASM
});

434 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

435 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRP
});

436 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRP
});

438 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPF
});

439 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRPF
});

440 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRPF
});

442 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPM
});

443 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRPM
});

444 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRPM
});

447 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

448 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPF
});

449 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPM
});

451 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

452 
t
[(
Commªd
::
PREAF
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPF
});

453 
t
[(
Commªd
::
PREAM
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPM
});

455 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

456 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRFC
});

457 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRFC
});

460 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PDE
, 1, 1});

461 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

462 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PDE
, 1, 1});

464 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

465 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nXP
});

466 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nXP
});

468 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

469 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nXP
});

470 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nXP
});

473 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

474 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPF
});

475 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPM
});

476 
t
[(
Commªd
::
PREA
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRP
});

477 
t
[(
Commªd
::
PREAF
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPF
});

478 
t
[(
Commªd
::
PREAM
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nRPM
});

480 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXS
});

481 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nXS
});

482 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nXS
});

485 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

488 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PDE
, 1, 1});

489 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

492 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXS
});

495 
t
[(
Commªd
::
PDE
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nPD
});

496 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXP
});

499 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXP
});

500 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
PDE
, 1, 
s
.
nXS
});

503 
t
[(
Commªd
::
SRE
)].
	`push_back
({Commªd::
SRX
, 1, 
s
.
nCKESR
});

504 
t
[(
Commªd
::
SRX
)].
	`push_back
({Commªd::
SRE
, 1, 
s
.
nXS
});

508 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

511 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

512 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCDF
});

513 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCDM
});

515 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nRCD
});

516 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nRCDF
});

517 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
MIG
, 1, 
s
.
nRCDM
});

519 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

520 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCDF
});

521 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCDM
});

523 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

524 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRTP
});

525 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRTP
});

527 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

528 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRTP
});

529 
t
[(
Commªd
::
MIG
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRTP
});

531 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

532 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

536 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

537 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRC
});

538 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRC
});

539 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRCF
});

540 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::ACTF, 1, 
s
.
nRCF
});

541 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRCF
});

542 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRCM
});

543 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRCM
});

544 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::ACTM, 1, 
s
.
nRCM
});

546 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

547 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRAS
});

548 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRAS
});

549 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRASF
});

550 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRASF
});

551 
t
[(
Commªd
::
ACTF
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRASF
});

552 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRASM
});

553 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREF
, 1, 
s
.
nRASM
});

554 
t
[(
Commªd
::
ACTM
)].
	`push_back
({Commªd::
PREM
, 1, 
s
.
nRASM
});

556 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

557 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRP
});

558 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRP
});

559 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPF
});

560 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRPF
});

561 
t
[(
Commªd
::
PREF
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRPF
});

562 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPM
});

563 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACTF
, 1, 
s
.
nRPM
});

564 
t
[(
Commªd
::
PREM
)].
	`push_back
({Commªd::
ACTM
, 1, 
s
.
nRPM
});

566 
	}
}

	@TLDRAM.h

1 #iâdeà
__TLDRAM_H


2 
	#__TLDRAM_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<m­
>

8 
	~<¡ršg
>

9 
	~<funùiÚ®
>

11 
usšg
 
Çme¥aû
 
	g¡d
;

13 
Çme¥aû
 
	g¿muÏtÜ


16 şas 
	cTLDRAM


18 
	gpublic
:

19 
£gm’t_¿tio
 = 16;

21 
¡ršg
 
	g¡ªd¬d_Çme
;

22 
şass
 
	gOrg
;

23 
şass
 
	gS³ed
;

24 
TLDRAM
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
£gm’t_¿tio
);

25 
TLDRAM
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
£gm’t_¿tio
);

27 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

28 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

30 şas 
	cLev–
 : 

32 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


36 şas 
	cCommªd
 : 

38 
ACT
, 
	gPRE
, 
	gPREA
,

39 
	gRD
, 
	gWR
,

40 
	gREF
, 
	gPDE
, 
	gPDX
, 
	gSRE
, 
	gSRX
,

41 
	gACTF
, 
	gPREF
, 
	gPREAF
,

42 
	gMIG
,

43 
	gACTM
, 
	gPREM
, 
	gPREAM
,

44 
	gMAX


47 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

56 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

57 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

58 
Lev–
::
CŞumn
, Level::Column,

59 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank,

60 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

61 
Lev–
::
CŞumn
,

62 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk


65 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

67 (
	gcmd
)) {

68 (
	gCommªd
::
ACT
):

69 (
Commªd
::
ACTF
):

70 (
Commªd
::
ACTM
):

71  
Œue
;

73  
çl£
;

77 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

79 (
	gcmd
)) {

80 (
	gCommªd
::
RD
):

81 (
Commªd
::
WR
):

82 (
Commªd
::
MIG
):

83  
Œue
;

85  
çl£
;

89 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

91 (
	gcmd
)) {

92 (
	gCommªd
::
PRE
):

93 (
Commªd
::
PREF
):

94 (
Commªd
::
PREM
):

95 (
Commªd
::
PREA
):

96 (
Commªd
::
PREAF
):

97 (
Commªd
::
PREAM
):

98  
Œue
;

100  
çl£
;

104 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

106 (
	gcmd
)) {

107 (
	gCommªd
::
REF
):

108  
Œue
;

110  
çl£
;

116 şas 
	cS‹
 : 

118 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


119 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

120 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

124 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

125 
Commªd
::
RD
, Commªd::
WR
,

126 
Commªd
::
REF
, Commªd::
PDE
, Commªd::
SRE
,

127 
Commªd
::
MIG


131 
	gfunùiÚ
<
Commªd
(
DRAM
<
TLDRAM
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

135 
	gfunùiÚ
<
boŞ
(
DRAM
<
TLDRAM
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

136 
	gfunùiÚ
<
boŞ
(
DRAM
<
TLDRAM
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

139 
	sTimšgEÁry


141 
Commªd
 
	gcmd
;

142 
	gdi¡
;

143 
	gv®
;

144 
boŞ
 
	gsiblšg
;

146 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

149 
	gfunùiÚ
<(
	gDRAM
<
	gTLDRAM
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

152 şas 
	cOrg
 : 

154 
TLDRAM_512Mb_x4
, 
	gTLDRAM_512Mb_x8
, 
	gTLDRAM_512Mb_x16
,

155 
	gTLDRAM_1Gb_x4
, 
	gTLDRAM_1Gb_x8
, 
	gTLDRAM_1Gb_x16
,

156 
	gTLDRAM_2Gb_x4
, 
	gTLDRAM_2Gb_x8
, 
	gTLDRAM_2Gb_x16
,

157 
	gTLDRAM_4Gb_x4
, 
	gTLDRAM_4Gb_x8
, 
	gTLDRAM_4Gb_x16
,

158 
	gTLDRAM_8Gb_x4
, 
	gTLDRAM_8Gb_x8
, 
	gTLDRAM_8Gb_x16
,

159 
	gMAX


162 
	sOrgEÁry
 {

163 
	gsize
;

164 
	gdq
;

165 
	gcouÁ
[(
Lev–
::
MAX
)];

166 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

182 }, 
	gÜg_’Œy
;

184 
£t_chªÃl_numb”
(
chªÃl
);

185 
£t_¿nk_numb”
(
¿nk
);

188 şas 
	cS³ed
 : 

190 
TLDRAM_800D
, 
	gTLDRAM_800E
,

191 
	gTLDRAM_1066E
, 
	gTLDRAM_1066F
, 
	gTLDRAM_1066G
,

192 
	gTLDRAM_1333G
, 
	gTLDRAM_1333H
,

193 
	gTLDRAM_1600H
, 
	gTLDRAM_1600J
, 
	gTLDRAM_1600K
,

194 
	gTLDRAM_1866K
, 
	gTLDRAM_1866L
,

195 
	gTLDRAM_2133L
, 
	gTLDRAM_2133M
,

196 
	gMAX


199 
	g´eãtch_size
 = 8;

200 
	gchªÃl_width
 = 64;

202 
	sS³edEÁry
 {

203 
	g¿‹
;

204 
	gäeq
, 
	gtCK
;

205 
	gnBL
, 
	gnCCD
, 
	gnRTRS
;

206 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnCWL
;

207 
	gnRAS
, 
	gnRC
;

208 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

209 
	gnRRD
, 
	gnFAW
;

210 
	gnRFC
, 
	gnREFI
;

211 
	gnPD
, 
	gnXP
, 
	gnXPDLL
;

212 
	gnCKESR
, 
	gnXS
, 
	gnXSDLL
;

213 
	gnRCDF
, 
	gnRPF
, 
	gnRASF
, 
	gnRCF
;

214 
	gnRCDM
, 
	gnRPM
, 
	gnRASM
, 
	gnRCM
;

215 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

244 }, 
	g¥“d_’Œy
;

246 
	g»ad_Ï‹ncy
;

248 
	g´iv©e
:

249 
š™_¥“d
();

250 
š™_Ïmbda
();

251 
š™_´”eq
();

252 
š™_rowh™
();

253 
š™_rowİ’
();

254 
š™_timšg
();

	@User.h

1 #iâdeà
__USER_H__


2 
	#__USER_H__


	)

6 
	ePÜtTy³
{

7 
	mINSPECT_DEPTH_READ
 = 0,

8 
	mEXPAND_RPAO_READ
,

9 
	mEXPAND_CIAO_READ
,

10 
	mEXPAND_RPAI_READ
,

11 
	mEXPAND_CIAI_READ
,

12 
	mEXPAND_DEPTH_READ
,

13 
	mEXPAND_DEPTH_WRITE
,

	@WideIO.cpp

1 
	~"WideIO.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
usšg
 
Çme¥aû
 
	g¡d
;

8 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

10 
¡ršg
 
	gWideIO
::
¡ªd¬d_Çme
 = "WideIO";

12 
	gm­
<
	g¡ršg
, 
	gWideIO
::
Org
> 
WideIO
::
Üg_m­
 = {

13 {"WideIO_1Gb", 
WideIO
::
Org
::
WideIO_1Gb
},

14 {"WideIO_2Gb", 
WideIO
::
Org
::
WideIO_2Gb
},

15 {"WideIO_4Gb", 
WideIO
::
Org
::
WideIO_4Gb
},

16 {"WideIO_8Gb", 
WideIO
::
Org
::
WideIO_8Gb
},

19 
	gm­
<
	g¡ršg
, 
	gWideIO
::
S³ed
> 
WideIO
::
¥“d_m­
 = {

20 {"WideIO_200", 
WideIO
::
S³ed
::
WideIO_200
},

21 {"WideIO_266", 
WideIO
::
S³ed
::
WideIO_266
},

24 
	gWideIO
::
	$WideIO
(
Org
 
Üg
, 
S³ed
 
¥“d
) :

25 
	`Üg_’Œy
(
Üg_bË
[(
Üg
)]),

26 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

27 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nDQSCK
 + s³ed_’Œy.
nBL
)

29 
	`š™_¥“d
();

30 
	`š™_´”eq
();

31 
	`š™_rowh™
();

32 
	`š™_rowİ’
();

33 
	`š™_Ïmbda
();

34 
	`š™_timšg
();

35 
	}
}

37 
	gWideIO
::
	$WideIO
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
) :

38 
	$WideIO
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
])

40 
	}
}

42 
	gWideIO
::
	$£t_chªÃl_numb”
(
chªÃl
) {

43 
	`as£¹
((
chªÃl
 == 4) && "The Wide I/O interface supports 4…hysical‡nd 4†ogical channels.");

44 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

45 
	}
}

47 
	gWideIO
::
	$£t_¿nk_numb”
(
¿nk
) {

48 
	`as£¹
((
¿nk
 == 1) && "WideIO„ank‚umber is fixedo 1.");

49 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

50 
	}
}

52 
	gWideIO
::
	$š™_¥“d
()

54 cÚ¡ 
RFC_TABLE
[(
S³ed
::
MAX
)][(
Org
::MAX)] = {

58 cÚ¡ 
REFI_TABLE
[(
S³ed
::
MAX
)][(
Org
::MAX)] = {

62 
¥“d
 = 0, 
d’s™y
 = 0;

63 
¥“d_’Œy
.
¿‹
){

64 200: 
¥“d
 = 0; ;

65 266: 
¥“d
 = 1; ;

66 : 
	`as£¹
(
çl£
);

68 
Üg_’Œy
.
size
 >> 8){

69 1: 
d’s™y
 = 0; ;

70 2: 
d’s™y
 = 1; ;

71 4: 
d’s™y
 = 2; ;

72 8: 
d’s™y
 = 3; ;

73 : 
	`as£¹
(
çl£
);

75 
¥“d_’Œy
.
nRFC
 = 
RFC_TABLE
[
¥“d
][
d’s™y
];

76 
¥“d_’Œy
.
nREFI
 = 
REFI_TABLE
[
¥“d
][
d’s™y
];

77 
	}
}

80 
	gWideIO
::
	$š™_´”eq
()

83 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

84 (
node
->
¡©e
)) {

85 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

86 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

87 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

88 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

89 : 
	`as£¹
(
çl£
);

91 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

92 (
node
->
¡©e
)) {

93 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

94 (
S‹
::
O³Ãd
):

95 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

96  
cmd
;

97  
Commªd
::
PRE
;

98 : 
	`as£¹
(
çl£
);

102 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

103 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

106 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

107 autØ
bªk
 : 
node
->
chd»n
) {

108 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

110  
Commªd
::
PRA
;

112  
Commªd
::
REF
;};

115 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

116 (
node
->
¡©e
)) {

117 (
S‹
::
Pow”Up
):  
Commªd
::
PD
;

118 (
S‹
::
AùPow”Down
):  
Commªd
::
PD
;

119 (
S‹
::
P»Pow”Down
):  
Commªd
::
PD
;

120 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

121 : 
	`as£¹
(
çl£
);

125 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

126 (
node
->
¡©e
)) {

127 (
S‹
::
Pow”Up
):  
Commªd
::
SREF
;

128 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

129 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

130 (
S‹
::
S–fReäesh
):  
Commªd
::
SREF
;

131 : 
	`as£¹
(
çl£
);

133 
	}
}

136 
	gWideIO
::
	$š™_rowh™
()

139 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

140 (
node
->
¡©e
)) {

141 (
S‹
::
Clo£d
):  
çl£
;

142 (
S‹
::
O³Ãd
):

143 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

144  
Œue
;

145  
çl£
;

146 : 
	`as£¹
(
çl£
);

150 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

151 
	}
}

153 
	gWideIO
::
	$š™_rowİ’
()

156 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO
>* 
node
, Commªd 
cmd
, 
id
) {

157 (
node
->
¡©e
)) {

158 (
S‹
::
Clo£d
):  
çl£
;

159 (
S‹
::
O³Ãd
):  
Œue
;

160 : 
	`as£¹
(
çl£
);

164 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

165 
	}
}

167 
	gWideIO
::
	$š™_Ïmbda
()

169 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

170 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

171 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

172 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

173 
node
->
¡©e
 = 
S‹
::
Clo£d
;

174 
node
->
row_¡©e
.
	`ş—r
();};

175 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRA
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

176 autØ
bªk
 : 
node
->
chd»n
) {

177 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

178 
bªk
->
row_¡©e
.
	`ş—r
();}};

179 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {};

180 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {};

181 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {};

182 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

183 
node
->
¡©e
 = 
S‹
::
Clo£d
;

184 
node
->
row_¡©e
.
	`ş—r
();};

185 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

186 
node
->
¡©e
 = 
S‹
::
Clo£d
;

187 
node
->
row_¡©e
.
	`ş—r
();};

188 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

189 autØ
bªk
 : 
node
->
chd»n
) {

190 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

192 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

195 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

196 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

197 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

198 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

199 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

200 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREFX
)] = [] (
DRAM
<
WideIO
>* 
node
, 
id
) {

201 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

202 
	}
}

205 
	gWideIO
::
	$š™_timšg
()

207 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

208 
veùÜ
<
TimšgEÁry
> *
t
;

211 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

214 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

215 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

216 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

217 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

218 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

219 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

220 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

221 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

225 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

228 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

229 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

230 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

231 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

232 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

233 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

234 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

235 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

236 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRTW
});

237 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRTW
});

238 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRTW
});

239 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRTW
});

240 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

241 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

242 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

243 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWTR
});

246 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRTP
});

247 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

250 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

251 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nBL
 + 1});

252 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

253 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + 1});

254 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

255 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

256 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

257 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

262 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

263 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 2, 
s
.
nTAW
});

264 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRAS
});

265 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

268 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

269 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRP
});

270 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFC
});

273 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PD
, 1, 1});

274 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

275 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

276 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nXP
});

279 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRP
});

280 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRP
});

281 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXSR
});

284 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFC
});

287 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PD
, 1, 1});

288 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

291 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXSR
});

294 
t
[(
Commªd
::
PD
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nCKE
});

295 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXP
});

298 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXP
});

299 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXSR
});

302 
t
[(
Commªd
::
SREF
)].
	`push_back
({Commªd::
SREFX
, 1, 
s
.
nCKESR
});

303 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXSR
});

307 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

310 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

311 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

312 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

313 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

315 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

316 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
});

318 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRP
});

319 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nWR
 + s.
nRP
});

322 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

323 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

324 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRP
});

325 
	}
}

	@WideIO.h

1 #iâdeà
__WIDEIO_H


2 
	#__WIDEIO_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cWideIO


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
WideIO
(
Org
 
Üg
, 
S³ed
 
¥“d
);

21 
WideIO
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPRA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gPD
, 
	gPDX
, 
	gSREF
, 
	gSREFX
,

38 
	gMAX


41 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

47 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

48 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

49 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

50 
Lev–
::
Rªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

53 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

55 (
	gcmd
)) {

56 (
	gCommªd
::
ACT
):

57  
Œue
;

59  
çl£
;

63 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

65 (
	gcmd
)) {

66 (
	gCommªd
::
RD
):

67 (
Commªd
::
WR
):

68 (
Commªd
::
RDA
):

69 (
Commªd
::
WRA
):

70  
Œue
;

72  
çl£
;

76 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

78 (
	gcmd
)) {

79 (
	gCommªd
::
RDA
):

80 (
Commªd
::
WRA
):

81 (
Commªd
::
PRE
):

82 (
Commªd
::
PRA
):

83  
Œue
;

85  
çl£
;

89 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

91 (
	gcmd
)) {

92 (
	gCommªd
::
REF
):

93  
Œue
;

95  
çl£
;

101 şas 
	cS‹
 : 

103 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


104 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

105 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

109 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

110 
Commªd
::
RD
, Commªd::
WR
,

111 
Commªd
::
REF
, Commªd::
PD
, Commªd::
SREF


115 
	gfunùiÚ
<
Commªd
(
DRAM
<
WideIO
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

119 
	gfunùiÚ
<
boŞ
(
DRAM
<
WideIO
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

120 
	gfunùiÚ
<
boŞ
(
DRAM
<
WideIO
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

124 
	sTimšgEÁry


126 
Commªd
 
	gcmd
;

127 
	gdi¡
;

128 
	gv®
;

129 
boŞ
 
	gsiblšg
;

131 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

134 
	gfunùiÚ
<(
	gDRAM
<
	gWideIO
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

137 şas 
	cOrg
 : 

139 
WideIO_1Gb
,

140 
	gWideIO_2Gb
,

141 
	gWideIO_4Gb
,

142 
	gWideIO_8Gb
,

143 
	gMAX


146 
	sOrgEÁry
 {

147 
	gsize
;

148 
	gdq
;

149 
	gcouÁ
[(
Lev–
::
MAX
)];

150 } 
	gÜg_bË
[(
Org
::
MAX
)] = {

156 }, 
	gÜg_’Œy
;

158 
£t_chªÃl_numb”
(
chªÃl
);

159 
£t_¿nk_numb”
(
¿nk
);

162 şas 
	cS³ed
 : 

164 
WideIO_200
,

165 
	gWideIO_266
,

166 
	gMAX


169 
	g´eãtch_size
 = 4;

170 
	gchªÃl_width
 = 128;

172 
	sS³edEÁry
 {

173 
	g¿‹
;

174 
	gäeq
, 
	gtCK
;

175 
	gnBL
, 
	gnCCD
, 
	gnDQSCK
;

176 
	gnCL
, 
	gnRCD
, 
	gnRP
, 
	gnCWL
;

177 
	gnRAS
, 
	gnRC
;

178 
	gnRTP
, 
	gnRTW
, 
	gnWTR
, 
	gnWR
;

179 
	gnRRD
, 
	gnTAW
;

180 
	gnRFC
, 
	gnREFI
;

181 
	gnCKE
, 
	gnXP
;

182 
	gnCKESR
, 
	gnXSR
;

183 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

186 }, 
	g¥“d_’Œy
;

188 
	g»ad_Ï‹ncy
;

190 
	g´iv©e
:

191 
š™_¥“d
();

192 
š™_Ïmbda
();

193 
š™_´”eq
();

194 
š™_rowh™
();

195 
š™_rowİ’
();

196 
š™_timšg
();

	@WideIO2.cpp

1 
	~"WideIO2.h
"

2 
	~"DRAM.h
"

3 
	~<veùÜ
>

4 
	~<funùiÚ®
>

5 
	~<ÿs£¹
>

7 
usšg
 
Çme¥aû
 
	g¡d
;

8 
usšg
 
Çme¥aû
 
	g¿muÏtÜ
;

10 
¡ršg
 
	gWideIO2
::
¡ªd¬d_Çme
 = "WideIO2";

12 
	gm­
<
	g¡ršg
, 
	gWideIO2
::
Org
> 
WideIO2
::
Üg_m­
 = {

13 {"WideIO2_8Gb", 
WideIO2
::
Org
::
WideIO2_8Gb
},

16 
	gm­
<
	g¡ršg
, 
	gWideIO2
::
S³ed
> 
WideIO2
::
¥“d_m­
 = {

17 {"WideIO2_800", 
WideIO2
::
S³ed
::
WideIO2_800
},

18 {"WideIO2_1066", 
WideIO2
::
S³ed
::
WideIO2_1066
},

21 
	gWideIO2
::
	$WideIO2
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
chªÃls
) :

22 
	`¥“d_’Œy
(
¥“d_bË
[(
¥“d
)]),

23 
	`»ad_Ï‹ncy
(
¥“d_’Œy
.
nCL
 + s³ed_’Œy.
nDQSCK
 + s³ed_’Œy.
nBL
)

25 (
Üg
)){

26 (
Org
::
WideIO2_8Gb
):

27 
Üg_’Œy
.
size
 = (8<<10è/ 
chªÃls
;

28 
Üg_’Œy
.
dq
 = 64;

29 ià(
chªÃls
 == 4) {

30 
Üg_’Œy
.
size
 = 2<<10;

31 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃls
;

32 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 0;

33 
Üg_’Œy
.
couÁ
[(
Lev–
::
Bªk
)] = 8;

34 
Üg_’Œy
.
couÁ
[(
Lev–
::
Row
)] = 1<<13;

35 
Üg_’Œy
.
couÁ
[(
Lev–
::
CŞumn
)] = 1<<9;

36 } ià(
chªÃls
 == 8) {

37 
Üg_’Œy
.
size
 = 1<<10;

38 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃls
;

39 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 0;

40 
Üg_’Œy
.
couÁ
[(
Lev–
::
Bªk
)] = 4;

41 
Üg_’Œy
.
couÁ
[(
Lev–
::
Row
)] = 1<<14;

42 
Üg_’Œy
.
couÁ
[(
Lev–
::
CŞumn
)] = 1<<8;

43 } 
	`as£¹
(
çl£
 && "The WideIO2 interface supports 4 or 8…hysical channels.");

45 : 
	`as£¹
(
çl£
);

47 
¥“d_’Œy
.
nRPab
 = (
chªÃls
 =ğ4)? s³ed_’Œy.
nRP8b
: s³ed_’Œy.
nRPpb
;

48 
	`š™_´”eq
();

49 
	`š™_rowh™
();

50 
	`š™_Ïmbda
();

51 
	`š™_timšg
();

52 
	}
}

54 
	gWideIO2
::
	$WideIO2
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
chªÃls
) :

55 
	$WideIO2
(
Üg_m­
[
Üg_¡r
], 
¥“d_m­
[
¥“d_¡r
], 
chªÃls
)

57 
	}
}

59 
	gWideIO2
::
	$£t_chªÃl_numb”
(
chªÃl
) {

60 
	`as£¹
((
chªÃl
 =ğ
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)]) && "channel‚umber must be consistent with spec initializaiton configuration.");

61 
Üg_’Œy
.
couÁ
[(
Lev–
::
ChªÃl
)] = 
chªÃl
;

62 
	}
}

64 
	gWideIO2
::
	$£t_¿nk_numb”
(
¿nk
) {

65 
	`as£¹
(((
¿nk
 == 1) || (rank == 2)) && "WideIO2 supports single‡nd dual„ank configurations.");

66 
Üg_’Œy
.
couÁ
[(
Lev–
::
Rªk
)] = 
¿nk
;

67 
	}
}

69 
	gWideIO2
::
	$š™_´”eq
()

72 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

73 (
node
->
¡©e
)) {

74 (
S‹
::
Pow”Up
):  
Commªd
::
MAX
;

75 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

76 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

77 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

78 : 
	`as£¹
(
çl£
);

80 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

81 (
node
->
¡©e
)) {

82 (
S‹
::
Clo£d
):  
Commªd
::
ACT
;

83 (
S‹
::
O³Ãd
):

84 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

85  
cmd
;

86  
Commªd
::
PRE
;

87 : 
	`as£¹
(
çl£
);

90 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Rªk)][(Commªd::
RD
)];

91 
´”eq
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =…»»q[(Lev–::Bªk)][(Commªd::
RD
)];

93 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
REF
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

94 autØ
bªk
 : 
node
->
chd»n
) {

95 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

97  
Commªd
::
PRA
;

99  
Commªd
::
REF
;};

101 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

102 (
node
->
¡©e
)) {

103 (
S‹
::
Pow”Up
):  
Commªd
::
PD
;

104 (
S‹
::
AùPow”Down
):  
Commªd
::
PD
;

105 (
S‹
::
P»Pow”Down
):  
Commªd
::
PD
;

106 (
S‹
::
S–fReäesh
):  
Commªd
::
SREFX
;

107 : 
	`as£¹
(
çl£
);

110 
´”eq
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

111 (
node
->
¡©e
)) {

112 (
S‹
::
Pow”Up
):  
Commªd
::
SREF
;

113 (
S‹
::
AùPow”Down
):  
Commªd
::
PDX
;

114 (
S‹
::
P»Pow”Down
):  
Commªd
::
PDX
;

115 (
S‹
::
S–fReäesh
):  
Commªd
::
SREF
;

116 : 
	`as£¹
(
çl£
);

118 
	}
}

121 
	gWideIO2
::
	$š™_rowh™
()

124 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

125 (
node
->
¡©e
)) {

126 (
S‹
::
Clo£d
):  
çl£
;

127 (
S‹
::
O³Ãd
):

128 ià(
node
->
row_¡©e
.
	`fšd
(
id
è!ğnode->row_¡©e.
	`’d
())

129  
Œue
;

130  
çl£
;

131 : 
	`as£¹
(
çl£
);

135 
rowh™
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owh™[(Lev–::Bªk)][(Commªd::
RD
)];

136 
	}
}

138 
	gWideIO2
::
	$š™_rowİ’
()

141 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
RD
)] = [] (
DRAM
<
WideIO2
>* 
node
, Commªd 
cmd
, 
id
) {

142 (
node
->
¡©e
)) {

143 (
S‹
::
Clo£d
):  
çl£
;

144 (
S‹
::
O³Ãd
):  
Œue
;

145 : 
	`as£¹
(
çl£
);

149 
rowİ’
[(
Lev–
::
Bªk
)][(
Commªd
::
WR
)] =„owİ’[(Lev–::Bªk)][(Commªd::
RD
)];

150 
	}
}

152 
	gWideIO2
::
	$š™_Ïmbda
()

154 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
ACT
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

155 
node
->
¡©e
 = 
S‹
::
O³Ãd
;

156 
node
->
row_¡©e
[
id
] = 
S‹
::
O³Ãd
;};

157 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
PRE
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

158 
node
->
¡©e
 = 
S‹
::
Clo£d
;

159 
node
->
row_¡©e
.
	`ş—r
();};

160 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PRA
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

161 autØ
bªk
 : 
node
->
chd»n
) {

162 
bªk
->
¡©e
 = 
S‹
::
Clo£d
;

163 
bªk
->
row_¡©e
.
	`ş—r
();}};

164 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
RDA
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

165 
node
->
¡©e
 = 
S‹
::
Clo£d
;

166 
node
->
row_¡©e
.
	`ş—r
();};

167 
Ïmbda
[(
Lev–
::
Bªk
)][(
Commªd
::
WRA
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

168 
node
->
¡©e
 = 
S‹
::
Clo£d
;

169 
node
->
row_¡©e
.
	`ş—r
();};

170 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PD
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

171 autØ
bªk
 : 
node
->
chd»n
) {

172 ià(
bªk
->
¡©e
 =ğ
S‹
::
Clo£d
)

174 
node
->
¡©e
 = 
S‹
::
AùPow”Down
;

177 
node
->
¡©e
 = 
S‹
::
P»Pow”Down
;};

178 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
PDX
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

179 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

180 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREF
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

181 
node
->
¡©e
 = 
S‹
::
S–fReäesh
;};

182 
Ïmbda
[(
Lev–
::
Rªk
)][(
Commªd
::
SREFX
)] = [] (
DRAM
<
WideIO2
>* 
node
, 
id
) {

183 
node
->
¡©e
 = 
S‹
::
Pow”Up
;};

184 
	}
}

187 
	gWideIO2
::
	$š™_timšg
()

189 
S³edEÁry
& 
s
 = 
¥“d_’Œy
;

190 
veùÜ
<
TimšgEÁry
> *
t
;

193 
t
 = 
timšg
[(
Lev–
::
ChªÃl
)];

196 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
});

197 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
});

198 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
});

199 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
});

200 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nBL
});

201 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
});

202 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
});

203 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nBL
});

207 
t
 = 
timšg
[(
Lev–
::
Rªk
)];

210 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nCCD
});

211 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCCD
});

212 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCCD
});

213 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nCCD
});

214 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::WR, 1, 
s
.
nCCD
});

215 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCCD
});

216 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCCD
});

217 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::WRA, 1, 
s
.
nCCD
});

218 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1 - s.
nCWL
});

219 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1 - s.
nCWL
});

220 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1 - s.
nCWL
});

221 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1 - s.
nCWL
});

222 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWTR
});

223 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWTR
});

224 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWTR
});

225 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWTR
});

228 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::RD, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

229 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

230 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

231 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::RDA, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

232 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

233 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

234 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

235 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nBL
 + s.
nRTRS
, 
Œue
});

236 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

237 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

238 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

239 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nCL
 + s.
nBL
 + s.
nDQSCK
 + 1 + s.
nRTRS
 - s.
nCWL
, 
Œue
});

240 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

241 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

242 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

243 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nCWL
 + s.
nBL
 + s.
nRTRS
 - s.
nCL
, 
Œue
});

246 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRTP
});

247 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWR
});

250 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1});

251 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCL
 + s.
nDQSCK
 + s.
nBL
 + 1});

252 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWR
});

253 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWR
 + 1});

254 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nXP
});

255 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nXP
});

256 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nXP
});

257 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nXP
});

262 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRRD
});

263 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 4, 
s
.
nFAW
});

264 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nRAS
});

265 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPab
});

268 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPpb
});

269 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRPab
});

270 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCab
});

273 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PD
, 1, 1});

274 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXP
});

275 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nXP
});

276 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PRA
, 1, 
s
.
nXP
});

279 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPpb
});

280 
t
[(
Commªd
::
PRA
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nRPab
});

281 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nXSR
});

284 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::REF, 1, 
s
.
nRFCab
});

285 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRFCab
});

286 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nRFCpb
});

289 
t
[(
Commªd
::
REF
)].
	`push_back
({Commªd::
PD
, 1, 1});

290 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
PD
, 1, 1});

291 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXP
});

292 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXP
});

295 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REF
, 1, 
s
.
nXSR
});

296 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nXSR
});

299 
t
[(
Commªd
::
PD
)].
	`push_back
({Commªd::
PDX
, 1, 
s
.
nCKE
});

300 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXP
});

303 
t
[(
Commªd
::
PDX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXP
});

304 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
PD
, 1, 
s
.
nXSR
});

307 
t
[(
Commªd
::
SREF
)].
	`push_back
({Commªd::
SREFX
, 1, 
s
.
nCKESR
});

308 
t
[(
Commªd
::
SREFX
)].
	`push_back
({Commªd::
SREF
, 1, 
s
.
nXSR
});

311 
t
 = 
timšg
[(
Lev–
::
Bªk
)];

314 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RD
, 1, 
s
.
nRCD
});

315 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
RDA
, 1, 
s
.
nRCD
});

316 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WR
, 1, 
s
.
nRCD
});

317 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
WRA
, 1, 
s
.
nRCD
});

319 
t
[(
Commªd
::
RD
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRTP
});

320 
t
[(
Commªd
::
WR
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWR
});

322 
t
[(
Commªd
::
RDA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRTP
 + s.
nRPpb
});

323 
t
[(
Commªd
::
WRA
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nCWL
 + 1 + s.
nBL
 + s.
nWR
 + s.
nRPpb
});

326 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::ACT, 1, 
s
.
nRC
});

327 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
PRE
, 1, 
s
.
nRAS
});

328 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRPpb
});

329 
t
[(
Commªd
::
PRE
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRPpb
});

332 
t
[(
Commªd
::
ACT
)].
	`push_back
({Commªd::
REFPB
, 1, 
s
.
nRRD
, 
Œue
});

333 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRRD
, 
Œue
});

336 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::REFPB, 1, 
s
.
nRFCpb
});

337 
t
[(
Commªd
::
REFPB
)].
	`push_back
({Commªd::
ACT
, 1, 
s
.
nRFCpb
});

338 
	}
}

	@WideIO2.h

1 #iâdeà
__WIDEIO2_H


2 
	#__WIDEIO2_H


	)

4 
	~"DRAM.h
"

5 
	~"Reque¡.h
"

6 
	~<veùÜ
>

7 
	~<funùiÚ®
>

9 
usšg
 
Çme¥aû
 
	g¡d
;

11 
Çme¥aû
 
	g¿muÏtÜ


14 şas 
	cWideIO2


16 
	gpublic
:

17 
¡ršg
 
¡ªd¬d_Çme
;

18 
şass
 
	gOrg
;

19 
şass
 
	gS³ed
;

20 
WideIO2
(
Org
 
Üg
, 
S³ed
 
¥“d
, 
chªÃls
 = 4);

21 
WideIO2
(cÚ¡ 
¡ršg
& 
Üg_¡r
, cÚ¡ sŒšg& 
¥“d_¡r
, 
chªÃls
 = 4);

23 
	gm­
<
	g¡ršg
, 
	gOrg
> 
	gÜg_m­
;

24 
	gm­
<
	g¡ršg
, 
	gS³ed
> 
	g¥“d_m­
;

27 şas 
	cLev–
 : 

29 
ChªÃl
, 
	gRªk
, 
	gBªk
, 
	gRow
, 
	gCŞumn
, 
	gMAX


33 şas 
	cCommªd
 : 

35 
ACT
, 
	gPRE
, 
	gPRA
,

36 
	gRD
, 
	gWR
, 
	gRDA
, 
	gWRA
,

37 
	gREF
, 
	gREFPB
, 
	gPD
, 
	gPDX
, 
	gSREF
, 
	gSREFX
,

38 
	gMAX


41 
¡ršg
 
	gcommªd_Çme
[(
Commªd
::
MAX
)] = {

47 
Lev–
 
	gscİe
[(
Commªd
::
MAX
)] = {

48 
Lev–
::
Row
, Lev–::
Bªk
, Lev–::
Rªk
,

49 
Lev–
::
CŞumn
, Level::Column, Level::Column, Level::Column,

50 
Lev–
::
Rªk
, Lev–::
Bªk
, Level::Rank, Level::Rank, Level::Rank, Level::Rank

53 
boŞ
 
is_İ’šg
(
Commªd
 
cmd
)

55 (
	gcmd
)) {

56 (
	gCommªd
::
ACT
):

57  
Œue
;

59  
çl£
;

63 
boŞ
 
is_acûssšg
(
Commªd
 
cmd
)

65 (
	gcmd
)) {

66 (
	gCommªd
::
RD
):

67 (
Commªd
::
WR
):

68 (
Commªd
::
RDA
):

69 (
Commªd
::
WRA
):

70  
Œue
;

72  
çl£
;

76 
boŞ
 
is_şosšg
(
Commªd
 
cmd
)

78 (
	gcmd
)) {

79 (
	gCommªd
::
RDA
):

80 (
Commªd
::
WRA
):

81 (
Commªd
::
PRE
):

82 (
Commªd
::
PRA
):

83  
Œue
;

85  
çl£
;

89 
boŞ
 
is_»äeshšg
(
Commªd
 
cmd
)

91 (
	gcmd
)) {

92 (
	gCommªd
::
REF
):

93 (
Commªd
::
REFPB
):

94  
Œue
;

96  
çl£
;

102 şas 
	cS‹
 : 

104 
O³Ãd
, 
	gClo£d
, 
	gPow”Up
, 
	gAùPow”Down
, 
	gP»Pow”Down
, 
	gS–fReäesh
, 
	gMAX


105 } 
	g¡¬t
[(
Lev–
::
MAX
)] = {

106 
S‹
::
MAX
, S‹::
Pow”Up
, S‹::
Clo£d
, State::Closed, State::MAX

110 
Commªd
 
	gŒª¦©e
[(
Reque¡
::
Ty³
::
MAX
)] = {

111 
Commªd
::
RD
, Commªd::
WR
,

112 
Commªd
::
REF
, Commªd::
PD
, Commªd::
SREF


116 
	gfunùiÚ
<
Commªd
(
DRAM
<
WideIO2
>*, Commªd 
cmd
, )> 
	g´”eq
[(
Lev–
::
MAX
)][(Command::MAX)];

120 
	gfunùiÚ
<
boŞ
(
DRAM
<
WideIO2
>*, 
Commªd
 
cmd
, )> 
	growh™
[(
Lev–
::
MAX
)][(Command::MAX)];

121 
	gfunùiÚ
<
boŞ
(
DRAM
<
WideIO2
>*, 
Commªd
 
cmd
, )> 
	growİ’
[(
Lev–
::
MAX
)][(Command::MAX)];

124 
	sTimšgEÁry


126 
Commªd
 
	gcmd
;

127 
	gdi¡
;

128 
	gv®
;

129 
boŞ
 
	gsiblšg
;

131 
	gveùÜ
<
	gTimšgEÁry
> 
	gtimšg
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

134 
	gfunùiÚ
<(
	gDRAM
<
	gWideIO2
>*, )> 
	gÏmbda
[(
Lev–
::
MAX
)][(
Commªd
::MAX)];

137 şas 
	cOrg
 : 

140 
WideIO2_8Gb
,

145 
	gMAX


148 
	sOrgEÁry
 {

149 
	gsize
;

150 
	gdq
;

151 
	gcouÁ
[(
Lev–
::
MAX
)];

152 } 
	gÜg_’Œy
;

154 
£t_chªÃl_numb”
(
chªÃl
);

155 
£t_¿nk_numb”
(
¿nk
);

158 şas 
	cS³ed
 : 

160 
WideIO2_800
,

161 
	gWideIO2_1066
,

162 
	gMAX


166 
	g´eãtch_size
 = 4;

167 
	gchªÃl_width
 = 64;

169 
	sS³edEÁry
 {

170 
	g¿‹
;

171 
	gäeq
, 
	gtCK
;

172 
	gnBL
, 
	gnCCD
, 
	gnDQSCK
, 
	gnRTRS
;

173 
	gnCL
, 
	gnRCD
, 
	gnRPpb
, 
	gnRP8b
, 
	gnRPab
, 
	gnCWL
;

174 
	gnRAS
, 
	gnRC
;

175 
	gnRTP
, 
	gnWTR
, 
	gnWR
;

176 
	gnRRD
, 
	gnFAW
;

177 
	gnRFCab
, 
	gnRFCpb
, 
	gnREFI
;

178 
	gnCKE
, 
	gnXP
;

179 
	gnCKESR
, 
	gnXSR
;

180 } 
	g¥“d_bË
[(
S³ed
::
MAX
)] = {

183 }, 
	g¥“d_’Œy
;

185 
	g»ad_Ï‹ncy
;

187 
	g´iv©e
:

188 
š™_Ïmbda
();

189 
š™_´”eq
();

190 
š™_rowh™
();

191 
š™_rowİ’
();

192 
š™_timšg
();

	@common.cpp

1 
	~"commÚ.h
"

4 
	gGL
::
v”‹xNum
 = 0;

5 
	gGL
::
edgeNum
 = 0;

6 
	g¡d
::
veùÜ
<> 
GL
::
¡¬tšgV”tiûs
;

9 
	gGL
::
®pha
 = 0.2;

10 
	gGL
::
b‘a
 = 5000;

11 
	gGL
::
ÿcheTh»shŞd
 = 0;

12 
	gGL
::
hubV”‹xTh»shŞd
 = 0;

13 
	gGL
::
¡¬tNum
 = 10;

16 
	gGL
::
d•thBufãrD•th
 = 4096;

17 
	gGL
::
½aoBufãrD•th
 = 4096;

18 
	gGL
::
cŸoBufãrD•th
 = 4096;

19 
	gGL
::
½aiBufãrD•th
 = 4096;

20 
	gGL
::
cŸiBufãrD•th
 = 4096;

21 
	gGL
::
äÚt›rBufãrD•th
 = 4096;

24 
	gGL
::
d•thMemAddr
 = 0;

25 
	gGL
::
½aoMemAddr
 = 0;

26 
	gGL
::
cŸoMemAddr
 = 0;

27 
	gGL
::
½aiMemAddr
 = 0;

28 
	gGL
::
cŸiMemAddr
 = 0;

29 
	gGL
::
äÚt›rMemAddr
 = 0;

31 
	gGL
::
»qIdx
 = -1;

32 
	gGL
::
bur¡Idx
 = -1;

33 
	gGL
::
bur¡L’
 = 64;

34 
	gGL
::
ba£L’
 = 1024;

35 
	gGL
::
bur¡AddrWidth
 = 
GL
::
g‘Bur¡AddrWidth
();

37 
	gGL
::
logÚ
 = 0;

39 
	gGL
::
	$cfgBfsP¬am
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
){

41 
¡d
::
if¡»am
 
	`fhªdË
(
cfgFeName
.
	`c_¡r
());

42 if(!
fhªdË
.
	`is_İ’
()){

43 
HERE
;

44 
¡d
::
cout
 << "FaedØİ’ " << 
cfgFeName
 << std::
’dl
;

45 
	`ex™
(
EXIT_FAILURE
);

48 
¡d
::
¡ršg
 
g¿phName
;

49 
¡d
::
¡ršg
 
g¿phDœ
;

50 !
fhªdË
.
	`eof
()){

51 
¡d
::
¡ršg
 
cfgKey
;

52 
fhªdË
 >> 
cfgKey
;

53 if(
cfgKey
 == "alpha"){

54 
fhªdË
 >> 
®pha
;

56 if(
cfgKey
 == "beta"){

57 
fhªdË
 >> 
b‘a
;

59 if(
cfgKey
 == "cacheThreshold"){

60 
fhªdË
 >> 
ÿcheTh»shŞd
;

62 if(
cfgKey
 == "hubVertexThreshold"){

63 
fhªdË
 >> 
hubV”‹xTh»shŞd
;

65 if(
cfgKey
 == "startNum"){

66 
fhªdË
 >> 
¡¬tNum
;

70 
fhªdË
.
	`şo£
();

72 
	}
}

74 
	gGL
::
	$g‘Bur¡Idx
(){

75 
bur¡Idx
++;

76  
bur¡Idx
;

77 
	}
}

79 
	gGL
::
	$g‘ReqIdx
(){

80 
»qIdx
++;

81  
»qIdx
;

82 
	}
}

85 
	gGL
::
	$g‘Bur¡AddrWidth
(){

87 
width
 = 1;

88 
v®
 = 1;

89 
i
 = 0; i <= 10; i++){

90 if(
v®
 =ğ
bur¡L’
){

91  
width
;

94 
width
++;

95 
v®
 = val * 2;

99 
HERE
;

100 
¡d
::
cout
 << "bur¡L’ i nÙ…ow”(2,n)." << std::
’dl
;

101 
	`ex™
(
EXIT_FAILURE
);

103 
	}
}

107 
	g¡d
::
o¡»am
& 
İ”©Ü
<< (
¡d
::o¡»am &
os
, cÚ¡ 
	g¿muÏtÜ
::
Reque¡
::
Ty³
 &
ty³
){

109 
ty³
){

110 
¿muÏtÜ
::
Reque¡
::
Ty³
::
READ
:

111 
os
 << "READ";

113 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
WRITE
:

114 
os
 << "WRITE";

116 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
REFRESH
:

117 
os
 << "REFRESH";

119 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
POWERDOWN
:

120 
os
 << "POWERDOWN";

122 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
SELFREFRESH
:

123 
os
 << "SELFREFRESH";

125 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
EXTENSION
:

126 
os
 << "EXTENSION";

128 
	g¿muÏtÜ
::
Reque¡
::
Ty³
::
MAX
:

129 
os
 << "MAX";

132 
os
 << "Unknown Type";

136  
	gos
;

139 
	g¡d
::
o¡»am
& 
İ”©Ü
<< (
¡d
::o¡»am &
os
, cÚ¡ 
	gPÜtTy³
 &
	g±y³
){

140 
	g±y³
){

141 
	gINSPECT_DEPTH_READ
:

142 
os
 << "INSPECT_DEPTH_READ";

144 
	gEXPAND_RPAO_READ
:

145 
os
 << "EXPAND_CIAO_READ";

147 
	gEXPAND_CIAO_READ
:

148 
os
 << "EXPAND_CIAO_READ";

150 
	gEXPAND_RPAI_READ
:

151 
os
 << "EXPAND_RPAI_READ";

153 
	gEXPAND_CIAI_READ
:

154 
os
 << "EXPAND_CIAI_READ";

156 
	gEXPAND_DEPTH_READ
:

157 
os
 << "EXPAND_DEPTH_READ";

159 
	gEXPAND_DEPTH_WRITE
:

160 
os
 << "EXPAND_DEPTH_WRITE";

164  
	gos
;

167 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am &
os
, cÚ¡ 
	gBur¡Op
 &
	gİ
){

169 
	gos
 << "v®id: " << 
	gİ
.
	gv®id
 << " ";

170 
	gos
 << "ty³: " << 
	gİ
.
	gty³
 << " ";

171 
	gos
 << "±y³: " << 
	gİ
.
	g±y³
 << " ";

172 
	gos
 << "bur¡Idx: " << 
	gİ
.
	gbur¡Idx
 << " ";

173 
	gos
 << "³Idx: " << 
	gİ
.
	g³Idx
 << " ";

174 
	gos
 << "addr: " << 
	gİ
.
	gaddr
 << " ";

175 
	gos
 << "Ëngth: " << 
	gİ
.
	gËngth
 << " ";

177 
	gos
 << "d•¬tPeTime: " << 
	gİ
.
	gd•¬tPeTime
 << " ";

178 
	gos
 << "¬riveMemTime: " << 
	gİ
.
	g¬riveMemTime
 << " ";

179 
	gos
 << "d•¬tMemTime: " << 
	gİ
.
	gd•¬tMemTime
 << " ";

180 
	gos
 << "¬rivePeTime: " << 
	gİ
.
	g¬rivePeTime
 << " ";

182  
	gos
;

185 
	gBur¡Op
::
	$Bur¡Op
(

186 
¿muÏtÜ
::
Reque¡
::
Ty³
 
_ty³
,

187 
PÜtTy³
 
_±y³
,

188 
_bur¡Idx
,

189 
_³Idx
,

190 
_addr
,

191 
_Ëngth
)

193 
v®id
 = 
Œue
;

194 
ty³
 = 
_ty³
;

195 
±y³
 = 
_±y³
;

196 
bur¡Idx
 = 
_bur¡Idx
;

197 
³Idx
 = 
_³Idx
;

198 
addr
 = 
_addr
;

199 
Ëngth
 = 
_Ëngth
;

200 
d•¬tPeTime
 = 0;

201 
¬riveMemTime
 = 0;

202 
d•¬tMemTime
 = 0;

203 
¬rivePeTime
 = 0;

204 
	}
}

206 
	gBur¡Op
::
	$Bur¡Op
(
boŞ
 
_v®id
){

207 
v®id
 = 
_v®id
;

208 
ty³
 = 
¿muÏtÜ
::
Reque¡
::
Ty³
::
READ
;

209 
±y³
 = 
INSPECT_DEPTH_READ
;

210 
³Idx
 = 0;

211 
addr
 = 0;

212 
bur¡Idx
 = 0;

213 
Ëngth
 = 0;

214 
d•¬tPeTime
 = 0;

215 
¬riveMemTime
 = 0;

216 
d•¬tMemTime
 = 0;

217 
¬rivePeTime
 = 0;

218 
	}
}

220 
	gBur¡Op
::
İ”©Ü
=(cÚ¡ 
Bur¡Op
 &
İ
){

222 
v®id
 = 
İ
.valid;

223 
	gty³
 = 
İ
.
ty³
;

224 
	g±y³
 = 
İ
.
±y³
;

225 
	gbur¡Idx
 = 
İ
.
bur¡Idx
;

226 
	g³Idx
 = 
İ
.
³Idx
;

227 
	gaddr
 = 
İ
.
addr
;

228 
	gËngth
 = 
İ
.
Ëngth
;

229 
	g»qVec
 = 
İ
.
»qVec
;

230 
	gaddrVec
 = 
İ
.
addrVec
;

231 
	gd©a
 = 
İ
.
d©a
;

233 
	gd•¬tPeTime
 = 
İ
.
d•¬tPeTime
;

234 
	g¬riveMemTime
 = 
İ
.
¬riveMemTime
;

235 
	gd•¬tMemTime
 = 
İ
.
d•¬tMemTime
;

236 
	g¬rivePeTime
 = 
İ
.
¬rivePeTime
;

241 
boŞ
 
	gBur¡Op
::
İ”©Ü
==(cÚ¡ 
Bur¡Op
 &
İ
) const{

243 
boŞ
 
equ®
 = 
Œue
;;

244 
	gequ®
 &ğ(
v®id
 =ğ
İ
.valid);

245 
	gequ®
 &ğ(
ty³
 =ğ
İ
.type);

246 
	gequ®
 &ğ(
±y³
 =ğ
İ
.ptype);

247 
	gequ®
 &ğ(
bur¡Idx
 =ğ
İ
.burstIdx);

248 
	gequ®
 &ğ(
³Idx
 =ğ
İ
.peIdx);

249 
	gequ®
 &ğ(
addr
 =ğ
İ
.addr);

250 
	gequ®
 &ğ(
Ëngth
 =ğ
İ
.length);

252 
	gequ®
 &ğ(
d•¬tPeTime
 =ğ
İ
.departPeTime);

253 
	gequ®
 &ğ(
¬riveMemTime
 =ğ
İ
.arriveMemTime);

254 
	gequ®
 &ğ(
d•¬tMemTime
 =ğ
İ
.departMemTime);

255 
	gequ®
 &ğ(
¬rivePeTime
 =ğ
İ
.arrivePeTime);

257  
	gequ®
;

261 
	$sc_Œaû
(
sc_Œaû_fe
 *
tf
, cÚ¡ 
Bur¡Op
 &
İ
, cÚ¡ 
¡d
::
¡ršg
 &
Çme
){

263 
¡d
::
o¡ršg¡»am
 
oss
;

264 
oss
 << 
İ
.
ty³
;

265 
	`sc_Œaû
(
tf
, 
İ
.
v®id
, 
Çme
+".valid");

266 
	`sc_Œaû
(
tf
, 
oss
.
	`¡r
().
	`c_¡r
(), 
Çme
+".type");

267 
oss
.
	`¡r
(
¡d
::
	`¡ršg
());

268 
oss
 << 
İ
.
±y³
;

269 
	`sc_Œaû
(
tf
, 
oss
.
	`¡r
().
	`c_¡r
(), 
Çme
+".ptype");

270 
	`sc_Œaû
(
tf
, 
İ
.
bur¡Idx
, 
Çme
+".burstIdx");

271 
	`sc_Œaû
(
tf
, 
İ
.
³Idx
, 
Çme
+".peIdx");

272 
	`sc_Œaû
(
tf
, 
İ
.
addr
, 
Çme
+".addr");

273 
	`sc_Œaû
(
tf
, 
İ
.
Ëngth
, 
Çme
+".length");

274 
	`sc_Œaû
(
tf
, 
İ
.
d•¬tPeTime
, 
Çme
+".departPeTime");

275 
	`sc_Œaû
(
tf
, 
İ
.
¬riveMemTime
, 
Çme
+".arriveMemTime");

276 
	`sc_Œaû
(
tf
, 
İ
.
d•¬tMemTime
, 
Çme
+".departMemTime");

277 
	`sc_Œaû
(
tf
, 
İ
.
¬rivePeTime
, 
Çme
+".arrivePeTime");

279 
	}
}

283 
	gBur¡Op
::
cÚv”tToReq
(
¡d
::
li¡
<
¿muÏtÜ
::
Reque¡
> &
»qQueue
){

284 
»qNum
 = 
g‘ReqNum
();

285 
	gi
 = 0; i < 
	g»qNum
; i++){

286 
	g¿muÏtÜ
::
Reque¡
 
»q
;

287 
	g»q
.
	gty³
 = 
ty³
;

288 
	g»q
.
	gudf
.
	g±y³
 = 
±y³
;

289 
	g»q
.
	gaddr
 = 
addrVec
[
i
];

290 
	g»q
.
	gudf
.
	gbur¡Idx
 = 
bur¡Idx
;

291 
	g»q
.
	gudf
.
	g»qIdx
 = 
»qVec
[
i
];

292 
	g»q
.
	gudf
.
	g³Idx
 = 
³Idx
;

293 
	g»q
.
	gudf
.
	gd•¬tPeTime
 = 
d•¬tPeTime
;

294 
	g»q
.
	gudf
.
	g¬riveMemTime
 = 
¬riveMemTime
;

295 
	g»q
.
	gudf
.
	gd•¬tMemTime
 = 
d•¬tMemTime
;

296 
	g»q
.
	gudf
.
	g¬rivePeTime
 = 
¬rivePeTime
;

297 
	g»qQueue
.
push_back
(
»q
);

302 
	gBur¡Op
::
	$g‘AligÃdAddr
() const {

303 
®igÃdAddr
 = (
addr
 >> 
GL
::
bur¡AddrWidth
) << GL::burstAddrWidth;

304  
®igÃdAddr
;

305 
	}
}

308 
	gBur¡Op
::
	$g‘Off£t
() const {

309 
off£t
 = 
addr
 - 
	`g‘AligÃdAddr
();

310  (è
off£t
;

311 
	}
}

313 
	gBur¡Op
::
	$g‘ReqNum
() const {

315 
»qNum
;

316 
off£t
 = 
	`g‘Off£t
();

317 if(
off£t
 == 0){

318 if(
Ëngth
%
GL
::
bur¡L’
 == 0){

319 
»qNum
 = 
Ëngth
/
GL
::
bur¡L’
;

322 
»qNum
 = 
Ëngth
/
GL
::
bur¡L’
 + 1;

326 
»qNum
 = 1;

327 
»sidueL’
 = 
Ëngth
 - (
GL
::
bur¡L’
 - 
off£t
);

328 if(
»sidueL’
%
GL
::
bur¡L’
 == 0){

329 
»qNum
 +ğ
»sidueL’
/
GL
::
bur¡L’
;

332 
»qNum
 +ğ
»sidueL’
/
GL
::
bur¡L’
 + 1;

336  
»qNum
;

338 
	}
}

340 
	gBur¡Op
::
	$upd©eReqVec
() {

342 
»qNum
 = 
	`g‘ReqNum
();

343 
i
 = 0; i < 
»qNum
; i++){

344 
»qVec
.
	`push_back
(
GL
::
	`g‘ReqIdx
());

347 
	}
}

349 
	gBur¡Op
::
	$upd©eAddrVec
() {

351 
»qNum
 = 
	`g‘ReqNum
();

352 
off£t
 = 
	`g‘Off£t
();

353 
»qAddr
;

355 if(
off£t
 == 0){

356 
»qAddr
 = 
addr
;

357 
i
 = 0; i < 
»qNum
; i++){

358 
addrVec
.
	`push_back
(
»qAddr
);

359 
»qAddr
 +ğ
GL
::
bur¡L’
;

363 
»qAddr
 = 
	`g‘AligÃdAddr
();

364 
addrVec
.
	`push_back
(
»qAddr
);

365 
»qL’
 = 
GL
::
bur¡L’
 - 
off£t
;

366 
»qL’
 < 
Ëngth
){

367 
»qAddr
 +ğ
GL
::
bur¡L’
;

368 
addrVec
.
	`push_back
(
»qAddr
);

369 if(
»qL’
 + 
GL
::
bur¡L’
 <ğ
Ëngth
){

370 
»qL’
 +ğ
GL
::
bur¡L’
;

373 
»qL’
 = 
Ëngth
;

377 
	}
}

379 
	gBur¡Op
::
	$g‘D•¬tPeTime
() const{

380  
d•¬tPeTime
;

381 
	}
}

383 
	gBur¡Op
::
	$g‘A¼ivePeTime
() const{

384  
¬rivePeTime
;

385 
	}
}

387 
	gBur¡Op
::
	$g‘D•¬tMemTime
() const{

388  
d•¬tMemTime
;

389 
	}
}

391 
	gBur¡Op
::
	$g‘A¼iveMemTime
() const{

392  
¬riveMemTime
;

393 
	}
}

395 
	gBur¡Op
::
	$£tD•¬tPeTime
(
d•¬tTime
){

396 
d•¬tPeTime
 = 
d•¬tTime
;

397 
	}
}

399 
	gBur¡Op
::
	$£tA¼ivePeTime
(
¬riveTime
){

400 
¬rivePeTime
 = 
¬riveTime
;

401 
	}
}

403 
	gBur¡Op
::
	$£tD•¬tMemTime
(
d•¬tTime
){

404 
d•¬tMemTime
 = 
d•¬tTime
;

405 
	}
}

407 
	gBur¡Op
::
	$£tA¼iveMemTime
(
¬riveTime
){

408 
¬riveMemTime
 = 
¬riveTime
;

409 
	}
}

411 
	gBur¡Op
::
¿mToReq
(cÚ¡ 
¡d
::
veùÜ
<> &
¿mD©a
){

412 
i
 = 0; 
	gi
 < 
	gËngth
; i++){

413 
	gd©a
.
push_back
(
¿mD©a
[
addr
+
i
]);

417 
	gBur¡Op
::
»qToRam
(
¡d
::
veùÜ
<> &
¿mD©a
){

418 
i
 = 0; 
	gi
 < 
	gËngth
; i++){

419 
	g¿mD©a
[
addr
+
i
] = 
d©a
[i];

	@common.h

1 #iâdeà
__COMMON_H__


2 
	#__COMMON_H__


	)

4 
	~<li¡
>

5 
	~<s¡»am
>

6 
	~"Reque¡.h
"

7 
	~"sy¡emc.h
"

9 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am &
os
, cÚ¡ 
	g¿muÏtÜ
::
Reque¡
::
Ty³
 &
ty³
);

10 
	g¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am &
os
, cÚ¡ 
	gPÜtTy³
 &
	gty³
);

13 
	#HERE
 dØ{
¡d
::
cout
 <<"Fe: " << 
__FILE__
 << " Lše: " << 
__LINE__
 << std::
’dl
;} 0)

	)

15 şas 
	cGL
{

16 
	mpublic
:

18 
v”‹xNum
;

19 
	medgeNum
;

20 
	m¡d
::
veùÜ
<> 
¡¬tšgV”tiûs
;

23 
	m®pha
;

24 
	mb‘a
;

25 
	mÿcheTh»shŞd
;

26 
	mhubV”‹xTh»shŞd
;

27 
	m¡¬tNum
;

31 
	md•thMemAddr
;

32 
	m½aoMemAddr
;

33 
	mcŸoMemAddr
;

34 
	m½aiMemAddr
;

35 
	mcŸiMemAddr
;

36 
	mäÚt›rMemAddr
;

39 
	md•thBufãrD•th
;

40 
	m½aoBufãrD•th
;

41 
	mcŸoBufãrD•th
;

42 
	m½aiBufãrD•th
;

43 
	mcŸiBufãrD•th
;

44 
	mäÚt›rBufãrD•th
;

47 
	mbur¡L’
;

48 
	mbur¡AddrWidth
;

50 
	mlogÚ
;

54 
	mba£L’
;

55 
g‘ReqIdx
();

56 
g‘Bur¡Idx
();

57 
cfgBfsP¬am
(cÚ¡ 
¡d
::
¡ršg
 &
cfgFeName
);

59 
	m´iv©e
:

60 
»qIdx
;

61 
	mbur¡Idx
;

62 
g‘Bur¡AddrWidth
();

78 
	sBur¡Op
{

80 
	mpublic
:

81 
boŞ
 
v®id
;

82 
	m¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
;

83 
PÜtTy³
 
	m±y³
;

84 
	mbur¡Idx
;

85 
	m³Idx
;

86 
	maddr
;

87 
	mËngth
;

91 
	m¡d
::
veùÜ
<> 
»qVec
;

92 
	m¡d
::
veùÜ
<> 
addrVec
;

94 
cÚv”tToReq
(
¡d
::
li¡
<
¿muÏtÜ
::
Reque¡
> &
»qQueue
);

96 
	m‹m¶©e
<
ty³Çme
 
	mT
>

97 
bur¡ReqToBufãr
(
¡d
::
li¡
<
T
> &
bufãr
){

98 * 
p
 = (*è
m®loc
((
T
));

99 if(
	mËngth
%(
	mT
) != 0){

100 
HERE
;

101 
	m¡d
::
cout
 << "The burst„equest†ength is‚ot‡lignedohe bufferype.";

102 
	m¡d
::
cout
 << 
¡d
::
’dl
;

103 
ex™
(
EXIT_FAILURE
);

106 
	mi
 = 0; i < 
	mËngth
;){

107 
size_t
 
	mj
 = 0; j < (
	mT
); j++){

108 *(
	mp
+
	mj
èğ
d©a
[
i
];

109 
	mi
++;

111 
	mbufãr
.
push_back
(*((
T
*)
p
));

113 
d–‘e
 
	mp
;

118 
	m‹m¶©e
<
ty³Çme
 
	mT
>

119 
bufãrToBur¡Req
(
¡d
::
li¡
<
T
> &
bufãr
){

120 
T
 *
p
 = (T*)
m®loc
((T));

121 
	msize
 = 
Ëngth
/(
T
);

122 
	mi
 = 0; i < 
	msize
; i++){

123 *
	mp
 = 
bufãr
.
äÚt
();

124 
	mbufãr
.
pİ_äÚt
();

125 
	mj
 = 0; j < ()(
	mT
); j++){

126 
	md©a
.
push_back
(*((*)
p
+
j
));

133 
	mİ”©Ü
=(cÚ¡ 
Bur¡Op
 &
İ
);

134 
boŞ
 
	mİ”©Ü
==(cÚ¡ 
Bur¡Op
 &
İ
) const;

135 
ä›nd
 
sc_Œaû
(
sc_Œaû_fe
 *
tf
, cÚ¡ 
Bur¡Op
 &
İ
, cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

136 
ä›nd
 
	m¡d
::
o¡»am
& 
İ”©Ü
<<(
¡d
::o¡»am &
os
, cÚ¡ 
	mBur¡Op
 &
	mİ
);

138 
£tD•¬tPeTime
(
d•¬tTime
);

139 
£tA¼ivePeTime
(
¬riveTime
);

140 
£tD•¬tMemTime
(
d•¬tTime
);

141 
£tA¼iveMemTime
(
¬riveTime
);

143 
g‘D•¬tPeTime
() const;

144 
g‘A¼ivePeTime
() const;

145 
g‘D•¬tMemTime
() const;

146 
g‘A¼iveMemTime
() const;

147 
g‘ReqNum
() const;

149 
upd©eReqVec
();

150 
upd©eAddrVec
();

152 
¿mToReq
(cÚ¡ 
¡d
::
veùÜ
<> &
¿mD©a
);

153 
»qToRam
(
¡d
::
veùÜ
<> &
¿mD©a
);

156 
Bur¡Op
(
¿muÏtÜ
::
Reque¡
::
Ty³
 
_ty³
,

157 
PÜtTy³
 
_±y³
,

158 
_bur¡Idx
,

159 
_³Idx
,

160 
_addr
,

161 
_Ëngth
);

163 
Bur¡Op
(
boŞ
 
_v®id
 = 
çl£
);

165 
	m´iv©e
:

166 
d•¬tPeTime
;

167 
	m¬riveMemTime
;

168 
	md•¬tMemTime
;

169 
	m¬rivePeTime
;

172 
	m¡d
::
veùÜ
<> 
d©a
;

174 
g‘AligÃdAddr
() const;

175 
g‘Off£t
() const;

	@graph.cpp

1 
	~"g¿ph.h
"

3 
	gG¿ph
::
lßdFe
(

4 cÚ¡ 
¡d
::
¡ršg
& 
âame
,

5 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a


8 
¡d
::
if¡»am
 
fhªdË
(
âame
.
c_¡r
());

9 if(!
	gfhªdË
.
is_İ’
()){

10 
	gHERE
;

11 
	g¡d
::
cout
 << "FaedØİ’ " << 
âame
 << 
¡d
::
’dl
;

12 
ex™
(
EXIT_FAILURE
);

15 
	g¡d
::
¡ršg
 
lše
;

16 
	g¡d
::
g‘lše
(
fhªdË
, 
lše
)){

17 
	g¡d
::
i¡ršg¡»am
 
iss
(
lše
);

18 
	gd©a
.
push_back
(

19 
¡d
::
veùÜ
<>(¡d::
i¡»am_™”©Ü
<>(
iss
),

20 
¡d
::
i¡»am_™”©Ü
<>())

23 
	gfhªdË
.
şo£
();

28 
	gG¿ph
::
	$g‘St
(){

29 
z”o_outgošg_v”‹x_num
 = 0;

30 autØ
™
 = 
v”tiûs
.
	`begš
(); iˆ!ğv”tiûs.
	`’d
(); it++){

31 if((*
™
)->
out_vids
.
	`em±y
()){

32 
z”o_outgošg_v”‹x_num
++;

35 
¡d
::
cout
 << "Z”Øoutgošg v”‹x…”ûÁagi " << 
z”o_outgošg_v”‹x_num
 * 1.0 / 
v”‹x_num
 << std::
’dl
;

36 
	}
}

38 
	gG¿ph
::
g‘MaxIdx
(cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a
){

39 
max_idx
 = 
d©a
[0][0];

40 autØ
	g™1
 = 
d©a
.
begš
(); it1 !ğd©a.
’d
(); it1++){

41 autØ
	g™2
 = 
™1
->
begš
(); it2 !ğ™1->
’d
(); it2++){

42 if(
	gmax_idx
 <ğ(*
™2
)){

43 
max_idx
 = *
™2
;

47  
	gmax_idx
;

50 
	gG¿ph
::
g‘MšIdx
(cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a
){

51 
mš_idx
 = 
d©a
[0][0];

52 autØ
	g™1
 = 
d©a
.
begš
(); it1 !ğd©a.
’d
(); it1++){

53 autØ
	g™2
 = 
™1
->
begš
(); it2 !ğ™1->
’d
(); it2++){

54 if(
	gmš_idx
 >ğ(*
™2
)){

55 
mš_idx
 = *
™2
;

59  
	gmš_idx
;

62 
	gG¿ph
::
g‘RªdomS¹Indiûs
(
¡d
::
veùÜ
<> &
¡¬t_šdiûs
){

63 
¡¬t_šdiûs
.
ş—r
();

64 
	gn
 = 0;

65 
	gn
 < 
	gGL
::
¡¬tNum
){

66 
max_idx
 = 
v”‹x_num
 - 1;

67 
	gidx
 = 
¿nd
()%
max_idx
;

68 if(
	gv”tiûs
[
idx
]->
	gout_vids
.
em±y
(è|| 
	g¡d
::
fšd
(
¡¬t_šdiûs
.
begš
(), s¹_šdiûs.
’d
(), idx) != start_indices.end()){

71 
	g¡¬t_šdiûs
.
push_back
(
idx
);

72 
	gn
++;

76 
	gG¿ph
::
	$´štOngb
(
vidx
){

77 
¡d
::
cout
 << 
vidx
 << " outgoing‚eighbors: ";

78 autØ
x
 : 
v”tiûs
[
vidx
]->
out_vids
){

79 
¡d
::
cout
 << 
x
 << " ";

81 
¡d
::
cout
 << std::
’dl
;

82 
	}
}

84 
	gG¿ph
::
	$G¿ph
(cÚ¡ 
¡d
::
¡ršg
& 
âame
){

87 autØ
found
 = 
âame
.
	`fšd
("ungraph", 0);

88 if(
found
 !ğ
¡d
::
¡ršg
::
Åos
)

89 
isUg¿ph
 = 
Œue
;

91 
isUg¿ph
 = 
çl£
;

93 
¡d
::
veùÜ
<¡d::veùÜ<>> 
d©a
;

94 
	`lßdFe
(
âame
, 
d©a
);

95 
v”‹x_num
 = 
	`g‘MaxIdx
(
d©a
) + 1;

96 
edge_num
 = ()
d©a
.
	`size
();

97 if(
isUg¿ph
è
edge_num
 *= 2;

98 
¡d
::
cout
 << "v”‹x‚um: " << 
v”‹x_num
 << std::
’dl
;

99 
¡d
::
cout
 << "edgnum: " << 
edge_num
 << std::
’dl
;

101 
i
 = 0; i < 
v”‹x_num
; i++){

102 
V”‹x
* 
v
 = 
Ãw
 
	`V”‹x
(
i
);

103 
v”tiûs
.
	`push_back
(
v
);

106 autØ
™
 = 
d©a
.
	`begš
(); iˆ!ğd©a.
	`’d
(); it++){

107 
¤c_idx
 = (*
™
)[0];

108 
d¡_idx
 = (*
™
)[1];

109 
v”tiûs
[
¤c_idx
]->
out_vids
.
	`push_back
(
d¡_idx
);

110 
v”tiûs
[
d¡_idx
]->
š_vids
.
	`push_back
(
¤c_idx
);

111 if(
isUg¿ph
 && 
¤c_idx
 !ğ
d¡_idx
){

112 
v”tiûs
[
d¡_idx
]->
out_vids
.
	`push_back
(
¤c_idx
);

113 
v”tiûs
[
¤c_idx
]->
š_vids
.
	`push_back
(
d¡_idx
);

117 autØ
™
 = 
v”tiûs
.
	`begš
(); iˆ!ğv”tiûs.
	`’d
(); it++){

118 (*
™
)->
š_deg
 = ()(*™)->
š_vids
.
	`size
();

119 (*
™
)->
out_deg
 = ()(*™)->
out_vids
.
	`size
();

121 
	}
}

	@graph.h

1 #iâdeà
__GRAPH_H__


2 
	#__GRAPH_H__


	)

4 
	~<veùÜ
>

5 
	~<f¡»am
>

6 
	~<io¡»am
>

7 
	~<™”©Ü
>

8 
	~<c¡dlib
>

9 
	~<s¡»am
>

10 
	~<cm©h
>

11 
	~<m­
>

12 
	~<®gÜ™hm
>

13 
	~"commÚ.h
"

15 şas 
	cV”‹x
 {

16 
	mpublic
:

17 
idx
;

18 
	mš_deg
;

19 
	mout_deg
;

21 
	m¡d
::
veùÜ
<> 
š_vids
;

22 
	m¡d
::
veùÜ
<> 
out_vids
;

24 
ex¶ic™
 
	$V”‹x
(
_idx
) {

25 
idx
 = 
_idx
;

28 ~
	$V”‹x
(){

30 
	}
}

34 şas 
	cG¿ph
{

35 
	mpublic
:

36 
v”‹x_num
;

37 
	medge_num
;

38 
	m¡d
::
veùÜ
<
V”‹x
*> 
v”tiûs
;

40 
G¿ph
(cÚ¡ 
¡d
::
¡ršg
 &
âame
);

41 ~
G¿ph
();

42 
g‘RªdomS¹Indiûs
(
¡d
::
veùÜ
<> &
¡¬t_šdiûs
);

43 
g‘St
();

44 
´štOngb
(
vidx
);

46 
	m´iv©e
:

47 
boŞ
 
isUg¿ph
;

48 
g‘MaxIdx
(cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a
);

49 
g‘MšIdx
(cÚ¡ 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a
);

50 
lßdFe
(

51 cÚ¡ 
¡d
::
¡ršg
& 
âame
,

52 
¡d
::
veùÜ
<¡d::veùÜ<>> &
d©a


	@pe.cpp

1 
	~"³.h
"

4 
	g³
::
	$³
(

5 
sc_moduË_Çme
 
_Çme
,

6 
_³Idx
,

7 
_³ClkCyşe


8 è:
	$sc_moduË
(
_Çme
)

10 
³Idx
 = 
_³Idx
;

11 
³ClkCyşe
 = 
_³ClkCyşe
;

12 
loÿlCouÁ”
 = 0;

14 
	`š™
();

17 
	`SC_THREAD
(
£ndMemReq
);

18 
	`SC_THREAD
(
g‘MemRe¥
);

42 
	`SC_THREAD
(
issueIn¥eùD•thR—dReq
);

43 
	`SC_THREAD
(
´oûssIn¥eùD•thR—dRe¥
);

44 
	`SC_THREAD
(
š¥eùD•thAÇlysis
);

47 
	`SC_THREAD
(
äÚt›rAÇlysis
);

48 
	`SC_THREAD
(
´oûssEx·ndR·oR—dRe¥
);

49 
	`SC_THREAD
(
issueEx·ndCŸoR—dReq
);

50 
	`SC_THREAD
(
´oûssEx·ndCŸoR—dRe¥
);

51 
	`SC_THREAD
(
issueEx·ndD•thR—dReq
);

52 
	`SC_THREAD
(
´oûssEx·ndD•thR—dRe¥
);

53 
	`SC_THREAD
(
ex·ndD•thAÇlysis
);

54 
	`SC_THREAD
(
´oûssEx·ndD•thWr™eRe¥
);

57 
	`SC_METHOD
(
bfsCÚŒŞËr
);

58 
£ns™ive
 << 
³Clk
.
	`pos
();

59 
	}
}

61 
	g³
::
	$š™
(){

63 
Ëv–
 = 0;

64 
bfsI‹¿tiÚS¹
 = 
çl£
;

65 
i
 = 
INSPECT_DEPTH_READ
; i <ğ
EXPAND_DEPTH_WRITE
; i++){

66 
¡d
::
li¡
<
Bur¡Op
> 
İBufãr
;

67 
bur¡ReqQueue
.
	`push_back
(
İBufãr
);

68 
bur¡Re¥Queue
.
	`push_back
(
İBufãr
);

70 
¡d
::
li¡
<> 
»qIdxBufãr
;

71 
bur¡IdxReÜd”Queue
.
	`push_back
(
»qIdxBufãr
);

74 
	}
}

76 
	g³
::
	$issueIn¥eùD•thR—dReq
(){

78 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
 =„amuÏtÜ::Reque¡::Ty³::
READ
;

79 
maxL’
 = 
GL
::
v”‹xNum
 * ()(());

82 
d•thMemAddr
 = 0;

83 
cu¼’tL’
 = 
maxL’
;

84 
boŞ
 
v®idFÏg1
 = 
çl£
;

85 
boŞ
 
v®idFÏg2
 = 
çl£
;

87 
Œue
){

90 if(
bfsI‹¿tiÚS¹
){

91 
d•thMemAddr
 = 
GL
::depthMemAddr;

92 
cu¼’tL’
 = 0;

93 
v®idFÏg1
 = 
Œue
;

94 
v®idFÏg2
 = 
Œue
;

97 
cu¼’tL’
 < 
maxL’
){

98 if(
v®idFÏg1
){

99 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

100 
¡d
::
cout
 << "issue inspect depth„ead„equest‡t ";

101 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

102 
v®idFÏg1
 = 
çl£
;

105 
aùu®L’
 = 
GL
::
ba£L’
;

106 if((
cu¼’tL’
 + 
GL
::
ba£L’
è> 
maxL’
){

107 
aùu®L’
 = 
maxL’
 - 
cu¼’tL’
;

111 
bufãrSize
 = ()(
š¥eùD•thR—dBufãr
.
	`size
());

112 
toBeS’tSize
 = 
aùu®L’
/();

113 if(
bufãrSize
 + 
toBeS’tSize
 > 
GL
::
d•thBufãrD•th
){

114 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

118 
bur¡Idx
 = 
	`ü—‹R—dBur¡Req
(

119 
ty³
,

120 
INSPECT_DEPTH_READ
,

121 
d•thMemAddr
,

122 
aùu®L’
);

124 
bur¡OpStus
[
bur¡Idx
] = 
çl£
;

126 
d•thMemAddr
 +ğ
aùu®L’
;

127 
cu¼’tL’
 +ğ
aùu®L’
;

130 if(
v®idFÏg2
){

131 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

132 
¡d
::
cout
 << "all depth„ead„equests‡re sent‡t ";

133 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

134 
v®idFÏg2
 = 
çl£
;

138 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

140 
	}
}

142 
	g³
::
	$´oûssIn¥eùD•thR—dRe¥
(){

143 
boŞ
 
v®idFÏg1
 = 
çl£
;

144 
boŞ
 
v®idFÏg2
 = 
çl£
;

146 
tÙ®L’
 = 0;

147 
Œue
){

149 if(
bfsI‹¿tiÚS¹
){

150 
v®idFÏg1
 = 
Œue
;

151 
v®idFÏg2
 = 
Œue
;

152 
tÙ®L’
 = 0;

155 if(
bur¡Re¥Queue
[
INSPECT_DEPTH_READ
].
	`em±y
(è=ğ
çl£
){

156 if(
v®idFÏg1
){

157 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

158 
¡d
::
cout
 << "process inspect depth„ead„esponse‡t ";

159 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

160 
v®idFÏg1
 = 
çl£
;

164 
Bur¡Op
 
İ
 = 
bur¡Re¥Queue
[
INSPECT_DEPTH_READ
].
	`äÚt
();

165 
num
 = 
İ
.
Ëngth
/(()());

166 
	`wa™
(
num
 * 
³ClkCyşe
, 
SC_NS
);

167 
bur¡OpStus
[
İ
.
bur¡Idx
] = 
Œue
;

168 
İ
.
bur¡ReqToBufãr
<>(
š¥eùD•thR—dBufãr
);

169 
bur¡Re¥Queue
[
INSPECT_DEPTH_READ
].
	`pİ_äÚt
();

170 
tÙ®L’
 +ğ
İ
.
Ëngth
;

173 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

176 if(
v®idFÏg2
 && 
tÙ®L’
 =ğ
GL
::
v”‹xNum
 * ()()){

177 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

178 
¡d
::
cout
 << "all depth„ead„esponses‡re…rocessed‡t ";

179 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

180 
v®idFÏg2
 = 
çl£
;

183 
	}
}

186 
	g³
::
	$š¥eùD•thAÇlysis
(){

187 
boŞ
 
v®idFÏg1
 = 
çl£
;

188 
boŞ
 
v®idFÏg2
 = 
çl£
;

189 
bfsDÚe
.
	`wr™e
(
çl£
);

191 
idx
 = 0;

192 
Œue
){

193 if(
bfsI‹¿tiÚS¹
){

194 
idx
 = 0;

195 
v®idFÏg1
 = 
Œue
;

196 
v®idFÏg2
 = 
Œue
;

197 
äÚt›rSize
 = 0;

200 if(
š¥eùD•thR—dBufãr
.
	`em±y
(è=ğ
çl£
 &&

201 ()(
š¥eùFrÚt›rBufãr
.
	`size
()è< 
GL
::
äÚt›rBufãrD•th
)

203 if(
v®idFÏg1
){

204 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

205 
¡d
::
cout
 << "analyze inspect depth‡t ";

206 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

207 
v®idFÏg1
 = 
çl£
;

210 
d
 = 
š¥eùD•thR—dBufãr
.
	`äÚt
();

211 
š¥eùD•thR—dBufãr
.
	`pİ_äÚt
();

212 if(
d
 =ğ
Ëv–
){

213 
š¥eùFrÚt›rBufãr
.
	`push_back
(
idx
);

214 
äÚt›rSize
++;

216 
idx
++;

219 if(
idx
 =ğ
GL
::
v”‹xNum
 && 
v®idFÏg2
){

220 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

221 
¡d
::
cout
 << "allhe inspect depth‡re‡nalyzed‡t ";

222 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

223 
v®idFÏg2
 = 
çl£
;

226 if(
äÚt›rSize
 == 0){

227 
¡d
::
cout
 << "Em±y frÚt›¸i d‘eùed." << std::
’dl
;

228 
¡d
::
cout
 << "Thi i th’d oàthBFS¿v”£." << std::
’dl
;

229 
bfsDÚe
.
	`wr™e
(
Œue
);

234 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

236 
	}
}

239 
	g³
::
	$äÚt›rAÇlysis
(){

240 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
 =„amuÏtÜ::Reque¡::Ty³::
READ
;

241 
boŞ
 
v®idFÏg1
 = 
çl£
;

243 
Œue
){

244 if(
bfsI‹¿tiÚS¹
){

245 
v®idFÏg1
 = 
Œue
;

248 if(
š¥eùFrÚt›rBufãr
.
	`em±y
(è=ğ
çl£
 &&

249 (()
ex·ndR·oR—dBufãr
.
	`size
(è+ 2 < 
GL
::
½aoBufãrD•th
))

251 if(
v®idFÏg1
){

252 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

253 
¡d
::
cout
 << "frontier‡nalysis starts‡t ";

254 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

255 
v®idFÏg1
 = 
çl£
;

258 
vidx
 = 
š¥eùFrÚt›rBufãr
.
	`äÚt
();

259 
š¥eùFrÚt›rBufãr
.
	`pİ_äÚt
();

260 
½aoMemAddr
 = 
GL
::½aoMemAdd¸+ 
vidx
 * ();

261 
Ën
 = () * 2;

262 
bur¡Idx
 = 
	`ü—‹R—dBur¡Req
(
ty³
, 
EXPAND_RPAO_READ
, 
½aoMemAddr
, 
Ën
);

263 
bur¡OpStus
[
bur¡Idx
] = 
çl£
;

267 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

270 
	}
}

272 
	g³
::
	$´oûssEx·ndR·oR—dRe¥
(){

273 
boŞ
 
v®idFÏg1
 = 
çl£
;

275 
Œue
){

276 if(
bfsI‹¿tiÚS¹
){

277 
v®idFÏg1
 = 
Œue
;

280 if(
bur¡Re¥Queue
[
EXPAND_RPAO_READ
].
	`em±y
(è=ğ
çl£
){

281 if(
v®idFÏg1
){

282 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

283 
¡d
::
cout
 << "process„pao„ead„esponse‡t ";

284 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

285 
v®idFÏg1
 = 
çl£
;

288 
Bur¡Op
 
İ
 = 
bur¡Re¥Queue
[
EXPAND_RPAO_READ
].
	`äÚt
();

289 
num
 = 
İ
.
Ëngth
/();

290 
	`wa™
(
num
 * 
³ClkCyşe
, 
SC_NS
);

292 
bur¡OpStus
[
İ
.
bur¡Idx
] = 
Œue
;

293 
İ
.
bur¡ReqToBufãr
<>(
ex·ndR·oR—dBufãr
);

294 
bur¡Re¥Queue
[
EXPAND_RPAO_READ
].
	`pİ_äÚt
();

297 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

300 
	}
}

303 
	g³
::
	$issueEx·ndCŸoR—dReq
(){

304 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
 =„amuÏtÜ::Reque¡::Ty³::
READ
;

306 
boŞ
 
v®idFÏg1
 = 
çl£
;

307 
Œue
){

308 if(
bfsI‹¿tiÚS¹
){

309 
v®idFÏg1
 = 
Œue
;

312 if(()
ex·ndR·oR—dBufãr
.
	`size
() >= 2){

313 if(
v®idFÏg1
){

314 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

315 
¡d
::
cout
 << "process ciao„ead„equest‡t ";

316 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

317 
v®idFÏg1
 = 
çl£
;

320 
¤cIdx
 = 
ex·ndR·oR—dBufãr
.
	`äÚt
();

321 
ex·ndR·oR—dBufãr
.
	`pİ_äÚt
();

322 
d¡Idx
 = 
ex·ndR·oR—dBufãr
.
	`äÚt
();

323 
ex·ndR·oR—dBufãr
.
	`pİ_äÚt
();

324 
cŸoMemAddr
 = 
GL
::cŸoMemAdd¸+ 
¤cIdx
 * ();

325 
maxL’
 = (è* (
d¡Idx
 - 
¤cIdx
);

327 
Ën
 = 0;

328 
Ën
 < 
maxL’
){

329 
aùu®L’
 = 
GL
::
ba£L’
;

330 if(
Ën
 + 
GL
::
ba£L’
 > 
maxL’
){

331 
aùu®L’
 = 
maxL’
 - 
Ën
;

334 
bufãrSize
 = ()
ex·ndCŸoR—dBufãr
.
	`size
();

335 
toBeS’tSize
 = 
aùu®L’
 / ()();

336 if(
bufãrSize
 + 
toBeS’tSize
 < 
GL
::
cŸoBufãrD•th
){

337 
bur¡Idx
 = 
	`ü—‹R—dBur¡Req
(
ty³
, 
EXPAND_CIAO_READ
, 
cŸoMemAddr
, 
aùu®L’
);

338 
bur¡OpStus
[
bur¡Idx
] = 
çl£
;

340 
cŸoMemAddr
 +ğ
aùu®L’
;

341 
Ën
 +ğ
aùu®L’
;

344 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

349 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

352 
	}
}

354 
	g³
::
	$´oûssEx·ndCŸoR—dRe¥
(){

355 
boŞ
 
v®idFÏg1
 = 
çl£
;

356 
Œue
){

357 if(
bfsI‹¿tiÚS¹
){

358 
v®idFÏg1
 = 
Œue
;

361 if(
bur¡Re¥Queue
[
EXPAND_CIAO_READ
].
	`em±y
(è=ğ
çl£
){

362 if(
v®idFÏg1
){

363 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

364 
¡d
::
cout
 << "process ciao„ead„esp‡t ";

365 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

366 
v®idFÏg1
 = 
çl£
;

369 
Bur¡Op
 
İ
 = 
bur¡Re¥Queue
[
EXPAND_CIAO_READ
].
	`äÚt
();

370 
num
 = 
İ
.
Ëngth
/()();

371 
	`wa™
(
num
 * 
³ClkCyşe
, 
SC_NS
);

372 
bur¡OpStus
[
İ
.
bur¡Idx
] = 
Œue
;

373 
İ
.
bur¡ReqToBufãr
<>(
ex·ndCŸoR—dBufãr
);

374 
bur¡Re¥Queue
[
EXPAND_CIAO_READ
].
	`pİ_äÚt
();

377 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

380 
	}
}

383 
	g³
::
	$issueEx·ndD•thR—dReq
(){

384 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
 =„amuÏtÜ::Reque¡::Ty³::
READ
;

386 
boŞ
 
v®idFÏg1
 = 
çl£
;

387 
Œue
){

388 if(
bfsI‹¿tiÚS¹
){

389 
v®idFÏg1
 = 
Œue
;

392 if(
ex·ndCŸoR—dBufãr
.
	`em±y
(è=ğ
çl£
 &&

393 (()(
ex·ndD•thR—dBufãr
.
	`size
())è< 
GL
::
d•thBufãrD•th
)

395 if(
v®idFÏg1
){

396 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

397 
¡d
::
cout
 << "issueƒxpand depth„ead‡t ";

398 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

399 
v®idFÏg1
 = 
çl£
;

402 
vidx
 = 
ex·ndCŸoR—dBufãr
.
	`äÚt
();

403 
ex·ndVidxFÜD•thWr™eBufãr
.
	`push_back
(
vidx
);

404 
ex·ndCŸoR—dBufãr
.
	`pİ_äÚt
();

405 
d•thMemAddr
 = 
GL
::d•thMemAdd¸+ 
vidx
 * ();

406 
bur¡Idx
 = 
	`ü—‹R—dBur¡Req
(
ty³
, 
EXPAND_DEPTH_READ
, 
d•thMemAddr
, 1);

407 
bur¡OpStus
[
bur¡Idx
] = 
çl£
;

411 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

414 
	}
}

416 
	g³
::
	$´oûssEx·ndD•thR—dRe¥
(){

417 
boŞ
 
v®idFÏg1
 = 
çl£
;

419 
Œue
){

420 if(
bfsI‹¿tiÚS¹
){

421 
v®idFÏg1
 = 
Œue
;

424 if(
bur¡Re¥Queue
[
EXPAND_DEPTH_READ
].
	`em±y
(è=ğ
çl£
){

425 if(
v®idFÏg1
){

426 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

427 
¡d
::
cout
 << "process depth„ead„esp‡t ";

428 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

429 
v®idFÏg1
 = 
çl£
;

432 
Bur¡Op
 
İ
 = 
bur¡Re¥Queue
[
EXPAND_DEPTH_READ
].
	`äÚt
();

433 
num
 = 
İ
.
Ëngth
/()();

434 
	`wa™
(
num
 * 
³ClkCyşe
, 
SC_NS
);

435 
bur¡OpStus
[
İ
.
bur¡Idx
] = 
Œue
;

436 
İ
.
bur¡ReqToBufãr
<>(
ex·ndD•thR—dBufãr
);

437 
bur¡Re¥Queue
[
EXPAND_DEPTH_READ
].
	`pİ_äÚt
();

440 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

443 
	}
}

445 
	g³
::
	$ex·ndD•thAÇlysis
(){

446 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
 =„amuÏtÜ::Reque¡::Ty³::
WRITE
;

447 
boŞ
 
v®idFÏg1
 = 
çl£
;

449 
Œue
){

450 if(
bfsI‹¿tiÚS¹
){

451 
v®idFÏg1
 = 
Œue
;

454 if(
ex·ndD•thR—dBufãr
.
	`em±y
(è=ğ
çl£
 &&

455 ()
ex·ndD•thWr™eBufãr
.
	`size
(è<ğ
GL
::
d•thBufãrD•th
)

457 if(
v®idFÏg1
){

458 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

459 
¡d
::
cout
 << "expand depth‡nalysis starts‡t ";

460 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

461 
v®idFÏg1
 = 
çl£
;

464 
d
 = 
ex·ndD•thR—dBufãr
.
	`äÚt
();

465 
vidx
 = 
ex·ndVidxFÜD•thWr™eBufãr
.
	`äÚt
();

466 
ex·ndD•thR—dBufãr
.
	`pİ_äÚt
();

467 
ex·ndVidxFÜD•thWr™eBufãr
.
	`pİ_äÚt
();

468 if(
d
 == -1){

469 
d
 = 
Ëv–
 + 1;

470 
ex·ndD•thWr™eBufãr
.
	`push_back
(
d
);

471 
d•thMemAddr
 = 
GL
::d•thMemAdd¸+ 
vidx
 * ();

472 
bur¡Idx
 = 
ü—‹Wr™eBur¡Req
<>(

473 
ty³
,

474 
EXPAND_DEPTH_WRITE
,

475 
d•thMemAddr
,

477 
ex·ndD•thWr™eBufãr
);

479 
bur¡OpStus
[
bur¡Idx
] = 
çl£
;

484 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

487 
	}
}

489 
	g³
::
	$´oûssEx·ndD•thWr™eRe¥
(){

490 
boŞ
 
v®idFÏg1
 = 
çl£
;

491 
Œue
){

492 if(
bfsI‹¿tiÚS¹
){

493 
v®idFÏg1
 = 
Œue
;

496 if(
bur¡Re¥Queue
[
EXPAND_DEPTH_WRITE
].
	`em±y
(è=ğ
çl£
){

497 if(
v®idFÏg1
){

498 
¡d
::
cout
 << "Lev– = " << ()
Ëv–
 << " ";

499 
¡d
::
cout
 << "process depth write„esponse‡t ";

500 
¡d
::
cout
 << 
	`sc_time_¡amp
(è<< std::
’dl
;

501 
v®idFÏg1
 = 
çl£
;

504 
Bur¡Op
 
İ
 = 
bur¡Re¥Queue
[
EXPAND_DEPTH_WRITE
].
	`äÚt
();

505 
bur¡OpStus
[
İ
.
bur¡Idx
] = 
Œue
;

506 
bur¡Re¥Queue
[
EXPAND_DEPTH_WRITE
].
	`pİ_äÚt
();

509 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

512 
	}
}

514 
	g³
::
	$bfsCÚŒŞËr
(){

515 if(
loÿlCouÁ”
 < 20){

516 
loÿlCouÁ”
++;

519 if(
loÿlCouÁ”
 == 10){

520 
bfsI‹¿tiÚS¹
 = 
Œue
;

523 
bfsI‹¿tiÚS¹
 = 
çl£
;

526 if(
	`isEndOfBfsI‹¿tiÚ
(è&& 
loÿlCouÁ”
 == 20){

527 
bur¡OpStus
.
	`ş—r
();

528 
Ëv–
++;

529 
¡d
::
cout
 << "Ëv– chªge © " << 
	`sc_time_¡amp
(è<< std::
’dl
;

530 
loÿlCouÁ”
 = 0;

533 
	}
}

535 
boŞ
 
	g³
::
	$isEndOfBfsI‹¿tiÚ
(){

536 
boŞ
 
isI‹¿tiÚEnd
 = 
Œue
;

537 
isI‹¿tiÚEnd
 &ğ
	`isBur¡ReqQueueEm±y
();

538 
isI‹¿tiÚEnd
 &ğ
	`isBur¡Re¥QueueEm±y
();

539 
isI‹¿tiÚEnd
 &ğ
»Üd”Bufãr
.
	`em±y
();

540 
isI‹¿tiÚEnd
 &ğ
	`isAÎReqProûs£d
();

541 
isI‹¿tiÚEnd
 &ğ
š¥eùD•thR—dBufãr
.
	`em±y
();

542 
isI‹¿tiÚEnd
 &ğ
š¥eùFrÚt›rBufãr
.
	`em±y
();

543 
isI‹¿tiÚEnd
 &ğ
ex·ndR·oR—dBufãr
.
	`em±y
();

544 
isI‹¿tiÚEnd
 &ğ
ex·ndCŸoR—dBufãr
.
	`em±y
();

545 
isI‹¿tiÚEnd
 &ğ
ex·ndD•thR—dBufãr
.
	`em±y
();

546 
isI‹¿tiÚEnd
 &ğ
ex·ndD•thWr™eBufãr
.
	`em±y
();

547  
isI‹¿tiÚEnd
;

548 
	}
}

550 
	g³
::
	$ü—‹R—dBur¡Req
(

551 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
,

552 
PÜtTy³
 
±y³
,

553 
addr
,

554 
Ëngth
)

556 
bur¡Idx
 = 
GL
::
	`g‘Bur¡Idx
();

557 
Bur¡Op
 
	`İ
(
ty³
, 
±y³
, 
bur¡Idx
, 
³Idx
, 
addr
, 
Ëngth
);

558 
İ
.
	`upd©eReqVec
();

559 
İ
.
	`upd©eAddrVec
();

561 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

562 
bur¡ReqQueue
[
±y³
].
	`push_back
(
İ
);

564  
bur¡Idx
;

565 
	}
}

571 
PÜtTy³
 
	g³
::
	$bur¡ReqArb™”
(
PÜtTy³
 
wšÃr
){

573 
num
 = ()
bur¡ReqQueue
.
	`size
();

574 
i
 = 0; i < 
num
; i++){

575 
ÃxtIdx
 = (()
wšÃr
 + 1 + 
i
)%
num
;

576 if(
bur¡ReqQueue
[
ÃxtIdx
].
	`em±y
(è=ğ
çl£
){

577  (
PÜtTy³
)
ÃxtIdx
;

581  
wšÃr
;

582 
	}
}

590 
	g³
::
	$£ndMemReq
(){

591 
PÜtTy³
 
wšÃr
 = 
INSPECT_DEPTH_READ
;

592 
Œue
){

593 if(
	`isBur¡ReqQueueEm±y
(è=ğ
çl£
){

594 
PÜtTy³
 
±y³
 = 
	`bur¡ReqArb™”
(
wšÃr
);

595 
wšÃr
 = 
±y³
;

596 
Bur¡Op
 
İ
 = 
bur¡ReqQueue
[
±y³
].
	`äÚt
();

597 
d•¬tTime
 = ()(
	`sc_time_¡amp
()/
	`sc_time
(1, 
SC_NS
));

598 
İ
.
	`£tD•¬tPeTime
(
d•¬tTime
);

599 
bur¡Req
.
	`wr™e
(
İ
);

600 
bur¡ReqQueue
[
±y³
].
	`pİ_äÚt
();

601 
bur¡IdxReÜd”Queue
[
±y³
].
	`push_back
(
İ
.
bur¡Idx
);

604 
Bur¡Op
 
	`İ
(
çl£
);

605 
bur¡Req
.
	`wr™e
(
İ
);

608 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

610 
	}
}

612 
boŞ
 
	g³
::
	$isBur¡ReqQueueEm±y
(){

613 
boŞ
 
em±y
 = 
Œue
;

614 cÚ¡‡utØ&
v
 : 
bur¡ReqQueue
){

615 
em±y
 =ƒm±y && 
v
.
	`em±y
();

617  
em±y
;

618 
	}
}

620 
boŞ
 
	g³
::
	$isAÎReqProûs£d
(){

621 autØ
™
 = 
bur¡OpStus
.
	`begš
(); iˆ!ğbur¡OpStus.
	`’d
(); it++){

622 if(
™
->
£cÚd
 =ğ
çl£
){

623  
çl£
;

626  
Œue
;

627 
	}
}

629 
boŞ
 
	g³
::
	$isBur¡Re¥QueueEm±y
(){

630 
boŞ
 
em±y
 = 
Œue
;

631 cÚ¡‡utØ&
v
 : 
bur¡Re¥Queue
){

632 
em±y
 =ƒm±y && 
v
.
	`em±y
();

634  
em±y
;

635 
	}
}

637 
boŞ
 
	g³
::
	$g‘R—dyOp
(
Bur¡Op
 &
İ
){

638 autØ
™
 = 
bur¡IdxReÜd”Queue
.
	`begš
(); iˆ!ğbur¡IdxReÜd”Queue.
	`’d
(); it++){

639 if(
™
->
	`em±y
()) ;

641 
idx
 = 
™
->
	`äÚt
();

642 autØ
isInBufãr
 = [
idx
](cÚ¡ 
¡d
::
li¡
<
Bur¡Op
> &
bufãr
)->
boŞ
{

643 autØ
b™
 = 
bufãr
.
	`begš
(); b™ !ğbufãr.
	`’d
(); bit++){

644 if(
b™
->
bur¡Idx
 =ğ
idx
){

645  
Œue
;

648  
çl£
;

651 autØ
exŒaù
 = [
idx
](
¡d
::
li¡
<
Bur¡Op
> &
bufãr
, Bur¡O°&
İ
){

652 autØ
b™
 = 
bufãr
.
	`begš
(); b™ !ğbufãr.
	`’d
();){

653 if(
b™
->
bur¡Idx
 =ğ
idx
){

654 
İ
 = (*
b™
);

655 
bufãr
.
	`”a£
(
b™
++);

658 
b™
++;

662 if(
	`isInBufãr
(
»Üd”Bufãr
)){

663 
	`exŒaù
(
»Üd”Bufãr
, 
İ
);

664 
™
->
	`pİ_äÚt
();

665  
Œue
;

668  
çl£
;

669 
	}
}

671 
	g³
::
	$g‘MemRe¥
(){

672 
Œue
){

673 
Bur¡Op
 
İ
 = 
bur¡Re¥
.
	`»ad
();

674 if(
İ
.
v®id
){

675 
¬riveTime
 = ()(
	`sc_time_¡amp
()/
	`sc_time
(1, 
SC_NS
));

676 
İ
.
	`£tA¼ivePeTime
(
¬riveTime
);

677 
»Üd”Bufãr
.
	`push_back
(
İ
);

681 if(
»Üd”Bufãr
.
	`em±y
(è=ğ
çl£
){

682 
Bur¡Op
 
»adyOp
;

683 if(
	`g‘R—dyOp
(
»adyOp
)){

684 
bur¡Re¥Queue
[
»adyOp
.
±y³
].
	`push_back
(readyOp);

688 
	`wa™
(
³ClkCyşe
, 
SC_NS
);

690 
	}
}

692 
	g³
::
	$£tPeClkCyşe
(
_³ClkCyşe
){

693 
³ClkCyşe
 = 
_³ClkCyşe
;

694 
	}
}

	@pe.h

1 #iâdeà
__PE_H__


2 
	#__PE_H__


	)

4 
	~<li¡
>

5 
	~<io¡»am
>

6 
	~<™”©Ü
>

7 
	~<m­
>

8 
	~"Reque¡.h
"

9 
	~"commÚ.h
"

10 
	~"sy¡emc.h
"

12 şas 
	c³
 : 
public
 
sc_moduË
{

14 
SC_HAS_PROCESS
(
³
);

16 
	mpublic
:

19 
sc_out
<
Bur¡Op
> 
bur¡Req
;

20 
	msc_š
<
	mBur¡Op
> 
	mbur¡Re¥
;

21 
	msc_š
<
	mboŞ
> 
	m³Clk
;

22 
	msc_out
<
	mboŞ
> 
	mbfsDÚe
;

24 
	m³Idx
;

25 
³
(
sc_moduË_Çme
 
_Çme
, 
_³Idx
, 
_³ClkCyşe
);

26 ~
	$³
(){};

29 
	`£tPeClkCyşe
(
_³ClkCyşe
);

34 
‹m¶©e
<
ty³Çme
 
T
>

35 
	`ü—‹Wr™eBur¡Req
(

36 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
,

37 
PÜtTy³
 
±y³
,

38 
addr
,

39 
Ëngth
,

40 
¡d
::
li¡
<
T
> &
bufãr


43 
bur¡Idx
 = 
GL
::
	`g‘Bur¡Idx
();

44 
Bur¡Op
 
	`İ
(
ty³
, 
±y³
, 
bur¡Idx
, 
³Idx
, 
addr
, 
Ëngth
);

45 
İ
.
	`upd©eReqVec
();

46 
İ
.
	`upd©eAddrVec
();

51 
	`wa™
(
³ClkCyşe
 * 
İ
.
Ëngth
 / ()(
T
), 
SC_NS
);

52 
İ
.
bufãrToBur¡Req
<
T
>(
bufãr
);

53 
bur¡ReqQueue
[
±y³
].
	`push_back
(
İ
);

55  
bur¡Idx
;

56 
	}
}

58 
ü—‹R—dBur¡Req
(

59 
¿muÏtÜ
::
Reque¡
::
Ty³
 
ty³
,

60 
PÜtTy³
 
±y³
,

61 
addr
,

62 
Ëngth


65 
	g´iv©e
:

66 
Ëv–
;

67 
	g³ClkCyşe
;

68 
	gäÚt›rSize
;

69 
boŞ
 
	gbfsI‹¿tiÚS¹
;

70 
	gloÿlCouÁ”
;

72 
	g¡d
::
li¡
<> 
š¥eùD•thR—dBufãr
;

73 
	g¡d
::
li¡
<> 
š¥eùFrÚt›rBufãr
;

74 
	g¡d
::
li¡
<> 
ex·ndR·oR—dBufãr
;

75 
	g¡d
::
li¡
<> 
ex·ndCŸoR—dBufãr
;

76 
	g¡d
::
li¡
<> 
ex­ndR·iR—dBufãr
;

77 
	g¡d
::
li¡
<> 
ex·ndCŸiR—dBufãr
;

78 
	g¡d
::
li¡
<> 
ex·ndVidxFÜD•thWr™eBufãr
;

79 
	g¡d
::
li¡
<> 
ex·ndD•thWr™eBufãr
;

80 
	g¡d
::
li¡
<> 
ex·ndD•thR—dBufãr
;

81 
	g¡d
::
veùÜ
<
¡d
::
li¡
<
Bur¡Op
>> 
bur¡ReqQueue
;

82 
	g¡d
::
veùÜ
<
¡d
::
li¡
<
Bur¡Op
>> 
bur¡Re¥Queue
;

86 
	g¡d
::
li¡
<
Bur¡Op
> 
»Üd”Bufãr
;

87 
	g¡d
::
veùÜ
<
¡d
::
li¡
<>> 
bur¡IdxReÜd”Queue
;

93 
	g¡d
::
m­
<, 
	gboŞ
> 
	gbur¡OpStus
;

94 
	g¡d
::
m­
<, 
	gPÜtTy³
> 
	gbur¡OpPty³
;

96 
boŞ
 
isBur¡ReqQueueEm±y
();

97 
boŞ
 
isBur¡Re¥QueueEm±y
();

98 
š™
();

99 
PÜtTy³
 
bur¡ReqArb™”
(PÜtTy³ 
wšÃr
);

100 
boŞ
 
isEndOfBfsI‹¿tiÚ
();

101 
boŞ
 
isAÎReqProûs£d
();

102 
boŞ
 
g‘R—dyOp
(
Bur¡Op
 &
İ
);

105 
£ndMemReq
();

106 
g‘MemRe¥
();

107 
bfsCÚŒŞËr
();

109 
issueIn¥eùD•thR—dReq
();

110 
´oûssIn¥eùD•thR—dRe¥
();

111 
š¥eùD•thAÇlysis
();

112 
äÚt›rAÇlysis
();

113 
´oûssEx·ndR·oR—dRe¥
();

114 
issueEx·ndCŸoR—dReq
();

115 
´oûssEx·ndCŸoR—dRe¥
();

116 
issueEx·ndD•thR—dReq
();

117 
´oûssEx·ndD•thR—dRe¥
();

118 
ex·ndD•thAÇlysis
();

119 
´oûssEx·ndD•thWr™eRe¥
();

	@/usr/include/ctype.h

22 #iâdef 
_CTYPE_H


23 
	#_CTYPE_H
 1

	)

25 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	g__BEGIN_DECLS


30 #iâdeà
_ISb™


39 
	~<’dŸn.h
>

40 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


41 
	#_ISb™
(
b™
è(1 << (b™))

	)

43 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

48 
	m_ISuµ”
 = 
_ISb™
 (0),

49 
	m_ISlow”
 = 
_ISb™
 (1),

50 
	m_IS®pha
 = 
_ISb™
 (2),

51 
	m_ISdig™
 = 
_ISb™
 (3),

52 
	m_ISxdig™
 = 
_ISb™
 (4),

53 
	m_IS¥aû
 = 
_ISb™
 (5),

54 
	m_IS´št
 = 
_ISb™
 (6),

55 
	m_ISg¿ph
 = 
_ISb™
 (7),

56 
	m_ISbÏnk
 = 
_ISb™
 (8),

57 
	m_ISúŒl
 = 
_ISb™
 (9),

58 
	m_ISpunù
 = 
_ISb™
 (10),

59 
	m_IS®num
 = 
_ISb™
 (11)

79 cÚ¡ **
	$__ùy³_b_loc
 ()

80 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

81 cÚ¡ 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

83 cÚ¡ 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

87 #iâdeà
__ılu¥lus


88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

90 #–ià
defšed
 
__USE_EXTERN_INLINES


91 
	#__isùy³_f
(
ty³
) \

92 
__ex‹º_šlše
 \

93 
is
##
	`ty³
 (
__c
è
__THROW
 \

95  (*
	`__ùy³_b_loc
 ())[(è(
__c
)] & (è
_IS
##
ty³
; \

96 
	}

	)
}

99 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

100 
	#__tßscii
(
c
è((cè& 0x7fè

	)

102 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

104 
__BEGIN_NAMESPACE_STD


110 
__exùy³
 (
i§Êum
);

111 
__exùy³
 (
i§Íha
);

112 
__exùy³
 (
isúŒl
);

113 
__exùy³
 (
isdig™
);

114 
__exùy³
 (
i¦ow”
);

115 
__exùy³
 (
isg¿ph
);

116 
__exùy³
 (
i¥ršt
);

117 
__exùy³
 (
i¥unù
);

118 
__exùy³
 (
is¥aû
);

119 
__exùy³
 (
isuµ”
);

120 
__exùy³
 (
isxdig™
);

124 
	$tŞow”
 (
__c
è
__THROW
;

127 
	$touµ”
 (
__c
è
__THROW
;

129 
__END_NAMESPACE_STD


133 #ifdef 
__USE_ISOC99


134 
__BEGIN_NAMESPACE_C99


136 
	`__exùy³
 (
isbÏnk
);

138 
__END_NAMESPACE_C99


141 #ifdeà
__USE_GNU


143 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

146 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


150 
	$i§scii
 (
__c
è
__THROW
;

154 
	$tßscii
 (
__c
è
__THROW
;

158 
	`__exùy³
 (
_touµ”
);

159 
	`__exùy³
 (
_tŞow”
);

163 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

164 (
__ex‹nsiÚ__
 \

165 ({ 
__»s
; \

166 ià( (
c
) > 1) \

168 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

170 
__c
 = (
c
); \

171 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

174 
__»s
 = 
f
 
¬gs
; \

177 
__»s
 = (
a
)[(è(
c
)]; \

178 
__»s
; 
	}
}))

	)

180 #ià!
defšed
 
__NO_CTYPE


181 #ifdeà
__isùy³_f


182 
	$__isùy³_f
 (
®num
)

183 
	$__isùy³_f
 (
®pha
)

184 
	$__isùy³_f
 (
úŒl
)

185 
	$__isùy³_f
 (
dig™
)

186 
	$__isùy³_f
 (
low”
)

187 
	$__isùy³_f
 (
g¿ph
)

188 
	$__isùy³_f
 (
´št
)

189 
	$__isùy³_f
 (
punù
)

190 
	$__isùy³_f
 (
¥aû
)

191 
	$__isùy³_f
 (
uµ”
)

192 
	$__isùy³_f
 (
xdig™
)

193 #ifdeà
__USE_ISOC99


194 
	$__isùy³_f
 (
bÏnk
)

196 #–ià
defšed
 
__isùy³


197 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

198 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

199 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

200 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

201 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

202 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

203 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

204 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

205 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

206 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

207 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

208 #ifdeà
__USE_ISOC99


209 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

213 #ifdeà
__USE_EXTERN_INLINES


214 
__ex‹º_šlše
 

215 
	`__NTH
 (
	$tŞow”
 (
__c
))

217  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

218 
	}
}

220 
__ex‹º_šlše
 

221 
__NTH
 (
	$touµ”
 (
__c
))

223  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

224 
	}
}

227 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


228 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

229 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

232 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


233 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

234 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

236 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

237 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

243 #ifdeà
__USE_XOPEN2K8


257 
	~<xloÿË.h
>

261 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

262 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

264 
	#__exùy³_l
(
Çme
) \

265 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

271 
__exùy³_l
 (
i§Êum_l
);

272 
__exùy³_l
 (
i§Íha_l
);

273 
__exùy³_l
 (
isúŒl_l
);

274 
__exùy³_l
 (
isdig™_l
);

275 
__exùy³_l
 (
i¦ow”_l
);

276 
__exùy³_l
 (
isg¿ph_l
);

277 
__exùy³_l
 (
i¥ršt_l
);

278 
__exùy³_l
 (
i¥unù_l
);

279 
__exùy³_l
 (
is¥aû_l
);

280 
__exùy³_l
 (
isuµ”_l
);

281 
__exùy³_l
 (
isxdig™_l
);

283 
__exùy³_l
 (
isbÏnk_l
);

287 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

288 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

291 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

292 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

294 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


295 
	#__tŞow”_l
(
c
, 
loÿË
) \

296 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

297 
	#__touµ”_l
(
c
, 
loÿË
) \

298 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

299 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

300 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

304 #iâdeà
__NO_CTYPE


305 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

306 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

307 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

308 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

309 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

310 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

311 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

312 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

313 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

314 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

315 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

317 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

319 #ifdeà
__USE_MISC


320 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

321 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

324 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

325 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

326 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

327 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

328 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

329 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

330 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

331 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

332 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

333 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

334 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

336 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

338 #ifdeà
__USE_MISC


339 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

340 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

347 
__END_DECLS


	@/usr/include/math.h

23 #iâdef 
_MATH_H


24 
	#_MATH_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


31 
	~<b™s/m©h-veùÜ.h
>

35 
	~<b™s/huge_v®.h
>

36 #ifdeà
__USE_ISOC99


37 
	~<b™s/huge_v®f.h
>

38 
	~<b™s/huge_v®l.h
>

41 
	~<b™s/šf.h
>

44 
	~<b™s/Çn.h
>

48 
	~<b™s/m©hdef.h
>

55 
	#__SIMD_DECL
(
funùiÚ
è
	`__CONCAT
 (
__DECL_SIMD_
, funùiÚ)

	)

57 
	#__MATHCALL_VEC
(
funùiÚ
, 
suffix
, 
¬gs
) \

58 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

59 
	`__MATHCALL
 (
funùiÚ
, 
suffix
, 
¬gs
)

	)

61 
	#__MATHDECL_VEC
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

62 
	`__SIMD_DECL
 (
	`__MATH_PRECNAME
 (
funùiÚ
, 
suffix
)) \

63 
	`__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
)

	)

65 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

66 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

67 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

68 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

69 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

70 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

71 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

72 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

73 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

74 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

75 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

76 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

78 
	#_MdoubË_
 

	)

79 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

80 
	#__MATH_DECLARING_DOUBLE
 1

	)

81 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

82 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

83 
	~<b™s/m©hÿÎs.h
>

84 #undeà
_MdoubË_


85 #undeà
_MdoubË_BEGIN_NAMESPACE


86 #undeà
_MdoubË_END_NAMESPACE


87 #undeà
__MATH_PRECNAME


88 #undeà
__MATH_DECLARING_DOUBLE


90 #ifdeà
__USE_ISOC99


96 #iâdeà
_Mæßt_


97 
	#_Mæßt_
 

	)

99 
	#_MdoubË_
 
_Mæßt_


	)

100 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

101 
	#__MATH_DECLARING_DOUBLE
 0

	)

102 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

103 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

104 
	~<b™s/m©hÿÎs.h
>

105 #undeà
_MdoubË_


106 #undeà
_MdoubË_BEGIN_NAMESPACE


107 #undeà
_MdoubË_END_NAMESPACE


108 #undeà
__MATH_PRECNAME


109 #undeà
__MATH_DECLARING_DOUBLE


111 #ià!(
defšed
 
__NO_LONG_DOUBLE_MATH
 && defšed 
_LIBC
) \

112 || 
defšed
 
__LDBL_COMPAT
 \

113 || 
defšed
 
_LIBC_TEST


114 #ifdeà
__LDBL_COMPAT


116 #ifdeà
__USE_ISOC99


117 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

118 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

119 #ifdeà
__REDIRECT_NTH


120 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

121 
__Ædbl_Ãx‰ow¬df
)

122 
	`__©Œibu‹__
 ((
__cÚ¡__
));

123 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

124 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

125 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

126 (
__x
, 
__y
),

127 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

131 #undeà
__MATHDECL_1


132 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

133 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

134 
¬gs
, 
®Ÿs
)

	)

135 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

136 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

142 #iâdeà
_MlÚg_doubË_


143 
	#_MlÚg_doubË_
 

	)

145 
	#_MdoubË_
 
_MlÚg_doubË_


	)

146 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

147 
	#__MATH_DECLARING_DOUBLE
 0

	)

148 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

149 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

150 
	#__MATH_DECLARE_LDOUBLE
 1

	)

151 
	~<b™s/m©hÿÎs.h
>

152 #undeà
_MdoubË_


153 #undeà
_MdoubË_BEGIN_NAMESPACE


154 #undeà
_MdoubË_END_NAMESPACE


155 #undeà
__MATH_PRECNAME


156 #undeà
__MATH_DECLARING_DOUBLE


161 #undeà
__MATHDECL_1


162 #undeà
__MATHDECL


163 #undeà
__MATHCALL


166 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


168 
signgam
;

173 #ifdeà
__USE_ISOC99


211 
FP_NAN
 =

212 
	#FP_NAN
 0

	)

213 
FP_NAN
,

214 
FP_INFINITE
 =

215 
	#FP_INFINITE
 1

	)

216 
FP_INFINITE
,

217 
FP_ZERO
 =

218 
	#FP_ZERO
 2

	)

219 
FP_ZERO
,

220 
FP_SUBNORMAL
 =

221 
	#FP_SUBNORMAL
 3

	)

222 
FP_SUBNORMAL
,

223 
FP_NORMAL
 =

224 
	#FP_NORMAL
 4

	)

225 
FP_NORMAL


233 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__
 \

234 && !
defšed
 
__OPTIMIZE_SIZE__


235 
	#åşassify
(
x
è
	`__butš_åşassify
 (
FP_NAN
, 
FP_INFINITE
, \

236 
FP_NORMAL
, 
FP_SUBNORMAL
, 
FP_ZERO
, 
x
)

	)

237 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


238 
	#åşassify
(
x
) \

239 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

241 
	#åşassify
(
x
) \

242 ( (
x
) ==  () \

243 ? 
	`__åşassifyf
 (
x
) \

244 :  (
x
) ==  () \

245 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

249 #ià
	`__GNUC_PREREQ
 (4,0)

250 
	#signb™
(
x
) \

251 ( (
x
) ==  () \

252 ? 
	`__butš_signb™f
 (
x
) \

253 :  (
x
) ==  () \

254 ? 
	`__butš_signb™
 (
x
è: 
	`__butš_signb™l
 (x))

	)

256 #ifdeà
__NO_LONG_DOUBLE_MATH


257 
	#signb™
(
x
) \

258 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

260 
	#signb™
(
x
) \

261 ( (
x
) ==  () \

262 ? 
	`__signb™f
 (
x
) \

263 :  (
x
) ==  () \

264 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

269 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


270 
	#isfš™e
(
x
è
	`__butš_isfš™e
 (x)

	)

271 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


272 
	#isfš™e
(
x
) \

273 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

275 
	#isfš™e
(
x
) \

276 ( (
x
) ==  () \

277 ? 
	`__fš™ef
 (
x
) \

278 :  (
x
) ==  () \

279 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

283 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


284 
	#i¢Üm®
(
x
è
	`__butš_i¢Üm®
 (x)

	)

286 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

291 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


292 
	#i¢ª
(
x
è
	`__butš_i¢ª
 (x)

	)

293 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


294 
	#i¢ª
(
x
) \

295 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

297 
	#i¢ª
(
x
) \

298 ( (
x
) ==  () \

299 ? 
	`__i¢ªf
 (
x
) \

300 :  (
x
) ==  () \

301 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

305 #ià
	`__GNUC_PREREQ
 (4,4è&& !
defšed
 
__SUPPORT_SNAN__


306 
	#isšf
(
x
è
	`__butš_isšf_sign
 (x)

	)

307 #–ià
defšed
 
__NO_LONG_DOUBLE_MATH


308 
	#isšf
(
x
) \

309 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

311 
	#isšf
(
x
) \

312 ( (
x
) ==  () \

313 ? 
	`__isšff
 (
x
) \

314 :  (
x
) ==  () \

315 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

319 
	#MATH_ERRNO
 1

	)

320 
	#MATH_ERREXCEPT
 2

	)

325 #iâdeà
__FAST_MATH__


326 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

331 #ifdeà
__USE_GNU


333 #ifdeà
__NO_LONG_DOUBLE_MATH


334 
	#issigÇlšg
(
x
) \

335 ( (
x
è=ğ (è? 
	`__issigÇlšgf
 (xè: 
	`__issigÇlšg
 (x))

	)

337 
	#issigÇlšg
(
x
) \

338 ( (
x
) ==  () \

339 ? 
	`__issigÇlšgf
 (
x
) \

340 :  (
x
) ==  () \

341 ? 
	`__issigÇlšg
 (
x
è: 
	`__issigÇlšgl
 (x))

	)

345 #ifdef 
__USE_MISC


349 
_IEEE_
 = -1,

350 
_SVID_
,

351 
_XOPEN_
,

352 
_POSIX_
,

353 
_ISOC_


354 } 
	t_LIB_VERSION_TYPE
;

359 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

363 #ifdeà
__USE_MISC


369 #ifdeà
__ılu¥lus


370 
__exû±iÚ


372 
exû±iÚ


375 
ty³
;

376 *
Çme
;

377 
¬g1
;

378 
¬g2
;

379 
»tv®
;

380 
	}
};

382 #ifdeà
__ılu¥lus


383 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

385 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

388 
	#X_TLOSS
 1.41484755040568800000e+16

	)

391 
	#DOMAIN
 1

	)

392 
	#SING
 2

	)

393 
	#OVERFLOW
 3

	)

394 
	#UNDERFLOW
 4

	)

395 
	#TLOSS
 5

	)

396 
	#PLOSS
 6

	)

399 
	#HUGE
 3.40282347e+38F

	)

403 #ifdeà
__USE_XOPEN


405 
	#MAXFLOAT
 3.40282347e+38F

	)

412 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


413 
	#M_E
 2.7182818284590452354

	)

414 
	#M_LOG2E
 1.4426950408889634074

	)

415 
	#M_LOG10E
 0.43429448190325182765

	)

416 
	#M_LN2
 0.69314718055994530942

	)

417 
	#M_LN10
 2.30258509299404568402

	)

418 
	#M_PI
 3.14159265358979323846

	)

419 
	#M_PI_2
 1.57079632679489661923

	)

420 
	#M_PI_4
 0.78539816339744830962

	)

421 
	#M_1_PI
 0.31830988618379067154

	)

422 
	#M_2_PI
 0.63661977236758134308

	)

423 
	#M_2_SQRTPI
 1.12837916709551257390

	)

424 
	#M_SQRT2
 1.41421356237309504880

	)

425 
	#M_SQRT1_2
 0.70710678118654752440

	)

431 #ifdeà
__USE_GNU


432 
	#M_El
 2.718281828459045235360287471352662498L

	)

433 
	#M_LOG2El
 1.442695040888963407359924681001892137L

	)

434 
	#M_LOG10El
 0.434294481903251827651128918916605082L

	)

435 
	#M_LN2l
 0.693147180559945309417232121458176568L

	)

436 
	#M_LN10l
 2.302585092994045684017991454684364208L

	)

437 
	#M_PIl
 3.141592653589793238462643383279502884L

	)

438 
	#M_PI_2l
 1.570796326794896619231321691639751442L

	)

439 
	#M_PI_4l
 0.785398163397448309615660845819875721L

	)

440 
	#M_1_PIl
 0.318309886183790671537767526745028724L

	)

441 
	#M_2_PIl
 0.636619772367581343075535053490057448L

	)

442 
	#M_2_SQRTPIl
 1.128379167095512573896158903121545172L

	)

443 
	#M_SQRT2l
 1.414213562373095048801688724209698079L

	)

444 
	#M_SQRT1_2l
 0.707106781186547524400844362104849039L

	)

451 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


452 
	#__NO_MATH_INLINES
 1

	)

455 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

462 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

463 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

464 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

465 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

466 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

467 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

471 #ifdeà
__USE_EXTERN_INLINES


472 
	~<b™s/m©hšlše.h
>

477 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0

478 
	~<b™s/m©h-fš™e.h
>

481 #ifdeà
__USE_ISOC99


485 #iâdeà
isg»©”


486 
	#isg»©”
(
x
, 
y
) \

487 (
__ex‹nsiÚ__
 \

488 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

489 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

493 #iâdeà
isg»©”equ®


494 
	#isg»©”equ®
(
x
, 
y
) \

495 (
__ex‹nsiÚ__
 \

496 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

497 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

501 #iâdeà
i¦ess


502 
	#i¦ess
(
x
, 
y
) \

503 (
__ex‹nsiÚ__
 \

504 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

505 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

509 #iâdeà
i¦es£qu®


510 
	#i¦es£qu®
(
x
, 
y
) \

511 (
__ex‹nsiÚ__
 \

512 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

513 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

517 #iâdeà
i¦essg»©”


518 
	#i¦essg»©”
(
x
, 
y
) \

519 (
__ex‹nsiÚ__
 \

520 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

521 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

525 #iâdeà
isunÜd”ed


526 
	#isunÜd”ed
(
u
, 
v
) \

527 (
__ex‹nsiÚ__
 \

528 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

529 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

534 
	g__END_DECLS


	@/usr/include/stdlib.h

22 #iâdef 
_STDLIB_H


24 
	~<ã©u»s.h
>

27 
	#__Ãed_size_t


	)

28 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


29 
	#__Ãed_wch¬_t


	)

30 
	#__Ãed_NULL


	)

32 
	~<¡ddef.h
>

34 
	g__BEGIN_DECLS


36 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


37 
	#_STDLIB_H
 1

	)

39 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
è&& !defšed 
_SYS_WAIT_H


41 
	~<b™s/wa™æags.h
>

42 
	~<b™s/wa™¡©us.h
>

44 #ifdeà
__USE_MISC


49 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


50 
	#__WAIT_INT
(
¡©us
) \

51 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

52 { .
__š
 = (
¡©us
è}).
__i
))

	)

54 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

62 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


63 
	#__WAIT_STATUS
 *

	)

64 
	#__WAIT_STATUS_DEFN
 *

	)

69 
wa™
 *
	m__u±r
;

70 *
	m__Œ
;

71 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

72 
	#__WAIT_STATUS_DEFN
 *

	)

77 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

78 
	#__WAIT_STATUS
 *

	)

79 
	#__WAIT_STATUS_DEFN
 *

	)

84 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

85 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

90 #ifdeà
__WIFCONTINUED


91 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

95 
__BEGIN_NAMESPACE_STD


99 
	mquÙ
;

100 
	m»m
;

101 } 
	tdiv_t
;

104 #iâdeà
__ldiv_t_defšed


107 
	mquÙ
;

108 
	m»m
;

109 } 
	tldiv_t
;

110 
	#__ldiv_t_defšed
 1

	)

112 
	g__END_NAMESPACE_STD


114 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


115 
__BEGIN_NAMESPACE_C99


117 
__ex‹nsiÚ__
 struct

119 
	mquÙ
;

120 
	m»m
;

121 } 
	tÎdiv_t
;

122 
	#__Îdiv_t_defšed
 1

	)

123 
	g__END_NAMESPACE_C99


128 
	#RAND_MAX
 2147483647

	)

133 
	#EXIT_FAILURE
 1

	)

134 
	#EXIT_SUCCESS
 0

	)

138 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

139 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

142 
__BEGIN_NAMESPACE_STD


144 
	$©of
 (cÚ¡ *
__ÅŒ
)

145 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

147 
	$©oi
 (cÚ¡ *
__ÅŒ
)

148 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

150 
	$©Ş
 (cÚ¡ *
__ÅŒ
)

151 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

152 
__END_NAMESPACE_STD


154 #ifdeà
__USE_ISOC99


155 
__BEGIN_NAMESPACE_C99


157 
__ex‹nsiÚ__
 
	$©Şl
 (cÚ¡ *
__ÅŒ
)

158 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

159 
__END_NAMESPACE_C99


162 
__BEGIN_NAMESPACE_STD


164 
	$¡¹od
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

165 **
__»¡riù
 
__’d±r
)

166 
__THROW
 
	`__nÚnuÎ
 ((1));

167 
__END_NAMESPACE_STD


169 #ifdef 
__USE_ISOC99


170 
__BEGIN_NAMESPACE_C99


172 
	$¡¹of
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

173 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1));

175 
	$¡¹Şd
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

176 **
__»¡riù
 
__’d±r
)

177 
__THROW
 
	`__nÚnuÎ
 ((1));

178 
__END_NAMESPACE_C99


181 
__BEGIN_NAMESPACE_STD


183 
	$¡¹Ş
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

184 **
__»¡riù
 
__’d±r
, 
__ba£
)

185 
__THROW
 
	`__nÚnuÎ
 ((1));

187 
	$¡¹oul
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

188 **
__»¡riù
 
__’d±r
, 
__ba£
)

189 
__THROW
 
	`__nÚnuÎ
 ((1));

190 
__END_NAMESPACE_STD


192 #ifdeà
__USE_MISC


194 
__ex‹nsiÚ__


195 
	$¡¹oq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

196 **
__»¡riù
 
__’d±r
, 
__ba£
)

197 
__THROW
 
	`__nÚnuÎ
 ((1));

199 
__ex‹nsiÚ__


200 
	$¡¹ouq
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

201 **
__»¡riù
 
__’d±r
, 
__ba£
)

202 
__THROW
 
	`__nÚnuÎ
 ((1));

205 #ifdeà
__USE_ISOC99


206 
__BEGIN_NAMESPACE_C99


208 
__ex‹nsiÚ__


209 
	$¡¹Şl
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

210 **
__»¡riù
 
__’d±r
, 
__ba£
)

211 
__THROW
 
	`__nÚnuÎ
 ((1));

213 
__ex‹nsiÚ__


214 
	$¡¹ouÎ
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

215 **
__»¡riù
 
__’d±r
, 
__ba£
)

216 
__THROW
 
	`__nÚnuÎ
 ((1));

217 
__END_NAMESPACE_C99


221 #ifdeà
__USE_GNU


235 
	~<xloÿË.h
>

239 
	$¡¹Ş_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

240 **
__»¡riù
 
__’d±r
, 
__ba£
,

241 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4));

243 
	$¡¹oul_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

244 **
__»¡riù
 
__’d±r
,

245 
__ba£
, 
__loÿË_t
 
__loc
)

246 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

248 
__ex‹nsiÚ__


249 
	$¡¹Şl_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

250 **
__»¡riù
 
__’d±r
, 
__ba£
,

251 
__loÿË_t
 
__loc
)

252 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

254 
__ex‹nsiÚ__


255 
	$¡¹ouÎ_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

256 **
__»¡riù
 
__’d±r
,

257 
__ba£
, 
__loÿË_t
 
__loc
)

258 
__THROW
 
	`__nÚnuÎ
 ((1, 4));

260 
	$¡¹od_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

261 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

262 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

264 
	$¡¹of_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

265 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

266 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

268 
	$¡¹Şd_l
 (cÚ¡ *
__»¡riù
 
__ÅŒ
,

269 **
__»¡riù
 
__’d±r
,

270 
__loÿË_t
 
__loc
)

271 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

275 #ifdeà
__USE_EXTERN_INLINES


276 
__BEGIN_NAMESPACE_STD


277 
__ex‹º_šlše
 

278 
	`__NTH
 (
	$©oi
 (cÚ¡ *
__ÅŒ
))

280  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

281 
	}
}

282 
__ex‹º_šlše
 

283 
__NTH
 (
	$©Ş
 (cÚ¡ *
__ÅŒ
))

285  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

286 
	}
}

287 
	g__END_NAMESPACE_STD


289 #ifdeà
__USE_ISOC99


290 
__BEGIN_NAMESPACE_C99


291 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

292 
__NTH
 (
	$©Şl
 (cÚ¡ *
__ÅŒ
))

294  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

295 
	}
}

296 
	g__END_NAMESPACE_C99


301 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


305 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

308 
	$a64l
 (cÚ¡ *
__s
)

309 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

313 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


314 
	~<sys/ty³s.h
>

321 
	$¿ndom
 (è
__THROW
;

324 
	$¤ªdom
 (
__£ed
è
__THROW
;

330 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

331 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

335 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

338 #ifdeà
__USE_MISC


343 
	s¿ndom_d©a


345 
št32_t
 *
åŒ
;

346 
št32_t
 *
½Œ
;

347 
št32_t
 *
¡©e
;

348 
¿nd_ty³
;

349 
¿nd_deg
;

350 
¿nd_£p
;

351 
št32_t
 *
’d_±r
;

354 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

355 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

357 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

358 
__THROW
 
	`__nÚnuÎ
 ((2));

360 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

361 
size_t
 
__¡©–’
,

362 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

363 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

365 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

366 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

367 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

372 
__BEGIN_NAMESPACE_STD


374 
	$¿nd
 (è
__THROW
;

376 
	$¤ªd
 (
__£ed
è
__THROW
;

377 
__END_NAMESPACE_STD


379 #ifdeà
__USE_POSIX


381 
	$¿nd_r
 (*
__£ed
è
__THROW
;

385 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


389 
	$d¿nd48
 (è
__THROW
;

390 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

393 
	$Ìªd48
 (è
__THROW
;

394 
	$Äªd48
 (
__xsubi
[3])

395 
__THROW
 
	`__nÚnuÎ
 ((1));

398 
	$m¿nd48
 (è
__THROW
;

399 
	$j¿nd48
 (
__xsubi
[3])

400 
__THROW
 
	`__nÚnuÎ
 ((1));

403 
	$¤ªd48
 (
__£edv®
è
__THROW
;

404 *
	$£ed48
 (
__£ed16v
[3])

405 
__THROW
 
	`__nÚnuÎ
 ((1));

406 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

408 #ifdeà
__USE_MISC


412 
	sd¿nd48_d©a


414 
__x
[3];

415 
__Şd_x
[3];

416 
__c
;

417 
__š™
;

418 
__ex‹nsiÚ__
 
__a
;

423 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

424 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

425 
	$”ªd48_r
 (
__xsubi
[3],

426 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

427 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

431 *
__»¡riù
 
__»suÉ
)

432 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

433 
	$Äªd48_r
 (
__xsubi
[3],

434 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

435 *
__»¡riù
 
__»suÉ
)

436 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

439 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

442 
	$j¿nd48_r
 (
__xsubi
[3],

443 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

444 *
__»¡riù
 
__»suÉ
)

445 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

448 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

449 
__THROW
 
	`__nÚnuÎ
 ((2));

451 
	$£ed48_r
 (
__£ed16v
[3],

452 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

454 
	$lcÚg48_r
 (
__·¿m
[7],

455 
d¿nd48_d©a
 *
__bufãr
)

456 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

462 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


463 
	#__m®loc_ªd_ÿÎoc_defšed


	)

464 
__BEGIN_NAMESPACE_STD


466 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

468 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

469 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

470 
__END_NAMESPACE_STD


473 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


474 
__BEGIN_NAMESPACE_STD


480 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

481 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

483 
	$ä“
 (*
__±r
è
__THROW
;

484 
__END_NAMESPACE_STD


486 #ifdef 
__USE_MISC


488 
	$cä“
 (*
__±r
è
__THROW
;

491 #ifdeà
__USE_MISC


492 
	~<®loÿ.h
>

495 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K
) \

496 || 
defšed
 
__USE_MISC


498 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

501 #ifdeà
__USE_XOPEN2K


503 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

504 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

507 #ifdeà
__USE_ISOC11


509 *
	$®igÃd_®loc
 (
size_t
 
__®ignm’t
, size_ˆ
__size
)

510 
__THROW
 
__©Œibu‹_m®loc__
 
	`__©Œibu‹_®loc_size__
 ((2)è
__wur
;

513 
__BEGIN_NAMESPACE_STD


515 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

519 
	$©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

521 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


523 #ifdeà
__ılu¥lus


524 "C++" 
	$©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	$©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	$Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ià
defšed
 
__USE_ISOC11
 || defšed 
__USE_ISOCXX11


549 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

551 
__END_NAMESPACE_STD


553 #ifdeà
__USE_ISOC99


554 
__BEGIN_NAMESPACE_C99


557 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

558 
__END_NAMESPACE_C99


562 
__BEGIN_NAMESPACE_STD


564 *
	$g‘’v
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

565 
__END_NAMESPACE_STD


567 #ifdeà
__USE_GNU


570 *
	$£cu»_g‘’v
 (cÚ¡ *
__Çme
)

571 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ifdeà
__USE_XOPEN2K


584 
	$£‹nv
 (cÚ¡ *
__Çme
, cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (cÚ¡ *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 \

600 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
)

606 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1));

609 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


618 #iâdeà
__USE_FILE_OFFSET64


619 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

621 #ifdeà
__REDIRECT


622 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

623 
	`__nÚnuÎ
 ((1)è
__wur
;

625 
	#mk¡emp
 
mk¡emp64


	)

628 #ifdeà
__USE_LARGEFILE64


629 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

633 #ifdeà
__USE_MISC


640 #iâdeà
__USE_FILE_OFFSET64


641 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 #ifdeà
__REDIRECT


644 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

645 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

647 
	#mk¡emps
 
mk¡emps64


	)

650 #ifdeà
__USE_LARGEFILE64


651 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

652 
	`__nÚnuÎ
 ((1)è
__wur
;

656 #ifdeà
__USE_XOPEN2K8


662 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

665 #ifdeà
__USE_GNU


672 #iâdeà
__USE_FILE_OFFSET64


673 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

675 #ifdeà
__REDIRECT


676 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

677 
	`__nÚnuÎ
 ((1)è
__wur
;

679 
	#mko¡emp
 
mko¡emp64


	)

682 #ifdeà
__USE_LARGEFILE64


683 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

692 #iâdeà
__USE_FILE_OFFSET64


693 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

694 
	`__nÚnuÎ
 ((1)è
__wur
;

696 #ifdeà
__REDIRECT


697 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

698 
__æags
), 
mko¡emps64
)

699 
	`__nÚnuÎ
 ((1)è
__wur
;

701 
	#mko¡emps
 
mko¡emps64


	)

704 #ifdeà
__USE_LARGEFILE64


705 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

706 
	`__nÚnuÎ
 ((1)è
__wur
;

711 
__BEGIN_NAMESPACE_STD


716 
	$sy¡em
 (cÚ¡ *
__commªd
è
__wur
;

717 
__END_NAMESPACE_STD


720 #ifdef 
__USE_GNU


723 *
	$ÿnÚiÿlize_fe_Çme
 (cÚ¡ *
__Çme
)

724 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

727 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


733 *
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
,

734 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

739 #iâdeà
__COMPAR_FN_T


740 
	#__COMPAR_FN_T


	)

741 (*
	t__com·r_â_t
) (const *, const *);

743 #ifdef 
__USE_GNU


744 
__com·r_â_t
 
	tcom·risÚ_â_t
;

747 #ifdeà
__USE_GNU


748 (*
	t__com·r_d_â_t
) (const *, const *, *);

751 
__BEGIN_NAMESPACE_STD


754 *
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
,

755 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

756 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

758 #ifdeà
__USE_EXTERN_INLINES


759 
	~<b™s/¡dlib-b£¬ch.h
>

764 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

765 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

766 #ifdeà
__USE_GNU


767 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

768 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

769 
	`__nÚnuÎ
 ((1, 4));

774 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

775 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
__END_NAMESPACE_STD


778 #ifdeà
__USE_ISOC99


779 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

780 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

784 
__BEGIN_NAMESPACE_STD


788 
div_t
 
	$div
 (
__num”
, 
__d’om
)

789 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

790 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

791 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

792 
__END_NAMESPACE_STD


794 #ifdeà
__USE_ISOC99


795 
__BEGIN_NAMESPACE_C99


796 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

797 
__d’om
)

798 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

799 
__END_NAMESPACE_C99


803 #ià(
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_XOPEN2K8
) \

804 || 
defšed
 
__USE_MISC


811 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

812 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

817 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

818 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

823 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

824 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

827 #ifdeà
__USE_MISC


829 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

830 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

831 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

832 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

833 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

834 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

835 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

836 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

841 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

842 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

843 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

844 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

845 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

846 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

848 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

849 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

850 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

851 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

852 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

853 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

854 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

855 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

859 
__BEGIN_NAMESPACE_STD


862 
	$mbËn
 (cÚ¡ *
__s
, 
size_t
 
__n
è
__THROW
;

865 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

866 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

869 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
;

873 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

874 cÚ¡ *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

876 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

877 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

878 
__THROW
;

879 
__END_NAMESPACE_STD


882 #ifdeà
__USE_MISC


887 
	$½m©ch
 (cÚ¡ *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

891 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K8


898 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

899 *cÚ¡ *
__»¡riù
 
__tok’s
,

900 **
__»¡riù
 
__v®u•
)

901 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

905 #ifdeà
__USE_XOPEN


907 
	$£tkey
 (cÚ¡ *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

913 #ifdeà
__USE_XOPEN2KXSI


915 
	$posix_İ’±
 (
__oæag
è
__wur
;

918 #ifdeà
__USE_XOPEN


923 
	$g¿Á±
 (
__fd
è
__THROW
;

927 
	$uÆock±
 (
__fd
è
__THROW
;

932 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

935 #ifdeà
__USE_GNU


939 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

940 
__THROW
 
	`__nÚnuÎ
 ((2));

943 
	`g‘±
 ();

946 #ifdeà
__USE_MISC


950 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

951 
__THROW
 
	`__nÚnuÎ
 ((1));

954 
	~<b™s/¡dlib-æßt.h
>

957 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__fÜtify_funùiÚ


958 
	~<b™s/¡dlib.h
>

960 #ifdeà
__LDBL_COMPAT


961 
	~<b™s/¡dlib-ldbl.h
>

965 #undeà
__Ãed_m®loc_ªd_ÿÎoc


967 
__END_DECLS


	@/usr/include/alloca.h

18 #iâdef 
_ALLOCA_H


19 
	#_ALLOCA_H
 1

	)

21 
	~<ã©u»s.h
>

23 
	#__Ãed_size_t


	)

24 
	~<¡ddef.h
>

26 
	g__BEGIN_DECLS


29 #undeà
®loÿ


32 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

34 #ifdef 
__GNUC__


35 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

38 
__END_DECLS


	@/usr/include/bits/huge_val.h

20 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

27 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

28 #–ià
__GNUC_PREREQ
(2,96)

29 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

30 #–ià
defšed
 
__GNUC__


32 
	#HUGE_VAL
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

35 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

39 
	~<’dŸn.h
>

41 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

43 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


44 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

46 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


47 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

50 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

51 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

20 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

27 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

28 #–ià
__GNUC_PREREQ
(2,96)

29 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

30 #–ià
defšed
 
__GNUC__


32 
	#HUGE_VALF
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7f800000UL }).
__d
)

	)

39 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

44 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


45 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

48 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

49 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

20 #iâdeà
_MATH_H


24 #ià
__GNUC_PREREQ
(3,3)

25 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

26 #–ià
__GNUC_PREREQ
(2,96)

27 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 0x1.0
p32767L
)

	)

30 
	#__HUGE_VALL_by‹s
 { 0, 0, 0, 0, 0, 0, 0, 0x80, 0xff, 0x7f, 0, 0 }

	)

32 
	#__huge_v®l_t
 uniÚ { 
__c
[12]; 
__ld
; }

	)

33 #ifdeà
__GNUC__


34 
	#HUGE_VALL
 (
__ex‹nsiÚ__
 \

35 ((
__huge_v®l_t
è{ 
__c
: 
__HUGE_VALL_by‹s
 }).
__ld
)

	)

37 
__huge_v®l_t
 
	g__huge_v®l
 = { 
__HUGE_VALL_by‹s
 };

38 
	#HUGE_VALL
 (
__huge_v®l
.
__ld
)

	)

	@/usr/include/bits/inf.h

19 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#INFINITY
 (
	`__butš_šff
())

	)

28 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/math-finite.h

19 #iâdeà
_MATH_H


24 
__REDIRECT_NTH
 (
acos
, (), 
__acos_fš™e
);

25 #ifdeà
__USE_ISOC99


26 
__REDIRECT_NTH
 (
acosf
, (), 
__acosf_fš™e
);

27 #ifdeà
__MATH_DECLARE_LDOUBLE


28 #ifdeà
__NO_LONG_DOUBLE_MATH


29 
__REDIRECT_NTH
 (
aco¦
, (), 
__acos_fš™e
);

31 
__REDIRECT_NTH
 (
aco¦
, (), 
__aco¦_fš™e
);

36 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


38 
__REDIRECT_NTH
 (
acosh
, (), 
__acosh_fš™e
);

40 #ifdeà
__USE_ISOC99


41 
__REDIRECT_NTH
 (
acoshf
, (), 
__acoshf_fš™e
);

42 #ifdeà
__MATH_DECLARE_LDOUBLE


43 #ifdeà
__NO_LONG_DOUBLE_MATH


44 
__REDIRECT_NTH
 (
acoshl
, (), 
__acosh_fš™e
);

46 
__REDIRECT_NTH
 (
acoshl
, (), 
__acoshl_fš™e
);

52 
__REDIRECT_NTH
 (
asš
, (), 
__asš_fš™e
);

53 #ifdeà
__USE_ISOC99


54 
__REDIRECT_NTH
 (
asšf
, (), 
__asšf_fš™e
);

55 #ifdeà
__MATH_DECLARE_LDOUBLE


56 #ifdeà
__NO_LONG_DOUBLE_MATH


57 
__REDIRECT_NTH
 (
asšl
, (), 
__asš_fš™e
);

59 
__REDIRECT_NTH
 (
asšl
, (), 
__asšl_fš™e
);

65 
__REDIRECT_NTH
 (
©ª2
, (, ), 
__©ª2_fš™e
);

66 #ifdeà
__USE_ISOC99


67 
__REDIRECT_NTH
 (
©ª2f
, (, ), 
__©ª2f_fš™e
);

68 #ifdeà
__MATH_DECLARE_LDOUBLE


69 #ifdeà
__NO_LONG_DOUBLE_MATH


70 
__REDIRECT_NTH
 (
©ª2l
, (, ),

71 
__©ª2_fš™e
);

73 
__REDIRECT_NTH
 (
©ª2l
, (, ),

74 
__©ª2l_fš™e
);

79 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


81 
__REDIRECT_NTH
 (
©ªh
, (), 
__©ªh_fš™e
);

83 #ifdeà
__USE_ISOC99


84 
__REDIRECT_NTH
 (
©ªhf
, (), 
__©ªhf_fš™e
);

85 #ifdeà
__MATH_DECLARE_LDOUBLE


86 #ifdeà
__NO_LONG_DOUBLE_MATH


87 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªh_fš™e
);

89 
__REDIRECT_NTH
 (
©ªhl
, (), 
__©ªhl_fš™e
);

95 
__REDIRECT_NTH
 (
cosh
, (), 
__cosh_fš™e
);

96 #ifdeà
__USE_ISOC99


97 
__REDIRECT_NTH
 (
coshf
, (), 
__coshf_fš™e
);

98 #ifdeà
__MATH_DECLARE_LDOUBLE


99 #ifdeà
__NO_LONG_DOUBLE_MATH


100 
__REDIRECT_NTH
 (
coshl
, (), 
__cosh_fš™e
);

102 
__REDIRECT_NTH
 (
coshl
, (), 
__coshl_fš™e
);

108 
__REDIRECT_NTH
 (
exp
, (), 
__exp_fš™e
);

109 #ifdeà
__USE_ISOC99


110 
__REDIRECT_NTH
 (
expf
, (), 
__expf_fš™e
);

111 #ifdeà
__MATH_DECLARE_LDOUBLE


112 #ifdeà
__NO_LONG_DOUBLE_MATH


113 
__REDIRECT_NTH
 (
ex¶
, (), 
__exp_fš™e
);

115 
__REDIRECT_NTH
 (
ex¶
, (), 
__ex¶_fš™e
);

120 #ifdeà
__USE_GNU


122 
__REDIRECT_NTH
 (
exp10
, (), 
__exp10_fš™e
);

123 
__REDIRECT_NTH
 (
exp10f
, (), 
__exp10f_fš™e
);

124 #ifdeà
__MATH_DECLARE_LDOUBLE


125 #ifdeà
__NO_LONG_DOUBLE_MATH


126 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10_fš™e
);

128 
__REDIRECT_NTH
 (
exp10l
, (), 
__exp10l_fš™e
);

133 
__REDIRECT_NTH
 (
pow10
, (), 
__exp10_fš™e
);

134 
__REDIRECT_NTH
 (
pow10f
, (), 
__exp10f_fš™e
);

135 #ifdeà
__MATH_DECLARE_LDOUBLE


136 #ifdeà
__NO_LONG_DOUBLE_MATH


137 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10_fš™e
);

139 
__REDIRECT_NTH
 (
pow10l
, (), 
__exp10l_fš™e
);

144 #ifdeà
__USE_ISOC99


146 
__REDIRECT_NTH
 (
exp2
, (), 
__exp2_fš™e
);

147 
__REDIRECT_NTH
 (
exp2f
, (), 
__exp2f_fš™e
);

148 #ifdeà
__MATH_DECLARE_LDOUBLE


149 #ifdeà
__NO_LONG_DOUBLE_MATH


150 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2_fš™e
);

152 
__REDIRECT_NTH
 (
exp2l
, (), 
__exp2l_fš™e
);

158 
__REDIRECT_NTH
 (
fmod
, (, ), 
__fmod_fš™e
);

159 #ifdeà
__USE_ISOC99


160 
__REDIRECT_NTH
 (
fmodf
, (, ), 
__fmodf_fš™e
);

161 #ifdeà
__MATH_DECLARE_LDOUBLE


162 #ifdeà
__NO_LONG_DOUBLE_MATH


163 
__REDIRECT_NTH
 (
fmodl
, (, ),

164 
__fmod_fš™e
);

166 
__REDIRECT_NTH
 (
fmodl
, (, ),

167 
__fmodl_fš™e
);

172 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_ISOC99


174 
__REDIRECT_NTH
 (
hypÙ
, (, ), 
__hypÙ_fš™e
);

176 #ifdeà
__USE_ISOC99


177 
__REDIRECT_NTH
 (
hypÙf
, (, ), 
__hypÙf_fš™e
);

178 #ifdeà
__MATH_DECLARE_LDOUBLE


179 #ifdeà
__NO_LONG_DOUBLE_MATH


180 
__REDIRECT_NTH
 (
hypÙl
, (, ),

181 
__hypÙ_fš™e
);

183 
__REDIRECT_NTH
 (
hypÙl
, (, ),

184 
__hypÙl_fš™e
);

189 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


191 
__REDIRECT_NTH
 (
j0
, (), 
__j0_fš™e
);

193 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


194 
__REDIRECT_NTH
 (
j0f
, (), 
__j0f_fš™e
);

195 #ifdeà
__MATH_DECLARE_LDOUBLE


196 #ifdeà
__NO_LONG_DOUBLE_MATH


197 
__REDIRECT_NTH
 (
j0l
, (), 
__j0_fš™e
);

199 
__REDIRECT_NTH
 (
j0l
, (), 
__j0l_fš™e
);

204 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


206 
__REDIRECT_NTH
 (
y0
, (), 
__y0_fš™e
);

208 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


209 
__REDIRECT_NTH
 (
y0f
, (), 
__y0f_fš™e
);

210 #ifdeà
__MATH_DECLARE_LDOUBLE


211 #ifdeà
__NO_LONG_DOUBLE_MATH


212 
__REDIRECT_NTH
 (
y0l
, (), 
__y0_fš™e
);

214 
__REDIRECT_NTH
 (
y0l
, (), 
__y0l_fš™e
);

219 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


221 
__REDIRECT_NTH
 (
j1
, (), 
__j1_fš™e
);

223 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


224 
__REDIRECT_NTH
 (
j1f
, (), 
__j1f_fš™e
);

225 #ifdeà
__MATH_DECLARE_LDOUBLE


226 #ifdeà
__NO_LONG_DOUBLE_MATH


227 
__REDIRECT_NTH
 (
j1l
, (), 
__j1_fš™e
);

229 
__REDIRECT_NTH
 (
j1l
, (), 
__j1l_fš™e
);

234 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


236 
__REDIRECT_NTH
 (
y1
, (), 
__y1_fš™e
);

238 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


239 
__REDIRECT_NTH
 (
y1f
, (), 
__y1f_fš™e
);

240 #ifdeà
__MATH_DECLARE_LDOUBLE


241 #ifdeà
__NO_LONG_DOUBLE_MATH


242 
__REDIRECT_NTH
 (
y1l
, (), 
__y1_fš™e
);

244 
__REDIRECT_NTH
 (
y1l
, (), 
__y1l_fš™e
);

249 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


251 
__REDIRECT_NTH
 (
jn
, (, ), 
__jn_fš™e
);

253 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


254 
__REDIRECT_NTH
 (
jnf
, (, ), 
__jnf_fš™e
);

255 #ifdeà
__MATH_DECLARE_LDOUBLE


256 #ifdeà
__NO_LONG_DOUBLE_MATH


257 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jn_fš™e
);

259 
__REDIRECT_NTH
 (
jÆ
, (, ), 
__jÆ_fš™e
);

264 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


266 
__REDIRECT_NTH
 (
yn
, (, ), 
__yn_fš™e
);

268 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


269 
__REDIRECT_NTH
 (
ynf
, (, ), 
__ynf_fš™e
);

270 #ifdeà
__MATH_DECLARE_LDOUBLE


271 #ifdeà
__NO_LONG_DOUBLE_MATH


272 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yn_fš™e
);

274 
__REDIRECT_NTH
 (
yÆ
, (, ), 
__yÆ_fš™e
);

279 #ifdeà
__USE_MISC


281 
__REDIRECT_NTH
 (
lgamma_r
, (, *), 
__lgamma_r_fš™e
);

282 #ifdeà
__USE_ISOC99


283 
__REDIRECT_NTH
 (
lgammaf_r
, (, *), 
__lgammaf_r_fš™e
);

284 #ifdeà
__MATH_DECLARE_LDOUBLE


285 #ifdeà
__NO_LONG_DOUBLE_MATH


286 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

287 
__lgamma_r_fš™e
);

289 
__REDIRECT_NTH
 (
lgamm®_r
, (, *),

290 
__lgamm®_r_fš™e
);

296 
__lgamma_r_fš™e
 (, *);

297 
__lgammaf_r_fš™e
 (, *);

298 #ifdeà
__NO_LONG_DOUBLE_MATH


299 
__REDIRECT_NTH
 (
__lgamm®_r_fš™e
, (, *),

300 
__lgamma_r_fš™e
);

302 
__lgamm®_r_fš™e
 (, *);

305 #ià((
defšed
 
__USE_XOPEN
 || defšed 
__USE_ISOC99
) \

306 && 
defšed
 
	g__ex‹º_®ways_šlše
)

308 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamma
 (
__d
))

310 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


311  
	`__lgamma_r_fš™e
 (
__d
, &
signgam
);

313 
__loÿl_signgam
 = 0;

314  
	`__lgamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

316 
	}
}

318 #ià
defšed
 
__USE_ISOC99
 && defšed 
__ex‹º_®ways_šlše


319 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgammaf
 (
__d
))

321 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


322  
	`__lgammaf_r_fš™e
 (
__d
, &
signgam
);

324 
__loÿl_signgam
 = 0;

325  
	`__lgammaf_r_fš™e
 (
__d
, &
__loÿl_signgam
);

327 
	}
}

328 #ifdeà
__MATH_DECLARE_LDOUBLE


329 
__ex‹º_®ways_šlše
 
__NTH
 (
	$lgamm®
 (
__d
))

331 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


332  
	`__lgamm®_r_fš™e
 (
__d
, &
signgam
);

334 
__loÿl_signgam
 = 0;

335  
	`__lgamm®_r_fš™e
 (
__d
, &
__loÿl_signgam
);

337 
	}
}

341 #ià((
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)) \

342 && 
defšed
 
	g__ex‹º_®ways_šlše
)

344 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamma
 (
__d
))

346  
	`__lgamma_r_fš™e
 (
__d
, &
signgam
);

347 
	}
}

348 #ifdeà
__USE_ISOC99


349 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gammaf
 (
__d
))

351  
	`__lgammaf_r_fš™e
 (
__d
, &
signgam
);

352 
	}
}

353 #ifdeà
__MATH_DECLARE_LDOUBLE


354 
__ex‹º_®ways_šlše
 
__NTH
 (
	$gamm®
 (
__d
))

356  
	`__lgamm®_r_fš™e
 (
__d
, &
signgam
);

357 
	}
}

363 
__REDIRECT_NTH
 (
log
, (), 
__log_fš™e
);

364 #ifdeà
__USE_ISOC99


365 
__REDIRECT_NTH
 (
logf
, (), 
__logf_fš™e
);

366 #ifdeà
__MATH_DECLARE_LDOUBLE


367 #ifdeà
__NO_LONG_DOUBLE_MATH


368 
__REDIRECT_NTH
 (
logl
, (), 
__log_fš™e
);

370 
__REDIRECT_NTH
 (
logl
, (), 
__logl_fš™e
);

376 
__REDIRECT_NTH
 (
log10
, (), 
__log10_fš™e
);

377 #ifdeà
__USE_ISOC99


378 
__REDIRECT_NTH
 (
log10f
, (), 
__log10f_fš™e
);

379 #ifdeà
__MATH_DECLARE_LDOUBLE


380 #ifdeà
__NO_LONG_DOUBLE_MATH


381 
__REDIRECT_NTH
 (
log10l
, (), 
__log10_fš™e
);

383 
__REDIRECT_NTH
 (
log10l
, (), 
__log10l_fš™e
);

388 #ifdeà
__USE_ISOC99


390 
__REDIRECT_NTH
 (
log2
, (), 
__log2_fš™e
);

391 
__REDIRECT_NTH
 (
log2f
, (), 
__log2f_fš™e
);

392 #ifdeà
__MATH_DECLARE_LDOUBLE


393 #ifdeà
__NO_LONG_DOUBLE_MATH


394 
__REDIRECT_NTH
 (
log2l
, (), 
__log2_fš™e
);

396 
__REDIRECT_NTH
 (
log2l
, (), 
__log2l_fš™e
);

402 
__REDIRECT_NTH
 (
pow
, (, ), 
__pow_fš™e
);

403 #ifdeà
__USE_ISOC99


404 
__REDIRECT_NTH
 (
powf
, (, ), 
__powf_fš™e
);

405 #ifdeà
__MATH_DECLARE_LDOUBLE


406 #ifdeà
__NO_LONG_DOUBLE_MATH


407 
__REDIRECT_NTH
 (
powl
, (, ),

408 
__pow_fš™e
);

410 
__REDIRECT_NTH
 (
powl
, (, ),

411 
__powl_fš™e
);

416 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


418 
__REDIRECT_NTH
 (
»mašd”
, (, ), 
__»mašd”_fš™e
);

420 #ifdeà
__USE_ISOC99


421 
__REDIRECT_NTH
 (
»mašd”f
, (, ), 
__»mašd”f_fš™e
);

422 #ifdeà
__MATH_DECLARE_LDOUBLE


423 #ifdeà
__NO_LONG_DOUBLE_MATH


424 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

425 
__»mašd”_fš™e
);

427 
__REDIRECT_NTH
 (
»mašd”l
, (, ),

428 
__»mašd”l_fš™e
);

433 #ià(
defšed
 
__USE_MISC
 \

434 || (
defšed
 
	g__USE_XOPEN_EXTENDED
 && !defšed 
	g__USE_XOPEN2K8
))

436 
__REDIRECT_NTH
 (
sÿlb
, (, ), 
__sÿlb_fš™e
);

438 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_ISOC99


439 
__REDIRECT_NTH
 (
sÿlbf
, (, ), 
__sÿlbf_fš™e
);

440 #ifdeà
__MATH_DECLARE_LDOUBLE


441 #ifdeà
__NO_LONG_DOUBLE_MATH


442 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

443 
__sÿlb_fš™e
);

445 
__REDIRECT_NTH
 (
sÿlbl
, (, ),

446 
__sÿlbl_fš™e
);

452 
__REDIRECT_NTH
 (
sšh
, (), 
__sšh_fš™e
);

453 #ifdeà
__USE_ISOC99


454 
__REDIRECT_NTH
 (
sšhf
, (), 
__sšhf_fš™e
);

455 #ifdeà
__MATH_DECLARE_LDOUBLE


456 #ifdeà
__NO_LONG_DOUBLE_MATH


457 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšh_fš™e
);

459 
__REDIRECT_NTH
 (
sšhl
, (), 
__sšhl_fš™e
);

465 
__REDIRECT_NTH
 (
sq¹
, (), 
__sq¹_fš™e
);

466 #ifdeà
__USE_ISOC99


467 
__REDIRECT_NTH
 (
sq¹f
, (), 
__sq¹f_fš™e
);

468 #ifdeà
__MATH_DECLARE_LDOUBLE


469 #ifdeà
__NO_LONG_DOUBLE_MATH


470 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹_fš™e
);

472 
__REDIRECT_NTH
 (
sq¹l
, (), 
__sq¹l_fš™e
);

477 #ià
defšed
 
__USE_ISOC99
 && defšed 
__ex‹º_®ways_šlše


479 
__gamma_r_fš™e
 (, *);

480 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamma
 (
__d
))

482 
__loÿl_signgam
 = 0;

483 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

484  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

485 
	}
}

486 
__gammaf_r_fš™e
 (, *);

487 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgammaf
 (
__d
))

489 
__loÿl_signgam
 = 0;

490 
__»s
 = 
	`__gammaf_r_fš™e
 (
__d
, &
__loÿl_signgam
);

491  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

492 
	}
}

493 #ifdeà
__MATH_DECLARE_LDOUBLE


494 
__gamm®_r_fš™e
 (, *);

495 
__ex‹º_®ways_šlše
 
__NTH
 (
	$tgamm®
 (
__d
))

497 
__loÿl_signgam
 = 0;

498 #ifdeà
__NO_LONG_DOUBLE_MATH


499 
__»s
 = 
	`__gamma_r_fš™e
 (
__d
, &
__loÿl_signgam
);

501 
__»s
 = 
	`__gamm®_r_fš™e
 (
__d
, &
__loÿl_signgam
);

503  
__loÿl_signgam
 < 0 ? -
__»s
 : __res;

504 
	}
}

	@/usr/include/bits/math-vector.h

19 #iâdeà
_MATH_H


25 
	~<b™s/libm-simd-deş-¡ubs.h
>

27 #ià
defšed
 
__x86_64__
 && defšed 
__FAST_MATH__


28 #ià
defšed
 
_OPENMP
 && _OPENMP >= 201307

30 
	#__DECL_SIMD_x86_64
 
	`_P¿gma
 ("om°deş¬simd‚Ùšb¿nch")

	)

31 #–ià
__GNUC_PREREQ
 (6,0)

33 
	#__DECL_SIMD_x86_64
 
	`__©Œibu‹__
 ((
	`__simd__
 ("nÙšb¿nch")))

	)

36 #ifdeà
__DECL_SIMD_x86_64


37 #undeà
__DECL_SIMD_cos


38 
	#__DECL_SIMD_cos
 
__DECL_SIMD_x86_64


	)

39 #undeà
__DECL_SIMD_cosf


40 
	#__DECL_SIMD_cosf
 
__DECL_SIMD_x86_64


	)

41 #undeà
__DECL_SIMD_sš


42 
	#__DECL_SIMD_sš
 
__DECL_SIMD_x86_64


	)

43 #undeà
__DECL_SIMD_sšf


44 
	#__DECL_SIMD_sšf
 
__DECL_SIMD_x86_64


	)

45 #undeà
__DECL_SIMD_sšcos


46 
	#__DECL_SIMD_sšcos
 
__DECL_SIMD_x86_64


	)

47 #undeà
__DECL_SIMD_sšcosf


48 
	#__DECL_SIMD_sšcosf
 
__DECL_SIMD_x86_64


	)

49 #undeà
__DECL_SIMD_log


50 
	#__DECL_SIMD_log
 
__DECL_SIMD_x86_64


	)

51 #undeà
__DECL_SIMD_logf


52 
	#__DECL_SIMD_logf
 
__DECL_SIMD_x86_64


	)

53 #undeà
__DECL_SIMD_exp


54 
	#__DECL_SIMD_exp
 
__DECL_SIMD_x86_64


	)

55 #undeà
__DECL_SIMD_expf


56 
	#__DECL_SIMD_expf
 
__DECL_SIMD_x86_64


	)

57 #undeà
__DECL_SIMD_pow


58 
	#__DECL_SIMD_pow
 
__DECL_SIMD_x86_64


	)

59 #undeà
__DECL_SIMD_powf


60 
	#__DECL_SIMD_powf
 
__DECL_SIMD_x86_64


	)

	@/usr/include/bits/mathcalls.h

45 #iâdeà
_MATH_H


52 
_MdoubË_BEGIN_NAMESPACE


54 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

56 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

58 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

60 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

63 
__MATHCALL_VEC
 (
cos
,, (
_MdoubË_
 
__x
));

65 
__MATHCALL_VEC
 (
sš
,, (
_MdoubË_
 
__x
));

67 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

72 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

74 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

76 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

77 
	g_MdoubË_END_NAMESPACE


79 #ifdeà
__USE_GNU


81 
__MATHDECL_VEC
 (,
sšcos
,,

82 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

85 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


86 
__BEGIN_NAMESPACE_C99


88 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

90 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

92 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

93 
	g__END_NAMESPACE_C99


98 
_MdoubË_BEGIN_NAMESPACE


100 
__MATHCALL_VEC
 (
exp
,, (
_MdoubË_
 
__x
));

103 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

106 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

109 
__MATHCALL_VEC
 (
log
,, (
_MdoubË_
 
__x
));

112 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

115 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
)è
__nÚnuÎ
 ((2));

116 
	g_MdoubË_END_NAMESPACE


118 #ifdeà
__USE_GNU


120 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

122 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

125 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

131 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

134 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

135 
	g__END_NAMESPACE_C99


138 #ifdeà
__USE_ISOC99


139 
__BEGIN_NAMESPACE_C99


141 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

144 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

145 
	g__END_NAMESPACE_C99


151 
_MdoubË_BEGIN_NAMESPACE


153 
__MATHCALL_VEC
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

156 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

157 
	g_MdoubË_END_NAMESPACE


159 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_ISOC99


160 
__BEGIN_NAMESPACE_C99


162 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

163 
	g__END_NAMESPACE_C99


166 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


167 
__BEGIN_NAMESPACE_C99


169 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

170 
	g__END_NAMESPACE_C99


176 
_MdoubË_BEGIN_NAMESPACE


178 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

181 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

184 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

187 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

192 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

195 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
	g_MdoubË_END_NAMESPACE


198 #ifdeà
__USE_MISC


199 #ià(!
defšed
 
__ılu¥lus
 \

200 || 
	g__ılu¥lus
 < 201103L \

201 || 
	g__MATH_DECLARING_DOUBLE
 == 0)

204 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

211 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

215 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

218 #ifdeà
__USE_ISOC99


219 
__BEGIN_NAMESPACE_C99


221 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

222 
	g__END_NAMESPACE_C99


225 #ifdeà
__USE_ISOC99


226 
__BEGIN_NAMESPACE_C99


228 
__MATHCALLX
 (
Çn
,, (cÚ¡ *
__gb
), (
__cÚ¡__
));

229 
	g__END_NAMESPACE_C99


234 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

236 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

237 #ià(!
defšed
 
__ılu¥lus
 \

238 || 
	g__ılu¥lus
 < 201103L \

239 || 
	g__MATH_DECLARING_DOUBLE
 == 0)

241 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

245 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && 
__MATH_DECLARING_DOUBLE
)

247 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

248 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

249 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

250 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

251 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

252 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

256 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

260 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

261 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

262 
	g__END_NAMESPACE_C99


265 #ifdeà
__USE_ISOC99


266 
__BEGIN_NAMESPACE_C99


268 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

269 
	g__END_NAMESPACE_C99


272 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

274 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

277 #ifdeà
__USE_MISC


281 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

285 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


286 
__BEGIN_NAMESPACE_C99


289 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

292 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

293 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


294 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

298 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

309 #ifdeà
__USE_ISOC99


311 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

315 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

319 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

323 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

328 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

335 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

336 
__ex‹nsiÚ__


337 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

341 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

342 
__ex‹nsiÚ__


343 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

347 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

350 
__MATHCALLX
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

353 
__MATHCALLX
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

357 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

358 
__©Œibu‹__
 ((
__cÚ¡__
));

361 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

362 
__©Œibu‹__
 ((
__cÚ¡__
));

366 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

369 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


370 
	g__END_NAMESPACE_C99


373 #ifdeà
__USE_GNU


375 
__MATHDECL_1
 (, 
__issigÇlšg
,, (
_MdoubË_
 
__v®ue
))

376 
__©Œibu‹__
 ((
__cÚ¡__
));

379 #ià
defšed
 
__USE_MISC
 || (defšed 
__USE_XOPEN_EXTENDED
 \

380 && 
	g__MATH_DECLARING_DOUBLE
 \

381 && !
defšed
 
	g__USE_XOPEN2K8
)

383 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

18 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


22 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


23 
	#_MATH_H_MATHDEF
 1

	)

25 #ià
defšed
 
__x86_64__
 || (defšed 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

28 
	tæßt_t
;

29 
	tdoubË_t
;

35 
	tæßt_t
;

37 
	tdoubË_t
;

42 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

43 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

47 #ifdeà
__FP_FAST_FMA


48 
	#FP_FAST_FMA
 1

	)

51 #ifdeà
__FP_FAST_FMAF


52 
	#FP_FAST_FMAF
 1

	)

55 #ifdeà
__FP_FAST_FMAL


56 
	#FP_FAST_FMAL
 1

	)

	@/usr/include/bits/mathinline.h

19 #iâdeà
_MATH_H


23 #iâdeà
__ex‹º_®ways_šlše


24 
	#__MATH_INLINE
 
__šlše


	)

26 
	#__MATH_INLINE
 
__ex‹º_®ways_šlše


	)

30 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

32 #ià!
__GNUC_PREREQ
 (2,97)

37 #undeà
isg»©”


38 #undeà
isg»©”equ®


39 #undeà
i¦ess


40 #undeà
i¦es£qu®


41 #undeà
i¦essg»©”


42 #undeà
isunÜd”ed


43 #ifdeà
__i686__


46 
	#isg»©”
(
x
, 
y
) \

47 ({ 
__»suÉ
; \

48 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

49 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

50 
__»suÉ
; })

	)

51 
	#isg»©”equ®
(
x
, 
y
) \

52 ({ 
__»suÉ
; \

53 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

54 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

55 
__»suÉ
; })

	)

57 
	#i¦ess
(
x
, 
y
) \

58 ({ 
__»suÉ
; \

59 
	`__asm__
 ("fucomip %%st(1), %%st; seta %%al" \

60 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

61 
__»suÉ
; })

	)

63 
	#i¦es£qu®
(
x
, 
y
) \

64 ({ 
__»suÉ
; \

65 
	`__asm__
 ("fucomip %%st(1), %%st; setae %%al" \

66 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st"); \

67 
__»suÉ
; })

	)

69 
	#i¦essg»©”
(
x
, 
y
) \

70 ({ 
__»suÉ
; \

71 
	`__asm__
 ("fucomip %%st(1), %%st; setne %%al" \

72 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

73 
__»suÉ
; })

	)

75 
	#isunÜd”ed
(
x
, 
y
) \

76 ({ 
__»suÉ
; \

77 
	`__asm__
 ("fucomip %%st(1), %%st; setp %%al" \

78 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st"); \

79 
__»suÉ
; })

	)

82 
	#isg»©”
(
x
, 
y
) \

83 ({ 
__»suÉ
; \

84 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

85 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

86 
__»suÉ
; })

	)

88 
	#isg»©”equ®
(
x
, 
y
) \

89 ({ 
__»suÉ
; \

90 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

91 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

92 
__»suÉ
; })

	)

94 
	#i¦ess
(
x
, 
y
) \

95 ({ 
__»suÉ
; \

96 
	`__asm__
 ("fucompp; fnstsw;estb $0x45, %%ah; setz %%al" \

97 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

98 
__»suÉ
; })

	)

100 
	#i¦es£qu®
(
x
, 
y
) \

101 ({ 
__»suÉ
; \

102 
	`__asm__
 ("fucompp; fnstsw;estb $0x05, %%ah; setz %%al" \

103 : "÷" (
__»suÉ
è: "u" (
x
), "t" (
y
) : "cc", "st", "st(1)"); \

104 
__»suÉ
; })

	)

106 
	#i¦essg»©”
(
x
, 
y
) \

107 ({ 
__»suÉ
; \

108 
	`__asm__
 ("fucompp; fnstsw;estb $0x44, %%ah; setz %%al" \

109 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

110 
__»suÉ
; })

	)

112 
	#isunÜd”ed
(
x
, 
y
) \

113 ({ 
__»suÉ
; \

114 
	`__asm__
 ("fucompp; fnstsw; sahf; setp %%al" \

115 : "÷" (
__»suÉ
è: "u" (
y
), "t" (
x
) : "cc", "st", "st(1)"); \

116 
__»suÉ
; })

	)

122 #ià
__GNUC_PREREQ
 (2, 8)

123 
__BEGIN_NAMESPACE_C99


126 
__MATH_INLINE
 

127 
__NTH
 (
	$__signb™f
 (
__x
))

129 #ifdeà
__SSE2_MATH__


130 
__m
;

131 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

132  (
__m
 & 0x8) != 0;

134 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

135  
__u
.
__i
 < 0;

137 
	}
}

138 
__MATH_INLINE
 

139 
__NTH
 (
	$__signb™
 (
__x
))

141 #ifdeà
__SSE2_MATH__


142 
__m
;

143 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

144  (
__m
 & 0x80) != 0;

146 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

147  
__u
.
__i
[1] < 0;

149 
	}
}

150 
__MATH_INLINE
 

151 
__NTH
 (
	$__signb™l
 (
__x
))

153 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

154  (
__u
.
__i
[2] & 0x8000) != 0;

155 
	}
}

157 
	g__END_NAMESPACE_C99


164 #ià
__GNUC_PREREQ
 (2, 8)

165 #ià!
__GNUC_PREREQ
 (3, 4è&& !
defšed
 
__NO_MATH_INLINES
 \

166 && 
defšed
 
	g__OPTIMIZE__


170 #ifdeà
__USE_ISOC99


171 
	g__BEGIN_NAMESPACE_C99


174 #ifdeà
__SSE_MATH__


175 
__MATH_INLINE
 

176 
__NTH
 (
	$Ìštf
 (
__x
))

178 
__»s
;

183 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

184  
__»s
;

185 
	}
}

187 #ifdeà
__SSE2_MATH__


188 
__MATH_INLINE
 

189 
__NTH
 (
	$Ìšt
 (
__x
))

191 
__»s
;

196 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

197  
__»s
;

198 
	}
}

200 #ifdeà
__x86_64__


201 
__ex‹nsiÚ__


202 
__MATH_INLINE
 

203 
__NTH
 (
	$Îrštf
 (
__x
))

205 
__»s
;

210 
__asm
 
	`__vŞ©e__
 ("cvtss2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

211  
__»s
;

212 
	}
}

213 
__ex‹nsiÚ__


214 
__MATH_INLINE
 

215 
__NTH
 (
	$Îršt
 (
__x
))

217 
__»s
;

222 
__asm
 
	`__vŞ©e__
 ("cvtsd2s˜%1, %0" : "ô" (
__»s
è: "xm" (
__x
));

223  
__»s
;

224 
	}
}

227 #ià
defšed
 
__FINITE_MATH_ONLY__
 && __FINITE_MATH_ONLY__ > 0 \

228 && 
defšed
 
__SSE2_MATH__


230 
__MATH_INLINE
 

231 
__NTH
 (
	$fmaxf
 (
__x
, 
__y
))

233 #ifdeà
__AVX__


234 
__»s
;

235 
	`__asm
 ("vmaxs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

236  
__»s
;

238 
	`__asm
 ("maxs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

239  
__x
;

241 
	}
}

242 
__MATH_INLINE
 

243 
__NTH
 (
	$fmax
 (
__x
, 
__y
))

245 #ifdeà
__AVX__


246 
__»s
;

247 
	`__asm
 ("vmaxsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

248  
__»s
;

250 
	`__asm
 ("maxsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

251  
__x
;

253 
	}
}

256 
__MATH_INLINE
 

257 
__NTH
 (
	$fmšf
 (
__x
, 
__y
))

259 #ifdeà
__AVX__


260 
__»s
;

261 
	`__asm
 ("vmšs %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

262  
__»s
;

264 
	`__asm
 ("mšs %1, %0" : "+x" (
__x
è: "xm" (
__y
));

265  
__x
;

267 
	}
}

268 
__MATH_INLINE
 

269 
__NTH
 (
	$fmš
 (
__x
, 
__y
))

271 #ifdeà
__AVX__


272 
__»s
;

273 
	`__asm
 ("vmšsd %2, %1, %0" : "=x" (
__»s
è: "x" (
x
), "xm" (
__y
));

274  
__»s
;

276 
	`__asm
 ("mšsd %1, %0" : "+x" (
__x
è: "xm" (
__y
));

277  
__x
;

279 
	}
}

282 
	g__END_NAMESPACE_C99


285 #ià
defšed
 
__SSE4_1__
 && defšed 
__SSE2_MATH__


286 #ià
defšed
 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


287 
__BEGIN_NAMESPACE_C99


290 
__MATH_INLINE
 

291 
__NTH
 (
	$ršt
 (
__x
))

293 
__»s
;

298 
__asm
 
	`__vŞ©e__
 ("roundsd $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

299  
__»s
;

300 
	}
}

301 
__MATH_INLINE
 

302 
__NTH
 (
	$rštf
 (
__x
))

304 
__»s
;

309 
__asm
 
	`__vŞ©e__
 ("rounds $4, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

310  
__»s
;

311 
	}
}

313 #ifdeà
__USE_ISOC99


315 
__MATH_INLINE
 

316 
__NTH
 (
	$Ã¬byšt
 (
__x
))

318 
__»s
;

323 
__asm
 
	`__vŞ©e__
 ("roundsd $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

324  
__»s
;

325 
	}
}

326 
__MATH_INLINE
 

327 
__NTH
 (
	$Ã¬byštf
 (
__x
))

329 
__»s
;

334 
__asm
 
	`__vŞ©e__
 ("rounds $0xc, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

335  
__»s
;

336 
	}
}

339 
	g__END_NAMESPACE_C99


342 
__BEGIN_NAMESPACE_STD


344 
__MATH_INLINE
 

345 
__NTH
 (
	$û
 (
__x
))

347 
__»s
;

348 
	`__asm
 ("roundsd $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

349  
__»s
;

350 
	}
}

351 
__END_NAMESPACE_STD


353 
__BEGIN_NAMESPACE_C99


354 
__MATH_INLINE
 

355 
__NTH
 (
	$ûf
 (
__x
))

357 
__»s
;

358 
	`__asm
 ("rounds $2, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

359  
__»s
;

360 
	}
}

361 
__END_NAMESPACE_C99


363 
__BEGIN_NAMESPACE_STD


365 
__MATH_INLINE
 

366 
__NTH
 (
	$æoÜ
 (
__x
))

368 
__»s
;

369 
	`__asm
 ("roundsd $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

370  
__»s
;

371 
	}
}

372 
__END_NAMESPACE_STD


374 
__BEGIN_NAMESPACE_C99


375 
__MATH_INLINE
 

376 
__NTH
 (
	$æoÜf
 (
__x
))

378 
__»s
;

379 
	`__asm
 ("rounds $1, %1, %0" : "=x" (
__»s
è: "xm" (
__x
));

380  
__»s
;

381 
	}
}

382 
	g__END_NAMESPACE_C99


390 #ià!
defšed
 
__SSE2_MATH__
 && !defšed 
__x86_64__


391 #ià((!
defšed
 
__NO_MATH_INLINES
 || defšed 
__LIBC_INTERNAL_MATH_INLINES
) \

392 && 
defšed
 
	g__OPTIMIZE__
)

396 #undeà
m©h_”rhªdlšg


405 #ifdeà
__USE_ISOC99


406 
	#__šlše_m©hİ
(
func
, 
İ
) \

407 
	`__šlše_m©hİ_
 (, 
func
, 
İ
) \

408 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

409 
	`__šlše_m©hİ_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

410 
	#__šlše_m©hİNP
(
func
, 
İ
) \

411 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
) \

412 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
) \

413 
	`__šlše_m©hİNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
)

	)

415 
	#__šlše_m©hİ
(
func
, 
İ
) \

416 
	`__šlše_m©hİ_
 (, 
func
, 
İ
)

	)

417 
	#__šlše_m©hİNP
(
func
, 
İ
) \

418 
	`__šlše_m©hİNP_
 (, 
func
, 
İ
)

	)

421 
	#__šlše_m©hİ_
(
æßt_ty³
, 
func
, 
İ
) \

422 
	`__šlše_m©hİ_deş_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

423 
	#__šlše_m©hİNP_
(
æßt_ty³
, 
func
, 
İ
) \

424 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, "0" (
__x
))

	)

427 #ifdeà
__USE_ISOC99


428 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

429 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
) \

430 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

431 
	`__šlše_m©hİ_deş_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

432 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

433 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
) \

434 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
f
), 
İ
, 
·¿ms
) \

435 
	`__šlše_m©hİ_deşNP_
 (, 
	`__CONCAT
(
func
,
l
), 
İ
, 
·¿ms
)

	)

437 
	#__šlše_m©hİ_deş
(
func
, 
İ
, 
·¿ms
...) \

438 
	`__šlše_m©hİ_deş_
 (, 
func
, 
İ
, 
·¿ms
)

	)

439 
	#__šlše_m©hİ_deşNP
(
func
, 
İ
, 
·¿ms
...) \

440 
	`__šlše_m©hİ_deşNP_
 (, 
func
, 
İ
, 
·¿ms
)

	)

443 
	#__šlše_m©hİ_deş_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

444 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

445 
	`__šlše_m©hİ_deşNP_
 (
æßt_ty³
, 
func
, 
İ
, 
·¿ms
)

	)

447 
	#__šlše_m©hİ_deşNP_
(
æßt_ty³
, 
func
, 
İ
, 
·¿ms
...) \

448 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
__x
)) \

450 
æßt_ty³
 
__»suÉ
; \

451 
__asm
 
	`__vŞ©e__
 (
İ
 : "ñ" (
__»suÉ
è: 
·¿ms
); \

452  
__»suÉ
; \

453 }

	)

456 #ifdeà
__USE_ISOC99


457 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

458 
	`__šlše_m©hcode_
 (, 
func
, 
¬g
, 
code
) \

459 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

460 
	`__šlše_m©hcode_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

461 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

462 
	`__šlše_m©hcodeNP_
 (, 
func
, 
¬g
, 
code
) \

463 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g
, 
code
) \

464 
	`__šlše_m©hcodeNP_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g
, 
code
)

	)

465 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

466 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

467 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

468 
	`__šlše_m©hcode2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

469 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

470 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
) \

471 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
code
) \

472 
	`__šlše_m©hcodeNP2_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
code
)

	)

473 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

474 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

475 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

476 
	`__šlše_m©hcode3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

477 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

478 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

479 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
f
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

480 
	`__šlše_m©hcodeNP3_
 (, 
	`__CONCAT
(
func
,
l
), 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

482 
	#__šlše_m©hcode
(
func
, 
¬g
, 
code
) \

483 
	`__šlše_m©hcode_
 (, 
func
, (
¬g
), 
code
)

	)

484 
	#__šlše_m©hcodeNP
(
func
, 
¬g
, 
code
) \

485 
	`__šlše_m©hcodeNP_
 (, 
func
, (
¬g
), 
code
)

	)

486 
	#__šlše_m©hcode2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

487 
	`__šlše_m©hcode2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

488 
	#__šlše_m©hcodeNP2
(
func
, 
¬g1
, 
¬g2
, 
code
) \

489 
	`__šlše_m©hcodeNP2_
 (, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

490 
	#__šlše_m©hcode3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

491 
	`__šlše_m©hcode3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

492 
	#__šlše_m©hcodeNP3
(
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

493 
	`__šlše_m©hcodeNP3_
 (, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

496 
	#__šlše_m©hcode_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

497 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³è
__THROW
; \

498 
	`__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
)

	)

500 
	#__šlše_m©hcodeNP_
(
æßt_ty³
, 
func
, 
¬g
, 
code
) \

501 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g
)) \

503 
code
; \

504 }

	)

507 
	#__šlše_m©hcode2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

508 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³è
__THROW
; \

509 
	`__šlše_m©hcodeNP2_
 (
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
)

	)

511 
	#__šlše_m©hcodeNP2_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
code
) \

512 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
)) \

514 
code
; \

515 }

	)

517 
	#__šlše_m©hcode3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

518 
__MATH_INLINE
 
æßt_ty³
 
	`func
 (æßt_ty³, flßt_ty³, flßt_ty³è
__THROW
; \

519 
	`__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
)

	)

521 
	#__šlše_m©hcodeNP3_
(
æßt_ty³
, 
func
, 
¬g1
, 
¬g2
, 
¬g3
, 
code
) \

522 
__MATH_INLINE
 
æßt_ty³
 
	`__NTH
 (
	`func
 (æßt_ty³ 
¬g1
, flßt_ty³ 
¬g2
, \

523 
æßt_ty³
 
¬g3
)) \

525 
code
; \

526 }

	)

530 #ià!
defšed
 
__NO_MATH_INLINES
 && defšed 
__OPTIMIZE__


534 #ifdeà
__FAST_MATH__


535 #ifdeà
__USE_GNU


536 
	#__sšcos_code
 \

537 
__co¤
; \

538 
__sšr
; \

539 
__swtmp
; \

540 
__asm
 
__vŞ©e__
 \

555 : "ñ" (
__co¤
), "=u" (
__sšr
), "÷" (
__swtmp
è: "0" (
__x
)); \

556 *
__sšx
 = 
__sšr
; \

557 *
__cosx
 = 
__co¤


	)

559 
__MATH_INLINE
 

560 
__NTH
 (
	$__sšcos
 (
__x
, *
__sšx
, *
__cosx
))

562 
__sšcos_code
;

563 
	}
}

565 
__MATH_INLINE
 

566 
__NTH
 (
	$__sšcosf
 (
__x
, *
__sšx
, *
__cosx
))

568 
__sšcos_code
;

569 
	}
}

571 
__MATH_INLINE
 

572 
__NTH
 (
	$__sšco¦
 (
__x
, *
__sšx
, *
__cosx
))

574 
__sšcos_code
;

575 
	}
}

582 #ià
__GNUC_PREREQ
 (3, 5)

583 
	#__expm1_code
 \

584 
__‹mp
; \

585 
__‹mp
 = 
	`__butš_expm1l
 (
__x
); \

586  
__‹mp
 ? __‹m°: 
__x


	)

588 
	#__expm1_code
 \

589 
__v®ue
; \

590 
__expÚ’t
; \

591 
__‹mp
; \

592 
__asm
 
__vŞ©e__
 \

601 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

602 
__asm
 
__vŞ©e__
 \

604 : "ñ" (
__‹mp
è: "0" (1.0), "u" (
__expÚ’t
)); \

605 
__‹mp
 -= 1.0; \

606 
__‹mp
 +ğ
__v®ue
; \

607  
__‹mp
 ? __‹m°: 
__x


	)

609 
	$__šlše_m©hcodeNP_
 (, 
__expm1l
, 
__x
, 
__expm1_code
)

611 #ià
	`__GNUC_PREREQ
 (3, 4)

612 
	`__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
,  
	$__butš_ex¶
 (
__x
))

614 
	#__exp_code
 \

615 
__v®ue
; \

616 
__expÚ’t
; \

617 
__asm
 
__vŞ©e__
 \

625 : "ñ" (
__v®ue
), "=u" (
__expÚ’t
è: "0" (
__x
)); \

626 
__v®ue
 += 1.0; \

627 
__asm
 
__vŞ©e__
 \

629 : "ñ" (
__v®ue
è: "0" (__v®ue), "u" (
__expÚ’t
)); \

630  
__v®ue


	)

631 
	$__šlše_m©hcodeNP
 (
exp
, 
__x
, 
__exp_code
)

632 
	$__šlše_m©hcodeNP_
 (, 
__ex¶
, 
__x
, 
__exp_code
)

636 #ià!
	`__GNUC_PREREQ
 (3, 5)

637 
	`__šlše_m©hcodeNP
 (
n
, 
__x
, \

638 
__v®ue
; \

639 
__v®ue2
 
	`__©Œibu‹__
 ((
__unu£d__
)); \

640 
__asm
 
__vŞ©e__
 \

642 : "ñ" (
__v®ue2
), "=u" (
__v®ue
è: "0" (
__x
)); \

643  
__v®ue
)

648 #ià
	`__GNUC_PREREQ
 (3, 4)

649 
	`__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
,

650  
	$__butš_©ª2l
 (
__y
, 
__x
))

652 
	#__©ª2_code
 \

653 
__v®ue
; \

654 
__asm
 
__vŞ©e__
 \

656 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "st(1)"); \

657  
__v®ue


	)

658 #ifdeà
__FAST_MATH__


659 
	$__šlše_m©hcodeNP2
 (
©ª2
, 
__y
, 
__x
, 
__©ª2_code
)

661 
	$__šlše_m©hcodeNP2_
 (, 
__©ª2l
, 
__y
, 
__x
, 
__©ª2_code
)

665 #ià
defšed
 
__FAST_MATH__
 && !
	`__GNUC_PREREQ
 (3, 5)

666 
	`__šlše_m©hcodeNP2
 (
fmod
, 
__x
, 
__y
, \

667 
__v®ue
; \

668 
__asm
 
__vŞ©e__
 \

673 : "ñ" (
__v®ue
è: "0" (
__x
), "u" (
__y
) : "ax", "cc"); \

674  
__v®ue
)

678 #ifdeà
__FAST_MATH__


679 #ià!
	`__GNUC_PREREQ
 (3,3)

680 
	`__šlše_m©hİNP
 (
sq¹
, "fsqrt")

681 
	`__šlše_m©hİNP_
 (, 
__sq¹l
, "fsqrt")

682 
	#__libc_sq¹l
(
n
è
	`__sq¹l
 (n)

	)

684 
	#__libc_sq¹l
(
n
è
	`__butš_sq¹l
 (n)

	)

688 #ià
	`__GNUC_PREREQ
 (2, 8)

689 
	`__šlše_m©hcodeNP_
 (, 
çbs
, 
__x
,  
	$__butš_çbs
 (
__x
))

690 #ifdeà
__USE_ISOC99


691 
	`__šlše_m©hcodeNP_
 (, 
çbsf
, 
__x
,  
	$__butš_çbsf
 (
__x
))

692 
	`__šlše_m©hcodeNP_
 (, 
çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

694 
	`__šlše_m©hcodeNP_
 (, 
__çb¦
, 
__x
,  
	$__butš_çb¦
 (
__x
))

696 
	`__šlše_m©hİ
 (
çbs
, "fabs")

697 
	`__šlše_m©hİ_
 (, 
__çb¦
, "fabs")

700 #ifdeà
__FAST_MATH__


701 #ià!
	`__GNUC_PREREQ
 (3, 4)

703 
	`__šlše_m©hİNP
 (
sš
, "fsin")

705 
	`__šlše_m©hİNP
 (
cos
, "fcos")

707 
	`__šlše_m©hİ_deşNP
 (
log
, "ædÊ2; fxch; fyl2x", "0" (
__x
) : "st(1)")

710 #ià!
	`__GNUC_PREREQ
 (3, 5)

711 
	`__šlše_m©hİ_deşNP
 (
log10
, "ædlg2; fxch; fyl2x", "0" (
__x
) : "st(1)")

713 
	`__šlše_m©hcodeNP
 (
asš
, 
__x
,  
	`__©ª2l
 (__x, 
	`__libc_sq¹l
 (1.0 - __x * __x)))

714 
	`__šlše_m©hcodeNP
 (
acos
, 
__x
,  
	`__©ª2l
 (
	`__libc_sq¹l
 (1.0 - __x * __x), __x))

717 #ià!
	`__GNUC_PREREQ
 (3, 4)

718 
	`__šlše_m©hİ_deşNP
 (
©ª
, "æd1; f·n", "0" (
__x
) : "st(1)")

722 
	`__šlše_m©hcode_
 (, 
__sgn1l
, 
__x
, \

723 
__ex‹nsiÚ__
 uniÚ { 
__xld
; 
__xi
[3]; } 
__n
 = \

724 { 
__xld
: 
__x
 
	}
}; \

725 
	g__n
.
	g__xi
[2] = (
__n
.
__xi
[2] & 0x8000) | 0x3fff; \

726 
	g__n
.
	g__xi
[1] = 0x80000000; \

727 
	g__n
.
	g__xi
[0] = 0; \

728  
	g__n
.
	g__xld
)

731 #ifdeà
__FAST_MATH__


733 
__šlše_m©hcodeNP
 (
sšh
, 
__x
, \

734 
__exm1
 = 
__expm1l
 (
__çb¦
 (
__x
)); \

735  0.5 * (
__exm1
 / (__exm1 + 1.0è+ __exm1è* 
	$__sgn1l
 (
__x
))

737 
	`__šlše_m©hcodeNP
 (
cosh
, 
__x
, \

738 
__ex
 = 
	`__ex¶
 (
__x
); \

739  0.5 * (
__ex
 + 1.0 / __ex))

741 
	`__šlše_m©hcodeNP
 (
nh
, 
__x
, \

742 
__exm1
 = 
	`__expm1l
 (-
	`__çb¦
 (
__x
 + __x)); \

743  
__exm1
 / (__exm1 + 2.0è* 
	`__sgn1l
 (-
__x
))

746 
	`__šlše_m©hcodeNP
 (
æoÜ
, 
__x
, \

747 
__v®ue
; \

748 
__ignÜe
; \

749 
__cw
; \

750 
__cwtmp
; \

751 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

759 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

760 "=m" (
__cw
) \

761 : "0" (
__x
)); \

762  
__v®ue
)

764 
	`__šlše_m©hcodeNP
 (
û
, 
__x
, \

765 
__v®ue
; \

766 
__ignÜe
; \

767 
__cw
; \

768 
__cwtmp
; \

769 
__asm
 
	`__vŞ©e
 ("fnstcw %3\n\t" \

777 : "ñ" (
__v®ue
), "=&q" (
__ignÜe
), "=m" (
__cwtmp
), \

778 "=m" (
__cw
) \

779 : "0" (
__x
)); \

780  
__v®ue
)

782 #ifdeà
__FAST_MATH__


783 
	#__ldexp_code
 \

784 
__v®ue
; \

785 
__asm
 
__vŞ©e__
 \

787 : "ñ" (
__v®ue
è: "0" (
__x
), "u" ((è
__y
)); \

788  
__v®ue


	)

790 
__MATH_INLINE
 

791 
	`__NTH
 (
	$ldexp
 (
__x
, 
__y
))

793 
__ldexp_code
;

794 
	}
}

799 #ifdeà
__USE_ISOC99


801 #ifdeà
__FAST_MATH__


802 
	$__šlše_m©hcodeNP
 (
expm1
, 
__x
, 
__expm1_code
)

806 
	#__M_SQRT2
 1.41421356237309504880L

	)

808 #ià!
	`__GNUC_PREREQ
 (3, 5)

809 
	`__šlše_m©hcodeNP
 (
log1p
, 
__x
, \

810 
__v®ue
; \

811 ià(
	`__çb¦
 (
__x
è>ğ1.0 - 0.5 * 
__M_SQRT2
) \

812 
__v®ue
 = 
	`logl
 (1.0 + 
__x
); \

814 
__asm
 
__vŞ©e__
 \

818 : "ñ" (
__v®ue
è: "0" (
__x
) : "st(1)"); \

819  
__v®ue
)

824 
	`__šlše_m©hcodeNP
 (
asšh
, 
__x
, \

825 
__y
 = 
	`__çb¦
 (
__x
); \

826  (
	`log1¶
 (
__y
 * __y / (
	`__libc_sq¹l
 (__y * __y + 1.0) + 1.0) + __y) \

827 * 
	$__sgn1l
 (
__x
)))

829 
	`__šlše_m©hcodeNP
 (
acosh
, 
__x
, \

830  
	`logl
 (
__x
 + 
	`__libc_sq¹l
 (__x - 1.0) * __libc_sqrtl (__x + 1.0)))

832 
	`__šlše_m©hcodeNP
 (
©ªh
, 
__x
, \

833 
__y
 = 
	`__çb¦
 (
__x
); \

834  -0.5 * 
	`log1¶
 (-(
__y
 + __yè/ (1.0 + __y)è* 
	$__sgn1l
 (
__x
))

837 
	`__šlše_m©hcodeNP2
 (
hypÙ
, 
__x
, 
__y
,

838  
	`__libc_sq¹l
 (
__x
 * __x + 
__y
 * __y))

840 #ià!
	`__GNUC_PREREQ
 (3, 5)

841 
	`__šlše_m©hcodeNP
(
logb
, 
__x
, \

842 
__v®ue
; \

843 
__junk
; \

844 
__asm
 
__vŞ©e__
 \

846 : "ñ" (
__junk
), "=u" (
__v®ue
è: "0" (
__x
)); \

847  
__v®ue
)

853 #ifdeà
__USE_ISOC99


854 #ifdeà
__FAST_MATH__


856 #ià!
	`__GNUC_PREREQ
 (3, 5)

857 
	`__šlše_m©hİ_deşNP
 (
log2
, "æd1; fxch; fyl2x", "0" (
__x
) : "st(1)")

860 
__MATH_INLINE
 

861 
	`__NTH
 (
	$ldexpf
 (
__x
, 
__y
))

863 
__ldexp_code
;

864 
	}
}

866 
__MATH_INLINE
 

867 
__NTH
 (
	$ldex¶
 (
__x
, 
__y
))

869 
__ldexp_code
;

870 
	}
}

872 
__šlše_m©hİNP
 (
ršt
, "frndint")

875 
	#__Ìšt_code
 \

876 
__ÌšŒes
; \

877 
__asm__
 
__vŞ©e__
 \

879 : "=m" (
__ÌšŒes
è: "t" (
__x
) : "st"); \

880  
__ÌšŒes


	)

881 
__MATH_INLINE
 

882 
__NTH
 (
	$Ìštf
 (
__x
))

884 
__Ìšt_code
;

885 
	}
}

886 
__MATH_INLINE
 

887 
__NTH
 (
	$Ìšt
 (
__x
))

889 
__Ìšt_code
;

890 
	}
}

891 
__MATH_INLINE
 

892 
__NTH
 (
	$Ìš
 (
__x
))

894 
__Ìšt_code
;

895 
	}
}

896 #undeà
__Ìšt_code


898 
	#__Îršt_code
 \

899 
__ÎršŒes
; \

900 
__asm__
 
__vŞ©e__
 \

902 : "=m" (
__ÎršŒes
è: "t" (
__x
) : "st"); \

903  
__ÎršŒes


	)

904 
__ex‹nsiÚ__


905 
__MATH_INLINE
 

906 
__NTH
 (
	$Îrštf
 (
__x
))

908 
__Îršt_code
;

909 
	}
}

910 
__ex‹nsiÚ__


911 
__MATH_INLINE
 

912 
__NTH
 (
	$Îršt
 (
__x
))

914 
__Îršt_code
;

915 
	}
}

916 
__ex‹nsiÚ__


917 
__MATH_INLINE
 

918 
__NTH
 (
	$Îrš
 (
__x
))

920 
__Îršt_code
;

921 
	}
}

922 #undeà
__Îršt_code


927 #ifdeà
__USE_MISC


929 #ià
defšed
 
__FAST_MATH__
 && !
__GNUC_PREREQ
 (3, 5)

930 
__šlše_m©hcodeNP2
 (
d»m
, 
__x
, 
__y
, \

931 
__v®ue
; \

932 
__şobb”ed
; \

933 
__asm
 
__vŞ©e__
 \

938 : "ñ" (
__v®ue
), "=&a" (
__şobb”ed
è: "0" (
__x
), "u" (
__y
) : "cc"); \

939  
__v®ue
)

944 
__MATH_INLINE
 

945 
__NTH
 (
	$__fš™e
 (
__x
))

947  (
__ex‹nsiÚ__


948 (((((uniÚ { 
__d
; 
__i
[2]; }è{__d: 
__x
}).__i[1]

950 
	}
}

955 #undeà
__©ª2_code


956 #ifdeà
__FAST_MATH__


957 #undeà
__expm1_code


958 #undeà
__exp_code


959 #undeà
__sšcos_code


966 #ifdeà
__LIBC_INTERNAL_MATH_INLINES


967 
__šlše_m©hİ
 (
__›“754_sq¹
, "fsqrt")

968 
__šlše_m©hcode2_
 (, 
__›“754_©ª2l
, 
__y
, 
__x
,

969 
__v®ue
;

970 
__asm
 
__vŞ©e__
 ("fpatan\n\t"

971 : "ñ" (
__v®ue
)

972 : "0" (
__x
), "u" (
__y
) : "st(1)");

973  
__v®ue
;)

	@/usr/include/bits/nan.h

19 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

28 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

30 #–ià
defšed
 
__GNUC__


32 
	#NAN
 \

33 (
__ex‹nsiÚ__
 \

34 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

35 { 
__l
: 0x7fc00000UL }).
__d
)

	)

39 
	~<’dŸn.h
>

41 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


42 
	#__qÇn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

44 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


45 
	#__qÇn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

48 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__qÇn_uniÚ


49 
__©Œibu‹__
 ((
__unu£d__
)èğ{ 
__qÇn_by‹s
 };

50 
	#NAN
 (
__qÇn_uniÚ
.
__d
)

	)

	@/usr/include/bits/stdlib-bsearch.h

19 
__ex‹º_šlše
 *

20 
	$b£¬ch
 (cÚ¡ *
__key
, cÚ¡ *
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

21 
__com·r_â_t
 
__com·r
)

23 
size_t
 
__l
, 
__u
, 
__idx
;

24 cÚ¡ *
__p
;

25 
__com·risÚ
;

27 
__l
 = 0;

28 
__u
 = 
__nmemb
;

29 
__l
 < 
__u
)

31 
__idx
 = (
__l
 + 
__u
) / 2;

32 
__p
 = (*è(((cÚ¡ *è
__ba£
è+ (
__idx
 * 
__size
));

33 
__com·risÚ
 = (*
__com·r
è(
__key
, 
__p
);

34 ià(
__com·risÚ
 < 0)

35 
__u
 = 
__idx
;

36 ià(
__com·risÚ
 > 0)

37 
__l
 = 
__idx
 + 1;

39  (*è
__p
;

42  
NULL
;

43 
	}
}

	@/usr/include/bits/stdlib-float.h

19 #iâdeà
_STDLIB_H


23 #ifdeà
__USE_EXTERN_INLINES


24 
__BEGIN_NAMESPACE_STD


25 
__ex‹º_šlše
 

26 
__NTH
 (
	$©of
 (cÚ¡ *
__ÅŒ
))

28  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

29 
	}
}

30 
	g__END_NAMESPACE_STD


	@/usr/include/bits/stdlib-ldbl.h

19 #iâdeà
_STDLIB_H


23 #ifdef 
__USE_ISOC99


24 
__BEGIN_NAMESPACE_C99


25 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

26 
__END_NAMESPACE_C99


29 #ifdeà
__USE_GNU


30 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

33 #ifdeà
__USE_MISC


34 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

35 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

36 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

38 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

19 #iâdeà
_STDLIB_H


23 *
	$__»®·th_chk
 (cÚ¡ *
__»¡riù
 
__Çme
,

24 *
__»¡riù
 
__»sŞved
,

25 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

26 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

27 (cÚ¡ *
__»¡riù
 
__Çme
,

28 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

29 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

30 (cÚ¡ *
__»¡riù
 
__Çme
,

31 *
__»¡riù
 
__»sŞved
,

32 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


33 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

36 
__fÜtify_funùiÚ
 
__wur
 *

37 
	`__NTH
 (
	$»®·th
 (cÚ¡ *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

39 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

41 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


42 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

43  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

45  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

48  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

49 
	}
}

52 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

53 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

54 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

55 
size_t
 
__buæ’
), 
±¢ame_r
)

56 
	`__nÚnuÎ
 ((2));

57 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

58 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

59 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

60 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

63 
__fÜtify_funùiÚ
 

64 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

66 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

68 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

69  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

70 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

71  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

73  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

74 
	}
}

77 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

78 
__THROW
 
__wur
;

79 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

80 
wùomb
è
__wur
;

82 
__fÜtify_funùiÚ
 
__wur
 

83 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

88 
	#__STDLIB_MB_LEN_MAX
 16

	)

89 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


92 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

93  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

94  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

95 
	}
}

98 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

99 cÚ¡ *
__»¡riù
 
__¤c
,

100 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

101 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

102 (
wch¬_t
 *
__»¡riù
 
__d¡
,

103 cÚ¡ *
__»¡riù
 
__¤c
,

104 
size_t
 
__Ën
), 
mb¡owcs
);

105 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

106 (
wch¬_t
 *
__»¡riù
 
__d¡
,

107 cÚ¡ *
__»¡riù
 
__¤c
,

108 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

109 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

112 
__fÜtify_funùiÚ
 
size_t


113 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, cÚ¡ *__»¡riù 
__¤c
,

114 
size_t
 
__Ën
))

116 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

118 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

119  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

120 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

122 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

123  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

124 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

126  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

127 
	}
}

130 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

131 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

132 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

133 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

134 (*
__»¡riù
 
__d¡
,

135 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

136 
size_t
 
__Ën
), 
wc¡ombs
);

137 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

138 (*
__»¡riù
 
__d¡
,

139 cÚ¡ 
wch¬_t
 *
__»¡riù
 
__¤c
,

140 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

141 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

143 
__fÜtify_funùiÚ
 
size_t


144 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, cÚ¡ 
wch¬_t
 *__»¡riù 
__¤c
,

145 
size_t
 
__Ën
))

147 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

149 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

150  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

151 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

152  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

154  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

155 
	}
}

	@/usr/include/bits/types.h

23 #iâdef 
_BITS_TYPES_H


24 
	#_BITS_TYPES_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wÜdsize.h
>

30 
	t__u_ch¬
;

31 
	t__u_shÜt
;

32 
	t__u_št
;

33 
	t__u_lÚg
;

36 sigÃd 
	t__št8_t
;

37 
	t__ušt8_t
;

38 sigÃd 
	t__št16_t
;

39 
	t__ušt16_t
;

40 sigÃd 
	t__št32_t
;

41 
	t__ušt32_t
;

42 #ià
__WORDSIZE
 == 64

43 sigÃd 
	t__št64_t
;

44 
	t__ušt64_t
;

46 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

47 
__ex‹nsiÚ__
 
	t__ušt64_t
;

51 #ià
__WORDSIZE
 == 64

52 
	t__quad_t
;

53 
	t__u_quad_t
;

55 
__ex‹nsiÚ__
 
	t__quad_t
;

56 
__ex‹nsiÚ__
 
	t__u_quad_t
;

89 
	#__S16_TYPE
 

	)

90 
	#__U16_TYPE
 

	)

91 
	#__S32_TYPE
 

	)

92 
	#__U32_TYPE
 

	)

93 
	#__SLONGWORD_TYPE
 

	)

94 
	#__ULONGWORD_TYPE
 

	)

95 #ià
__WORDSIZE
 == 32

96 
	#__SQUAD_TYPE
 
__quad_t


	)

97 
	#__UQUAD_TYPE
 
__u_quad_t


	)

98 
	#__SWORD_TYPE
 

	)

99 
	#__UWORD_TYPE
 

	)

100 
	#__SLONG32_TYPE
 

	)

101 
	#__ULONG32_TYPE
 

	)

102 
	#__S64_TYPE
 
__quad_t


	)

103 
	#__U64_TYPE
 
__u_quad_t


	)

106 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

107 #–ià
__WORDSIZE
 == 64

108 
	t__SQUAD_TYPE
 

	)

109 
	t__UQUAD_TYPE
 

	)

110 
	t__SWORD_TYPE
 

	)

111 
	t__UWORD_TYPE
 

	)

112 
	t__SLONG32_TYPE
 

	)

113 
	t__ULONG32_TYPE
 

	)

114 
	t__S64_TYPE
 

	)

115 
	t__U64_TYPE
 

	)

117 
	t__STD_TYPE
 

	)

121 
	~<b™s/ty³sizes.h
>

124 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

125 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

126 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

127 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

128 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

129 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

130 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

131 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

132 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

133 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

134 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

135 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

136 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

137 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

138 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

139 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

140 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

141 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

143 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

144 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

147 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

150 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

153 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

158 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

159 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

162 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

163 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

166 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

167 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

170 
__STD_TYPE
 
__FSWORD_T_TYPE
 
	g__fswÜd_t
;

172 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

175 
__STD_TYPE
 
__SYSCALL_SLONG_TYPE
 
	g__sysÿÎ_¦Úg_t
;

177 
__STD_TYPE
 
__SYSCALL_ULONG_TYPE
 
	g__sysÿÎ_ulÚg_t
;

181 
__off64_t
 
	t__loff_t
;

182 
__quad_t
 *
	t__qaddr_t
;

183 *
	t__ÿddr_t
;

186 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

189 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

192 #undeà
__STD_TYPE


	@/usr/include/bits/waitflags.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


25 
	#WNOHANG
 1

	)

26 
	#WUNTRACED
 2

	)

29 
	#WSTOPPED
 2

	)

30 
	#WEXITED
 4

	)

31 
	#WCONTINUED
 8

	)

32 
	#WNOWAIT
 0x01000000

	)

34 
	#__WNOTHREAD
 0x20000000

	)

36 
	#__WALL
 0x40000000

	)

37 
	#__WCLONE
 0x80000000

	)

40 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


41 #iâdeà
__ENUM_IDTYPE_T


42 
	#__ENUM_IDTYPE_T
 1

	)

46 #undeà
P_ALL


47 #undeà
P_PID


48 #undeà
P_PGID


52 
	mP_ALL
,

53 
	mP_PID
,

54 
	mP_PGID


55 } 
	tidty³_t
;

	@/usr/include/bits/waitstatus.h

19 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


28 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

31 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

34 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

37 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

40 
	#__WIFSIGNALED
(
¡©us
) \

41 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

44 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

48 #ifdeà
WCONTINUED


49 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

53 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

56 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

57 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

58 
	#__W_CONTINUED
 0xffff

	)

59 
	#__WCOREFLAG
 0x80

	)

62 #ifdef 
__USE_MISC


64 
	~<’dŸn.h
>

66 
	uwa™


68 
	mw_¡©us
;

71 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


72 
	m__w_‹rmsig
:7;

73 
	m__w_cÜedump
:1;

74 
	m__w_»tcode
:8;

77 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


79 
	m__w_»tcode
:8;

80 
	m__w_cÜedump
:1;

81 
	m__w_‹rmsig
:7;

83 } 
	m__wa™_‹rmš©ed
;

86 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


87 
	m__w_¡İv®
:8;

88 
	m__w_¡İsig
:8;

91 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


93 
	m__w_¡İsig
:8;

94 
	m__w_¡İv®
:8;

96 } 
	m__wa™_¡İ³d
;

99 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

100 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

101 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

102 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

103 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/endian.h

18 #iâdef 
_ENDIAN_H


19 
	#_ENDIAN_H
 1

	)

21 
	~<ã©u»s.h
>

31 
	#__LITTLE_ENDIAN
 1234

	)

32 
	#__BIG_ENDIAN
 4321

	)

33 
	#__PDP_ENDIAN
 3412

	)

36 
	~<b™s/’dŸn.h
>

40 #iâdeà
__FLOAT_WORD_ORDER


41 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

44 #ifdef 
__USE_MISC


45 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

46 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

47 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

48 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

51 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


52 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

53 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


54 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

58 #ià
defšed
 
__USE_MISC
 && !defšed 
__ASSEMBLER__


60 
	~<b™s/by‹sw­.h
>

62 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


63 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

64 
	#htŞe16
(
x
è(x)

	)

65 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

66 
	#Ë16toh
(
x
è(x)

	)

68 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

69 
	#htŞe32
(
x
è(x)

	)

70 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

71 
	#Ë32toh
(
x
è(x)

	)

73 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

74 
	#htŞe64
(
x
è(x)

	)

75 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

76 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

18 #iâdef 
_FEATURES_H


19 
	#_FEATURES_H
 1

	)

97 #undeà
__USE_ISOC11


98 #undeà
__USE_ISOC99


99 #undeà
__USE_ISOC95


100 #undeà
__USE_ISOCXX11


101 #undeà
__USE_POSIX


102 #undeà
__USE_POSIX2


103 #undeà
__USE_POSIX199309


104 #undeà
__USE_POSIX199506


105 #undeà
__USE_XOPEN


106 #undeà
__USE_XOPEN_EXTENDED


107 #undeà
__USE_UNIX98


108 #undeà
__USE_XOPEN2K


109 #undeà
__USE_XOPEN2KXSI


110 #undeà
__USE_XOPEN2K8


111 #undeà
__USE_XOPEN2K8XSI


112 #undeà
__USE_LARGEFILE


113 #undeà
__USE_LARGEFILE64


114 #undeà
__USE_FILE_OFFSET64


115 #undeà
__USE_MISC


116 #undeà
__USE_ATFILE


117 #undeà
__USE_GNU


118 #undeà
__USE_REENTRANT


119 #undeà
__USE_FORTIFY_LEVEL


120 #undeà
__KERNEL_STRICT_NAMES


124 #iâdeà
_LOOSE_KERNEL_NAMES


125 
	#__KERNEL_STRICT_NAMES


	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

146 #ià(
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE
) \

147 && !
defšed
 
	g_DEFAULT_SOURCE


152 #undeà
_DEFAULT_SOURCE


153 
	#_DEFAULT_SOURCE
 1

	)

157 #ifdeà
_GNU_SOURCE


158 #undeà
_ISOC95_SOURCE


159 
	#_ISOC95_SOURCE
 1

	)

160 #undeà
_ISOC99_SOURCE


161 
	#_ISOC99_SOURCE
 1

	)

162 #undeà
_ISOC11_SOURCE


163 
	#_ISOC11_SOURCE
 1

	)

164 #undeà
_POSIX_SOURCE


165 
	#_POSIX_SOURCE
 1

	)

166 #undeà
_POSIX_C_SOURCE


167 
	#_POSIX_C_SOURCE
 200809L

	)

168 #undeà
_XOPEN_SOURCE


169 
	#_XOPEN_SOURCE
 700

	)

170 #undeà
_XOPEN_SOURCE_EXTENDED


171 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

172 #undeà
_LARGEFILE64_SOURCE


173 
	#_LARGEFILE64_SOURCE
 1

	)

174 #undeà
_DEFAULT_SOURCE


175 
	#_DEFAULT_SOURCE
 1

	)

176 #undeà
_ATFILE_SOURCE


177 
	#_ATFILE_SOURCE
 1

	)

182 #ià(
defšed
 
_DEFAULT_SOURCE
 \

183 || (!
defšed
 
	g__STRICT_ANSI__
 \

184 && !
defšed
 
	g_ISOC99_SOURCE
 \

185 && !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 \

186 && !
defšed
 
	g_XOPEN_SOURCE
))

187 #undeà
_DEFAULT_SOURCE


188 
	#_DEFAULT_SOURCE
 1

	)

192 #ià(
defšed
 
_ISOC11_SOURCE
 \

193 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 201112L))

194 
	#__USE_ISOC11
 1

	)

198 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

199 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

200 
	#__USE_ISOC99
 1

	)

204 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC11_SOURCE
 \

205 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

206 
	#__USE_ISOC95
 1

	)

213 #ià((
defšed
 
__ılu¥lus
 && __cplusplus >= 201103L) \

214 || 
defšed
 
__GXX_EXPERIMENTAL_CXX0X__
)

215 
	#__USE_ISOCXX11
 1

	)

221 #ifdeà
_DEFAULT_SOURCE


222 #ià!
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE


223 
	#__USE_POSIX_IMPLICITLY
 1

	)

225 #undeà
_POSIX_SOURCE


226 
	#_POSIX_SOURCE
 1

	)

227 #undeà
_POSIX_C_SOURCE


228 
	#_POSIX_C_SOURCE
 200809L

	)

230 #ià((!
defšed
 
__STRICT_ANSI__
 \

231 || (
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) >= 500)) \

232 && !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

233 
	#_POSIX_SOURCE
 1

	)

234 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

235 
	#_POSIX_C_SOURCE
 2

	)

236 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

237 
	#_POSIX_C_SOURCE
 199506L

	)

238 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

239 
	#_POSIX_C_SOURCE
 200112L

	)

241 
	#_POSIX_C_SOURCE
 200809L

	)

243 
	#__USE_POSIX_IMPLICITLY
 1

	)

246 #ià(
defšed
 
_POSIX_SOURCE
 \

247 || (
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >= 1) \

248 || 
defšed
 
_XOPEN_SOURCE
)

249 
	#__USE_POSIX
 1

	)

252 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


253 
	#__USE_POSIX2
 1

	)

256 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199309L

257 
	#__USE_POSIX199309
 1

	)

260 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 199506L

261 
	#__USE_POSIX199506
 1

	)

264 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200112L

265 
	#__USE_XOPEN2K
 1

	)

266 #undeà
__USE_ISOC95


267 
	#__USE_ISOC95
 1

	)

268 #undeà
__USE_ISOC99


269 
	#__USE_ISOC99
 1

	)

272 #ià
defšed
 
_POSIX_C_SOURCE
 && (_POSIX_C_SOURCE - 0) >= 200809L

273 
	#__USE_XOPEN2K8
 1

	)

274 #undeà
_ATFILE_SOURCE


275 
	#_ATFILE_SOURCE
 1

	)

278 #ifdef 
_XOPEN_SOURCE


279 
	#__USE_XOPEN
 1

	)

280 #ià(
_XOPEN_SOURCE
 - 0) >= 500

281 
	#__USE_XOPEN_EXTENDED
 1

	)

282 
	#__USE_UNIX98
 1

	)

283 #undeà
_LARGEFILE_SOURCE


284 
	#_LARGEFILE_SOURCE
 1

	)

285 #ià(
_XOPEN_SOURCE
 - 0) >= 600

286 #ià(
_XOPEN_SOURCE
 - 0) >= 700

287 
	#__USE_XOPEN2K8
 1

	)

288 
	#__USE_XOPEN2K8XSI
 1

	)

290 
	#__USE_XOPEN2K
 1

	)

291 
	#__USE_XOPEN2KXSI
 1

	)

292 #undeà
__USE_ISOC95


293 
	#__USE_ISOC95
 1

	)

294 #undeà
__USE_ISOC99


295 
	#__USE_ISOC99
 1

	)

298 #ifdeà
_XOPEN_SOURCE_EXTENDED


299 
	#__USE_XOPEN_EXTENDED
 1

	)

304 #ifdeà
_LARGEFILE_SOURCE


305 
	#__USE_LARGEFILE
 1

	)

308 #ifdeà
_LARGEFILE64_SOURCE


309 
	#__USE_LARGEFILE64
 1

	)

312 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

313 
	#__USE_FILE_OFFSET64
 1

	)

316 #ià
defšed
 
_DEFAULT_SOURCE


317 
	#__USE_MISC
 1

	)

320 #ifdef 
_ATFILE_SOURCE


321 
	#__USE_ATFILE
 1

	)

324 #ifdef 
_GNU_SOURCE


325 
	#__USE_GNU
 1

	)

328 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


329 
	#__USE_REENTRANT
 1

	)

332 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

333 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

334 #ià
_FORTIFY_SOURCE
 > 1

335 
	#__USE_FORTIFY_LEVEL
 2

	)

337 
	#__USE_FORTIFY_LEVEL
 1

	)

340 
	#__USE_FORTIFY_LEVEL
 0

	)

345 
	~<¡dc-´edef.h
>

353 #undeà
__GNU_LIBRARY__


354 
	#__GNU_LIBRARY__
 6

	)

358 
	#__GLIBC__
 2

	)

359 
	#__GLIBC_MINOR__
 23

	)

361 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

362 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

365 #iâdeà
__ASSEMBLER__


366 #iâdeà
_SYS_CDEFS_H


367 
	~<sys/cdefs.h
>

372 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


373 
	#__USE_LARGEFILE
 1

	)

374 
	#__USE_LARGEFILE64
 1

	)

380 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

381 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

382 && 
defšed
 
	g__ex‹º_šlše


383 
	#__USE_EXTERN_INLINES
 1

	)

391 
	~<gnu/¡ubs.h
>

	@/usr/include/sys/types.h

22 #iâdef 
_SYS_TYPES_H


23 
	#_SYS_TYPES_H
 1

	)

25 
	~<ã©u»s.h
>

27 
	g__BEGIN_DECLS


29 
	~<b™s/ty³s.h
>

31 #ifdef 
__USE_MISC


32 #iâdeà
__u_ch¬_defšed


33 
__u_ch¬
 
	tu_ch¬
;

34 
__u_shÜt
 
	tu_shÜt
;

35 
__u_št
 
	tu_št
;

36 
__u_lÚg
 
	tu_lÚg
;

37 
__quad_t
 
	tquad_t
;

38 
__u_quad_t
 
	tu_quad_t
;

39 
__fsid_t
 
	tfsid_t
;

40 
	#__u_ch¬_defšed


	)

44 
__loff_t
 
	tloff_t
;

46 #iâdeà
__šo_t_defšed


47 #iâdeà
__USE_FILE_OFFSET64


48 
__šo_t
 
	tšo_t
;

50 
__šo64_t
 
	tšo_t
;

52 
	#__šo_t_defšed


	)

54 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


55 
__šo64_t
 
	tšo64_t
;

56 
	#__šo64_t_defšed


	)

59 #iâdeà
__dev_t_defšed


60 
__dev_t
 
	tdev_t
;

61 
	#__dev_t_defšed


	)

64 #iâdeà
__gid_t_defšed


65 
__gid_t
 
	tgid_t
;

66 
	#__gid_t_defšed


	)

69 #iâdeà
__mode_t_defšed


70 
__mode_t
 
	tmode_t
;

71 
	#__mode_t_defšed


	)

74 #iâdeà
__Æšk_t_defšed


75 
__Æšk_t
 
	tÆšk_t
;

76 
	#__Æšk_t_defšed


	)

79 #iâdeà
__uid_t_defšed


80 
__uid_t
 
	tuid_t
;

81 
	#__uid_t_defšed


	)

84 #iâdeà
__off_t_defšed


85 #iâdeà
__USE_FILE_OFFSET64


86 
__off_t
 
	toff_t
;

88 
__off64_t
 
	toff_t
;

90 
	#__off_t_defšed


	)

92 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


93 
__off64_t
 
	toff64_t
;

94 
	#__off64_t_defšed


	)

97 #iâdeà
__pid_t_defšed


98 
__pid_t
 
	tpid_t
;

99 
	#__pid_t_defšed


	)

102 #ià(
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8
) \

103 && !
defšed
 
__id_t_defšed


104 
__id_t
 
	tid_t
;

105 
	#__id_t_defšed


	)

108 #iâdeà
__ssize_t_defšed


109 
__ssize_t
 
	tssize_t
;

110 
	#__ssize_t_defšed


	)

113 #ifdef 
__USE_MISC


114 #iâdeà
__daddr_t_defšed


115 
__daddr_t
 
	tdaddr_t
;

116 
__ÿddr_t
 
	tÿddr_t
;

117 
	#__daddr_t_defšed


	)

121 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


122 
__key_t
 
	tkey_t
;

123 
	#__key_t_defšed


	)

126 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K8


127 
	#__Ãed_şock_t


	)

129 
	#__Ãed_time_t


	)

130 
	#__Ãed_tim”_t


	)

131 
	#__Ãed_şockid_t


	)

132 
	~<time.h
>

134 #ifdeà
__USE_XOPEN


135 #iâdeà
__u£cÚds_t_defšed


136 
__u£cÚds_t
 
	tu£cÚds_t
;

137 
	#__u£cÚds_t_defšed


	)

139 #iâdeà
__su£cÚds_t_defšed


140 
__su£cÚds_t
 
	tsu£cÚds_t
;

141 
	#__su£cÚds_t_defšed


	)

145 
	#__Ãed_size_t


	)

146 
	~<¡ddef.h
>

148 #ifdeà
__USE_MISC


150 
	tulÚg
;

151 
	tushÜt
;

152 
	tušt
;

157 #ià!
__GNUC_PREREQ
 (2, 7)

160 #iâdeà
__št8_t_defšed


161 
	#__št8_t_defšed


	)

162 
	tšt8_t
;

163 
	tšt16_t
;

164 
	tšt32_t
;

165 #ià
__WORDSIZE
 == 64

166 
	tšt64_t
;

168 
__ex‹nsiÚ__
 
	tšt64_t
;

173 
	tu_št8_t
;

174 
	tu_št16_t
;

175 
	tu_št32_t
;

176 #ià
__WORDSIZE
 == 64

177 
	tu_št64_t
;

179 
__ex‹nsiÚ__
 
	tu_št64_t
;

182 
	t»gi¡”_t
;

187 
	#__štN_t
(
N
, 
MODE
) \

188 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

189 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

190 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

192 #iâdeà
	t__št8_t_defšed


193 
	t__št8_t_defšed


	)

194 
	t__štN_t
 (8, 
	t__QI__
);

195 
__štN_t
 (16, 
__HI__
);

196 
__štN_t
 (32, 
__SI__
);

197 
__štN_t
 (64, 
__DI__
);

200 
__u_štN_t
 (8, 
__QI__
);

201 
__u_štN_t
 (16, 
__HI__
);

202 
__u_štN_t
 (32, 
__SI__
);

203 
__u_štN_t
 (64, 
__DI__
);

205 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

211 
	#__BIT_TYPES_DEFINED__
 1

	)

214 #ifdef 
__USE_MISC


216 
	~<’dŸn.h
>

219 
	~<sys/£Ëù.h
>

222 
	~<sys/sysmaüos.h
>

226 #ià(
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K8
) \

227 && !
defšed
 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/xlocale.h

20 #iâdeà
_XLOCALE_H


21 
	#_XLOCALE_H
 1

	)

27 
	s__loÿË_¡ruù


30 
__loÿË_d©a
 *
	m__loÿËs
[13];

33 cÚ¡ *
	m__ùy³_b
;

34 cÚ¡ *
	m__ùy³_tŞow”
;

35 cÚ¡ *
	m__ùy³_touµ”
;

38 cÚ¡ *
	m__Çmes
[13];

39 } *
	t__loÿË_t
;

42 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/bits/byteswap.h

19 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


23 #iâdeà
_BITS_BYTESWAP_H


24 
	#_BITS_BYTESWAP_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

35 
	~<b™s/by‹sw­-16.h
>

38 
	#__bsw­_cÚ¡ªt_32
(
x
) \

39 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

40 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

42 #ifdeà
__GNUC__


43 #ià
__GNUC_PREREQ
 (4, 3)

44 
__šlše
 

45 
	$__bsw­_32
 (
__bsx
)

47  
	`__butš_bsw­32
 (
__bsx
);

48 
	}
}

49 #–ià
__GNUC__
 >= 2

50 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

51 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

52 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

53 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

54 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

55 || 
defšed
 
	g__amdçm10__
)

58 
	#__bsw­_32
(
x
) \

59 (
__ex‹nsiÚ__
 \

60 ({ 
__v
, 
__x
 = (
x
); \

61 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

62 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

64 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

65 
__v
; }))

	)

67 
	#__bsw­_32
(
x
) \

68 (
__ex‹nsiÚ__
 \

69 ({ 
__v
, 
__x
 = (
x
); \

70 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

71 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

73 
	`__asm__
 ("rorw $8, %w0;" \

76 : "ô" (
__v
) \

77 : "0" (
__x
) \

79 
__v
; }))

	)

82 
	#__bsw­_32
(
x
) \

83 (
__ex‹nsiÚ__
 \

84 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

87 
__šlše
 

88 
	$__bsw­_32
 (
__bsx
)

90  
	`__bsw­_cÚ¡ªt_32
 (
__bsx
);

91 
	}
}

95 #ià
__GNUC_PREREQ
 (2, 0)

97 
	#__bsw­_cÚ¡ªt_64
(
x
) \

98 (
	`__ex‹nsiÚ__
 ((((
x
) & 0xff00000000000000ull) >> 56) \

99 | (((
x
) & 0x00ff000000000000ull) >> 40) \

100 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

101 | (((
x
) & 0x000000ff00000000ull) >> 8) \

102 | (((
x
) & 0x00000000ff000000ull) << 8) \

103 | (((
x
) & 0x0000000000ff0000ull) << 24) \

104 | (((
x
) & 0x000000000000ff00ull) << 40) \

105 | (((
x
è& 0x00000000000000ffuÎè<< 56)))

	)

107 #ià
__GNUC_PREREQ
 (4, 3)

108 
__šlše
 
__ušt64_t


109 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

111  
	`__butš_bsw­64
 (
__bsx
);

112 
	}
}

113 #–ià
__WORDSIZE
 == 64

114 
	#__bsw­_64
(
x
) \

115 (
__ex‹nsiÚ__
 \

116 ({ 
__ušt64_t
 
__v
, 
__x
 = (
x
); \

117 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

118 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

120 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

121 
__v
; }))

	)

123 
	#__bsw­_64
(
x
) \

124 (
__ex‹nsiÚ__
 \

125 ({ uniÚ { 
__ex‹nsiÚ__
 
__ušt64_t
 
__Î
; \

126 
__l
[2]; } 
__w
, 
__r
; \

127 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

128 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

131 
__w
.
__Î
 = (
x
); \

132 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

133 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

135 
__r
.
__Î
; }))

	)

138 
	#__bsw­_cÚ¡ªt_64
(
x
) \

139 ((((
x
) & 0xff00000000000000ull) >> 56) \

140 | (((
x
) & 0x00ff000000000000ull) >> 40) \

141 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

142 | (((
x
) & 0x000000ff00000000ull) >> 8) \

143 | (((
x
) & 0x00000000ff000000ull) << 8) \

144 | (((
x
) & 0x0000000000ff0000ull) << 24) \

145 | (((
x
) & 0x000000000000ff00ull) << 40) \

146 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

148 
__šlše
 
__ušt64_t


149 
	$__bsw­_64
 (
__ušt64_t
 
__bsx
)

151  
	`__bsw­_cÚ¡ªt_64
 (
__bsx
);

152 
	}
}

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libm-simd-decl-stubs.h

19 #iâdeà
_MATH_H


33 #iâdeà
_BITS_LIBM_SIMD_DECL_STUBS_H


34 
	#_BITS_LIBM_SIMD_DECL_STUBS_H
 1

	)

36 
	#__DECL_SIMD_cos


	)

37 
	#__DECL_SIMD_cosf


	)

38 
	#__DECL_SIMD_co¦


	)

40 
	#__DECL_SIMD_sš


	)

41 
	#__DECL_SIMD_sšf


	)

42 
	#__DECL_SIMD_sšl


	)

44 
	#__DECL_SIMD_sšcos


	)

45 
	#__DECL_SIMD_sšcosf


	)

46 
	#__DECL_SIMD_sšco¦


	)

48 
	#__DECL_SIMD_log


	)

49 
	#__DECL_SIMD_logf


	)

50 
	#__DECL_SIMD_logl


	)

52 
	#__DECL_SIMD_exp


	)

53 
	#__DECL_SIMD_expf


	)

54 
	#__DECL_SIMD_ex¶


	)

56 
	#__DECL_SIMD_pow


	)

57 
	#__DECL_SIMD_powf


	)

58 
	#__DECL_SIMD_powl


	)

	@/usr/include/bits/pthreadtypes.h

18 #iâdeà
_BITS_PTHREADTYPES_H


19 
	#_BITS_PTHREADTYPES_H
 1

	)

21 
	~<b™s/wÜdsize.h
>

23 #ifdeà
__x86_64__


24 #ià
__WORDSIZE
 == 64

25 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

26 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

27 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

28 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

29 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

30 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

31 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

32 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

33 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

35 
	#__SIZEOF_PTHREAD_ATTR_T
 32

	)

36 
	#__SIZEOF_PTHREAD_MUTEX_T
 32

	)

37 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

38 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

39 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

40 
	#__SIZEOF_PTHREAD_RWLOCK_T
 44

	)

41 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

42 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

43 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

46 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

47 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

48 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

49 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

50 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

51 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

52 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

53 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

54 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

60 
	t±h»ad_t
;

63 
	u±h»ad_©Œ_t


65 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

66 
	m__®ign
;

68 #iâdeà
__have_±h»ad_©Œ_t


69 
±h»ad_©Œ_t
 
	t±h»ad_©Œ_t
;

70 
	#__have_±h»ad_©Œ_t
 1

	)

74 #ifdeà
__x86_64__


75 
	s__±h»ad_š‹º®_li¡


77 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

78 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

79 } 
	t__±h»ad_li¡_t
;

81 
	s__±h»ad_š‹º®_¦i¡


83 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

84 } 
	t__±h»ad_¦i¡_t
;

92 
	s__±h»ad_mu‹x_s


94 
	m__lock
;

95 
	m__couÁ
;

96 
	m__owÃr
;

97 #ifdeà
__x86_64__


98 
	m__nu£rs
;

102 
	m__kšd
;

103 #ifdeà
__x86_64__


104 
	m__¥šs
;

105 
	m__–isiÚ
;

106 
__±h»ad_li¡_t
 
	m__li¡
;

107 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

109 
	#__PTHREAD_SPINS
 0, 0

	)

111 
	m__nu£rs
;

112 
__ex‹nsiÚ__
 union

116 
	m__e¥šs
;

117 
	m__–isiÚ
;

118 
	#__¥šs
 
__–isiÚ_d©a
.
__e¥šs


	)

119 
	#__–isiÚ
 
__–isiÚ_d©a
.
__–isiÚ


	)

120 
	#__PTHREAD_SPINS
 { 0, 0 }

	)

121 } 
	m__–isiÚ_d©a
;

122 
__±h»ad_¦i¡_t
 
	m__li¡
;

125 } 
	m__d©a
;

126 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

127 
	m__®ign
;

128 } 
	t±h»ad_mu‹x_t
;

132 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

133 
	m__®ign
;

134 } 
	t±h»ad_mu‹x©Œ_t
;

143 
	m__lock
;

144 
	m__fu‹x
;

145 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

146 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

147 
__ex‹nsiÚ__
 
	m__wok’_£q
;

148 *
	m__mu‹x
;

149 
	m__nwa™”s
;

150 
	m__brßdÿ¡_£q
;

151 } 
	m__d©a
;

152 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

153 
__ex‹nsiÚ__
 
	m__®ign
;

154 } 
	t±h»ad_cÚd_t
;

158 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

159 
	m__®ign
;

160 } 
	t±h»ad_cÚd©Œ_t
;

164 
	t±h»ad_key_t
;

168 
	t±h»ad_Úû_t
;

171 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


176 #ifdeà
__x86_64__


179 
	m__lock
;

180 
	m__Ä_»ad”s
;

181 
	m__»ad”s_wakeup
;

182 
	m__wr™”_wakeup
;

183 
	m__Ä_»ad”s_queued
;

184 
	m__Ä_wr™”s_queued
;

185 
	m__wr™”
;

186 
	m__sh¬ed
;

187 sigÃd 
	m__rw–isiÚ
;

188 #ifdeà 
__ILP32__


189 
	m__·d1
[3];

190 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0 }

	)

192 
	m__·d1
[7];

193 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0, { 0, 0, 0, 0, 0, 0, 0 }

	)

195 
	m__·d2
;

198 
	m__æags
;

199 
	#__PTHREAD_RWLOCK_INT_FLAGS_SHARED
 1

	)

200 } 
	m__d©a
;

204 
	m__lock
;

205 
	m__Ä_»ad”s
;

206 
	m__»ad”s_wakeup
;

207 
	m__wr™”_wakeup
;

208 
	m__Ä_»ad”s_queued
;

209 
	m__Ä_wr™”s_queued
;

212 
	m__æags
;

213 
	m__sh¬ed
;

214 sigÃd 
	m__rw–isiÚ
;

215 
	#__PTHREAD_RWLOCK_ELISION_EXTRA
 0

	)

216 
	m__·d2
;

217 
	m__wr™”
;

218 } 
	m__d©a
;

220 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

221 
	m__®ign
;

222 } 
	t±h»ad_rwlock_t
;

226 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

227 
	m__®ign
;

228 } 
	t±h»ad_rwlock©Œ_t
;

232 #ifdeà
__USE_XOPEN2K


234 vŞ©
	t±h»ad_¥šlock_t
;

241 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

242 
	m__®ign
;

243 } 
	t±h»ad_b¬r›r_t
;

247 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

248 
	m__®ign
;

249 } 
	t±h»ad_b¬r›¿‰r_t
;

253 #iâdeà
__x86_64__


255 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/typesizes.h

19 #iâdeà
_BITS_TYPES_H


23 #iâdef 
_BITS_TYPESIZES_H


24 
	#_BITS_TYPESIZES_H
 1

	)

30 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


31 
	#__SYSCALL_SLONG_TYPE
 
__SQUAD_TYPE


	)

32 
	#__SYSCALL_ULONG_TYPE
 
__UQUAD_TYPE


	)

34 
	#__SYSCALL_SLONG_TYPE
 
__SLONGWORD_TYPE


	)

35 
	#__SYSCALL_ULONG_TYPE
 
__ULONGWORD_TYPE


	)

38 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

39 
	#__UID_T_TYPE
 
__U32_TYPE


	)

40 
	#__GID_T_TYPE
 
__U32_TYPE


	)

41 
	#__INO_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

42 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

43 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

44 #ifdeà
__x86_64__


45 
	#__NLINK_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

46 
	#__FSWORD_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

48 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

49 
	#__FSWORD_T_TYPE
 
__SWORD_TYPE


	)

51 
	#__OFF_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

52 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

53 
	#__PID_T_TYPE
 
__S32_TYPE


	)

54 
	#__RLIM_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

55 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

56 
	#__BLKCNT_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

57 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

58 
	#__FSBLKCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

59 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

60 
	#__FSFILCNT_T_TYPE
 
__SYSCALL_ULONG_TYPE


	)

61 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

62 
	#__ID_T_TYPE
 
__U32_TYPE


	)

63 
	#__CLOCK_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

64 
	#__TIME_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

65 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

66 
	#__SUSECONDS_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

67 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

68 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

69 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

70 
	#__TIMER_T_TYPE
 *

	)

71 
	#__BLKSIZE_T_TYPE
 
__SYSCALL_SLONG_TYPE


	)

72 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

73 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

74 
	#__CPU_MASK_TYPE
 
__SYSCALL_ULONG_TYPE


	)

76 #ifdeà
__x86_64__


80 
	#__OFF_T_MATCHES_OFF64_T
 1

	)

83 
	#__INO_T_MATCHES_INO64_T
 1

	)

87 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__
 && !defšed 
__ILP32__


4 
	#__WORDSIZE
 64

	)

6 
	#__WORDSIZE
 32

	)

9 #ifdeà
__x86_64__


10 
	#__WORDSIZE_TIME64_COMPAT32
 1

	)

12 
	#__SYSCALL_WORDSIZE
 64

	)

	@/usr/include/gnu/stubs.h

6 #ià!
defšed
 
__x86_64__


7 
	~<gnu/¡ubs-32.h
>

9 #ià
defšed
 
__x86_64__
 && defšed 
__LP64__


10 
	~<gnu/¡ubs-64.h
>

12 #ià
defšed
 
__x86_64__
 && defšed 
__ILP32__


13 
	~<gnu/¡ubs-x32.h
>

	@/usr/include/stdc-predef.h

18 #iâdef 
_STDC_PREDEF_H


19 
	#_STDC_PREDEF_H
 1

	)

36 #ifdeà
__GCC_IEC_559


37 #ià
__GCC_IEC_559
 > 0

38 
	#__STDC_IEC_559__
 1

	)

41 
	#__STDC_IEC_559__
 1

	)

44 #ifdeà
__GCC_IEC_559_COMPLEX


45 #ià
__GCC_IEC_559_COMPLEX
 > 0

46 
	#__STDC_IEC_559_COMPLEX__
 1

	)

49 
	#__STDC_IEC_559_COMPLEX__
 1

	)

55 
	#__STDC_ISO_10646__
 201505L

	)

58 
	#__STDC_NO_THREADS__
 1

	)

	@/usr/include/sys/cdefs.h

18 #iâdef 
_SYS_CDEFS_H


19 
	#_SYS_CDEFS_H
 1

	)

22 #iâdeà
_FEATURES_H


23 
	~<ã©u»s.h
>

29 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


34 #undeà
__P


35 #undeà
__PMT


37 #ifdeà
__GNUC__


41 #ià
__GNUC_PREREQ
 (4, 6è&& !
defšed
 
_LIBC


42 
	#__LEAF
 , 
__Ëaf__


	)

43 
	#__LEAF_ATTR
 
	`__©Œibu‹__
 ((
__Ëaf__
))

	)

45 
	#__LEAF


	)

46 
	#__LEAF_ATTR


	)

54 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

55 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
))

	)

56 
	#__THROWNL
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

57 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
 
__LEAF
)è
	)
fct

59 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

60 
	#__THROW
 
	`throw
 ()

	)

61 
	#__THROWNL
 
	`throw
 ()

	)

62 
	#__NTH
(
fù
è
__LEAF_ATTR
 fù 
	`throw
 ()

	)

64 
	#__THROW


	)

65 
	#__THROWNL


	)

66 
	#__NTH
(
fù
è
	)
fct

72 
	#__šlše


	)

74 
	#__THROW


	)

75 
	#__THROWNL


	)

76 
	#__NTH
(
fù
è
	)
fct

82 
	#__P
(
¬gs
è
	)
args

83 
	#__PMT
(
¬gs
è
	)
args

88 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

89 
	#__STRING
(
x
è#x

	)

92 
	#__±r_t
 *

	)

93 
	#__lÚg_doubË_t
 

	)

97 #ifdef 
__ılu¥lus


98 
	#__BEGIN_DECLS
 "C" {

	)

99 
	#__END_DECLS
 }

	)

101 
	#__BEGIN_DECLS


	)

102 
	#__END_DECLS


	)

111 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


112 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

113 
	#__END_NAMESPACE_STD
 }

	)

114 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

115 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

116 
	#__END_NAMESPACE_C99
 }

	)

117 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

122 
	#__BEGIN_NAMESPACE_STD


	)

123 
	#__END_NAMESPACE_STD


	)

124 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

125 
	#__BEGIN_NAMESPACE_C99


	)

126 
	#__END_NAMESPACE_C99


	)

127 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3)

136 
	#__w¬ndeş
(
Çme
, 
msg
) \

137 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

138 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

139 
	#__”rÜdeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

142 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

143 
	#__w¬Ç‰r
(
msg
)

	)

144 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

148 #ià
__GNUC_PREREQ
 (2,97)

150 
	#__æex¬r
 []

	)

152 #ifdeà
__GNUC__


153 
	#__æex¬r
 [0]

	)

155 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__æex¬r
 []

	)

159 
	#__æex¬r
 [1]

	)

175 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 #ifdeà
__ılu¥lus


179 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

180 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

181 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

182 
Çme
 
´Ùo
 
__THROWNL
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

184 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

185 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

186 
	#__REDIRECT_NTHNL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

187 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROWNL


	)

189 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

190 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

203 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

204 
	#__©Œibu‹__
(
xyz
è

	)

210 #ià
__GNUC_PREREQ
 (2,96)

211 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

213 
	#__©Œibu‹_m®loc__


	)

218 #ià
__GNUC_PREREQ
 (4, 3)

219 
	#__©Œibu‹_®loc_size__
(
·¿ms
) \

220 
	`__©Œibu‹__
 ((
__®loc_size__
 
·¿ms
))

	)

222 
	#__©Œibu‹_®loc_size__
(
·¿ms
è

	)

228 #ià
__GNUC_PREREQ
 (2,96)

229 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

231 
	#__©Œibu‹_pu»__


	)

235 #ià
__GNUC_PREREQ
 (2,5)

236 
	#__©Œibu‹_cÚ¡__
 
	`__©Œibu‹__
 ((
__cÚ¡__
))

	)

238 
	#__©Œibu‹_cÚ¡__


	)

244 #ià
__GNUC_PREREQ
 (3,1)

245 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

246 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

248 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

249 
	#__©Œibu‹_nošlše__


	)

253 #ià
__GNUC_PREREQ
 (3,2)

254 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

256 
	#__©Œibu‹_d•»ÿ‹d__


	)

265 #ià
__GNUC_PREREQ
 (2,8)

266 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

268 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

275 #ià
__GNUC_PREREQ
 (2,97)

276 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

277 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

279 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

284 #ià
__GNUC_PREREQ
 (3,3)

285 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

287 
	#__nÚnuÎ
(
·¿ms
)

	)

292 #ià
__GNUC_PREREQ
 (3,4)

293 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

294 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

295 #ià
__USE_FORTIFY_LEVEL
 > 0

296 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

299 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

301 #iâdeà
__wur


302 
	#__wur


	)

306 #ià
__GNUC_PREREQ
 (3,2)

307 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

309 
	#__®ways_šlše
 
__šlše


	)

314 #ià
__GNUC_PREREQ
 (4,3)

315 
	#__©Œibu‹_¬tificŸl__
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

317 
	#__©Œibu‹_¬tificŸl__


	)

329 #ià(!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3) \

330 || (
defšed
 
__şªg__
 && (defšed 
__GNUC_STDC_INLINE__
 \

331 || 
defšed
 
__GNUC_GNU_INLINE__
)))

332 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


333 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

334 
	#__ex‹º_®ways_šlše
 \

335 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

337 
	#__ex‹º_šlše
 
__šlše


	)

338 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

342 #ifdeà
__ex‹º_®ways_šlše


343 
	#__fÜtify_funùiÚ
 
__ex‹º_®ways_šlše
 
__©Œibu‹_¬tificŸl__


	)

348 #ià
__GNUC_PREREQ
 (4,3)

349 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

350 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

357 #ià!
__GNUC_PREREQ
 (2,8)

358 
	#__ex‹nsiÚ__


	)

362 #ià!
__GNUC_PREREQ
 (2,92)

363 
	#__»¡riù


	)

369 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


370 
	#__»¡riù_¬r
 
__»¡riù


	)

372 #ifdeà
__GNUC__


373 
	#__»¡riù_¬r


	)

375 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

376 
	#__»¡riù_¬r
 
»¡riù


	)

379 
	#__»¡riù_¬r


	)

384 #ià
__GNUC__
 >= 3

385 
	#__glibc_uÆik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 0)

	)

386 
	#__glibc_lik–y
(
cÚd
è
	`__butš_ex³ù
 ((cÚd), 1)

	)

388 
	#__glibc_uÆik–y
(
cÚd
è(cÚd)

	)

389 
	#__glibc_lik–y
(
cÚd
è(cÚd)

	)

392 #ià(!
defšed
 
_NÜ‘uº
 \

393 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

394 && !
	$__GNUC_PREREQ
 (4,7))

395 #ià
	`__GNUC_PREREQ
 (2,8)

396 
	#_NÜ‘uº
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

	)

398 
	#_NÜ‘uº


	)

402 #ià(!
defšed
 
_Stic_as£¹
 && !defšed 
__ılu¥lus
 \

403 && (
defšed
 
__STDC_VERSION__
 ? __STDC_VERSION__ : 0) < 201112 \

404 && (!
	`__GNUC_PREREQ
 (4, 6è|| 
defšed
 
__STRICT_ANSI__
))

405 
	#_Stic_as£¹
(
ex´
, 
dŸgno¡ic
) \

406 (*
	`__Stic_as£¹_funùiÚ
 ()) \

407 [!! (¡ruù { 
__”rÜ_if_Ãg©ive
: (
ex´
è? 2 : -1; })]

	)

410 
	~<b™s/wÜdsize.h
>

412 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


413 
	#__LDBL_COMPAT
 1

	)

414 #ifdeà
__REDIRECT


415 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

416 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

417 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

418 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

419 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

420 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

421 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

422 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

423 
	#__LDBL_REDIR_DECL
(
Çme
) \

424 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

425 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

426 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

427 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

428 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

431 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


432 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

433 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

434 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

435 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

436 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

437 #ifdeà
__REDIRECT


438 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

439 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

440 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/sys/select.h

21 #iâdeà
_SYS_SELECT_H


22 
	#_SYS_SELECT_H
 1

	)

24 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

30 
	~<b™s/£Ëù.h
>

33 
	~<b™s/sig£t.h
>

35 #iâdeà
__sig£t_t_defšed


36 
	#__sig£t_t_defšed


	)

37 
__sig£t_t
 
	tsig£t_t
;

41 
	#__Ãed_time_t


	)

42 
	#__Ãed_time¥ec


	)

43 
	~<time.h
>

44 
	#__Ãed_timev®


	)

45 
	~<b™s/time.h
>

47 #iâdeà
__su£cÚds_t_defšed


48 
__su£cÚds_t
 
	tsu£cÚds_t
;

49 
	#__su£cÚds_t_defšed


	)

54 
	t__fd_mask
;

57 #undeà
__NFDBITS


59 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

60 
	#__FD_ELT
(
d
è((dè/ 
__NFDBITS
)

	)

61 
	#__FD_MASK
(
d
è((
__fd_mask
è(1UL << ((dè% 
__NFDBITS
)))

	)

68 #ifdeà
__USE_XOPEN


69 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

70 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

72 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

75 } 
	tfd_£t
;

78 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

80 #ifdeà
__USE_MISC


82 
__fd_mask
 
	tfd_mask
;

85 
	#NFDBITS
 
__NFDBITS


	)

90 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

91 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

92 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

93 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

96 
__BEGIN_DECLS


106 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

107 
fd_£t
 *
__»¡riù
 
__wr™efds
,

108 
fd_£t
 *
__»¡riù
 
__exû±fds
,

109 
timev®
 *
__»¡riù
 
__timeout
);

111 #ifdeà
__USE_XOPEN2K


118 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

119 
fd_£t
 *
__»¡riù
 
__wr™efds
,

120 
fd_£t
 *
__»¡riù
 
__exû±fds
,

121 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

122 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

127 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__GNUC__


128 
	~<b™s/£Ëù2.h
>

131 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

19 #iâdeà
_SYS_SYSMACROS_H


20 
	#_SYS_SYSMACROS_H
 1

	)

22 
	~<ã©u»s.h
>

24 
__BEGIN_DECLS


26 
__ex‹nsiÚ__


27 
	$gnu_dev_majÜ
 (
__dev
)

28 
__THROW
 
__©Œibu‹_cÚ¡__
;

29 
__ex‹nsiÚ__


30 
	$gnu_dev_mšÜ
 (
__dev
)

31 
__THROW
 
__©Œibu‹_cÚ¡__
;

32 
__ex‹nsiÚ__


33 
	$gnu_dev_makedev
 (
__majÜ
,

34 
__mšÜ
)

35 
__THROW
 
__©Œibu‹_cÚ¡__
;

37 #ifdeà
__USE_EXTERN_INLINES


38 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

39 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

41  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

42 
	}
}

44 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

45 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

47  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

48 
	}
}

50 
__ex‹nsiÚ__
 
__ex‹º_šlše
 
__©Œibu‹_cÚ¡__
 

51 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

53  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

54 | (((è(
__mšÜ
 & ~0xff)) << 12)

55 | (((è(
__majÜ
 & ~0xfff)) << 32));

56 
	}
}

58 
	g__END_DECLS


61 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

62 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

63 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/time.h

22 #iâdef 
_TIME_H


24 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

25 ! 
defšed
 
	g__Ãed_time¥ec
)

26 
	#_TIME_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


33 #ifdef 
_TIME_H


35 
	#__Ãed_size_t


	)

36 
	#__Ãed_NULL


	)

37 
	~<¡ddef.h
>

41 
	~<b™s/time.h
>

44 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


45 #iâdeà
CLK_TCK


46 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

52 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

53 
	#__şock_t_defšed
 1

	)

55 
	~<b™s/ty³s.h
>

57 
__BEGIN_NAMESPACE_STD


59 
__şock_t
 
	tşock_t
;

60 
	g__END_NAMESPACE_STD


61 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


62 
	$__USING_NAMESPACE_STD
(
şock_t
)

66 #undeà
__Ãed_şock_t


68 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

69 
	#__time_t_defšed
 1

	)

71 
	~<b™s/ty³s.h
>

73 
__BEGIN_NAMESPACE_STD


75 
__time_t
 
	ttime_t
;

76 
__END_NAMESPACE_STD


77 #ifdeà
__USE_POSIX


78 
	$__USING_NAMESPACE_STD
(
time_t
)

82 #undeà
__Ãed_time_t


84 #ià!
defšed
 
__şockid_t_defšed
 && \

85 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

86 
	#__şockid_t_defšed
 1

	)

88 
	~<b™s/ty³s.h
>

91 
__şockid_t
 
	tşockid_t
;

94 #undeà
__şockid_time_t


96 #ià!
defšed
 
__tim”_t_defšed
 && \

97 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

98 
	#__tim”_t_defšed
 1

	)

100 
	~<b™s/ty³s.h
>

103 
__tim”_t
 
	ttim”_t
;

106 #undeà
__Ãed_tim”_t


109 #ià(!
defšed
 
__time¥ec_defšed
 \

110 && ((
defšed
 
_TIME_H
 \

111 && (
defšed
 
__USE_POSIX199309
 \

112 || 
defšed
 
__USE_ISOC11
)) \

113 || 
defšed
 
__Ãed_time¥ec
))

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
__sysÿÎ_¦Úg_t
 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_MISC


146 
tm_gmtoff
;

147 cÚ¡ *
tm_zÚe
;

149 
__tm_gmtoff
;

150 cÚ¡ *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 #ifdeà
__USE_ISOC11


182 
	#TIME_UTC
 1

	)

186 
__BEGIN_NAMESPACE_STD


189 
şock_t
 
	$şock
 (è
__THROW
;

192 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

195 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

196 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

199 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

205 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

206 cÚ¡ *
__»¡riù
 
__fÜm©
,

207 cÚ¡ 
tm
 *
__»¡riù
 
__
è
__THROW
;

208 
__END_NAMESPACE_STD


210 #ifdeà
__USE_XOPEN


213 *
	$¡½time
 (cÚ¡ *
__»¡riù
 
__s
,

214 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
)

215 
__THROW
;

218 #ifdeà
__USE_XOPEN2K8


221 
	~<xloÿË.h
>

223 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

224 cÚ¡ *
__»¡riù
 
__fÜm©
,

225 cÚ¡ 
tm
 *
__»¡riù
 
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

229 #ifdeà
__USE_GNU


230 *
	$¡½time_l
 (cÚ¡ *
__»¡riù
 
__s
,

231 cÚ¡ *
__»¡riù
 
__fmt
, 
tm
 *
__
,

232 
__loÿË_t
 
__loc
è
__THROW
;

236 
__BEGIN_NAMESPACE_STD


239 
tm
 *
	$gmtime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

243 
tm
 *
	$loÿÉime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

244 
__END_NAMESPACE_STD


246 #ifdeà
__USE_POSIX


249 
tm
 *
	$gmtime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

250 
tm
 *
__»¡riù
 
__
è
__THROW
;

254 
tm
 *
	$loÿÉime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

255 
tm
 *
__»¡riù
 
__
è
__THROW
;

258 
__BEGIN_NAMESPACE_STD


261 *
	$asùime
 (cÚ¡ 
tm
 *
__
è
__THROW
;

264 *
	$ùime
 (cÚ¡ 
time_t
 *
__tim”
è
__THROW
;

265 
__END_NAMESPACE_STD


267 #ifdeà
__USE_POSIX


272 *
	$asùime_r
 (cÚ¡ 
tm
 *
__»¡riù
 
__
,

273 *
__»¡riù
 
__buf
è
__THROW
;

276 *
	$ùime_r
 (cÚ¡ 
time_t
 *
__»¡riù
 
__tim”
,

277 *
__»¡riù
 
__buf
è
__THROW
;

282 *
__tzÇme
[2];

283 
__daylight
;

284 
__timezÚe
;

287 #ifdef 
__USE_POSIX


289 *
tzÇme
[2];

293 
	$tz£t
 (è
__THROW
;

296 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


297 
daylight
;

298 
timezÚe
;

301 #ifdeà
__USE_MISC


304 
	$¡ime
 (cÚ¡ 
time_t
 *
__wh’
è
__THROW
;

310 
	#__i¦—p
(
y—r
) \

311 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

314 #ifdeà
__USE_MISC


319 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

322 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

325 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

329 #ifdeà
__USE_POSIX199309


334 
	`Çno¦“p
 (cÚ¡ 
time¥ec
 *
__»que¡ed_time
,

335 
time¥ec
 *
__»maššg
);

339 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

342 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

345 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, cÚ¡ 
time¥ec
 *
__
)

346 
__THROW
;

348 #ifdeà
__USE_XOPEN2K


353 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

354 cÚ¡ 
time¥ec
 *
__»q
,

355 
time¥ec
 *
__»m
);

358 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

363 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

364 
sigev’t
 *
__»¡riù
 
__evp
,

365 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

368 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

371 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

372 cÚ¡ 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

373 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

376 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

377 
__THROW
;

380 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

384 #ifdeà
__USE_ISOC11


386 
	$time¥ec_g‘
 (
time¥ec
 *
__ts
, 
__ba£
)

387 
__THROW
 
	`__nÚnuÎ
 ((1));

391 #ifdeà
__USE_XOPEN_EXTENDED


403 
g‘d©e_”r
;

412 
tm
 *
	`g‘d©e
 (cÚ¡ *
__¡ršg
);

415 #ifdeà
__USE_GNU


426 
	`g‘d©e_r
 (cÚ¡ *
__»¡riù
 
__¡ršg
,

427 
tm
 *
__»¡riù
 
__»sbuå
);

430 
__END_DECLS


	@/usr/include/bits/byteswap-16.h

19 #iâdeà
_BITS_BYTESWAP_H


23 #ifdeà
__GNUC__


24 #ià
__GNUC__
 >= 2

25 
	#__bsw­_16
(
x
) \

26 (
__ex‹nsiÚ__
 \

27 ({ 
__v
, 
__x
 = (è(
x
); \

28 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

29 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

31 
	`__asm__
 ("rorw $8, %w0" \

32 : "ô" (
__v
) \

33 : "0" (
__x
) \

35 
__v
; }))

	)

38 
	#__bsw­_16
(
x
) \

39 (
__ex‹nsiÚ__
 \

40 ({ 
__x
 = (è(
x
); \

41 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

44 
__šlše
 

45 
	$__bsw­_16
 (
__bsx
)

47  
	`__bsw­_cÚ¡ªt_16
 (
__bsx
);

48 
	}
}

	@/usr/include/bits/select.h

18 #iâdeà
_SYS_SELECT_H


22 
	~<b™s/wÜdsize.h
>

25 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

27 #ià
__WORDSIZE
 == 64

28 
	#__FD_ZERO_STOS
 "¡osq"

	)

30 
	#__FD_ZERO_STOS
 "¡o¦"

	)

33 
	#__FD_ZERO
(
fd¥
) \

35 
__d0
, 
__d1
; \

36 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

37 : "=c" (
__d0
), "=D" (
__d1
) \

38 : "a" (0), "0" ( (
fd_£t
) \

39 /  (
__fd_mask
)), \

40 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

42 } 0)

	)

48 
	#__FD_ZERO
(
£t
) \

50 
__i
; \

51 
fd_£t
 *
__¬r
 = (
£t
); \

52 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

53 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

54 } 0)

	)

58 
	#__FD_SET
(
d
, 
£t
) \

59 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] |ğ
	`__FD_MASK
 (d)))

	)

60 
	#__FD_CLR
(
d
, 
£t
) \

61 ((è(
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] &ğ~
	`__FD_MASK
 (d)))

	)

62 
	#__FD_ISSET
(
d
, 
£t
) \

63 ((
	`__FDS_BITS
 (
£t
)[
	`__FD_ELT
 (
d
)] & 
	`__FD_MASK
 (d)è!ğ0)

	)

	@/usr/include/bits/select2.h

19 #iâdeà
_SYS_SELECT_H


24 
__fd–t_chk
 (
__d
);

25 
	$__fd–t_w¬n
 (
__d
)

26 
	`__w¬Ç‰r
 ("bit outside of fd_set selected");

27 #undeà
__FD_ELT


28 
	#__FD_ELT
(
d
) \

29 
__ex‹nsiÚ__
 \

30 ({ 
__d
 = (
d
); \

31 (
	`__butš_cÚ¡ªt_p
 (
__d
) \

32 ? (0 <ğ
__d
 && __d < 
__FD_SETSIZE
 \

33 ? (
__d
 / 
__NFDBITS
) \

34 : 
	`__fd–t_w¬n
 (
__d
)) \

35 : 
	`__fd–t_chk
 (
__d
)); 
	}
})

	)

	@/usr/include/bits/sigset.h

19 #iâdef 
_SIGSET_H_ty³s


20 
	#_SIGSET_H_ty³s
 1

	)

22 
	t__sig_©omic_t
;

26 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

29 
	m__v®
[
_SIGSET_NWORDS
];

30 } 
	t__sig£t_t
;

41 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


42 
	#_SIGSET_H_âs
 1

	)

44 #iâdeà
_EXTERN_INLINE


45 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

49 
	#__sigmask
(
sig
) \

50 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

53 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

55 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

56 
	#__sigem±y£t
(
£t
) \

57 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

58 
sig£t_t
 *
__£t
 = (
£t
); \

59 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

60 0; }))

	)

61 
	#__sigfl£t
(
£t
) \

62 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

63 
sig£t_t
 *
__£t
 = (
£t
); \

64 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

65 0; }))

	)

67 #ifdeà
__USE_GNU


71 
	#__sigi£m±y£t
(
£t
) \

72 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

73 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

74 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

75 !
__»t
 && --
__út
 >= 0) \

76 
__»t
 = 
__£t
->
__v®
[
__út
]; \

77 
__»t
 =ğ0; }))

	)

78 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

79 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

80 
sig£t_t
 *
__de¡
 = (
de¡
); \

81 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

82 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

83 --
__út
 >= 0) \

84 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

85 & 
__right
->
__v®
[
__út
]); \

86 0; }))

	)

87 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

88 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

89 
sig£t_t
 *
__de¡
 = (
de¡
); \

90 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

91 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

92 --
__út
 >= 0) \

93 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

94 | 
__right
->
__v®
[
__út
]); \

95 0; }))

	)

102 
__sigismemb”
 (cÚ¡ 
__sig£t_t
 *, );

103 
__sigadd£t
 (
__sig£t_t
 *, );

104 
__sigd–£t
 (
__sig£t_t
 *, );

106 #ifdeà
__USE_EXTERN_INLINES


107 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

108 
_EXTERN_INLINE
 \

109 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

111 
__mask
 = 
	`__sigmask
 (
__sig
); \

112 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

113  
BODY
; \

114 }

	)

116 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
) ? 1 : 0, const)

117 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

118 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

120 #undeà
__SIGSETFN


	@/usr/include/bits/time.h

23 #ià
defšed
 
__Ãed_timev®
 || defšed 
__USE_GNU


24 #iâdeà
_STRUCT_TIMEVAL


25 
	#_STRUCT_TIMEVAL
 1

	)

26 
	~<b™s/ty³s.h
>

30 
	stimev®


32 
__time_t
 
	mtv_£c
;

33 
__su£cÚds_t
 
	mtv_u£c
;

38 #iâdeà
__Ãed_timev®


39 #iâdeà
_BITS_TIME_H


40 
	#_BITS_TIME_H
 1

	)

48 
	#CLOCKS_PER_SEC
 ((
şock_t
è1000000)

	)

50 #ià(!
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_POSIX
) \

51 && !
defšed
 
	g__USE_XOPEN2K


54 
	~<b™s/ty³s.h
>

55 
__syscÚf
 ();

56 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

59 #ifdeà
__USE_POSIX199309


61 
	#CLOCK_REALTIME
 0

	)

63 
	#CLOCK_MONOTONIC
 1

	)

65 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

67 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

69 
	#CLOCK_MONOTONIC_RAW
 4

	)

71 
	#CLOCK_REALTIME_COARSE
 5

	)

73 
	#CLOCK_MONOTONIC_COARSE
 6

	)

75 
	#CLOCK_BOOTTIME
 7

	)

77 
	#CLOCK_REALTIME_ALARM
 8

	)

79 
	#CLOCK_BOOTTIME_ALARM
 9

	)

81 
	#CLOCK_TAI
 11

	)

84 
	#TIMER_ABSTIME
 1

	)

87 #ifdeà
__USE_GNU


88 
	~<b™s/timex.h
>

90 
__BEGIN_DECLS


93 
	$şock_adjtime
 (
__şockid_t
 
__şock_id
, 
timex
 *
__utx
è
__THROW
;

95 
__END_DECLS


101 #undeà
__Ãed_timev®


	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub_chæags


	)

11 
	#__¡ub_ç‰ach


	)

12 
	#__¡ub_fchæags


	)

13 
	#__¡ub_fd‘ach


	)

14 
	#__¡ub_g‰y


	)

15 
	#__¡ub_lchmod


	)

16 
	#__¡ub_»voke


	)

17 
	#__¡ub_£ogš


	)

18 
	#__¡ub_sig»tuº


	)

19 
	#__¡ub_s¡k


	)

20 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-64.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub_chæags


	)

12 
	#__¡ub_ç‰ach


	)

13 
	#__¡ub_fchæags


	)

14 
	#__¡ub_fd‘ach


	)

15 
	#__¡ub_g‘msg


	)

16 
	#__¡ub_g‰y


	)

17 
	#__¡ub_lchmod


	)

18 
	#__¡ub_putmsg


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/gnu/stubs-x32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___com·t_bdæush


	)

11 
	#__¡ub___com·t_ü—‹_moduË


	)

12 
	#__¡ub___com·t_g‘_k”Ãl_syms


	)

13 
	#__¡ub___com·t_qu”y_moduË


	)

14 
	#__¡ub___com·t_u£lib


	)

15 
	#__¡ub_chæags


	)

16 
	#__¡ub_ç‰ach


	)

17 
	#__¡ub_fchæags


	)

18 
	#__¡ub_fd‘ach


	)

19 
	#__¡ub_g‘msg


	)

20 
	#__¡ub_g‰y


	)

21 
	#__¡ub_lchmod


	)

22 
	#__¡ub_nfs£rvùl


	)

23 
	#__¡ub_putmsg


	)

24 
	#__¡ub_»voke


	)

25 
	#__¡ub_£ogš


	)

26 
	#__¡ub_sig»tuº


	)

27 
	#__¡ub_s¡k


	)

28 
	#__¡ub_¡ty


	)

	@/usr/include/bits/timex.h

18 #iâdef 
_BITS_TIMEX_H


19 
	#_BITS_TIMEX_H
 1

	)

21 
	~<b™s/ty³s.h
>

25 
	stimex


27 
	mmodes
;

28 
__sysÿÎ_¦Úg_t
 
	moff£t
;

29 
__sysÿÎ_¦Úg_t
 
	mäeq
;

30 
__sysÿÎ_¦Úg_t
 
	mmax”rÜ
;

31 
__sysÿÎ_¦Úg_t
 
	me¡”rÜ
;

32 
	m¡©us
;

33 
__sysÿÎ_¦Úg_t
 
	mcÚ¡ªt
;

34 
__sysÿÎ_¦Úg_t
 
	m´ecisiÚ
;

35 
__sysÿÎ_¦Úg_t
 
	mtŞ”ªû
;

36 
timev®
 
	mtime
;

37 
__sysÿÎ_¦Úg_t
 
	mtick
;

38 
__sysÿÎ_¦Úg_t
 
	mµsäeq
;

39 
__sysÿÎ_¦Úg_t
 
	mj™‹r
;

40 
	mshiá
;

41 
__sysÿÎ_¦Úg_t
 
	m¡ab
;

42 
__sysÿÎ_¦Úg_t
 
	mj™út
;

43 
__sysÿÎ_¦Úg_t
 
	mÿlút
;

44 
__sysÿÎ_¦Úg_t
 
	m”rút
;

45 
__sysÿÎ_¦Úg_t
 
	m¡bút
;

47 
	mi
;

56 
	#ADJ_OFFSET
 0x0001

	)

57 
	#ADJ_FREQUENCY
 0x0002

	)

58 
	#ADJ_MAXERROR
 0x0004

	)

59 
	#ADJ_ESTERROR
 0x0008

	)

60 
	#ADJ_STATUS
 0x0010

	)

61 
	#ADJ_TIMECONST
 0x0020

	)

62 
	#ADJ_TAI
 0x0080

	)

63 
	#ADJ_SETOFFSET
 0x0100

	)

64 
	#ADJ_MICRO
 0x1000

	)

65 
	#ADJ_NANO
 0x2000

	)

66 
	#ADJ_TICK
 0x4000

	)

67 
	#ADJ_OFFSET_SINGLESHOT
 0x8001

	)

68 
	#ADJ_OFFSET_SS_READ
 0xa001

	)

71 
	#MOD_OFFSET
 
ADJ_OFFSET


	)

72 
	#MOD_FREQUENCY
 
ADJ_FREQUENCY


	)

73 
	#MOD_MAXERROR
 
ADJ_MAXERROR


	)

74 
	#MOD_ESTERROR
 
ADJ_ESTERROR


	)

75 
	#MOD_STATUS
 
ADJ_STATUS


	)

76 
	#MOD_TIMECONST
 
ADJ_TIMECONST


	)

77 
	#MOD_CLKB
 
ADJ_TICK


	)

78 
	#MOD_CLKA
 
ADJ_OFFSET_SINGLESHOT


	)

79 
	#MOD_TAI
 
ADJ_TAI


	)

80 
	#MOD_MICRO
 
ADJ_MICRO


	)

81 
	#MOD_NANO
 
ADJ_NANO


	)

85 
	#STA_PLL
 0x0001

	)

86 
	#STA_PPSFREQ
 0x0002

	)

87 
	#STA_PPSTIME
 0x0004

	)

88 
	#STA_FLL
 0x0008

	)

90 
	#STA_INS
 0x0010

	)

91 
	#STA_DEL
 0x0020

	)

92 
	#STA_UNSYNC
 0x0040

	)

93 
	#STA_FREQHOLD
 0x0080

	)

95 
	#STA_PPSSIGNAL
 0x0100

	)

96 
	#STA_PPSJITTER
 0x0200

	)

97 
	#STA_PPSWANDER
 0x0400

	)

98 
	#STA_PPSERROR
 0x0800

	)

100 
	#STA_CLOCKERR
 0x1000

	)

101 
	#STA_NANO
 0x2000

	)

102 
	#STA_MODE
 0x4000

	)

103 
	#STA_CLK
 0x8000

	)

106 
	#STA_RONLY
 (
STA_PPSSIGNAL
 | 
STA_PPSJITTER
 | 
STA_PPSWANDER
 | \

107 
STA_PPSERROR
 | 
STA_CLOCKERR
 | 
STA_NANO
 | 
STA_MODE
 | 
STA_CLK
)

	)

	@
1
.
1
/usr/include
102
1860
ALDRAM.cpp
ALDRAM.h
Cache.cpp
Cache.h
Config.cpp
Config.h
Controller.cpp
Controller.h
DDR3.cpp
DDR3.h
DDR4.cpp
DDR4.h
DRAM.h
DSARP.cpp
DSARP.h
GDDR5.cpp
GDDR5.h
Gem5Wrapper.cpp
Gem5Wrapper.h
HBM.cpp
HBM.h
LPDDR3.cpp
LPDDR3.h
LPDDR4.cpp
LPDDR4.h
Main.cpp
MemWrapper.cpp
MemWrapper.h
Memory.h
MemoryFactory.cpp
MemoryFactory.h
Processor.cpp
Processor.h
Refresh.cpp
Refresh.h
Request.h
SALP.cpp
SALP.h
Scheduler.h
SpeedyController.h
StatType.cpp
StatType.h
Statistics.h
TLDRAM.cpp
TLDRAM.h
User.h
WideIO.cpp
WideIO.h
WideIO2.cpp
WideIO2.h
common.cpp
common.h
graph.cpp
graph.h
pe.cpp
pe.h
/usr/include/ctype.h
/usr/include/math.h
/usr/include/stdlib.h
/usr/include/alloca.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/math-finite.h
/usr/include/bits/math-vector.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/stdlib-bsearch.h
/usr/include/bits/stdlib-float.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/types.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/sys/types.h
/usr/include/xlocale.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libm-simd-decl-stubs.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/typesizes.h
/usr/include/bits/wordsize.h
/usr/include/gnu/stubs.h
/usr/include/stdc-predef.h
/usr/include/sys/cdefs.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/time.h
/usr/include/bits/byteswap-16.h
/usr/include/bits/select.h
/usr/include/bits/select2.h
/usr/include/bits/sigset.h
/usr/include/bits/time.h
/usr/include/gnu/stubs-32.h
/usr/include/gnu/stubs-64.h
/usr/include/gnu/stubs-x32.h
/usr/include/bits/timex.h
